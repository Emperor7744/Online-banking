(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6891],{41796:()=>{},61117:(e,t,s)=>{"use strict";s.d(t,{default:()=>g,i:()=>f});var a=s(54857),l=s(96541),n=s(63694),i=s(3316),r=s(86287),o=s(15893),c=s(10406),d=s(80612),u=s(43393),m=s(10373),h=s(77184),x=s(85903);let p={create:"Add Environment Variables",edit:"Edit Environment Variables",missing:"Missing Environment Variables"};function f(){let{data:e,mutate:t}=(0,d.Ay)("showEnvModal",null,{fallbackData:!1}),{data:s,mutate:a}=(0,d.Ay)("envModalData",null,{fallbackData:{mode:"create",projectId:"",variables:[{key:"",value:""}]}});return{showEnvModal:e,setShowEnvModal:t,envModalData:s,setEnvModalData:a}}function g(e){var t;let{vercelProjectId:s}=e,{showEnvModal:d,setShowEnvModal:g,envModalData:j}=f(),v=null==j?void 0:j.mode,[b,y]=(0,l.useState)("create"===v?[{key:"",value:""}]:null!==(t=null==j?void 0:j.variables)&&void 0!==t?t:[{key:"",value:""}]),{activeScopeSlug:w}=(0,u.k6)(),{refetchEnvVars:N}=(0,x.iC)(s),[k,C]=(0,l.useState)(!1),S=(e,t,s)=>{let a=[...b];a[e]={...a[e],[t]:s},y(a)},M=async()=>{C(!0),(null==j?void 0:j.projectId)&&((await (0,c.g)({envVars:b,v0ProjectId:j.projectId,scopeSlug:w,autoCreateVercelProject:!1})).success||h.oR.error("Failed to add environment variable"),N(),C(!1),g(!1))};return(0,a.jsx)(i.Modal,{open:d,onOpenChange:()=>{g(!d),y([{key:"",value:""}])},children:(0,a.jsxs)("form",{action:M,children:[(0,a.jsxs)(i.ModalHeader,{children:[(0,a.jsxs)(i.ModalTitle,{className:"flex items-center gap-2 text-xl font-medium",children:["missing"===v&&(0,a.jsx)(n.A,{className:"h-6 w-6 text-amber-600"}),(0,a.jsxs)("span",{children:[" ",v?p[v]:"Add Environment Variables"]})]}),"create"===v&&(0,a.jsx)("p",{className:"text-muted-foreground text-left",children:"Environment variables will be encrypted and stored securely on Vercel."})]}),(0,a.jsxs)(i.ModalContent,{children:["missing"===v&&(0,a.jsx)("p",{className:"text-muted-foreground mb-8 text-[15px]",children:"The functionality of this app will be limited without the following environment variables:"}),(0,a.jsx)("div",{className:"space-y-6",children:b.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:"create"===v?(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,a.jsx)(o.Label,{htmlFor:"key-".concat(t),children:"Key"}),(0,a.jsx)(r.p,{id:"key-".concat(t),value:e.key,onChange:e=>S(t,"key",e.target.value),placeholder:"API_KEY",className:"h-11 uppercase"})]}):(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(o.Label,{htmlFor:"value-".concat(t),children:e.key})})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[v&&"create"!==v?null:(0,a.jsx)(o.Label,{htmlFor:"value-".concat(t),children:"Value"}),(0,a.jsx)(r.p,{id:"value-".concat(t),value:e.value,onChange:e=>S(t,"value",e.target.value),placeholder:"my-api-key",className:"h-11"})]})]},t))})]}),(0,a.jsx)(i.ModalFooter,{className:"border-border bg-muted flex border-t !p-4",children:(0,a.jsx)(m.Q,{size:"sm",pending:k,children:"Save"})})]})})}},80687:(e,t,s)=>{"use strict";s.d(t,{FeedbackDialog:()=>y,f:()=>b});var a=s(54857),l=s(80612),n=s(37622),i=s(60231),r=s(70430),o=s(48531),c=s(50735),d=s(47016),u=s(96541),m=s(77184),h=s(67605);let x=(0,h.createServerReference)("408f837ad067ff6f69f64cf7969b2cf0ee2ca2f030",h.callServer,void 0,h.findSourceMapURL,"sendGeneralFeedback");var p=s(60346),f=s(16617),g=s(3316),j=s(71368),v=s(62841);function b(){let{data:e,mutate:t}=(0,l.Ay)("feedback-dialog-show",null,{fallbackData:!1});return{showFeedbackDialog:e,setFeedbackDialog:t}}function y(){let e=(0,j.k)("feedbackDialog"),{showFeedbackDialog:t,setFeedbackDialog:s}=b(),[l,n]=(0,u.useState)(""),[i,r]=(0,u.useState)(void 0),[o,c]=(0,u.useState)(),d=e=>{e||(n(""),r(void 0),c(void 0)),s(e)};return(0,a.jsxs)(g.Modal,{onOpenChange:d,open:t,children:[(0,a.jsxs)(g.ModalHeader,{children:[(0,a.jsx)(g.ModalTitle,{children:e("title")}),(0,a.jsx)(g.ModalDescription,{children:e("description")})]}),(0,a.jsx)(g.ModalContent,{children:(0,a.jsx)(N,{feedback:l,selectedOption:i,setFeedback:n,setFeedbackDialog:d,setSelectedOption:r,setValidationError:c,validationError:o})})]})}function w(e){let{children:t,selectedOption:s,option:l,handleOptionClick:i}=e;return(0,a.jsx)(f.$,{className:(0,n.cn)("transition-all duration-300",s===l&&"border-gray-900 hover:border-gray-900 focus:border-gray-900 focus-visible:border-gray-900"),onClick:()=>i(l),size:"sm",type:"button",variant:"secondary",children:t})}function N(e){let{feedback:t,setFeedback:s,selectedOption:l,setSelectedOption:u,validationError:h,setValidationError:b,setFeedbackDialog:y}=e,N=(0,j.k)("feedbackDialog"),{messages:k}=(0,v.Pk)(),{user:C}=(0,p.J)(),S=e=>{e&&u(e),b(void 0)},{formRef:M,onKeyDown:I}=(0,d.G)();return(0,a.jsxs)("form",{className:"div flex flex-col gap-4",onSubmit:e=>{if(e.preventDefault(),""===t.trim()){b(N("error.enterFeedback"));return}if(!l){b(N("error.selectEmoji"));return}x({feedback:t,url:location.href,sentiment:l,user:C}),y(!1),(0,m.oR)(N("successToast"))},ref:M,children:[(0,a.jsx)(c.T,{className:"max-h-[60vh] shadow-none",name:"feedback",onChange:e=>s(e.target.value),onKeyDown:I,placeholder:N("yourFeedback"),required:!0,rows:4,value:t}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-start gap-2",children:[(0,a.jsx)(w,{handleOptionClick:S,option:"bad",selectedOption:l,children:(0,a.jsx)(i.A,{className:(0,n.cn)("size-4",{"dark:fill-red-400/80 fill-red-200":"bad"===l})})}),(0,a.jsx)(w,{handleOptionClick:S,option:"neutral",selectedOption:l,children:(0,a.jsx)(r.A,{className:(0,n.cn)("size-4",{"dark:fill-amber-500/70 fill-yellow-200":"neutral"===l})})}),(0,a.jsx)(w,{handleOptionClick:S,option:"good",selectedOption:l,children:(0,a.jsx)(o.A,{className:(0,n.cn)("size-4",{"dark:fill-green-500/60 fill-green-200":"good"===l})})}),(0,a.jsx)("div",{children:h&&(0,a.jsx)("div",{className:"text-sm text-red-700",role:"alert",children:h})})]}),(0,a.jsxs)(g.ModalFooter,{className:"p-0 md:p-0",children:[(0,a.jsx)(g.ModalClose,{asChild:!0,children:(0,a.jsx)(f.$,{size:"sm",type:"button",variant:"secondary",children:N("cancel")})}),(0,a.jsx)(f.$,{size:"sm",type:"submit",children:N("submit")})]})]})]})}},7370:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});var a=s(54857),l=s(37622);function n(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("bg-background flex justify-center h-screen-patched",s),children:t})}},89217:(e,t,s)=>{"use strict";s.d(t,{FullChatOuter:()=>a6});var a=s(54857),l=s(78192),n=s(80687),i=s(90080),r=s(7370),o=s(77184),c=s(96541);let d=(0,c.createContext)(null);function u(e){let{hasSignedIn:t,children:s}=e;return(0,a.jsx)(d.Provider,{value:t,children:s})}var m=s(73927),h=s(75990),x=s(76145),p=s(17406),f=s(37622),g=s(4126),j=s(76236),v=s(57363),b=s(62841),y=s(97682);let w=c.memo(function(e){let{value:t,animate:s,onAnimationComplete:l}=e,{truncatedValue:n,duration:i,delayConstant:r,n:o}=(0,c.useMemo)(()=>{let e=.015,s=.03,a=Math.min(t.length,40);if(.045*a>300){let t=300/a;e=e/.045*t,s=s/.045*t}return{truncatedValue:t.length>40?t.slice(0,40)+"...":t,duration:e,delayConstant:s,n:a}},[t]);return(0,a.jsx)("div",{className:"truncate",children:n.split("").map((e,t)=>(0,a.jsx)(y.P.span,{animate:s?"animate":void 0,"aria-hidden":"true",initial:s?"initial":void 0,onAnimationComplete:()=>{t===o-1&&(null==l||l())},transition:{duration:i,ease:"easeIn",delay:t*r,staggerChildren:r},variants:{initial:{opacity:0,x:-100},animate:{opacity:1,x:0}},children:e},t))})});var N=s(60346),k=s(90761),C=s(95791),S=s(16617),M=s(71368),I=s(51556);function R(e){let{isAuthor:t}=e,s=(0,M.k)("chatOptionsDropdown"),{chatId:l}=(0,b.xz)(),{user:n}=(0,N.J)(),{title:i,isNew:r,authorId:o}=(0,k.tZ)(),{chatPrivacy:c}=(0,k.kM)(),{setUpdateChatTitleDialogForChatId:d}=(0,C.d)(),u=r&&!!i,m=t||(null==n?void 0:n.id)===o;return l&&i?(0,a.jsx)("h1",{className:"flex min-w-0 items-center gap-1.5 text-sm text-gray-900",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.$,{className:"!h-auto flex-1 truncate p-0 text-sm font-normal text-gray-900",name:"Rename Chat",onClick:()=>{m&&l&&d(l)},tooltip:l?s("renameChat"):void 0,variant:"link",children:(0,a.jsx)("div",{"aria-label":i,className:"truncate","data-testid":"chat-title",children:(0,a.jsx)(w,{animate:u,value:i},"".concat(l,"-").concat(u))})}),(0,a.jsx)(I.i,{chatId:l,privacy:c})]}):(0,a.jsx)("div",{className:"max-w-72 truncate","data-testid":"chat-title",children:i})}):(0,a.jsx)("div",{})}var z=s(95159),L=s(83778),A=s(75678),T=s(7394),P=s.n(T),F=s(67401),D=s(68022),E=s(4473),O=s(43706);function U(e){let{messageId:t}=e,{chatId:s}=(0,b.xz)(),l=new URL("/chat/internal/chats",window.location.origin);return s?(l.searchParams.set("chatId",s),l.searchParams.set("messageId",t),(0,a.jsx)(F.N,{external:!0,href:l.toString(),children:(0,a.jsxs)(O._2,{children:[(0,a.jsx)(E.C,{})," View Internal Page"]})})):null}function _(){let{chatId:e}=(0,b.xz)(),t=new URL("/chat/internal/chats",window.location.origin);return e?(t.searchParams.set("chatId",e),(0,a.jsxs)(S.$,{onClick:()=>{window.open(t.href,"_blank")},className:"h-7 rounded-md",size:"sm",tooltip:{side:"bottom",content:"View internal page (AI Team only)"},variant:"ghost",children:[(0,a.jsx)(D.i,{}),(0,a.jsx)("span",{className:"sr-only",children:"View internal page"})]})):null}var B=s(38651),V=s(46569),$=s(16099),H=s(11331),Z=s(79089),K=s(90916),J=s(64993),W=s(72017),q=s(41773),Y=s(82133),G=s(43393),Q=s(54143),X=s(53239),ee=s(15893),et=s(25235),es=s(99751),ea=s(29343),el=s(53317);let en=et.bL,ei=et.l9;et.bm;let er=et.ZL,eo=c.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(et.hJ,{className:(0,el.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80 dark:bg-white/80",s),...l,ref:t})});eo.displayName=et.hJ.displayName;let ec=(0,es.F)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 gap-4 p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 border-b",bottom:"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 border-t",left:"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",right:"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}}),ed=c.forwardRef((e,t)=>{let{side:s="right",className:l,children:n,...i}=e;return(0,a.jsxs)(er,{children:[(0,a.jsx)(eo,{}),(0,a.jsxs)(et.UC,{className:(0,el.cn)(ec({side:s}),l),ref:t,...i,children:[(0,a.jsxs)(et.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute right-4 top-4 z-10 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]}),n]})]})});ed.displayName=et.UC.displayName;let eu=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,el.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})};eu.displayName="SheetHeader";let em=c.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(et.hE,{className:(0,el.cn)("text-foreground text-lg font-semibold leading-none",s),ref:t,...l})});em.displayName=et.hE.displayName;let eh=c.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(et.VY,{className:(0,el.cn)("text-muted-foreground text-sm",s),ref:t,...l})});eh.displayName=et.VY.displayName;var ex=s(80624),ep=s(77700),ef=s(77126),eg=s(80102),ej=s(95360),ev=s(58678),eb=s(28192),ey=s(67160),ew=s(85903),eN=s(98892),ek=s(3316),eC=s(37835),eS=s(10373),eM=s(11380),eI=s(61117),eR=s(65186);function ez(){let{projects:e,selectedProjectId:t}=(0,ej._t)(),{projects:s}=(0,ev.D)(),[l,n]=(0,c.useState)(!1),i=(0,c.useMemo)(()=>e.find(e=>e.projectId===t),[e,t]),r=(0,c.useMemo)(()=>null==s?void 0:s.find(e=>e.id===(null==i?void 0:i.vercelProjectId)),[s,i]);return t?(0,a.jsxs)(en,{children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsx)(S.$,{"aria-label":"Project Settings",className:"size-7 px-1 py-1.5 text-gray-900",size:"sm",variant:"ghost",children:(0,a.jsx)(ep.H,{})})}),(0,a.jsxs)(ed,{className:"pointer-events-auto flex w-screen flex-col gap-0 p-0 sm:max-w-[500px]",onInteractOutside:e=>{l&&e.preventDefault()},side:"right",children:[(0,a.jsxs)(eu,{className:"sticky gap-1 border-b p-4",children:[(0,a.jsx)(em,{className:"text-base",children:"Project Settings"}),(0,a.jsx)(eh,{className:"text-sm text-gray-900",children:"Manage the settings for this project."})]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-7 overflow-y-auto p-4",children:[(0,a.jsx)(eD,{setSaving:n,vercelProject:r}),(0,a.jsx)(e$,{setSaving:n,v0ProjectId:t}),(0,a.jsx)(eH,{setSaving:n,v0ProjectId:t})]})]})]}):null}function eL(e){let{children:t,label:s,onAdd:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex h-7 items-center justify-between",children:[(0,a.jsx)(ee.Label,{className:"text-sm font-medium text-gray-900",children:s}),l&&(0,a.jsx)(S.$,{"aria-label":"Add ".concat(s),className:"text-gray-500",size:"sm",variant:"ghost",onClick:l,children:(0,a.jsx)(J.F,{})})]}),t]})}function eA(e){let{title:t,subtitle:s,children:l,className:n}=e;return(0,a.jsx)(eN.Sv,{className:(0,f.cn)("h-[156px] rounded-md border border-dashed border-gray-300 px-8",n),children:(0,a.jsxs)(eN.HY,{children:[t&&(0,a.jsx)(eN.cz,{className:"text-sm text-gray-500",children:t}),s&&(0,a.jsx)(eN.Ou,{className:"text-sm text-gray-500",children:s}),l]})})}function eT(e){let{className:t,disabled:s,onClick:l,label:n="More Options"}=e;return(0,a.jsxs)(S.$,{className:(0,f.cn)("size-6 text-gray-500",t),size:"sm",variant:"ghost",disabled:s,onClick:l,children:[(0,a.jsx)($.a,{}),(0,a.jsx)("span",{className:"sr-only",children:n})]})}function eP(e){let{children:t,suffix:s}=e;return(0,a.jsxs)("div",{className:"odd:bg-muted flex h-[58px] w-full items-center justify-between gap-2 rounded-lg p-2",children:[t,s]})}function eF(e){let{title:t}=e;return(0,a.jsxs)(eL,{label:t,onAdd:()=>{},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(eP,{suffix:(0,a.jsx)(eT,{disabled:!0}),children:(0,a.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,a.jsx)(eC.E,{className:"h-3 w-40"}),(0,a.jsx)(eC.E,{className:"h-3 w-16"})]})}),(0,a.jsx)(eP,{suffix:(0,a.jsx)(eT,{disabled:!0}),children:(0,a.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,a.jsx)(eC.E,{className:"h-3 w-40"}),(0,a.jsx)(eC.E,{className:"h-3 w-16"})]})})]}),(0,a.jsx)(S.$,{size:"sm",variant:"secondary",disabled:!0,children:"Show More"})]})}function eD(e){let{setSaving:t,vercelProject:s}=e,{isReady:l}=(0,ev.D)(),{selectedProjectId:n}=(0,ej._t)();return l?(0,a.jsxs)(a.Fragment,{children:[s?(0,a.jsx)(eE,{vercelProject:s,setSaving:t}):(0,a.jsx)(eO,{setSaving:t}),(0,a.jsx)(eB,{setSaving:t,vercelProjectId:null==s?void 0:s.id,v0ProjectId:n})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eU,{}),(0,a.jsx)(eF,{title:"Environment Variables"})]})}function eE(e){let{vercelProject:t,setSaving:s}=e,{activeScopeSlug:l,isActiveScopeReady:n}=(0,G.k6)(),[i,r]=(0,c.useTransition)(),{selectedProjectId:d}=(0,ej._t)(),u=(0,c.useCallback)(()=>{d&&n&&(s(!0),r(async()=>{try{let e=await (0,eb.y)({v0ProjectId:d,scopeSlug:l});"error"in e||!e.success?o.oR.error("Failed to unlink project. Please try again."):o.oR.success("Project unlinked successfully")}catch(e){o.oR.error("Failed to unlink project. Please try again.")}finally{r(()=>{s(!1)})}}))},[l,n,d,s]);return(0,a.jsx)(eL,{label:"Vercel Project",children:(0,a.jsxs)("div",{className:(0,f.cn)("flex h-[62px] w-full items-center justify-between rounded-lg border p-3",i&&"opacity-50"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-5 text-gray-900",children:t.name}),(0,a.jsxs)(F.N,{className:"flex items-center gap-0.5 text-[13px] leading-[16px] text-gray-500",external:!0,disabled:i,href:t.url,children:["View on Vercel",(0,a.jsx)(ex.F,{className:"size-3"})]})]}),(0,a.jsxs)(O.rI,{children:[(0,a.jsx)(O.ty,{disabled:i,children:(0,a.jsx)(eT,{className:"size-7",label:"Manage Vercel project connection"})}),(0,a.jsx)(O.SQ,{align:"end",side:"bottom",sideOffset:8,children:(0,a.jsxs)(O.I,{children:[(0,a.jsx)(O._2,{asChild:!0,children:(0,a.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,a.jsx)(ef.k,{}),(0,a.jsx)("span",{children:"View on Vercel"})]})}),(0,a.jsxs)(O._2,{variant:"destructive",disabled:i,onClick:u,children:[(0,a.jsx)(Z.l,{}),(0,a.jsx)("span",{children:"Unlink Vercel Project"})]})]})})]})]})})}function eO(e){let{setSaving:t}=e,{activeScopeSlug:s,isActiveScopeReady:l}=(0,G.k6)(),{selectedProjectId:n,setSelectedProjectId:i}=(0,ej._t)(),{projects:r,isReady:d}=(0,ev.D)(),[u,m]=(0,c.useTransition)(),[h,x]=(0,c.useState)(!1),[p,f]=(0,c.useState)(""),g=(0,c.useMemo)(()=>(null==r?void 0:r.length)&&r.length>0,[r]),j=(null==r?void 0:r.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())))||[],v=(0,c.useCallback)(e=>{i(e.id)},[i]),b=(0,c.useCallback)(e=>{n&&l&&e&&(t(!0),m(async()=>{try{let t=await (0,ey.t)({v0ProjectId:n,vercelProjectId:e.id,scopeSlug:s});"error"in t||!t.success||o.oR.success("Project linked successfully")}catch(e){o.oR.error("Failed to link project. Please try again.")}finally{m(()=>{t(!1)})}}))},[s,l,n,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eL,{label:"Vercel Project",children:(0,a.jsx)(eA,{className:"h-[62px]",children:g?(0,a.jsxs)(O.rI,{children:[(0,a.jsx)(O.ty,{asChild:!0,children:(0,a.jsxs)(S.$,{"aria-label":"Connect a Project",variant:"secondary",size:"sm",disabled:u||!d,children:[(0,a.jsx)(J.F,{}),"Connect a Project"]})}),(0,a.jsx)(O.SQ,{align:"center",className:"w-[calc(100vw-32px)] overflow-y-auto md:max-w-[467px]",side:"bottom",sideOffset:20,children:(0,a.jsx)(ew.e$,{filteredProjects:j,searchQuery:p,setSearchQuery:f,isLoading:!d,selectedProject:void 0,handleLinkProject:b,setShowCreateModal:x})})]}):(0,a.jsxs)(S.$,{"aria-label":"Connect a Project",variant:"secondary",size:"sm",disabled:u||!d,onClick:()=>x(!0),children:[(0,a.jsx)(J.F,{}),"Connect a Project"]})})}),(0,a.jsx)(ew.Dm,{v0ProjectId:n,onClose:()=>x(!1),open:h,onProjectCreated:v})]})}function eU(){return(0,a.jsx)(eL,{label:"Vercel Project",children:(0,a.jsxs)("div",{className:"flex h-[62px] items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-2",children:[(0,a.jsx)(eC.E,{className:"h-3 w-40"}),(0,a.jsx)(eC.E,{className:"h-3 w-16"})]}),(0,a.jsx)(S.$,{className:"relative size-7 text-gray-500",size:"sm",variant:"ghost",disabled:!0,children:(0,a.jsx)($.a,{})})]})})}function e_(e){let{envVar:t,setOpenDetailsModal:s,setSelectedEnvVar:l}=e,[n,i]=(0,c.useState)(!1);return(0,a.jsx)(eP,{suffix:(0,a.jsx)(eT,{onClick:()=>{s(!0),l(t)}}),children:(0,a.jsxs)("div",{className:"flex flex-col items-start gap-0.5 text-[13px] leading-5",children:[(0,a.jsx)("span",{className:"max-w-[200px] truncate font-mono uppercase sm:max-w-[300px]",children:t.key}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[n?(0,a.jsx)("code",{className:"rounded-md bg-gray-200 px-1",children:t.value}):(0,a.jsx)("span",{className:"tracking-widest",children:"••••••••••••••••••"}),(0,a.jsx)(S.$,{variant:"ghost",className:"size-5 text-gray-500",onClick:()=>i(!n),"aria-label":n?"Hide value":"Show value",children:n?(0,a.jsx)(eg.X,{}):(0,a.jsx)(ef.k,{})})]})]})})}function eB(e){let{setSaving:t,vercelProjectId:s,v0ProjectId:l}=e,{activeScopeSlug:n}=(0,G.k6)(),[i,r]=(0,c.useState)(null),[d,u]=(0,c.useState)(!1),{envVars:m,isLoading:h,refetchEnvVars:x}=(0,ew.iC)(s),p=Object.keys(m).length,[f,g]=(0,c.useTransition)(),{setEnvModalData:j,setShowEnvModal:v}=(0,eI.i)(),[b,y]=(0,c.useState)(!1),w=(0,c.useCallback)(()=>{i&&l&&s&&(t(!0),g(async()=>{let e=await (0,eM.b)({envVarId:i.id,v0ProjectId:l,vercelProjectId:s,scopeSlug:n});e.success||(o.oR.error("Failed to delete environment variable: ".concat(i.key.toLocaleUpperCase())),console.error(e.error)),x(),u(!1)}))},[i,l,s,t,n,x]),N=(0,c.useCallback)(()=>{l&&(j({mode:"create",projectId:l}),v(!0))},[j,v,l]),k=(0,c.useMemo)(()=>Object.values(m).sort((e,t)=>{let s=e.updatedAt||e.createdAt;return(t.updatedAt||t.createdAt)-s}).slice(0,b?p:2),[p,m,b]),C=(0,c.useMemo)(()=>p>2,[p]);return h?(0,a.jsx)(eF,{title:"Environment Variables"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eL,{label:"Environment Variables",onAdd:N,children:[0===p?(0,a.jsx)(eA,{title:"No Environment Variables",subtitle:l?"Add environment variables to store sensitive information like API keys and credentials.":"Connect to a Vercel project to use environment variables."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:k.map(e=>(0,a.jsx)(e_,{envVar:e,setOpenDetailsModal:u,setSelectedEnvVar:r},e.id))}),C&&(0,a.jsx)(S.$,{size:"sm",variant:"secondary",onClick:()=>y(!b),children:b?"Show Less":"Show More"})]}),(0,a.jsxs)(ek.Modal,{open:d,onOpenChange:u,children:[(0,a.jsx)(ek.ModalHeader,{children:(0,a.jsx)(ek.ModalTitle,{className:"flex items-center gap-2",children:"Environment Variable Details"})}),(0,a.jsx)(ek.ModalContent,{children:(0,a.jsx)(ew.oL,{envVar:i})}),(0,a.jsx)(ek.ModalFooter,{className:"border-border bg-muted flex border-t !p-4",children:(0,a.jsx)(eS.Q,{size:"sm",pending:f,variant:"destructive",onClick:w,disabled:f,children:"Delete"})})]})]}),(0,a.jsx)(eI.default,{vercelProjectId:s})]})}function eV(e){var t;let{source:s}=e;return(0,a.jsx)(eP,{suffix:(0,a.jsx)(eT,{onClick:()=>{}}),children:(0,a.jsxs)("div",{className:"flex flex-col items-start gap-0.5 leading-5",children:[(0,a.jsx)("span",{className:"max-w-[200px] truncate text-sm font-medium sm:max-w-[300px]",children:s.title}),(0,a.jsx)("span",{className:"inline-flex items-center gap-1 text-[13px] leading-[18px] text-gray-500",children:null===(t=s.metadata)||void 0===t?void 0:t.size})]})})}function e$(e){let{setSaving:t,v0ProjectId:s}=e,{sources:l,isLoading:n}=(0,ej.py)(s),i=(0,c.useMemo)(()=>l.length||0,[l]),[r,o]=(0,c.useState)(!1),d=(0,c.useMemo)(()=>i>2,[i]),u=(0,c.useMemo)(()=>l.slice(0,r?i:2),[l,r,i]);return n?(0,a.jsx)(eF,{title:"Sources"}):(0,a.jsx)(eL,{label:"Sources",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:u.map(e=>(0,a.jsx)(eV,{source:e},e.sourceId))}),d&&(0,a.jsx)(S.$,{size:"sm",variant:"secondary",onClick:()=>o(!r),children:r?"Show Less":"Show More"})]}):(0,a.jsx)(eA,{title:"No Sources",subtitle:"Add files or resources chats in this project should reference when generating output."})})}function eH(e){let{setSaving:t,v0ProjectId:s}=e,l=(0,M.k)("projectInstructions"),{instructions:n,isReady:i}=(0,ej.kL)(s);return s?(0,a.jsx)(eL,{label:"Instructions",children:i?(0,a.jsx)(eR.f,{readOnly:!1,projectId:s,initialInstructions:n,textAreaMinHeight:144,buttonVariant:"secondary"}):(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(eC.E,{className:"h-36 w-full"}),(0,a.jsx)(S.$,{disabled:!0,variant:"secondary",size:"sm",children:l("save")})]})}):null}var eZ=s(30856),eK=s(55703),eJ=s(9028),eW=s(32192),eq=s(57045);function eY(e){let{chatId:t,projectId:s,isAuthor:l,isFavorite:n}=e,{setDeleteDialogForChatId:r}=(0,V.v)(),{setUpdateChatTitleDialogForChatId:o}=(0,C.d)(),c=(0,M.k)("chatOptionsDropdown"),{setData:d}=(0,q.m)();return(0,a.jsxs)(O.rI,{children:[(0,a.jsx)(O.ty,{asChild:!0,children:(0,a.jsxs)(S.$,{size:"sm",className:"size-7 rounded-md",variant:"ghost",children:[(0,a.jsx)($.a,{}),(0,a.jsx)("span",{className:"sr-only",children:c("moreOptions")})]})}),(0,a.jsx)(O.SQ,{align:"end",children:(0,a.jsxs)(O.I,{children:[(0,a.jsx)(i.w,{isAuthor:l}),(0,a.jsx)(O._2,{className:(0,f.cn)("md:hidden",!s&&"hidden"),asChild:!0,children:(0,a.jsxs)(P(),{href:"/chat/projects/".concat(s),children:[(0,a.jsx)(K.z,{}),(0,a.jsx)("span",{children:c("viewProject")})]})}),(0,a.jsxs)(O._2,{onClick:()=>{t&&((0,B.u)("RenameChat",{targetChatId:t}),o(t))},children:[(0,a.jsx)(H.Y,{}),(0,a.jsx)("span",{children:c("renameChat")})]}),t&&(0,a.jsx)(W.$,{chat:{chatId:t,favorite:!!n,updatedAt:(null==n?void 0:n.updatedAt)||null},setChatHistoryData:d}),(0,a.jsxs)(O._2,{onClick:()=>{t&&r(t)},variant:"destructive",children:[(0,a.jsx)(Z.l,{}),(0,a.jsx)("span",{children:c("deleteChat")})]})]})})]})}function eG(e){let{isAuthor:t}=e,{project:s}=(0,k.tZ)(),{chatId:l}=(0,b.xz)(),{activeScope:n,user:i}=(0,G.k6)(),{expectUser:r}=(0,N.J)(),{mi:o}=(0,eZ.D)(),d=(null==i?void 0:i.isAdminMode)||t,{planSlug:u}=(0,Q.N)(!0,null==n?void 0:n.id),m=null==i?void 0:i.isAdminMode,h="v0-level0"!==u||m||(null==i?void 0:i.isVercelian),{reassignPending:x,handleReassignProject:p}=(0,X.Z)(),{data:g}=(0,q.r)(),v=(0,c.useMemo)(()=>null==g?void 0:g.find(e=>e.chatId===l),[g,l]),{reopenLastBlock:y}=(0,eK.e)(),w=(0,j.eu)(),C=(0,eW.$)(),{messages:M,activeForkKey:I}=(0,b.Pk)(),T=(0,c.useMemo)(()=>M.filter(e=>null==I?void 0:I.includes(e.id)).some(e=>{var t;return(0,eq.sY)(null!==(t=e.content)&&void 0!==t?t:"",e.id).length>0}),[M,I]);return(0,a.jsxs)("header",{className:(0,f.cn)("bg-background relative z-10 ml-[54px] mr-4 flex h-16 w-[calc(100%-70px)] shrink-0 items-center justify-between gap-4 px-0 sm:mx-0 sm:h-12 sm:w-full sm:pl-4 sm:pr-2",!r&&"ml-4 w-auto"),children:[(0,a.jsxs)("nav",{className:"flex w-full min-w-0 flex-1 items-center sm:gap-1",children:[!r&&(0,a.jsx)(L.NewChatButton,{className:"mr-2",variant:"logo"}),(0,a.jsxs)("div",{className:"flex min-w-0 items-center gap-1",children:[t&&((null==s?void 0:s.name)||h)&&(0,a.jsxs)("div",{"aria-label":"Breadcrumb",className:"hidden min-w-0 items-center gap-1 text-gray-500 sm:flex",children:[(0,a.jsx)(Y.o,{quickCreate:!0,handleProjectSelect:p,variant:s?"show":void 0,className:"max-w-[140px]",triggerButton:(0,a.jsxs)("button",{disabled:x,className:"flex w-full items-center justify-start gap-1 text-sm text-gray-500 underline-offset-2 transition-all hover:text-gray-900 hover:underline",children:[s?null:(0,a.jsx)(J.F,{className:"size-3 shrink-0"}),(0,a.jsx)("div",{className:"truncate",children:(null==s?void 0:s.name)||(0,a.jsx)("span",{children:"Project"})})]}),disabled:x}),(0,a.jsx)("span",{"aria-hidden":!0,className:"text-gray-500",children:"/"})]}),(0,a.jsx)(R,{isAuthor:t})]})]}),r?d?(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-0.5",children:(null==i?void 0:i.isAdminMode)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"hidden sm:flex",children:(0,a.jsx)(_,{})}),(0,a.jsx)("span",{className:"hidden sm:flex",children:(0,a.jsx)(A.Z,{})})]})}),o&&(0,a.jsx)(ez,{}),(0,a.jsx)(eY,{chatId:l,projectId:null==s?void 0:s.projectId,isAuthor:t,isFavorite:v}),!w&&!C&&T&&(0,a.jsx)(S.$,{variant:"ghost",size:"sm",onClick:()=>y(),title:"Reopen last block",className:"size-7 rounded-md",children:(0,a.jsx)(eJ.U,{className:"h-4 w-4"})}),(0,a.jsx)(L.NewChatButton,{className:"ml-2 inline-flex sm:hidden"})]}):null:(0,a.jsx)(z._,{})]})}var eQ=s(79160),eX=s(34016),e0=s(3281),e1=s(27038),e5=s(8512),e2=s(52338),e6=s(8109);function e4(e){let{className:t,...s}=e,l=(0,M.k)("footer"),{locale:n}=(0,e1.useLocale)(),{expectUser:i}=(0,N.J)(),[r,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=(0,e6.C)();!i&&e&&o(!0)},[i]);let d=(0,c.useMemo)(()=>[{href:"/pricing",title:l("pricing")},{href:"/enterprise",title:l("enterprise")},{href:"/faq",title:l("faq")},{key:"legal",title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e2._s,{children:[(0,a.jsx)(e2.Uz,{className:"block sm:hidden",children:l("legal")}),(0,a.jsxs)(e2.zj,{className:"flex h-fit flex-col gap-2",children:[(0,a.jsx)(S.$,{asChild:!0,variant:"ghost",className:"mt-2 w-full",children:(0,a.jsx)(P(),{href:"/policy",children:l("policy")})}),(0,a.jsx)(S.$,{asChild:!0,variant:"ghost",className:"mb-2 w-full",children:(0,a.jsx)(P(),{href:"/agreement",children:l("agreement")})})]})]}),(0,a.jsxs)(O.rI,{children:[(0,a.jsx)(e5.ty,{className:"hidden sm:block",children:l("legal")}),(0,a.jsxs)(O.SQ,{sideOffset:8,className:"min-w-20 rounded-md p-1",children:[(0,a.jsx)(O._2,{className:"h-6 rounded-[2px] text-xs",asChild:!0,children:(0,a.jsx)(P(),{href:"/policy",children:(0,a.jsx)("span",{children:l("policy")})})}),(0,a.jsx)(O._2,{className:"h-6 rounded-[2px] text-xs",asChild:!0,children:(0,a.jsx)(P(),{href:"/agreement",children:(0,a.jsx)("span",{children:l("agreement")})})})]})]})]})},{href:"https://vercel.com/legal/privacy-policy",title:l("privacy")},{href:"https://discord.gg/4ECCp2V5y9",title:l("discord"),hiddenOnMobile:!0},{href:"https://vercel.com/?utm_source=v0-site&utm_medium=banner&utm_campaign=home",title:(0,a.jsxs)(a.Fragment,{children:["Vercel",(0,a.jsx)("span",{className:"ja"===n?"hidden md:inline":"",children:(0,a.jsx)(D.i,{className:"size-[10px]"})})]})}],[n,l]);return(0,a.jsxs)("footer",{className:(0,f.cn)({"text-xs":"ja"!==n,"text-[11px] tracking-tighter md:text-xs md:tracking-normal":"ja"===n},t,"flex flex-col items-center gap-2"),...s,children:[(0,a.jsxs)("div",{"aria-hidden":!r,className:(0,f.cn)(r?"opacity-100":"opacity-0","text-gray-600 transition-opacity"),children:["By messaging v0, you agree to our"," ",(0,a.jsx)(P(),{className:"underline underline-offset-2",href:"/agreement",children:l("agreement")})," ","and"," ",(0,a.jsx)(P(),{className:"underline underline-offset-2",href:"/policy",children:l("policy")}),"."]}),(0,a.jsx)("nav",{className:"flex h-4 divide-x",children:d.map(e=>{let t=e.href,s=t&&!e.href.startsWith("/"),l=(0,f.cn)("flex items-center gap-1 text-gray-600 transition-colors hover:text-gray-900",{"px-2":"ja"!==n,"px-1 md:px-2":"ja"===n},e.hidden&&"hidden",e.hiddenOnMobile&&"hidden sm:flex");if(!t)return(0,a.jsx)("div",{className:l,children:e.title},e.key);let i=s?"a":P();return(0,a.jsx)(i,{className:l,href:e.href,target:s?"_blank":void 0,children:e.title},e.href)})})]})}var e3=s(48785),e7=s(46948),e8=s(35263),e9=s(66188),te=s(77300),tt=s.n(te);function ts(e){let{className:t}=e;return(0,a.jsxs)("svg",{"aria-hidden":"true",className:t,fill:"none",height:"610",viewBox:"0 0 1283 610",width:"1283",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("radialGradient",{id:"pulseGradient",children:[(0,a.jsx)("stop",{offset:"10%",stopColor:"#58F0D4"}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#58F0D400"})]}),(0,a.jsxs)("linearGradient",{gradientTransform:"rotate(90)",id:"fadeGradient",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#888888"}),(0,a.jsx)("stop",{offset:"50%",stopColor:"white"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#888888"})]}),(0,a.jsx)("mask",{id:"vignette",children:(0,a.jsx)("rect",{fill:"url('#fadeGradient')",height:"610",width:"1283",x:"0",y:"0"})}),(0,a.jsx)("mask",{id:"v-clip",children:(0,a.jsx)("path",{className:tt()["pulse-fade"],d:"M184.5 114.5H2C154.667 262.5 458 556.385 494 591C530 625.615 612.5 613 612.5 541.5V114.5H485.5V406L184.5 114.5Z",stroke:"white",vectorEffect:"non-scaling-stroke"})}),(0,a.jsx)("mask",{id:"o-clip",children:(0,a.jsx)("path",{className:tt()["pulse-fade"],d:"M653.5 114.5H1075L774 410V1C774 1 954.5 1 1075 1C1195.5 1 1282 114.5 1282 207C1282 299.5 1282 495.5 1282 495.5H868.5L1162 207V609.5C1162 609.5 998 609.5 868.5 609.5C739 609.5 653.5 487 653.5 410C653.5 333 653.5 114.5 653.5 114.5Z",stroke:"white",vectorEffect:"non-scaling-stroke"})})]}),(0,a.jsxs)("g",{mask:"url(#vignette)",children:[(0,a.jsx)("g",{mask:"url(#v-clip)",children:(0,a.jsx)("circle",{className:tt().vPath,fill:"url('#pulseGradient')",r:"100"})}),(0,a.jsx)("g",{mask:"url(#o-clip)",children:(0,a.jsx)("circle",{className:tt().oPath,fill:"url('#pulseGradient')",r:"100"})}),(0,a.jsx)("path",{className:tt().dashed,d:"M184.5 114.5H2C154.667 262.5 458 556.385 494 591C530 625.615 612.5 613 612.5 541.5V114.5H485.5V406L184.5 114.5Z",vectorEffect:"non-scaling-stroke"}),(0,a.jsx)("path",{className:tt().dashed,d:"M653.5 114.5H1075L774 410V1C774 1 954.5 1 1075 1C1195.5 1 1282 114.5 1282 207C1282 299.5 1282 495.5 1282 495.5H868.5L1162 207V609.5C1162 609.5 998 609.5 868.5 609.5C739 609.5 653.5 487 653.5 410C653.5 333 653.5 114.5 653.5 114.5Z",vectorEffect:"non-scaling-stroke"})]})]})}var ta=s(46119),tl=s(80612);function tn(e){let{isMobile:t,onSubmit:s,...l}=e,n=(0,M.k)("emptyScreen"),i=(0,e3.Hg)(),[r]=(0,e3.G2)(),{isAllowed:o}=r,{expectUser:d}=(0,N.J)(),{isEmpty:u}=(0,k.tZ)(),{setShowSignInDialog:m}=(0,eQ.AO)(),{submit:h,stopLlmResponse:x}=(0,eX.y)({onSubmit:s}),[p]=(0,ta.dc)(),f=!!((null==p?void 0:p.remaining)!==void 0&&p.remaining<=0),g=(0,e6.C)(),j=(0,c.useCallback)(e=>{m({prompt:"new"===e.action&&e.input||""})},[m]);return(0,a.jsxs)("div",{className:"absolute inset-0 flex select-none items-center justify-center overflow-hidden sm:p-4",...l,children:[(0,a.jsx)("div",{className:"absolute inset-0 left-1/2 z-0 flex size-full max-w-screen-2xl -translate-x-1/2 items-center justify-center",children:(0,a.jsx)(ts,{className:"pointer-events-none -translate-y-32 p-2 md:translate-y-0"})}),(0,a.jsx)(e8.default,{}),(0,a.jsxs)("div",{className:"absolute top-1/2 z-10 flex min-h-[285px] w-full max-w-[49rem] -translate-y-1/2 flex-col items-stretch justify-start px-6 sm:min-h-[270px]",children:[(0,a.jsx)("div",{className:"mb-6 flex flex-col items-center gap-6",children:(0,a.jsx)("h1",{"data-testid":"app-title",className:"font-heading text-pretty text-center text-[29px] font-semibold tracking-tighter text-gray-900 sm:text-[32px] md:text-[46px]",children:n("title")})}),(0,a.jsx)(e9.BW,{className:"relative",isMobile:t,isNewChat:u,isHome:!0,isSignedIn:d,isAnonymous:!!(!d&&g),scrollDownButton:null,stop:x,submit:d||g&&!f?h:j}),(0,a.jsx)("div",{className:"flex h-20 min-h-0 shrink-0 items-center justify-center sm:h-16",children:(0,a.jsx)(c.Suspense,{children:(0,a.jsx)(ti,{show:i&&o||void 0===o})})})]}),(0,a.jsx)(e4,{className:"absolute bottom-4"})]})}function ti(e){let{show:t}=e,s=(0,M.k)("emptyScreen"),l=(0,tl.Ay)("suggestions").data||[];return(0,a.jsx)(e7.N,{mode:"wait",children:t&&l.length?(0,a.jsxs)(y.P.div,{animate:{opacity:1},className:"flex flex-wrap justify-center gap-3",exit:{opacity:0},initial:!1,children:[(0,a.jsx)("h2",{className:"sr-only",children:s("suggestedChatMessages")}),l.map(e=>(0,a.jsx)(tr,{suggestion:e},e))]},"suggestions"):null})}function tr(e){let{suggestion:t}=e,{submit:s}=(0,eX.y)(),{user:l}=(0,N.J)(),{setShowSignInDialog:n}=(0,eQ.AO)(),{selectedProjectId:i}=(0,ej._t)(),[r]=(0,ta.dc)(),o=(null==r?void 0:r.remaining)===0,c=(0,M.k)("suggestions"),d=(0,e6.C)();return o?null:(0,a.jsxs)(S.$,{className:"bg-muted gap-0.5 has-[>svg]:pl-1.5",onClick:async()=>{if(!l&&!d){n({prompt:c("".concat(t,".prompt"))});return}(0,B.u)("SubmitNewUserMessage",{text:c("".concat(t,".prompt")),imageOnly:!1,index:0,projectId:i,anonId:d}),await s({action:"new",input:c("".concat(t,".prompt"))})},rounded:!0,size:"xs",variant:"secondary",children:[(0,a.jsx)("span",{className:"block md:hidden",children:c("".concat(t,".shortText"))}),(0,a.jsx)("span",{className:"hidden md:block",children:c("".concat(t,".longText"))}),(0,a.jsx)(e0.m,{})]})}var to=s(90509);function tc(e){let{className:t,children:s,avatar:l,...n}=e,[i,r]=(0,c.useState)(!1),o=(0,c.useRef)(null);return(0,to.Wr)(o,()=>r(!1),"touchstart"),(0,a.jsx)("div",{className:(0,f.cn)("group w-full gap-2",t),"data-touch-active":i,onTouchStart:()=>r(!0),ref:o,role:"listitem",...n,children:(0,a.jsxs)("div",{className:"relative flex items-start gap-2",children:[n.id?(0,a.jsx)(P(),{className:"flex items-center",href:"#".concat(n.id),children:l}):l,(0,a.jsx)("div",{className:"min-w-0 flex-1 translate-y-[0.5px]",children:s})]})})}var td=s(54608);function tu(e){let{loading:t,darken:s}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,f.cn)("relative size-6 items-center justify-center overflow-visible"),children:[(0,a.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(tm,{className:(0,f.cn)("h-full min-w-[25px] -translate-x-px transition-all duration-500",s&&"darken",t?"opacity-100":"opacity-0")})}),(0,a.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(td.g,{className:(0,f.cn)("h-full min-w-[25px] -translate-x-px text-black transition-opacity duration-500",t?"opacity-0":"opacity-100")})})]})}function tm(e){let{className:t}=e;return(0,a.jsxs)("svg",{className:(0,f.cn)(t,"v0-loader"),fill:"none",height:"18",viewBox:"15.5 41.5 100 41",width:"40",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"v-clip",children:(0,a.jsx)("rect",{height:"98",width:"128",x:"0",y:"46"})})}),(0,a.jsxs)("g",{clipPath:"url(#v-clip)",children:[(0,a.jsx)("path",{className:"bg",d:"M 15 38 C 18.011 41.4115 41.0275 67.4845 48.5 77.3 c 5.9 6.8 5.8 6.7 5.8 -1.6 C 54.3 69.651 54.3 42.8741 54.3 42.8741"}),(0,a.jsx)("path",{className:"fg",d:"M 15 38 C 18.011 41.4115 41.0275 67.4845 48.5 77.3 c 5.9 6.8 5.8 6.7 5.8 -1.6 C 54.3 69.651 54.3 42.8741 54.3 42.8741",id:"v",pathLength:"1"})]}),(0,a.jsx)("path",{className:"bg",d:"M 102.9 48.5 L 75.7 75.2"}),(0,a.jsx)("path",{className:"fg",d:"M 102.9 48.5 L 75.7 75.2",id:"o-slash",pathLength:"1"}),(0,a.jsx)("path",{className:"bg",d:"M73.4653 41.7309L97.3029 41.7309C101.815 41.7309 109.905 46.2887 109.905 54.1283V77.1615"}),(0,a.jsx)("path",{className:"fg",d:"M73.4653 41.7309L97.3029 41.7309C101.815 41.7309 109.905 46.2887 109.905 54.1283V77.1615",id:"o-top",pathLength:"0.99"}),(0,a.jsx)("path",{className:"bg",d:"M104.996 81.8855L81.0314 81.8855C75.5619 81.8855 68.5885 76.5073 68.5885 69.1236L68.5885 46.2209"}),(0,a.jsx)("path",{className:"fg",d:"M104.996 81.8855L81.0314 81.8855C75.5619 81.8855 68.5885 76.5073 68.5885 69.1236L68.5885 46.2209",id:"o-bottom",pathLength:"0.99"})]})}var th=s(60732),tx=s(42616),tp=s(17925),tf=s(79015),tg=s(27223),tj=s(9313),tv=s(96118);function tb(e){let{message:t}=e,s=(0,c.useRef)(null),l=(0,c.useRef)(null),{project:n}=(0,k.tZ)(),i=(0,M.k)("messageCitations"),r=(0,c.useMemo)(()=>JSON.stringify(t.content).includes("footnoteReference"),[t.content]);return"assistant"===t.role&&"context"in t&&t.context&&0!==t.context.length&&r?(0,a.jsxs)("div",{ref:s,children:[!t.streaming&&(0,a.jsxs)("div",{className:"grid gap-1.5",children:[(0,a.jsx)("p",{className:"select-none pl-px text-sm leading-none text-gray-500",children:i("title")}),(0,a.jsx)("div",{className:"no-scrollbar flex w-full -translate-x-1 gap-2 overflow-x-auto p-1 pb-3",children:t.context.map((e,t)=>{let s=new URL(e.url).hostname,i=e.url.includes("vercel-storage")&&void 0!==n;return"ui"===e.type?null:(0,a.jsx)(S.$,{asChild:!0,className:"group/citation flex h-auto w-[210px] flex-col items-start justify-start gap-1 whitespace-normal px-2 py-1.5 text-left text-sm",variant:"secondary",children:(0,a.jsxs)("a",{className:"min-w-0",href:e.url,ref:0===t?l:null,rel:"noopener noreferrer",target:"_blank",title:e.url,children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-1.5 font-medium",children:[i?(0,a.jsx)(tj.h,{size:"xs",color:n.settings.color,icon:(0,tv.KI)(n.settings.icon)}):(0,a.jsx)(tg.o,{className:"shrink-0",knowledgeSource:s}),(0,a.jsx)("div",{className:"truncate",children:i?e.title:s}),(0,a.jsxs)("div",{className:"relative ml-auto flex size-4 shrink-0 items-center justify-center overflow-hidden rounded-full bg-gray-200 text-xs text-gray-500",children:[t+1,(0,a.jsx)("div",{className:"absolute inset-0 flex size-4 shrink-0 items-center justify-center bg-gray-200 text-gray-900 opacity-0 transition-all group-hover/citation:opacity-100 group-focus/citation:opacity-100 group-focus-visible/citation:opacity-100",children:(0,a.jsx)(e0.m,{})})]})]}),(0,a.jsx)("div",{className:"w-full truncate break-all text-xs font-normal text-gray-500",children:n&&i?n.name:(0,a.jsxs)(a.Fragment,{children:[e.title,e.description&&(0,a.jsxs)(a.Fragment,{children:[" - ",e.description]})]})})]})},t)})})]}),(0,a.jsx)(tf.Cy,{citations:t.context.map((e,s)=>({...e,knowledgeSource:new URL(e.url).hostname,index:s+1,messageId:t.id}))})]}):null}var ty=s(35732),tw=s(71857);function tN(e){let{actions:t,message:s,finishReason:l}=e,{user:n}=(0,N.J)(),i=function(e){let t=e.length;if(!t)return null;if(1===t){if(e.includes("delete-message"))return"Please delete your message and try again.";if(e.includes("edit-message"))return"Please edit your message and try again."}let s=2===e.length,a=s&&e.includes("new-chat")&&e.includes("delete-message"),l=s&&e.includes("edit-message")&&e.includes("delete-message"),n=s&&e.includes("delete-message")&&e.includes("retry");return a?"Please start a new chat or delete your message.":l?"Please edit or delete your message and try again.":n?"Please delete or retry your message.":"Please edit, retry or delete your message."}(t);return(0,a.jsxs)("div",{className:"flex h-[34px] flex-1 items-center gap-2 rounded-md bg-red-100 p-2 text-sm text-red-600",children:[(0,a.jsx)(tw.V,{}),s," ",i,(null==n?void 0:n.isAdminMode)&&l?(0,a.jsxs)("p",{className:"font-bold",children:["[ADMIN_ONLY]: ",l]}):null]})}function tk(e){let{className:t}=e,s=(0,M.k)("messages");return(0,a.jsx)("div",{className:(0,f.cn)("animate-shimmer translate-y-px bg-[length:800%_100%] bg-clip-text text-sm text-transparent",t),style:{backgroundImage:"linear-gradient(90deg,rgb(161 161 170) 0%,rgb(161 161 170) 35%,rgb(212 212 216) 50%,rgb(161 161 170) 65%,rgb(161 161 170) 100%)"},children:s("loadingText")})}var tC=s(580),tS=s(43027),tM=s(81580);function tI(){return(0,a.jsx)(tM.Dp,{variants:{hover:{y:-2,x:-1,rotate:-12}},children:(0,a.jsx)(tS.k,{"aria-hidden":!0})})}var tR=s(66117),tz=s(40403);let tL={"input-too-long":{message:"Your message or the text content of your attachment(s) exceeds the maximum length.",actions:["delete-message"]},"invalid-image":{message:"The image(s) attached could not be processed.",actions:["delete-message"]},"large-image":{message:"The image(s) attached exceed the maximum size.",actions:["delete-message"]},"too-many-attachments":{message:"You have reached the limit for total attachments in a single chat.",actions:["new-chat","delete-message"]},"content-filtering":{message:"The response was blocked by the content filtering policy.",actions:["delete-message","edit-message"]},"failed-to-process-image":{message:"Unable to process image.",actions:["delete-message","retry"]},"image-exceeds-dimensions":{message:"The image(s) attached exceed the maximum width and height allowed.",actions:["delete-message"]},overloaded:{message:"We are currently experiencing high traffic. Please try again in a few minutes.",actions:[]},default:{message:"Something went wrong.",actions:["retry","edit-message","delete-message"]}};var tA=s(38293),tT=s(48404),tP=s(5697),tF=s(69756);let tD=(0,c.memo)(function(e){let{forkKeyOptions:t,message:s,className:l}=e,{messages:n}=(0,b.Pk)(),i=(0,b.jo)(),r=(t||[]).findIndex(e=>e&&e.some(e=>e===s.id)),o=(0,j.z6)(),{forkKeyCache:d}=(0,tP.f)(),u=(0,tF.F)(n),m=(0,c.useCallback)(e=>{let a=t[e];if(!a)return;let l=(0,tR.K1)(a),n=l?d[l]:void 0;if(n){let e=new Set(u.current.map(e=>e.id)),t=!0;for(let s of n)e.has(s)||(t=!1);t&&(a=n)}let r=(0,tR.C1)([...u.current],a);o(s.id,r),i({activeForkKey:r,saveLeafMessageId:!0})},[t,i,d,o,s,u]);return!t||t.length<2?null:(0,a.jsxs)("div",{className:(0,f.cn)("flex items-center gap-0.5 text-sm font-medium",l),children:[(0,a.jsx)(S.$,{"aria-label":"Previous message version",className:"disabled:bg-background disabled:border-none",disabled:0===r,onClick:()=>m(r-1),size:"xs",variant:"ghost",children:(0,a.jsx)(tT.M,{})}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:[r+1," / ",t.length]}),(0,a.jsx)(S.$,{"aria-label":"Next message version",className:"disabled:bg-background disabled:border-none",disabled:r===t.length-1,onClick:()=>m(r+1),size:"xs",variant:"ghost",children:(0,a.jsx)(tA.b,{})})]})});var tE=s(34227),tO=s(33744),tU=s(89793),t_=s(41541),tB=s(77170);function tV(e){let{messageId:t}=e,{chatId:s}=(0,b.xz)(),{activeForkKey:l}=(0,b.Pk)(),[n,i]=(0,c.useTransition)(),r=(0,c.useCallback)(()=>{i(async()=>{if(!s){o.oR.error("Chat ID not found.");return}try{let e=null==l?void 0:l.indexOf(t);if(void 0===e||-1===e||!l){o.oR.error("Message not found in the active fork.");return}let a=l.slice(0,e+1),n=await (0,tU.B)({payload:{chatId:s,messageIds:a}});if("error"in n)throw Error(n.error);let i=new Blob([JSON.stringify(n.messages,null,2)],{type:"application/json"}),r=URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download="".concat(s,"-").concat(new Date().toISOString(),".json"),c.click(),URL.revokeObjectURL(r)}catch(e){(0,tB.z)(e)||o.oR.error("Something went wrong. Please try again.")}})},[]);return(0,a.jsxs)(O._2,{onClick:r,disabled:n,children:[(0,a.jsx)(t_.f,{}),"Export Messages"]})}var t$=s(66242),tH=s(12051),tZ=s(11492),tK=s(10889),tJ=s(50735);function tW(){let{data:e,mutate:t}=(0,tl.Ay)("showAdminRetryDialog",null,{fallbackData:null}),{user:s}=(0,N.J)();return{showAdminRetryDialog:(null==s?void 0:s.isAdminMode)?e:null,setAdminRetryDialog:t}}let tq=e=>{let{messageId:t}=e,{setAdminRetryDialog:s}=tW();return(0,a.jsxs)(O._2,{onClick:()=>s(t),children:[(0,a.jsx)(tZ.w,{}),"Edit Response"]})},tY=e=>{let{submit:t}=e,{showAdminRetryDialog:s,setAdminRetryDialog:l}=tW(),[n,i]=(0,c.useState)("");return s?(0,a.jsx)(tK.lG,{open:!!s,onOpenChange:()=>l(null),children:(0,a.jsxs)(tK.Cf,{children:[(0,a.jsx)(tK.c7,{children:(0,a.jsx)(tK.L3,{children:"Retry Message (AI Team Only)"})}),(0,a.jsxs)("form",{onSubmit:e=>{n&&s&&(e.preventDefault(),l(null),t({action:"retry",forceResponse:n,assistantMessageId:s}))},children:[(0,a.jsx)(tJ.T,{value:n,onChange:e=>i(e.target.value),placeholder:"Enter your messsage here..."}),(0,a.jsx)(tK.Es,{children:(0,a.jsx)(S.$,{className:"mt-4",type:"submit",children:"Submit"})})]})]})}):null};function tG(e){let{type:t,botMessage:s,...l}=e,n=(0,M.k)("botMessage"),{activeForkKey:i}=(0,b.Pk)(),r=(0,b.jo)(),{chatId:c,messageId:d,messageText:u,userId:m,promptMessageId:h}=(0,tx.q)({messageId:s.id}),{gm:x}=(0,eZ.D)(),{isLoading:p,canVote:f}=(0,t$.q)();if(p||!f)return null;let g=async()=>{let e=(0,tR.K1)(i);h&&d&&u&&e&&((0,B.u)("SubmitUpvote",{messageId:d,leafMessageId:e,messageText:JSON.stringify({text:u})}),(0,o.oR)(n("successToast")),r(e=>({messages:e.messages.map(e=>"id"in e&&e.id===d?{...e,vote:"upvote"}:e)})),await (0,th.p)({feedback:"",reasons:[],chatId:c,messageId:d,leafMessageId:e,userId:m,type:"upvote",promptMessageId:h,gitMentionsEnabled:x}))};return(0,a.jsx)(S.$,{"aria-label":n("upvoteResponse"),disabled:"upvote"===s.vote,onClick:g,tooltip:n("upvoteResponse"),type:t,...l,children:(0,a.jsx)(tI,{})})}function tQ(e){let{message:t,endChildren:s,isLastMessage:n,isLoading:i,isStreaming:r,forkKeyOptions:d,submit:u}=e,m=(0,M.k)("botMessage"),h=(0,j.oQ)(),x=(0,j.eu)(),{user:p}=(0,N.J)(),{isCopied:g,copyToClipboard:v}=(0,tE.C)({timeout:2e3}),[y]=(0,ta.dc)(),w=(null==y?void 0:y.remaining)===0,{isLoading:k,canVote:C}=(0,t$.q)(),{cf:I}=(0,eZ.D)(),{chatId:R}=(0,b.Pk)(),z="flex";((i||r)&&n||k)&&(z=t.continuingMessageId||k?"invisible":"hidden");let L=(0,c.useId)().replace(/:/g,"");if(i&&n)return null;let{isLlmError:A,errorCategory:T="default"}=(0,tz.c)(t),{message:F,actions:D}=tL[T],E=D.includes("retry"),_=!r&&!i&&Array.isArray(t.content)&&0===t.content.length,V=A||t.content.some(e=>!!Array.isArray(e)&&0===e[0])||_,$=A||_,Z=(0,a.jsxs)("div",{className:(0,f.cn)("flex items-center gap-2",z),children:[A?null:(0,a.jsxs)(S.$,{className:"hover:bg-gray-150 focus:bg-gray-150 focus-visible:bg-gray-150 hover:border-gray-150 focus:border-gray-150 focus-visible:border-gray-150 gap-1 border-gray-100 bg-gray-100 hover:bg-gray-200 focus:bg-gray-200 has-[>svg]:pl-1.5 has-[>svg]:pr-2 [&>svg]:size-3.5",onClick:async()=>{try{var e;let t=null===(e=document.getElementById(L))||void 0===e?void 0:e.querySelector("[data-seg=root]");if(!t)throw Error("Root container not found");let s=new DocumentFragment;t.childNodes.forEach(e=>{s.appendChild(e.cloneNode(!0))});let a=(0,tp.l)(s,t,!1,!1,!1);await v(a),o.oR.success(m("copiedToClipboard"))}catch(e){console.error(e),o.oR.error("Failed to copy message to clipboard")}},size:"xs",variant:"secondary",children:[(0,a.jsx)(tO.U,{isCopied:g}),(0,a.jsx)("span",{className:"hidden sm:inline-block",children:m("copy")})]}),"message"!==t.type&&t.type?null:(0,a.jsxs)(a.Fragment,{children:[!A||E?(0,a.jsxs)(S.$,{"aria-label":m("retryMessage"),className:"author-action gap-1 border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-200 focus:bg-gray-200 focus-visible:border-gray-200 focus-visible:bg-gray-200 has-[>svg]:pl-1.5 has-[>svg]:pr-2 [&>svg]:size-3.5",disabled:i||w,onClick:async()=>{await Promise.all([(null==x?void 0:x.messageId)===t.id?h(!1):null,u({action:"retry",assistantMessageId:t.id}),(0,B.u)("SubmitRetryBotMessage",{messageId:t.id})])},size:"xs",tooltip:w?m("limitReached"):void 0,variant:"secondary",children:[(0,a.jsx)(tC.j,{}),(0,a.jsx)("span",{className:"hidden sm:inline-block",children:m("retry")})]}):null,C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tG,{botMessage:t,className:"gap-1 border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-200 focus:bg-gray-200 focus-visible:border-gray-200 focus-visible:bg-gray-200 has-[>svg]:pl-1 [&>svg]:size-3.5",size:"xs",variant:"secondary"}),(0,a.jsx)(l.HR,{className:"gap-1 border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-200 focus:bg-gray-200 focus-visible:border-gray-200 focus-visible:bg-gray-200 has-[>svg]:px-1 [&>svg]:size-3.5",messageId:t.id,tooltip:m("downvoteResponse"),variant:"message"})]}):null,I&&(0,a.jsx)(S.$,{className:"gap-1 border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-200 focus:bg-gray-200 focus-visible:border-gray-200 focus-visible:bg-gray-200 has-[>svg]:pl-1.5 has-[>svg]:pr-2 [&>svg]:size-3.5",size:"xs",variant:"secondary",tooltip:{side:"top",content:"Submit Corrections (Vercelian only)"},asChild:!0,children:(0,a.jsxs)(P(),{href:"/chat/internal/correct/".concat(R,"/new"),children:[(0,a.jsx)(H.Y,{}),(0,a.jsx)("span",{className:"hidden sm:inline-block",children:"Correct"})]})}),(0,a.jsx)(tD,{forkKeyOptions:d,message:t})]}),(null==p?void 0:p.isAdminMode)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tY,{submit:u}),(0,a.jsxs)(O.rI,{children:[(0,a.jsx)(O.ty,{asChild:!0,className:"max-w-[200px]",children:(0,a.jsxs)(S.$,{className:"gap-1 border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-200 focus:bg-gray-200 focus-visible:border-gray-200 focus-visible:bg-gray-200 has-[>svg]:pl-1.5 has-[>svg]:pr-2 [&>svg]:size-3.5",size:"xs",tooltip:{side:"bottom",content:"View internal (AI Team only)"},variant:"secondary",children:[(0,a.jsx)(tH.F,{})," Internal"]})}),(0,a.jsx)(O.SQ,{align:"start",side:"bottom",children:(0,a.jsxs)(O.I,{children:[(0,a.jsx)(U,{messageId:t.id}),(0,a.jsx)(tV,{messageId:t.id}),(0,a.jsx)(tq,{messageId:t.id})]})})]})]}):null]});return(0,a.jsx)("div",{id:L,children:(0,a.jsx)(tc,{avatar:(0,a.jsx)(tu,{darken:V,loading:n&&(!V||r)}),id:t.id,children:(0,a.jsxs)("div",{className:(0,f.cn)("flex min-w-0 flex-1 flex-col items-stretch gap-6",A&&"gap-4"),children:[n&&(r||i)&&!V?(0,a.jsx)(tk,{}):(0,a.jsx)(ty.P,{message:t,isLastMessage:n}),$?(0,a.jsx)(tN,{actions:D,finishReason:t.finishReason,message:F}):null,s,Z,(0,a.jsx)(tb,{message:t}),(null==p?void 0:p.isAdminMode)?(0,a.jsxs)("div",{className:"flex w-fit gap-2 bg-pink-100 text-xs dark:bg-pink-900",children:[t.usage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Completion Tokens: ",t.usage.completionTokens]}),(0,a.jsxs)("p",{children:["Prompt Tokens: ",t.usage.promptTokens]}),(0,a.jsxs)("p",{children:["Total Tokens: ",t.usage.totalTokens]})]}):null,t.estimatedUsage?(0,a.jsxs)("p",{children:["Token Estimation: ",t.estimatedUsage]}):null,t.modelId?(0,a.jsxs)("p",{children:["Model: ",t.modelId]}):null]}):null]})})})}var tX=s(47016),t0=s(82219),t1=s(15826),t5=s(28638),t2=s(20131);function t6(e){let{isSignedIn:t,disableAttachmentsButton:s,inputFileRef:l,isPromptFormDisabled:n,textAreaRef:i,onInputChange:r}=e,[o,d]=(0,c.useState)(!1),{setShowSignInDialog:u}=(0,eQ.AO)();return t?(0,a.jsx)(S.$,{asChild:!0,className:(0,el.cn)("size-8 hover:bg-gray-100 focus:bg-gray-50 focus-visible:bg-gray-100",(s||n)&&"pointer-events-none bg-gray-100 text-gray-400 ring-0"),disabled:s,size:"sm",tooltip:{content:"Attach Files",hidden:o},variant:"secondary",children:(0,a.jsxs)("label",{"data-id":"prompt-form-image-upload",htmlFor:"fileUpload",children:[(0,a.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:s,id:"fileUpload",multiple:!0,onChange:e=>{var t;r(e),null===(t=i.current)||void 0===t||t.focus()},onClick:()=>d(!0),ref:l,tabIndex:s?-1:0,type:"file"}),(0,a.jsx)(t2.x,{}),(0,a.jsx)("span",{className:"sr-only",children:"Attach Files"})]})}):(0,a.jsxs)(S.$,{className:"size-8 text-gray-500",disabled:s,onClick:()=>{var e;u({prompt:(null===(e=i.current)||void 0===e?void 0:e.value)||""})},size:"sm",tooltip:"Attach Files",variant:"ghost",children:[(0,a.jsx)(t2.x,{}),(0,a.jsx)("span",{className:"sr-only",children:"Attach Files"})]})}function t4(e){let{handleCancel:t,initialText:s,messageId:l,type:n,content:i,initialAttachments:r}=e,{submit:o}=(0,eX.y)(),d=(0,j.oQ)(),{formRef:u,onKeyDown:m}=(0,tX.G)(),h=(0,c.useRef)(null),x=(0,M.k)("editPromptForm");(0,c.useEffect)(()=>{h.current&&(h.current.focus(),h.current.selectionStart=h.current.value.length,h.current.selectionEnd=h.current.value.length)},[]),(0,c.useEffect)(()=>{if(!h.current)return;let e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]);let{blobs:p,uploading:f,localFileInfos:g,isDraggingFile:v,inputFileRef:b,onInputChange:y,removeFile:w}=(0,t5.A)({isSignedIn:!0,dragContainerRef:u,saveToDrafts:!1}),[N,k]=(0,c.useState)(r||[]);return(0,a.jsxs)("form",{className:"@container/form flex w-full flex-1 flex-col gap-3 overflow-hidden",onSubmit:e=>{var a;e.preventDefault();let r=null===(a=h.current)||void 0===a?void 0:a.value;if(!r||""===r.trim())return;let c=r;"refinement"===n&&(c=(0,t1.i_)(i,c)),h.current.value="",d(!1),Promise.all([o({action:"edit",input:c,userMessageId:l,type:n,attachments:[...N,...p]}),(0,B.u)("SubmitEditUserMessage",{messageId:l,oldText:s,newText:c})]),t()},ref:u,children:[(0,a.jsxs)("div",{className:"relative z-10 grid rounded-lg border bg-white",children:[(0,a.jsx)(t0.o,{className:"w-full resize-none rounded-t-lg p-3 text-sm outline-none ring-0",defaultValue:s,id:"chat-edit-textarea",minHeight:96,name:"content",onKeyDown:m,placeholder:x("editYourMessage"),ref:h}),(0,a.jsxs)(e9.q6,{className:"px-3",children:[(0,a.jsx)(t6,{isSignedIn:!0,disableAttachmentsButton:f,inputFileRef:b,isPromptFormDisabled:!1,textAreaRef:h,onInputChange:y}),(0,a.jsx)(e9.wJ,{files:g,removeFile:w,showDropzone:v,existingAttachments:N,removeExistingAttachment:e=>{k(t=>t.filter(t=>t.url!==e))}})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.$,{onClick:t,size:"sm",type:"button",variant:"secondary",children:x("cancel")}),(0,a.jsx)(S.$,{"data-testid":"edit-form-send-button",size:"sm",children:x("submit")})]})})]})}var t3=s(32728),t7=s(40268),t8=s(31005),t9=s(88950),se=s(20788);let st=c.memo(function(e){let{messageAuthorId:t}=e,{user:s}=(0,N.J)(),{authorId:l}=(0,k.tZ)(),n=t||l||(null==s?void 0:s.id);return n?(0,a.jsx)(t9.AvatarUser,{size:"sm",userId:n}):(0,a.jsx)(t9.Avatar,{size:"sm",children:(0,a.jsx)(se.hSU,{})})});var ss=s(61587),sa=s(67605);let sl=(0,sa.createServerReference)("402d3d5249d2fb00e1ceb8ed498e26b3647de522f8",sa.callServer,void 0,sa.findSourceMapURL,"deleteMessage");var sn=s(19763),si=s(12098);function sr(){let{data:e,mutate:t}=(0,tl.Ay)("showDeleteMessageDialog",null,{fallbackData:null});return{showConfirmDelete:e,setConfirmDelete:t}}function so(){let{chatId:e,messages:t,activeForkKey:s,isStreaming:l,isLoading:n}=(0,b.Pk)(),i=(0,b.jo)(),r=(0,j.eu)(),{showConfirmDelete:d,setConfirmDelete:u}=sr(),{setData:h,data:x}=(0,q.m)(),[p,f]=(0,c.useTransition)(),g=(0,j.oQ)(),{stopLlmResponse:v}=(0,eX.y)(),y=(0,m.useRouter)(),w=(0,M.k)("deleteMessageDialog"),N=(0,c.useMemo)(()=>{let e=t.find(e=>"user"===e.role&&e.id===d);if(!e)return null;let s=(0,tR.RA)(t).get(e.parentId||tR.pe)||[],a=s.findIndex(t=>t&&t.some(t=>t===e.id)),l=s[a];return s.length>1?(0,tR.C1)([...t],s[0===a?1:a-1]):e.parentId&&l?l.slice(0,-1):null},[t,d]),k=null!==N?{TITLE:w("deleteMessageTitle"),DESCRIPTION:w("deleteMessageDescription")}:{TITLE:w("deleteChatTitle"),DESCRIPTION:w("deleteChatDescription")};return(0,a.jsxs)(ek.Modal,{onOpenChange:e=>{e||u(null)},open:null!==d,children:[(0,a.jsxs)(ek.ModalHeader,{children:[(0,a.jsx)(ek.ModalTitle,{children:k.TITLE}),(0,a.jsx)(ek.ModalDescription,{children:k.DESCRIPTION})]}),(0,a.jsxs)(ek.ModalFooter,{children:[(0,a.jsx)(ek.ModalClose,{asChild:!0,children:(0,a.jsx)(S.$,{size:"sm",variant:"secondary",children:w("cancel")})}),(0,a.jsx)(S.$,{"data-testid":"confirm-delete-message",disabled:p,onClick:function(){d&&!p&&(u(null),(l||n)&&v(),f(async()=>{let a=x?[...x]:[],l=[...t],n=r?{...r}:null;if(!t.find(e=>"user"===e.role&&e.id===d)){o.oR.error("Message not found. Please try again.");return}try{if((0,B.u)("SubmitDeleteUserMessage",{messageId:d}),null===N)g(!1),h(t=>t.filter(t=>t.chatId!==e)),await (0,si._)({payload:{chatId:e}}),o.oR.success("Messages successfully deleted."),y.push("/chat");else{let s=new Set((0,tR.Ir)(t.map(e=>({...e,messageId:e.id})),d)),a=t.filter(e=>!("user"===e.role&&e.id===d||s.has(e.id)));g(!1),i({messages:a,activeForkKey:N,saveLeafMessageId:!0}),await sl({payload:{messageId:d,chatId:e}}),o.oR.success("Messages successfully deleted.")}u(void 0)}catch(t){let e=(0,tB.z)(t);h(e=>a),i({messages:l,activeForkKey:s}),n&&g(!0,n),e||o.oR.error("Something went wrong. Please try again.")}}))},size:"sm",variant:"destructive",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sn.X,{className:"size-4"}),w("deleting")]}):w("delete")})]})]})}var sc=s(884),sd=s(24415),su=s(85322),sm=s(1242);function sh(e){let{message:t,className:s}=e;return(0,a.jsx)(tc,{avatar:(0,a.jsx)(st,{}),className:s,id:t.id,children:(0,a.jsxs)("details",{children:[(0,a.jsxs)("summary",{className:"inline-flex items-center gap-1 rounded bg-green-600/15 px-1.5 py-0.5 text-sm text-green-800 cursor-pointer",children:[(0,a.jsx)(su.A,{className:"h-3.5 w-3.5"}),"Established connection with local v0 dev server."]}),(0,a.jsx)("div",{className:"p-1",children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap font-mono bg-gray-100 p-2",children:t.content||"Established connection with local v0 dev server."})})]})})}function sx(e){let{message:t,className:s}=e;return(0,a.jsx)(tc,{avatar:(0,a.jsx)(st,{}),className:s,id:t.id,children:(0,a.jsxs)("details",{children:[(0,a.jsxs)("summary",{className:"inline-flex items-center gap-1 rounded bg-black/15 px-1.5 py-0.5 text-sm text-black cursor-pointer",children:[(0,a.jsx)(sm.A,{className:"h-3.5 w-3.5"}),"User has made some changes directly to the local project."]}),(0,a.jsx)("div",{className:"p-1",children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap font-mono bg-gray-100 p-2",children:t.content})})]})})}function sp(e){var t;let{message:s,animateUser:l,forkKeyOptions:n}=e,i=s;"refinement"===i.type&&(i={...i,content:(0,t1.Fb)(i.content)});let r=(0,M.k)("userMessage"),{user:d}=(0,N.J)(),{setConfirmDelete:u}=sr(),[m,h]=c.useState(!1),x=(0,c.useMemo)(()=>(0,sc.Z)([i]),[i]),[p]=(0,ta.dc)(),g=(null==p?void 0:p.remaining)===0;if("forked-block"===i.type)return null;if((0,sd.pm)(i))return(0,a.jsx)(sh,{className:(0,f.cn)(l&&"animate-slideUpAndFade duration-500"),message:i});if((0,sd.pW)(i))return(0,a.jsx)(sx,{className:(0,f.cn)(l&&"animate-slideUpAndFade duration-500"),message:i});let j=""===i.content;return"added-environment-variables"===i.type?(0,a.jsx)(tc,{avatar:(0,a.jsx)(tu,{darken:!0,loading:!1}),id:i.id,children:(0,a.jsx)("div",{className:"flex flex-1 -translate-x-1 flex-col items-stretch",children:(0,a.jsx)(ty.P,{className:"pl-1 prose-p:font-mono prose-p:text-muted-foreground prose-a:text-blue-600 prose-a:no-underline",message:i})})}):(0,a.jsx)(tc,{avatar:(0,a.jsx)(st,{messageAuthorId:i.authorId}),className:(0,f.cn)(l&&"animate-slideUpAndFade duration-500"),id:i.id,children:m?(0,a.jsx)(t4,{handleCancel:()=>h(!1),initialText:null!==(t=i.content)&&void 0!==t?t:"",messageId:i.id,content:s.content||"",type:i.type||"message",initialAttachments:i.attachments}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,f.cn)("flex flex-1 -translate-x-1 flex-col items-stretch",!(0,sd.ZW)(i)&&"gap-2"),children:["refinement"===i.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"ml-1 flex w-min items-center justify-center gap-1.5 whitespace-nowrap rounded-full bg-teal-100 px-2.5 py-1 text-xs font-semibold text-teal-900",children:[(0,a.jsx)("div",{className:"size-2 rotate-45 border-2 border-teal-900"}),(0,t1.Og)(s.content)]}),(0,a.jsxs)("div",{className:"flex items-start justify-start gap-2 pl-4",children:[(0,a.jsx)(t7.S,{className:"size-3 h-6 text-gray-500"}),(0,a.jsx)(ty.P,{className:"",message:i})]})]}):(0,a.jsx)(ty.P,{className:"pl-1",message:i}),(0,a.jsx)(t8.Cj,{attachments:i.attachments,className:(0,f.cn)("px-1 pb-3",!(0,sd.ZW)(i)&&"pt-1")}),(0,a.jsx)("div",{className:(0,f.cn)("pointer-events-none absolute inset-y-0 right-0 z-10"),children:(0,a.jsxs)(ss.Kn,{className:"pointer-events-auto sticky top-3 flex -translate-y-1.5 opacity-0 group-hover:opacity-100 has-[[data-state='delayed-open']]:opacity-100 has-[[data-state='instant-open']]:opacity-100 has-[[data-state=open]]:opacity-100 md:top-5 [[data-touch-active=true]_&]:opacity-100",children:[(0,a.jsx)(ss.rc,{"aria-label":r("editMessage"),className:"author-action",disabled:g,onClick:()=>{h(!0),(0,B.u)("OpenEditUserMessage",{messageId:i.id})},tooltip:g?r("limitReached"):r("editMessage"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(H.Y,{className:"pointer-events-none"})})},i.id),(0,a.jsx)(ss.Sl,{className:"author-action"}),(0,a.jsx)(ss.rc,{"aria-label":r("deleteMessage"),className:"author-action",onClick:()=>{u(i.id),(0,B.u)("OpenDeleteMessage",{messageId:i.id})},tooltip:r("deleteMessage"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(Z.l,{className:"pointer-events-none"})})},i.id+"@delete"),!j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ss.Sl,{className:"author-action"}),(0,a.jsx)(ss.rc,{"aria-label":r("copyMessage"),onClick:()=>navigator.clipboard.writeText(i.content||"").then(()=>o.oR.success(r("copiedToClipboard"))).catch(()=>o.oR.error("Failed to copy message to clipboard")),tooltip:r("copyMessage"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(t3.Q,{className:"pointer-events-none"})})})]})]})})]}),(0,a.jsx)(tD,{className:"pt-2",forkKeyOptions:n,message:i}),(null==d?void 0:d.isAdminMode)&&(0,a.jsxs)("div",{className:"mt-4 w-fit bg-pink-100 text-xs dark:bg-pink-900",children:["Token Estimation: ",x]})]})})}let sf=c.memo(function(e){let{message:t,endChildren:s,isLastMessage:l,isLoading:n,isStreaming:i,animateUser:r,forkKeyOptions:o,submit:c}=e;return"user"===t.role?(0,a.jsx)(sp,{animateUser:l&&r,forkKeyOptions:o,message:t},"user-message-".concat(t.id)):(0,a.jsx)(tQ,{endChildren:s,forkKeyOptions:o,isLastMessage:l,isLoading:n,isStreaming:i,message:t,submit:c},"bot-message-".concat(t.id))});var sg=s(2005);function sj(e){let{animate:t=!0}=e;return(0,a.jsx)(tc,{avatar:(0,a.jsx)(tu,{loading:!0}),className:(0,f.cn)("flex px-4 pb-10 pt-3","duration-500",t&&"animate-slideUpAndFade"),"data-testid":"spinner-message",children:(0,a.jsx)(tk,{})})}var sv=s(26970);function sb(e){let{scrollToBottom:t,hidden:s,className:l,...n}=e,i=(0,M.k)("scrollDownButton"),{showBannerLimit:r,showBannerGeneral:o}=(0,ta.fH)();return(0,a.jsx)("div",{"aria-hidden":s,className:(0,f.cn)("animate-in fade-in slide-in-from-bottom absolute inset-x-0 -top-12 z-10 m-auto flex w-fit items-center justify-center",s&&"animate-out fade-out slide-out-to-bottom fill-mode-forwards pointer-events-none",(r||o)&&"-top-16",l),...n,children:(0,a.jsx)(sv.Tooltip,{content:!s&&(0,a.jsx)(sv.TooltipContent,{side:"top",sideOffset:14,children:i("scrollToBottom")}),children:(0,a.jsx)("button",{className:(0,f.cn)("animate-slowBounce shadow-base bg-background hover:bg-muted flex size-7 items-center justify-center rounded-full text-gray-500 drop-shadow-md",s&&"hidden"),onClick:e=>{e.stopPropagation(),t()},type:"button",children:(0,a.jsx)(se.D3D,{className:"size-5"})})})})}var sy=s(39886),sw=s.n(sy),sN=s(13664);let sk=[];function sC(e){let{isMobile:t,animateUser:s,onSubmit:l}=e,{messages:n,isLoading:i,isStreaming:r,initialStreamPromise:d,activeForkKey:u}=(0,b.Pk)(),{expectUser:x}=(0,N.J)(),{setShowSignInDialog:p}=(0,eQ.AO)(),[v]=(0,ta.dc)(),{canWriteToChat:y}=(0,k.tZ)(),w=!!((null==v?void 0:v.remaining)!==void 0&&v.remaining<=0),C=(0,e6.C)(),S=(0,c.useCallback)(e=>{p({prompt:"new"===e.action&&e.input||""})},[p]),M=i&&!r,I=function(e){let t=(0,c.useRef)(["",null]);return(0,c.useMemo)(()=>{let[s,a]=t.current,l=e.reduce((e,t)=>e+"@"+t.id,"");if(s===l)return a;let n=(0,tR.RA)(e);return t.current=[l,n],n},[e])}(n),R=(0,c.useMemo)(()=>new Map(n.map(e=>[e.id,e])),[n]),z=(0,c.useMemo)(()=>u&&0!==u.length?u[u.length-1].startsWith(eX.t)?u.slice(0,u.length-1).map(e=>R.get(e)):u.map(e=>R.get(e)):[],[u,R]),{scrollDownButton:L,vlistRef:A,smoothScrollToBottom:T,handleScroll:P,containerRef:F}=function(e){let{count:t,pushToBottom:s}=e,l=(0,c.useRef)(null),n=(0,c.useRef)(null),i=(0,c.useRef)(null),{messages:r,hashMessageId:o}=(0,b.Pk)(),d=(0,j.I4)(),u=(0,m.usePathname)(),{setMetadata:h}=(0,k.tZ)(),{chatId:x}=(0,b.xz)(),[p,f]=(0,c.useState)(!1),[g,v]=(0,c.useState)(!0),y=(0,c.useCallback)(e=>{var s;let a=e>=t-1;null===(s=i.current)||void 0===s||s.scrollToIndex(e,{align:a?"end":"start"}),setTimeout(()=>{a&&n.current&&(n.current.scrollTop=n.current.scrollHeight-n.current.clientHeight+1)},0)},[t]),w=(0,c.useRef)(null),N=(0,c.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(w.current===e)return;w.current=e;let s=r.findIndex(t=>t.id===e);-1!==s&&setTimeout(()=>{y(s)},t)},[r,y]),C=(0,c.useCallback)(()=>!!i.current&&i.current.scrollOffset+i.current.viewportSize+20>i.current.scrollSize,[]),S=(0,c.useCallback)(()=>{v(C())},[C]),M=sw()(S,100);(0,c.useEffect)(()=>{let e=e=>{e.preventDefault();let t=window.location.hash.slice(1);t&&N(t)},t=e=>{var t;let s=e.target.closest("a");if(s&&(null===(t=s.getAttribute("href"))||void 0===t?void 0:t.startsWith("#"))){e.preventDefault(),e.stopPropagation();let t=s.getAttribute("href").slice(1);window.history.pushState(null,"","".concat(u,"#").concat(t)),window.scrollTo(0,0),N(t)}},s=l.current;window.addEventListener("hashchange",e),null==s||s.addEventListener("click",t);let a=n.current?new ResizeObserver(M):void 0;return null==a||a.observe(n.current),window.location.hash?N(window.location.hash.slice(1),d?250:0):o&&N(o,0),()=>{window.removeEventListener("hashchange",e),null==s||s.removeEventListener("click",t),null==a||a.disconnect()}},[d,u,N,h,o,M]);let I=(0,c.useCallback)(()=>{y(t-1),setTimeout(()=>{y(t)},150)},[t,y]),R=(0,c.useRef)(!0),z=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(!i.current||!R.current||window.location.hash&&w.current!==window.location.hash)return;let e="".concat(t,"-").concat(x);z.current!==e&&(z.current=e,y(t))},[t,x,y]),(0,c.useEffect)(()=>{var e;s&&(null===(e=i.current)||void 0===e||e.scrollToIndex(t,{align:"end"}))},[t,s]),{containerRef:n,vlistRef:i,smoothScrollToBottom:I,scrollDownButton:(0,a.jsx)(sb,{hidden:g||p,scrollToBottom:()=>{f(!0),y(t-1),f(!1)}}),handleScroll:S}}({count:z.length,pushToBottom:!M&&r}),D=(0,c.useCallback)(()=>{l(),T()},[l,T]),{submit:E,stopLlmResponse:O}=(0,eX.y)({onSubmit:D});!function(e){let{submit:t,initialStreamPromise:s}=e,{prefillOptions:a}=(0,b.Pk)(),l=(0,m.useRouter)(),{setUpgradePromptOpen:n}=(0,h.g)(),i=(0,c.useRef)(!1),r=(0,b.jo)(),{setMetadata:d}=(0,k.tZ)();(0,c.useEffect)(()=>{let e=!1;return(async()=>{if(!s||!a||i.current)return;let n=await s;if(!e){if(i.current=!0,"error"===n.status){let e=Error(n.message);(0,tB.z)(e,l)||o.oR.error("Failed to submit chat. Start a new chat or refresh the page."),r({initialStreamPromise:void 0,messages:[]}),d({isEmpty:!0});return}e||t({action:"new",input:a.query},n)}})(),()=>{e=!0}},[s,a,l,n,t,r,d])}({submit:E,initialStreamPromise:d});let U=(0,c.useMemo)(()=>u?z.map((e,t)=>{let l=e.id===u[0],n=e.id===u[u.length-1];return(0,a.jsx)("div",{className:(0,f.cn)("flex w-full px-4 py-3 empty:hidden [&>div]:w-full",{"pt-2":l,"pb-10":n&&!M}),children:(0,a.jsx)(sf,{animateUser:s&&!d,forkKeyOptions:I.get(e.parentId||tR.pe)||sk,isLastMessage:n,isLoading:i,isStreaming:r,message:e,submit:E},(0,sg.B)(e))},(0,sg.B)(e)+"-container")}):[],[u,z,M,s,d,I,i,r,E]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{"aria-roledescription":"chat messages",className:"relative size-full","data-testid":"chat-messages-container",id:g.cJ,role:"list",style:{contain:"strict"},children:(0,a.jsx)("div",{className:(0,f.cn)("h-full w-full overflow-y-auto transition-opacity duration-150 ease-in"),ref:F,style:{overflowAnchor:"none"},id:g.tu,children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-3xl",children:[(0,a.jsx)(sN.YV,{scrollRef:F,ref:A,onScroll:P,children:U}),M&&(0,a.jsx)(sj,{animate:!d})]})})}),y?(0,a.jsx)(e9.BW,{isMobile:t,isNewChat:!1,isSignedIn:x,isAnonymous:!!(!x&&C),scrollDownButton:L,stop:O,submit:x||C&&!w?E:S}):(0,a.jsx)("div",{className:"sticky inset-x-0 bottom-0",children:L}),(0,a.jsx)(so,{})]})}var sS=s(90229),sM=s(65719);function sI(){let{remote:e}=(0,k.tZ)(),{chatId:t}=(0,b.xz)(),{data:s}=(0,tl.Ay)(e?"/chat/api/chat/remote/heartbeat?cid="+t:null,e=>fetch(e).then(e=>e.text()),{refreshInterval:5e3,fallbackData:"OK"});return e?"OK"!==s?(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 pb-8 pt-12 mx-auto z-20 bg-gradient-to-b from-transparent to-white/50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-yellow-300 text-yellow-800 shadow max-w-3xl",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 select-none",children:[(0,a.jsx)(sM.o,{}),"Local v0 dev server disconnected"]}),(0,a.jsxs)("p",{className:"text-sm mt-2",children:[(0,a.jsx)("span",{className:"select-none",children:"This chat requires your local v0 dev server running. Please run this command in your repository to reconnect:"}),(0,a.jsxs)("code",{className:"block mt-2 bg-zinc-50/40 px-2 py-1.5 rounded-md text-sm",children:["v0-dev --chat=",t]})]})]})}):s?null:(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 pb-8 pt-12 mx-auto z-20 bg-gradient-to-b from-transparent to-white/50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"p-4 rounded-lg bg-gray-150 text-gray-800 max-w-3xl",children:(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 select-none",children:[(0,a.jsx)(sS.y,{className:"w-4 h-4"}),"Connecting to local v0 dev server..."]})})}):null}var sR=s(46159),sz=s(22284),sL=s(13534),sA=s(72425),sT=s(74874),sP=s(50221),sF=s(54139);let sD=[{prompt:"Please recreate the UI shown in the attached screenshot as accurately as possible.",title:"cloneScreenshot",icon:(0,a.jsx)(sT.i,{}),color:"text-amber-600"},{prompt:"Please recreate the UI shown in the attached Figma frame as accurately as possible.",title:"importFromFigma",icon:(0,a.jsx)(function(e){let{className:t}=e;return(0,a.jsxs)("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_1140_34766)",children:[(0,a.jsx)("path",{d:"M5.93103 3.40295L7.99999 1.33398L10.069 3.40295L7.99999 5.47191L5.93103 3.40295Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10.5287 8.0006L12.5976 5.93164L14.6666 8.0006L12.5976 10.0696L10.5287 8.0006Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M5.93103 12.5983L7.99999 10.5293L10.069 12.5983L7.99999 14.6672L5.93103 12.5983Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M1.33337 8.0006L3.40234 5.93164L5.4713 8.0006L3.40234 10.0696L1.33337 8.0006Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1140_34766",children:(0,a.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})},{}),color:"text-purple-600"},{prompt:"Create a modern, responsive landing page for a fictional SaaS company. The landing page should include the following sections:\n\n- A header with the company logo, navigation links, and a call-to-action button.\n- A hero section with a catchy headline, brief description, and a prominent call-to-action.\n- A features section highlighting 3–4 key features of StreamLine.\n- A testimonials section with quotes from satisfied customers.\n- A pricing section with different plan options.\n- A final call-to-action section to encourage sign-ups.\n- A footer with important links and social media icons.",title:"landingPage",icon:(0,a.jsx)(sF.P,{}),color:"text-red-600"},{prompt:'Create a modern, minimalist newsletter signup form for a fictional brand.\n\nThe signup form should include the following elements:\n\n- A centered card with subtle shadow and rounded corners.\n- A white card on a subtle purple gradient backdrop for a clean, modern look.\n- A logo or brand mark displayed at the top.\n- A welcoming headline, e.g., "Subscribe to My Newsletter," and a brief subheading explaining the value proposition.\n- Social sign-up options with recognizable icons.\n- An email input field and a prominent call-to-action button (e.g., purple or indigo).\n- Additional links below the form for terms, privacy, or help.\nA footer with trust indicators, such as "We respect your privacy."',title:"signUpForm",icon:(0,a.jsx)(sP.R,{}),color:"text-teal-600"},{prompt:"Implement a function to calculate the factorial of a given number using recursion.",title:"calculateFactorial",icon:(0,a.jsx)(sA.t,{}),color:"text-blue-600"}];function sE(e){let{isMobile:t,onSubmit:s,children:l,...n}=e,i=(0,M.k)("emptyScreen"),r=(0,e3.Hg)(),[o]=(0,e3.G2)(),{isAllowed:d}=o,{expectUser:u}=(0,N.J)(),{isEmpty:m}=(0,k.tZ)(),{setShowSignInDialog:h}=(0,eQ.AO)(),{submit:x,stopLlmResponse:p}=(0,eX.y)({onSubmit:s}),[f]=(0,ta.dc)(),g=!!((null==f?void 0:f.remaining)!==void 0&&f.remaining<=0),j=(0,e6.C)(),[v,b]=(0,c.useState)(!1),y=(0,c.useCallback)(e=>{h({prompt:"new"===e.action&&e.input||""})},[h]);return(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-8",...n,children:[(0,a.jsx)(e8.default,{}),(0,a.jsxs)("div",{className:"z-0 flex w-full flex-1 flex-col gap-12 overflow-auto px-3",children:[(0,a.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 pt-32 lg:pt-48",children:[(0,a.jsx)("h1",{"data-testid":"app-title",className:"font-heading text-pretty text-center text-[29px] font-semibold tracking-tighter text-gray-900 sm:text-[32px] md:text-[46px]",children:i("title")}),(0,a.jsx)(e9.BW,{className:"relative mx-auto w-full max-w-[49rem]",isMobile:t,isNewChat:m,isHome:!0,isSignedIn:u,isAnonymous:!!(!u&&j),scrollDownButton:null,stop:p,submit:u||j&&!g?x:y,isTemplateLoading:v}),(0,a.jsx)("div",{className:"flex min-h-0 shrink-0 items-center justify-center",children:(0,a.jsx)(sO,{show:r&&d||void 0===d,setIsTemplateLoading:b})})]}),(0,a.jsx)("div",{className:"mx-auto flex w-full max-w-[989px] flex-1 flex-col gap-4",children:l}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(e4,{})})]})]})}function sO(e){let{show:t,setIsTemplateLoading:s}=e,l=(0,M.k)("emptyScreen"),n=(0,sR.al)(),[i,r]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{s(i)},[i,s]),(0,a.jsx)(e7.N,{mode:"wait",children:t&&sD.length?(0,a.jsxs)(y.P.div,{animate:{opacity:1},className:"flex max-w-[1000px] flex-wrap justify-center gap-3",exit:{opacity:0},initial:!1,role:"list",children:[(0,a.jsx)("h2",{className:"sr-only",children:l("suggestedChatMessages")}),(0,a.jsx)(sU,{suggestion:sD[0],isAnyLoading:i,setIsAnyLoading:r,setIsTemplateLoading:s}),(0,a.jsx)(sU,{suggestion:sD[1],isAnyLoading:i,setIsAnyLoading:r,setIsTemplateLoading:s}),!n&&(0,a.jsx)(sU,{suggestion:sD[2],isAnyLoading:i,setIsAnyLoading:r,setIsTemplateLoading:s}),(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:[n&&(0,a.jsx)(sU,{suggestion:sD[2],isAnyLoading:i,setIsAnyLoading:r,setIsTemplateLoading:s}),(0,a.jsx)(sU,{suggestion:sD[3],isAnyLoading:i,setIsAnyLoading:r,setIsTemplateLoading:s}),!n&&(0,a.jsx)(sU,{suggestion:sD[4],isAnyLoading:i,setIsAnyLoading:r,setIsTemplateLoading:s})]})]},"suggestions"):null})}function sU(e){let{suggestion:t,isAnyLoading:s,setIsAnyLoading:l,setIsTemplateLoading:n}=e,i=(0,M.k)("emptyScreen"),{submit:r}=(0,eX.y)(),{user:o}=(0,N.J)(),{setShowSignInDialog:d}=(0,eQ.AO)(),{setUpgradePromptOpen:u}=(0,h.g)(),{selectedProjectId:m}=(0,ej._t)(),[x]=(0,ta.dc)(),p=(null==x?void 0:x.remaining)===0,f=(0,e6.C)(),g=c.useRef(null),{setImportFigmaModalOpen:j}=(0,sz.C)(),{handleFigmaUrl:v,isFigmaUrl:b,getNodeContext:y}=(0,sL.q)(g),[w,k]=(0,c.useState)(!1),{uploading:C,onInputChange:I,uploadFiles:R}=(0,t5.A)({isSignedIn:!!o,onFinish:()=>{k(!1),l(!1),n(!1)},onUploadStart:()=>{k(!0),l(!0),n(!0)},onSuccess:async e=>{(0,B.u)("SubmitNewUserMessage",{text:t.prompt,imageOnly:!1,index:0,projectId:m,anonId:f,suggestion:t.title}),await r({action:"new",input:t.prompt,attachments:e})},disableDrag:!0,disablePaste:!0}),z=async()=>{if(!o&&!f){d({prompt:t.prompt});return}if(p){u(!0);return}if("cloneScreenshot"===t.title){var e;if(!o){d({prompt:!1,customMessage:"To upload screenshots to your chat, create a Vercel account or log into an existing one."});return}null===(e=g.current)||void 0===e||e.click();return}if("importFromFigma"===t.title){if(!o){d({prompt:!1,customMessage:"To import from Figma, create a Vercel account or log into an existing one."});return}(0,B.u)("FigmaModalOpen",{source:"url"}),j({open:!0,onImport:async e=>{let[t,s]=await Promise.all([v(e),y(e)]);if(t.success){let{base64:e,originalUrl:s,fileName:a}=t.data,l=a.replace(/[^a-zA-Z0-9.]/g,"_"),n=e.split(",")[1],i=window.atob(n),r=new Uint8Array(i.length);for(let e=0;e<i.length;e++)r[e]=i.charCodeAt(e);let o=new File([new Blob([r],{type:"image/png"})],"".concat(l,".png"),{type:"image/png"});o.isFigmaFile=!0,o.figmaUrl=s,o.v0Type="figma",await R([o])}}});return}(0,B.u)("SubmitNewUserMessage",{text:t.prompt,imageOnly:!1,index:0,projectId:m,anonId:f,suggestion:t.title}),await r({action:"new",input:t.prompt})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(S.$,{variant:"secondary",size:"sm",onClick:z,className:"rounded-md pl-[8px] pr-[10px] text-gray-600 hover:text-gray-900",disabled:w||C||s,"aria-label":i("suggestions.".concat(t.title)),children:[(0,a.jsx)("span",{className:w||C||s?"text-gray-500":t.color,children:(w||C)&&("cloneScreenshot"===t.title||"importFromFigma"===t.title)?(0,a.jsx)(sS.y,{size:16}):t.icon}),i("suggestions.".concat(t.title))]}),(0,a.jsx)("input",{ref:g,type:"file",accept:"image/*",className:"sr-only",onChange:e=>{I(e)},disabled:w||C||s,tabIndex:-1,"aria-hidden":"true"})]})}function s_(e){let{title:t}=e;return"string"==typeof t&&t.length>0?(0,a.jsx)("title",{children:"".concat(t," - v0 by Vercel")}):null}function sB(e){let{isMobile:t,isAuthor:s,templates:l}=e,{isEmpty:n,title:i}=(0,k.tZ)(),[r,o]=(0,c.useState)(!1),d=(0,c.useCallback)(()=>{o(!0),setTimeout(()=>o(!1),1e3)},[]);return n&&l?(0,a.jsx)(sE,{isMobile:t,onSubmit:d,children:l}):n?(0,a.jsx)(tn,{isMobile:t,onSubmit:d}):(0,a.jsxs)("div",{className:(0,v.A)("relative flex h-full min-w-0 flex-1 flex-col",!s&&"[&_.author-action]:hidden"),"data-testid":"full-chat",children:[(0,a.jsx)(s_,{title:i}),(0,a.jsx)(eG,{isAuthor:s}),(0,a.jsx)(sC,{animateUser:r,isMobile:t,onSubmit:d}),(0,a.jsx)(sI,{})]})}var sV=s(25388),s$=s(72380),sH=s(83825),sZ=s(12550),sK=s(19296),sJ=s(39234),sW=s(12350),sq=s(16607),sY=s(42977),sG=s(60869),sQ=s(47037),sX=s(18441),s0=s(94933),s1=s(48587),s5=s(67964),s2=s(94696),s6=s(39112),s4=s(8594),s3=s(38464);let s7=(0,sa.createServerReference)("40a69df42c10d8f06cde7d74c7f6b4ae266e24da56",sa.callServer,void 0,sa.findSourceMapURL,"updateChatShareStatus");var s8=s(9841);let s9={Public:"public",Private:"private"};function ae(e){let{shareStatus:t,chatId:s}=e,l=(0,M.k)("shareStatusPicker"),[n,r]=(0,c.useTransition)(),{chatId:d}=(0,b.xz)(),{setChatPrivacy:u}=(0,k.kM)(),{revalidate:m}=(0,q.m)(),{setShareDialog:h,showShareDialog:x}=(0,i.B)(),p=(0,c.useCallback)(e=>{s===d&&u(e===s9.Public?"public":"private"),"object"==typeof x&&h({chatId:s,privacy:e===s9.Public?"public":"private"})},[s,d,x,u,h]),f=()=>{let e=t===s9.Public?s9.Private:s9.Public;p(e),e===s9.Public&&(0,B.u)("ShareChat",{targetChatId:s}),r(async()=>{let e=await s7({chatId:s,shareable:t!==s9.Public});m(),e&&(o.oR.error(e.error),p(t))})};return(0,a.jsxs)("div",{className:"group flex w-full items-center justify-between rounded-lg border",children:[(0,a.jsxs)("button",{className:"flex flex-1 items-center justify-start gap-3 p-2",onClick:()=>{var e;n||null===(e=document.getElementById("share-switch"))||void 0===e||e.click()},children:[(0,a.jsx)("div",{className:"flex h-[44px] w-[44px] items-center justify-center rounded-md bg-gray-100",children:(0,a.jsx)(sW.q,{className:"text-foreground"})}),(0,a.jsxs)("div",{className:"pointer-events-none flex flex-1 flex-col text-start",children:[(0,a.jsx)("label",{className:"text-foreground text-sm font-medium",htmlFor:"share-switch",children:l("publicWithLink")}),(0,a.jsx)("label",{className:"text-sm text-gray-500",htmlFor:"share-switch",children:l("anyoneWithLinkCanView")})]})]}),(0,a.jsx)("div",{className:"mr-3 flex items-center gap-1",children:(0,a.jsx)(s8.Switch,{checked:t===s9.Public,disabled:n,id:"share-switch",onCheckedChange:e=>{n||f()}})})]})}var at=s(86287);let as=(0,sa.createServerReference)("4022942fc7894d2c36191bdf9aa58928ec04b297b9",sa.callServer,void 0,sa.findSourceMapURL,"assignSubdomain");function aa(){let{chatId:e}=(0,b.xz)(),{data:t,mutate:s}=(0,tl.Ay)(["blocks-subdomains",e],{fallbackData:new Map});return{getBlockSubdomains:(0,c.useCallback)(e=>{var s;return null!==(s=null==t?void 0:t.get(e))&&void 0!==s?s:null},[t]),setBlockSubdomain:(0,c.useCallback)((e,a)=>{s(new Map(null==t?void 0:t.set(e,a)))},[t,s])}}var al=s(59179),an=s(18173),ai=s(96737);let ar=(0,sa.createServerReference)("40d7b72d1f08b35926134f1f81b0d7955cde5d7f42",sa.callServer,void 0,sa.findSourceMapURL,"updateBlockBrandingStatus");var ao=s(10627),ac=s(70777);function ad(e){return(null==e?void 0:e.type)==="react-project"||(null==e?void 0:e.type)==="react"||(null==e?void 0:e.type)==="v0"||(null==e?void 0:e.type)==="tsx"}var au=s(85035),am=s(44658),ah=s(56720),ax=s(92866);let ap=(0,sa.createServerReference)("60e02bf7313db385a2d2805f846cd942c546879ceb",sa.callServer,void 0,sa.findSourceMapURL,"createTemplateAction");var af=s(67665),ag=s(47747);function aj(){let{data:e,mutate:t}=(0,tl.Ay)("shareBlockPopoverOpen",null,{fallbackData:!1});return{shareBlockPopoverOpen:e,setShareBlockPopoverOpen:t}}function av(e){let{isAuthor:t,isDrawer:s,activeBlock:l}=e,{chatPrivacy:n}=(0,k.kM)(),{chatId:i}=(0,b.xz)(),{title:r}=(0,k.tZ)(),d=(0,c.useRef)(null),u=(0,ao.LX)(null==l?void 0:l.id),m="private"!==n,{setTemplateCreatedDialogOpen:h}=(0,ax.qn)(),{activeScopeSlug:x}=(0,G.k6)(),p=(0,j.y6)(),{setTemplateCreatedInfo:g}=(0,ax._d)(),{setShareBlockPopoverOpen:v}=aj(),{ts:y}=(0,eZ.D)(),w=new URLSearchParams;w.set("b",(null==l?void 0:l.id)||""),"code"===u&&w.set("p","0");let[N,C]=(0,c.useTransition)();if(!i)return null;let M="".concat(window.location.origin,"/chat/").concat((0,ag.D)(i,r),"?").concat(w.toString());return y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ek.ModalContent,{className:"flex flex-col gap-3",children:[t?(0,a.jsx)(ah.f,{privacy:n,chatId:i,variant:"block"}):null,m&&l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s4.o,{className:(0,f.cn)("transition-all"),link:M,ref:d}),(0,a.jsx)(au.$,{})]}):null]}),t&&(null==l?void 0:l.id)?(0,a.jsxs)("div",{className:"bg-muted border-alpha-400 flex w-full items-center justify-end gap-2 border-t p-4",children:["react-project"===l.type&&(0,a.jsx)("div",{className:"mr-auto flex items-center gap-2",children:l.templateVersionId?(0,a.jsx)(S.$,{variant:"secondary",size:"sm",asChild:!0,children:(0,a.jsxs)(P(),{href:"".concat(window.location.origin,"/chat/t/").concat((0,ag.D)(l.templateVersionId,l.meta.project||l.meta.title)),target:"_blank",children:[(0,a.jsx)(s2.Kv,{}),(0,a.jsx)("span",{children:"View Template"}),(0,a.jsx)(am.E,{size:"sm",variant:"teal",children:"New"})]})}):(0,a.jsxs)(eS.Q,{variant:"secondary",size:"sm",spinnerSide:"right",pending:N,onClick:()=>C(async()=>{let e={blockId:l.id,title:(0,af.De)(l.meta.project||"v0 Template"),description:"A template for v0.",publishedToCommunity:!1,imageUrl:void 0},t=await ap(e,x);if(t.error){o.oR.error(t.error);return}p({...l,templateCanonId:t.templateId,templateVersionId:t.templateVersionId}),await g({title:e.title,description:e.description,imageUrl:t.imageUrl}),v(!1),h(!0)}),children:[(0,a.jsx)(s2.Kv,{}),(0,a.jsx)("span",{children:"Share as Template"}),N?null:(0,a.jsx)(am.E,{size:"sm",variant:"teal",children:"New"})]})}),s?(0,a.jsx)(aw,{activeBlockId:l.id,isDrawer:s,link:M,title:l.meta.project||"this block"}):(0,a.jsx)(S.$,{size:"sm",onClick:()=>{o.oR.promise(navigator.clipboard.writeText(M),{error:"Failed to copy link",success:"Link copied"})},children:"Copy Link"})]}):null]}):(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-3 p-4",children:[t?(0,a.jsx)(ae,{chatId:i,shareStatus:"public"===n?s9.Public:s9.Private}):null,m&&l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s4.o,{className:(0,f.cn)("transition-all"),link:M,ref:d}),(0,a.jsx)(au.$,{}),(0,a.jsx)(aw,{activeBlockId:l.id,isDrawer:s,link:M,title:l.meta.project||"this block"})]}):null]})}function ab(e){let{published:t,activeBlock:s,overrideMap:l,editedDomain:n,setEditedDomain:i,minimal:r,canDeployBlock:d,setActiveTab:u}=e,m=(0,M.k)("shareBlockPopover"),{chatPrivacy:h}=(0,k.kM)(),{activeScope:x}=(0,G.k6)(),{planSlug:p}=(0,Q.N)(!0,null==x?void 0:x.id),{user:g}=(0,N.J)(),j="v0-level0"===p&&!(null==g?void 0:g.isAdminMode)&&!(null==g?void 0:g.isVercelian),[v,y]=(0,c.useTransition)(),{setBlockShared:w,updateBlockInSharedMap:C}=(0,s3.L)(),{getBlockSubdomains:I,setBlockSubdomain:R}=aa(),{setBrandedBlock:z,isPending:L,getBrandedBlocks:A}=function(){let{chatId:e}=(0,b.xz)(),{activeScopeSlug:t}=(0,G.k6)(),{data:s,mutate:a}=(0,tl.Ay)(["blocks-with-branding",e],{fallbackData:new Map}),l=(0,c.useCallback)(e=>{var t;return null===(t=null==s?void 0:s.get(e))||void 0===t||t},[s]),[n,i]=(0,c.useTransition)();return{getBrandedBlocks:l,setBrandedBlock:(0,c.useCallback)((e,l)=>{i(()=>{try{ar({blockId:e,removeBranding:!l,scopeSlug:t}),a(new Map(null==s?void 0:s.set(e,l)))}catch(e){(0,o.oR)("Failed to update block publish status")}})},[t,s,a]),isPending:n}}(),{getUnlistedBlocks:T,setBlockAsUnlisted:P,isPending:E}=(0,ac._)(),O=(0,c.useMemo)(()=>s?I(s.id):null,[s,I]),U=(0,c.useMemo)(()=>!!s&&!A(s.id),[s,A]),_=(0,c.useMemo)(()=>!!s&&T(s.id),[s,T]),V=(0,c.useMemo)(()=>{if(!s)return"no-active-block";let e=O||s.id;return"https://".concat(e,".v0.build/")},[s,O]),[$]=(0,to.Q3)(n,1e3),H=null!==n,{data:Z,isLoading:K,isValidating:J}=(0,tl.Ay)(["block:is-valid-subdomain",$],async()=>{if(!$)return!1;let e=new URLSearchParams;e.set("query",$.toLowerCase());let t=await fetch("/chat/api/subdomains/validate?".concat(e.toString()));return!!t.ok&&await t.json()},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),W=K||J||v||!s||!Z||!Z.isValid||!$||$===(O||s.id),q=(0,c.useCallback)(()=>{W||y(async()=>{let e=Z&&Z.isValid?Z.ownedByBlockId:null;try{(0,B.u)("SubmitAssignSubdomain",{blockId:s.id,subdomain:$});let t=await as({payload:{blockId:s.id,subdomain:$.toLowerCase()}});if(t&&"error"in t)throw Error(t.error);e&&(R(e,null),C(e,!1)),i(null),R(s.id,$.toLowerCase()),o.oR.success(m("domainAssigned"))}catch(e){(0,tB.z)(e)||o.oR.error("Something went wrong. Please try again.")}})},[s,$,y,W,R,C,Z,i,m]),Y=(0,c.useRef)(null),{nl:X}=(0,eZ.D)(),ee=(0,c.useCallback)(e=>{if(s){if(w(s.id,e),e){(0,B.u)("PublishBlock"),P(s.id,!1);return}R(s.id,null)}},[s,w,R,P]),et=(0,c.useCallback)(()=>{var e;t||null===(e=Y.current)||void 0===e||e.click(),t&&d&&(null==u||u("share")),ee(!t)},[t,d,u,ee]),es=(0,c.useRef)(null),ea=(0,a.jsx)("div",{className:"h-8 max-h-full pl-0.5",children:(0,a.jsx)("div",{className:"flex h-full items-center rounded-r-lg bg-gray-100 px-2 text-sm text-gray-500",children:".v0.build"})}),el=s&&t?(0,a.jsx)(at.p,{autoCapitalize:"off",className:(0,f.cn)("disabled:bg-background flex-1"),name:"subdomain",onChange:e=>{i(e.target.value||"")},placeholder:m("enterCustomDomain"),ref:es,size:"sm",suffix:ea,value:n||""}):null,en=t?(0,a.jsx)("div",{className:(0,f.cn)("flex items-center justify-end gap-2",r?"":"bg-muted border-t p-3"),children:H?(0,a.jsxs)(a.Fragment,{children:[r?null:(0,a.jsx)(S.$,{onClick:()=>i(null),size:"sm",type:"button",variant:"secondary",children:m("cancel")}),(0,a.jsxs)(S.$,{disabled:W,onClick:q,size:"sm",type:"submit",children:[m("saveDomain"),v?(0,a.jsx)(sS.y,{className:"text-foreground",size:16}):null]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.$,{onClick:et,size:"sm",type:"button",variant:"secondary",children:m("unpublish")}),(0,a.jsx)(S.$,{asChild:!0,size:"sm",children:(0,a.jsxs)(F.N,{external:!0,href:V,children:[m("visitSite"),(0,a.jsx)(D.i,{})]})})]})}):null,ei=(0,a.jsx)(S.$,{className:"w-full gap-2",size:"sm",type:"submit",children:m("confirmAndPublish")}),er=K||J||n!==$?(0,a.jsx)(sS.y,{size:16}):null,eo=null;n!==(O||(null==s?void 0:s.id))&&n&&(eo=er?(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 text-sm font-medium text-gray-500",children:[er,m("checkingDomain")]}):Z&&Z.isValid&&!Z.isOwner?(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 text-sm font-medium text-teal-600",children:[(0,a.jsx)(sJ.r,{}),m("domainAvailable")]}):Z&&Z.isValid&&Z.isOwner?(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 text-sm font-medium text-amber-600",children:[(0,a.jsx)(s1.N,{}),(0,a.jsx)("span",{children:"You're already using this domain."}),(0,a.jsx)("span",{children:l.get((null==$?void 0:$.toLowerCase())||"")?" This will override: ".concat(l.get((null==$?void 0:$.toLowerCase())||"")):" Replace it?"})]}):(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 text-sm font-medium text-red-600",children:[(0,a.jsx)(sZ.$,{}),m("domainUnavailable")]}));let ec=t?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"font-semibold",children:m("publishBlock")}),(0,a.jsxs)("p",{className:"text-sm",children:[X?m("deployBlockToVercelDescription"):m("publishBlockDescription"),"public"!==h&&(0,a.jsx)("span",{children:m("chatRemainsPrivate")})]})]}),ed=s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s4.o,{displayLink:V,link:V,ref:Y}),(0,a.jsxs)("div",{className:"flex h-5 w-full items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Settings"}),j?(0,a.jsx)("button",{onClick:()=>{(0,al.LA)(!0)},className:"rounded-full bg-teal-100 px-1.5 py-0.5 text-xs font-medium text-teal-900 hover:underline",type:"button",children:"Upgrade Plan"}):null]}),(0,a.jsxs)("div",{className:(0,f.cn)("flex flex-col gap-3",j&&"pointer-events-none text-gray-400"),children:[(0,a.jsxs)("button",{className:"group flex w-full items-center gap-2 p-1.5 text-left text-sm font-medium",onClick:()=>{if(j)return void(0,al.LA)(!0);let e=null;if(!O){let t=Array.from(l.entries());t.length>0&&(e=t[0][0])}O||e?i(O||e):i(""),setTimeout(()=>{var e;null===(e=es.current)||void 0===e||e.focus()},0)},type:"button",children:[(0,a.jsx)(sW.q,{}),(0,a.jsx)("span",{className:"flex-1",children:m("customizeDomain")}),(0,a.jsx)("span",{className:"group-hover:underline",children:m("configure")}),(0,a.jsx)(tA.b,{})]}),(0,a.jsxs)("div",{className:(0,f.cn)("group flex cursor-pointer items-center pr-1.5",L&&"pointer-events-none opacity-65"),onClick:()=>{if(j)return void(0,al.LA)(!0);z(s.id,U)},children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-2 p-1.5 text-left text-sm font-medium",children:[(0,a.jsx)(ef.k,{}),(0,a.jsx)("label",{id:"branding-label",className:"flex-1",children:m("removeV0Branding")})]}),(0,a.jsx)(s8.Switch,{"aria-describedby":"branding-label",className:"pointer-events-none",checked:U})]}),(0,a.jsxs)("div",{className:(0,f.cn)("group flex cursor-pointer items-center pr-1.5",E&&"pointer-events-none opacity-65"),onClick:()=>{if(j)return void(0,al.LA)(!0);P(s.id,!_)},children:[(0,a.jsxs)("div",{className:"group flex w-full items-center gap-2 p-1.5 text-left text-sm font-medium",children:[(0,a.jsx)(sX.e,{}),(0,a.jsx)(sv.Tooltip,{content:m("unlistedTooltip"),className:"h-[52px] w-[306px] text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-start gap-1",children:[(0,a.jsx)("label",{id:"unlisted-label",children:m("unlisted")}),(0,a.jsx)("span",{children:(0,a.jsx)(sq.f,{})})]})}),(0,a.jsx)("div",{className:"flex-1"})]}),(0,a.jsx)(s8.Switch,{"aria-describedby":"unlisted-label",checked:_,className:"pointer-events-none"})]})]})]}):null;return(0,a.jsxs)("form",{onSubmit:e=>(e.preventDefault(),console.log("onSubmit",t),t)?q():et(),className:(0,f.cn)(r&&"flex w-full gap-2"),children:[(0,a.jsxs)("div",{className:(0,f.cn)("flex w-full flex-col gap-4",r?"":"p-4"),children:[ec,t&&s?H?(0,a.jsxs)(a.Fragment,{children:[el,eo]}):ed:ei]}),en]})}function ay(e){let t,{isAuthor:s,className:l,isMenuItem:n=!1,isContent:i=!1,onClick:r,...o}=e,d=(0,M.k)("shareBlockPopover"),{nl:u,ts:m}=(0,eZ.D)(),[h,x]=(0,c.useState)(null),p=(0,eW.$)(),{isStreaming:g}=(0,b.Pk)(),{shareBlockPopoverOpen:v,setShareBlockPopoverOpen:y}=aj(),w=(0,j.eu)(),{getBlockSubdomains:N}=aa(),{getBlockShared:k}=(0,s3.L)(),C=(0,c.useMemo)(()=>!!w&&k(w.id),[w,k]),I=(null==w?void 0:w.type)!=="node.js"&&(null==w?void 0:w.type)!=="nodejs",R=ad(w),{history:z,currentBlockIndex:L}=(0,ai.useBlockHistory)({blockId:null==w?void 0:w.id}),A=(0,c.useMemo)(()=>{let e=new Map;for(let t=L-1;t>=0;t--){let s=N(z[t].id);s&&e.set(s,"v".concat(t+1))}return e},[z,L,N]);u&&R&&!C?t=null:s&&I&&null===h?t=(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)(an.TabsList,{className:"p-2 pb-0",children:[(0,a.jsx)(an.TabsTrigger,{value:"share",children:d("share")}),(0,a.jsx)(an.TabsTrigger,{value:"publish",children:d("publish")})]})}):null!==h&&C&&(t=(0,a.jsxs)("button",{className:"flex w-full cursor-pointer items-center justify-start gap-2 border-b p-4 text-sm font-medium hover:underline",onClick:()=>x(null),role:"button",tabIndex:0,children:[(0,a.jsx)(sK.n,{}),d("customizeDomain")]}));let T=(0,c.useCallback)(()=>R&&!C?"share":(C||A.size>0||null!==h)&&I&&s?"publish":"share",[R,C,A,h,I,s]),{isTeam:P}=(0,G.k6)(),[F,D]=(0,c.useState)(T());(0,c.useEffect)(()=>{"share"===T()&&D("share")},[T]);let E=(0,c.useMemo)(()=>s?(0,a.jsx)(s5.S,{className:"!size-4"}):(0,a.jsx)(s0.N,{className:"!size-4"}),[s]);if(n)return(0,a.jsxs)(O._2,{disabled:g,onClick:e=>{e.preventDefault(),r&&r()},children:[E,(0,a.jsx)("span",{children:d(s?"share":"copyLink")})]});let U=m?(0,a.jsxs)(ek.Modal,{open:v,onOpenChange:y,...o,children:[(0,a.jsxs)(ek.ModalHeader,{children:[(0,a.jsx)(ek.ModalTitle,{children:"Share Block"}),(0,a.jsx)("span",{children:s?(0,a.jsxs)("p",{className:"text-foreground text-sm",children:["Keep this Block private"," ",(0,a.jsx)("span",{children:P&&", share it with your team,"})," or make it publicly accessible. Share this Block as a template to allow others to build from it."," "]}):null})]}),(0,a.jsx)(av,{activeBlock:w,isAuthor:s,isDrawer:p})]}):(0,a.jsx)(s6.hl,{align:"end",className:(0,f.cn)("flex w-[370px] flex-col items-stretch gap-0 p-0 md:w-[515px]"),sideOffset:8,withOverlay:!0,...o,children:(0,a.jsxs)(an.Tabs,{value:F,onValueChange:e=>D(e),variant:"underline",children:[t,(0,a.jsx)(an.a,{value:"share",children:(0,a.jsx)(av,{activeBlock:w,isAuthor:s,isDrawer:p})}),(0,a.jsx)(an.a,{value:"publish",children:(0,a.jsx)(ab,{activeBlock:w,editedDomain:h,overrideMap:A,published:C,setEditedDomain:x,canDeployBlock:R,setActiveTab:D})})]})});return i?U:(0,a.jsxs)(s6.AM,{open:v,onOpenChange:y,children:[(0,a.jsx)(s6.Wv,{asChild:!0,children:(0,a.jsx)(S.$,{onClick:()=>y(e=>!e),tooltip:d(s?"share":"copyLink"),disabled:g,size:"sm",className:(0,f.cn)("size-7 rounded-md",l),variant:"ghost",children:E})}),U]})}function aw(e){let{activeBlockId:t,title:s,link:l,isDrawer:n}=e,i=(0,M.k)("shareBlockPopover"),{ts:r}=(0,eZ.D)(),c=e=>{(0,B.u)("ClickBlockShare",{destination:e,blockId:t})};return navigator&&void 0!==navigator.share&&n?(0,a.jsxs)(S.$,{className:(0,f.cn)("gap-2",r?"":"w-full"),onClick:()=>{try{navigator.share({title:s,text:"Check out ".concat(s," — built with v0 by Vercel"),url:l}),c("navigator.share")}catch(e){o.oR.error("Sharing is not supported on this device")}},size:"sm",type:"button",variant:"default",children:[r?(0,a.jsx)(s5.S,{}):null,i("share")]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"font-semibold",children:i("share")}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-3",children:[(0,a.jsx)(F.N,{className:"flex-1",external:!0,href:"https://x.com/intent/tweet?text=".concat(encodeURIComponent("Check out ".concat(s," — built with @v0\n\n").concat(l))),onClick:()=>c("X — The Everything App"),tooltip:{content:i("shareOnX"),side:"bottom"},children:(0,a.jsx)(S.$,{className:"flex w-full justify-center",type:"button",variant:"secondary",children:(0,a.jsx)(sG.B,{})})}),(0,a.jsx)(F.N,{className:"flex-1",external:!0,href:"https://www.reddit.com/submit?url=".concat(encodeURIComponent(l),"&title=").concat(encodeURIComponent("Check out ".concat(s," — built with v0 by Vercel"))),onClick:()=>c("Reddit"),tooltip:{content:i("shareOnReddit"),side:"bottom"},children:(0,a.jsx)(S.$,{className:"flex w-full justify-center",type:"button",variant:"secondary",children:(0,a.jsx)(sY.c,{})})}),(0,a.jsx)(F.N,{className:"flex-1",external:!0,href:"https://news.ycombinator.com/submitlink?u=".concat(encodeURIComponent(l),"&t=").concat(encodeURIComponent("Check out ".concat(s," — built with v0 by Vercel"))),onClick:()=>c("Hacker News"),tooltip:{content:i("shareOnHackerNews"),side:"bottom"},children:(0,a.jsx)(S.$,{className:"flex w-full justify-center",type:"button",variant:"secondary",children:(0,a.jsx)(sQ.P,{})})})]})]})}var aN=s(87023),ak=s(32635),aC=s(20109),aS=s(31487),aM=s(89819),aI=s(8990);function aR(e){let{blockId:t,lang:l,source:n,isMenuItem:i=!1,isContent:r=!1,onClick:o,...d}=e,{token:u,isRefreshing:m,refreshToken:h}=function(e){let{getBlockShared:t}=(0,s3.L)(),s=!!e&&t(e),{activeScopeSlug:a}=(0,G.k6)(),{chatPrivacy:l}=(0,k.kM)(),n="public"===l,{data:i,isLoading:r,mutate:o,isValidating:c}=(0,tl.Ay)(e?["/chat/b/[id]/token",e,l,a]:null,async()=>{if(!e||s||n||"@remote"===e)return{token:null};let t=await fetch("/chat/b/".concat(e,"/token").concat(void 0===a?"":"?scope=".concat(a)));return await t.json()},{revalidateOnReconnect:!1,revalidateOnMount:!1,revalidateOnFocus:!1,refreshWhenHidden:!1,refreshInterval:g.qp});return{token:null==i?void 0:i.token,isLoading:r,refreshToken:o,isRefreshing:c}}(t),{isStreaming:x}=(0,b.Pk)(),p=(0,eW.$)(),f=(0,M.k)("blockActionCli"),j=(0,aS.m)({data:{lang:l,source:n}},aM.P),{projectBlocks:v,project:y}=(0,ai.useBlockHistory)({blockId:t}),w=v.find(e=>e.id===t),N=(null==w?void 0:w.type)==="react-project",C=(0,c.useCallback)(async()=>{let e=[];if(N)window.open("/chat/api/download-zip?id=".concat(t),"_blank");else{e=v.map(e=>[{name:"".concat(y||"v0-project","/index.tsx"),input:e.source||""}]).flat();let t=(await s.e(3696).then(s.bind(s,1315))).downloadZip,a=await t(e).blob(),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download="".concat(y||"v0-project",".zip"),l.click(),l.remove()}},[N,y,v]);if(!t||!j)return null;if(i)return(0,a.jsxs)(O._2,{disabled:x,onClick:o,children:[(0,a.jsx)(ak.N,{}),(0,a.jsx)("span",{children:f("addToCodebase")})]});let I=(0,a.jsxs)(s6.hl,{align:p?"center":"end",side:"bottom",sideOffset:8,withOverlay:!0,...d,children:[(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-3 p-5",children:[(0,a.jsx)("h3",{className:"font-semibold",children:f("addToCodebase")}),(0,a.jsx)("p",{className:"text-sm",children:f("runThisCommand")}),(0,a.jsx)(az,{blockId:t,isRefreshing:m,token:u})]}),(0,a.jsx)(aI.Separator,{className:"w-full"}),(0,a.jsxs)("button",{className:"flex h-12 w-full items-center gap-3 p-4 text-sm text-gray-500",onClick:C,children:[(0,a.jsx)(aC.g,{}),(0,a.jsx)("span",{className:"text-gray-900",children:"Download ZIP"})]})]});return r?I:(0,a.jsxs)(s6.AM,{onOpenChange:e=>{e&&h()},children:[(0,a.jsx)(s6.Wv,{asChild:!0,children:(0,a.jsx)(S.$,{disabled:x,size:"sm",className:"size-7 rounded-md",tooltip:f("addToCodebase"),variant:"ghost",children:(0,a.jsx)(ak.N,{className:"size-4"})})}),I]})}function az(e){let{blockId:t,token:s,isRefreshing:l}=e,{command:n,displayedUrl:i}=function(e,t){let[s,a]=(0,c.useMemo)(()=>{let s=new URL("".concat(window.location.origin,"/chat/b/").concat(e)),a="".concat(s.protocol,"//").concat(s.hostname,"/chat/b/").concat(e);return t&&(s.searchParams.set("token",t),a="".concat(a,"?token=").concat(t.substring(0,32),"...")),[s,a]},[e,t]);return{command:'npx shadcn@latest add "'.concat(s.toString(),'"'),url:s,displayedUrl:a}}(t,s);return(0,a.jsx)(s4.o,{className:"font-mono",disabled:l,displayLink:'npx shadcn add "'.concat(i,'";'),link:n})}var aL=s(46426),aA=s(91094),aT=s(59493),aP=s(50490),aF=s(66532),aD=s(23868),aE=s(50537);function aO(){let{namespaces:e,isLoading:t}=function(){let{data:e,error:t,isLoading:s}=(0,tl.Ay)("github:active-namespaces",async()=>{try{let e=new URLSearchParams({provider:"github"}),t=await fetch("/chat/api/git/search-namespaces?".concat(e.toString()));if(!t.ok)throw Error("Failed to search orgs");return await t.json()}catch(e){return[]}},{refreshInterval:3e5,fallbackData:[]});return{namespaces:e||[],isLoading:s,error:t||null}}(),[s,l]=(0,c.useState)("loading");(0,c.useEffect)(()=>{if(!t){l(e.length>0?"make":"connect");return}l("loading")},[t,e]);let[n,i]=(0,c.useState)(),[r,d]=(0,c.useState)(null),u=(0,j.eu)(),{title:m}=(0,k.tZ)(),h=(0,c.useCallback)(()=>{window.open("https://vercel.com/api/registration/login-with-github?next=".concat(encodeURIComponent(window.location.href)),"_blank")},[]),x=(0,c.useCallback)(async()=>{if(!(null==u?void 0:u.id))return;if(!(n&&n.name&&n.ownerType)){o.oR.error("Repo owner not specified");return}o.oR.success("Creating repository.");let e={visibility:"private",owner:n.name,isUser:"user"===n.ownerType,repoName:m.toLowerCase().replace(/\s+/g,"-")+"-"+Math.random().toString(16).slice(2)},t=await fetch("/chat/b/".concat(u.id,"/git/eject"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){"repo_alr_exists"===(await t.json()).error?o.oR.error("Repository already exists. Try a new name."):o.oR.error("Failed to create repository.");return}d((await t.json()).remoteURL)},[u,n]),p=(0,c.useMemo)(()=>t=>{let s=e.find(e=>"".concat(e.id)===t);s?i(s):console.error("Namespaces with ID ".concat(t," not found"))},[e]),f=(0,c.useMemo)(()=>{switch(s){case"connect":return(0,a.jsx)(aU,{handleConnect:h});case"make":return(0,a.jsx)(a_,{namespaces:e,setOwnerById:p,handleCreateRepo:x,repoLink:r});case"loading":return(0,a.jsx)(aB,{});default:return null}},[s,h,p,x,r,e]);return(0,a.jsxs)(aT.AM,{children:[(0,a.jsx)(aT.Wv,{asChild:!0,children:(0,a.jsxs)(aA.$n,{size:"sm",variant:"outline",className:"flex h-7 items-center gap-0.5 rounded-md px-1.5",children:[(0,a.jsx)(se.ERf,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Eject to GitHub"})]})}),(0,a.jsx)(aT.hl,{className:"flex w-72 flex-col items-stretch gap-0 p-0",children:f})]})}function aU(e){let{handleConnect:t}=e;return(0,a.jsxs)(aD.Zp,{className:"mx-auto w-full max-w-2xl",children:[(0,a.jsxs)(aD.aR,{className:"text-center",children:[(0,a.jsx)(aD.ZB,{children:"Eject to GitHub"}),(0,a.jsx)(aD.BT,{className:"mx-auto mt-4 max-w-lg",children:"Create a new GitHub repository with your code. You can choose between public and private visibility."})]}),(0,a.jsx)(aD.Wu,{className:"flex justify-center pb-8",children:(0,a.jsxs)(aA.$n,{size:"lg",variant:"outline",className:"bg-white text-black hover:bg-gray-100 hover:text-black",onClick:t,children:[(0,a.jsx)(se.ERf,{className:"mr-2 h-5 w-5"}),"Connect GitHub Account"]})})]})}function a_(e){let{namespaces:t,setOwnerById:s,handleCreateRepo:l,repoLink:n}=e;return(0,a.jsxs)(aD.Zp,{className:"mx-auto w-full max-w-2xl",children:[(0,a.jsx)(aD.aR,{className:"text-center",children:(0,a.jsx)(aD.ZB,{children:"Eject to GitHub"})}),(0,a.jsxs)(aD.Wu,{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(aF.J,{htmlFor:"owner",children:"Owner"}),(0,a.jsxs)(aP.l6,{onValueChange:s,children:[(0,a.jsx)(aP.bq,{id:"owner",children:(0,a.jsx)(aP.yv,{placeholder:"Select an owner"})}),(0,a.jsx)(aP.gC,{children:t.map(e=>(0,a.jsx)(aP.eb,{value:"".concat(e.id),children:e.slug},e.id))})]})]})}),(0,a.jsx)("div",{className:"flex justify-center pt-2",children:(0,a.jsx)(aA.$n,{onClick:l,size:"lg",children:"Create Repository"})}),n&&(0,a.jsx)(s4.o,{className:"font-mono",displayLink:n,link:n})]})]})}function aB(){return(0,a.jsxs)(aD.Zp,{className:"mx-auto w-full max-w-2xl",children:[(0,a.jsx)(aD.aR,{className:"text-center",children:(0,a.jsx)(aD.ZB,{children:"Eject to GitHub"})}),(0,a.jsx)(aD.Wu,{className:"flex justify-center pb-8",children:(0,a.jsx)(aE.A,{className:"text-muted-foreground h-8 w-8 animate-spin"})})]})}var aV=s(54294),a$=s(61087),aH=s(90179);let aZ=(0,sa.createServerReference)("4096d2eac81b6e148b8b1cad97db4724487abeca5f",sa.callServer,void 0,sa.findSourceMapURL,"sendFlag");function aK(e){let{children:t,value:s,reasons:l}=e;return(0,a.jsx)(aV.a,{className:"is-mobile:text-xs",onClick:()=>l.toggle(s),selected:l.has(s),children:t})}function aJ(e){let{blockId:t,showFlagModal:s,setShowFlagModal:l}=e,{chatId:n}=(0,b.Pk)(),{user:i}=(0,N.J)(),[r,d]=(0,c.useState)(""),u=(0,a$.L)(),m=(0,M.k)("downvoteDialog"),h=(0,c.useCallback)(()=>{d(""),u.clear(),l(!1)},[u,l]),x=(0,c.useCallback)(async e=>{e.preventDefault();try{await Promise.all([h(),aZ({feedback:r,reasons:u.values,chatId:n,blockId:t,userId:null==i?void 0:i.id}),(0,o.oR)("Successfully flagged Block")])}catch(e){console.error(e),o.oR.error("Failed to submit flag. Please try again later.")}},[h,r,u.values,n,t,null==i?void 0:i.id]),p=(0,c.useMemo)(()=>(0,a.jsxs)("form",{className:(0,f.cn)("flex flex-col","is-mobile:gap-3 is-not-mobile:gap-6"),onSubmit:x,children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,a.jsx)(aK,{reasons:u,value:"inappropriate",children:"Inappropriate Content"}),(0,a.jsx)(aK,{reasons:u,value:"copyright",children:"Copyright Violation"}),(0,a.jsx)(aK,{reasons:u,value:"illegal",children:"Illegal Content"}),(0,a.jsx)(aK,{reasons:u,value:"other",children:"Other"})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(ee.Label,{className:"text-sm font-normal text-gray-500",htmlFor:"downvote-feedback",children:"Please provide your reasoning for flagging this generation."}),(0,a.jsx)(tJ.T,{className:"shadow-none",id:"downvote-feedback",name:"feedback",onChange:e=>d(e.target.value),placeholder:"Additional information...",rows:3,value:r})]}),(0,a.jsxs)("div",{className:"is-mobile:flex-col-reverse is-not-mobile:flex-row flex w-full items-center justify-end gap-2",children:[(0,a.jsx)(S.$,{className:"is-mobile:w-full",onClick:e=>{e.preventDefault(),h()},size:"sm",variant:"secondary",children:m("cancel")}),(0,a.jsx)(S.$,{className:"is-mobile:w-full",size:"sm",type:"submit",children:m("submit")})]})]}),[x,u,m,r,h]);return(0,a.jsx)(ek.Modal,{onClose:h,onOpenChange:e=>{e||h()},open:s,children:(0,a.jsxs)("div",{className:"overflow-auto",children:[(0,a.jsxs)(ek.ModalHeader,{children:[(0,a.jsx)(ek.ModalTitle,{children:"Flag a generation"}),(0,a.jsxs)(ek.ModalDescription,{children:["Flag a generation for inappropriate, abusive, or illegal content."," "]})]}),(0,a.jsx)(ek.ModalContent,{children:p})]})})}function aW(e){let{blockId:t,isMenuItem:s=!1,...l}=e,[n,i]=(0,c.useState)(!1);return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aJ,{blockId:t,showFlagModal:n,setShowFlagModal:i}),(0,a.jsxs)(O._2,{onClick:()=>{i(!0)},children:[(0,a.jsx)(aH.l,{}),(0,a.jsx)("span",{children:"Flag"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aJ,{blockId:t,showFlagModal:n,setShowFlagModal:i}),(0,a.jsx)(S.$,{"aria-label":"Flag Generation",onClick:()=>{i(!0)},size:"sm",className:"size-7 rounded-md",tooltip:"Flag",variant:"ghost",...l,children:(0,a.jsx)(aH.l,{})})]})}let aq=(0,s$.default)(()=>Promise.resolve().then(s.bind(s,96737)).then(e=>e.BlockHistorySelect),{loadableGenerated:{webpack:()=>[96737]},ssr:!1});function aY(e){let{isAuthor:t,isOpen:s,drawerView:l,activeBlockState:n,renderedBlock:i,remote:r}=e,o=null==n?void 0:n.id;!o&&r&&(o="@remote");let{nl:d,ts:u,ge:m}=(0,eZ.D)(),{getBlockShared:h}=(0,s3.L)(),x=ad(n),p=(0,c.useMemo)(()=>!!n&&h(n.id),[n,h]),f=n&&d&&x&&!p,v=n&&m&&x&&!p,{shareBlockPopoverOpen:b,setShareBlockPopoverOpen:y}=aj(),w=(0,j.oQ)(),C=(null==n?void 0:n.type)==="local"?n.meta.title||("@remote"===o?"Dev Server Preview":"Untitled"):(null==n?void 0:n.meta.project)||"Untitled";/[_-]/.test(C)&&(C=C.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "));let{authorId:M}=(0,k.tZ)(),{user:I}=(0,N.J)(),R=(0,c.useMemo)(()=>t||(null==I?void 0:I.id)===M,[t,null==I?void 0:I.id,M]),z=(0,c.useCallback)(()=>w(!1),[w]),L=(0,c.useRef)();(0,c.useEffect)(()=>{var e;if(n&&!n.initial&&n.id!==(null===(e=L.current)||void 0===e?void 0:e.id)){let e=sV.A.get(g.MA);(0,B.u)("ViewBlock",{blockType:n.type,blockId:n.id,blockViewSizePercent:void 0===e?null:parseInt(e)}),L.current=n}},[n,z,w]);let[A,T]=(0,c.useState)(null),P=(0,c.useMemo)(()=>{if(!n||!o)return null;let e=(0,a.jsxs)(a.Fragment,{children:[i.action,(0,a.jsx)(aR,{blockId:o,lang:n.language,source:n.source,isMenuItem:!0,onClick:()=>T("cli")}),R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aN.ForkBlockButton,{isMenuItem:!0,blockId:o,isAuthor:R,page:"chat"}),(0,a.jsx)(ay,{onClick:()=>{if(!u)return T("share");y(!0),T(null)},isMenuItem:!0,isAuthor:R}),(0,a.jsx)(aW,{isMenuItem:!0,blockId:o})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ay,{onClick:()=>{if(!u)return T("share");y(!0),T(null)},isMenuItem:!0,isAuthor:!1}),(0,a.jsx)(aN.ForkBlockButton,{isMenuItem:!0,className:"ml-1",blockId:o,isAuthor:!1,page:"chat"}),(0,a.jsx)(aW,{isMenuItem:!0,blockId:o})]})]}),t=(0,a.jsxs)(a.Fragment,{children:[i.action,(0,a.jsx)(aR,{blockId:o,lang:n.language,source:n.source}),R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aN.ForkBlockButton,{blockId:o,isAuthor:R,page:"chat"}),(0,a.jsx)(ay,{onClick:()=>u?y(!0):T("share"),isAuthor:R}),u?(0,a.jsx)(ax.vn,{activeBlock:n}):null,(0,a.jsx)(aW,{blockId:o})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ay,{onClick:()=>u?y(!0):T("share"),isAuthor:!1}),(0,a.jsx)(aW,{blockId:o}),(0,a.jsx)(aN.ForkBlockButton,{className:"ml-1",blockId:o,isAuthor:!1,page:"chat"})]})]});return(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"@[32.5rem]/block-header:hidden block",children:(0,a.jsxs)(s6.AM,{open:null!==A&&"more"!==A,children:[(0,a.jsxs)(O.rI,{onOpenChange:()=>{A||T("more")},open:"more"===A,children:[(0,a.jsx)(O.ty,{asChild:!0,children:(0,a.jsx)(s6.dT,{asChild:!0,children:(0,a.jsx)(S.$,{variant:"ghost",id:"block-more-button",className:"size-7 rounded-md",size:"sm",children:(0,a.jsx)($.a,{})})})}),(0,a.jsx)(O.SQ,{onCloseAutoFocus:e=>{A&&e.preventDefault()},onEscapeKeyDown:()=>T(null),onPointerDownOutside:()=>{"more"===A&&T(null)},align:"end",children:(0,a.jsx)(O.I,{children:e})})]}),"cli"===A?(0,a.jsx)(aR,{blockId:o,lang:n.language,source:n.source,isContent:!0,onEscapeKeyDown:()=>{var e;null===(e=document.getElementById("block-more-button"))||void 0===e||e.focus(),T(null)},onPointerDownOutside:()=>T(null)}):null,u&&(0,a.jsx)(ay,{isAuthor:R,isContent:!0,onEscapeKeyDown:()=>{var e;null===(e=document.getElementById("block-more-button"))||void 0===e||e.focus(),T(null)},onPointerDownOutside:()=>T(null)}),"share"===A?(0,a.jsx)(ay,{isAuthor:R,isContent:!0,onClick:()=>T("share"),onEscapeKeyDown:()=>{var e;null===(e=document.getElementById("block-more-button"))||void 0===e||e.focus(),T(null)},onPointerDownOutside:()=>T(null)}):null]})}),(0,a.jsx)("div",{className:"@[32.5rem]/block-header:flex hidden items-center gap-1.5",children:t}),v?(0,a.jsx)(aO,{}):null,R&&f?(0,a.jsx)(aL.Ay,{}):null]})},[n,o,i.action,R,u,A,v,f,y]);return l?(0,a.jsx)(e2._s,{"aria-hidden":!s,onClose:z,open:s,children:(0,a.jsxs)(e2.zj,{className:"bg-muted px-0",hideThumb:!0,children:[(0,a.jsx)(e2.gk,{className:"sr-only",children:C}),(0,a.jsxs)("div",{className:"@container/block-header flex items-center justify-between gap-2 px-2 [&_[role=tablist]]:h-7 [&_[role=tablist]]:px-0.5 [&_[role=tablist]_button]:h-6 [&_[role=tablist]_button]:translate-y-[0.5px] [&_[role=tablist]_svg]:size-3.5",children:[i.titleActions,(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[o?(0,a.jsx)(c.Suspense,{children:(0,a.jsx)(aq,{blockId:o})}):null,P]})]}),(0,a.jsx)("div",{className:"h-full min-h-0 w-full min-w-0","data-vaul-no-drag":!0,children:i.content})]})}):(0,a.jsxs)("div",{className:"bg-background flex size-full flex-col items-stretch","data-testid":"desktop-block-panel",children:[(0,a.jsxs)("div",{className:"@container/block-header flex h-12 w-full shrink-0 items-center justify-between gap-2 px-2",children:[(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-row items-center gap-1.5",children:["@remote"===o?null:(0,a.jsxs)(S.$,{onClick:z,className:"size-7 text-gray-500",size:"sm",variant:"ghost",children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(null==n?void 0:n.type)==="local"?(0,a.jsx)(sZ.$,{className:"pointer-events-none"}):(0,a.jsx)(sH.T,{className:"pointer-events-none"})]}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:i.titleActions||(0,a.jsx)("h2",{className:"truncate font-medium",children:C})})]}),(0,a.jsxs)("div",{className:"flex w-fit items-center justify-end gap-1",children:[o?(0,a.jsx)(aq,{blockId:o,separator:!0}):null,P]})]}),(0,a.jsx)("div",{className:"h-full min-h-0 w-full min-w-0",children:i.content})]})}var aG=s(92171),aQ=s(47165);let aX="block-panel-right",a0="block-panel-left";function a1(e){let{isAuthor:t,initialBlockSize:s,initialFileTreeSize:l,isMobile:n,remote:i,templates:r}=e,{initialSize:o,isFallbackSize:d,defaultSizeRef:u}=(0,x.Zf)({initialSize:s,fallbackSize:75}),m=(0,j.I4)()||i,h=(0,eW.$)();!function(){let e=(0,j.eu)(),t=(0,j.oQ)(),s=(0,c.useRef)(!0);(0,c.useEffect)(()=>{e&&e.initial&&!e.fullscreenOnLoad&&s.current&&(s.current=!1,(0,eW.s)(window.innerWidth)&&setTimeout(()=>t(!1),0))},[e,t])}();let v=(0,j.eu)();!v&&i&&(v={id:"@remote",meta:{},type:"local",messageId:"",source:"",language:"plaintext",closed:!0,remoteInfo:void 0});let b=(0,aG.useRenderedBlock)({block:v,initialSize:o,location:"header",initialFileTreeSize:l,isAuthor:t});return(0,a.jsxs)(x.YZ,{isFallbackSize:d,collapseSide:"right",cookie:g.MA,id:"block-panel-group",className:"h-screen-patched w-screen",direction:"horizontal",leftId:a0,rightId:aX,defaultSizeRef:u,children:[(0,a.jsx)(p.Zk,{id:a0,order:1,defaultSize:m?100-u.current:100,className:(0,f.cn)("collapsed:md:min-w-[28rem] collapsed:lg:min-w-[32rem] h-full md:min-w-[18rem] lg:min-w-[24rem] xl:min-w-[32rem]"),children:(0,a.jsx)(sB,{isAuthor:t,isMobile:n,templates:r})}),(0,a.jsx)(a5,{defaultSize:u.current,isOpen:m,drawerView:h,children:(0,a.jsx)(c.Suspense,{fallback:null,children:(0,a.jsx)(aY,{isOpen:m,activeBlockState:v,renderedBlock:b,isAuthor:t,remote:i,drawerView:h})})})]})}function a5(e){let{defaultSize:t,isOpen:s,children:l,drawerView:n}=e,{isEmpty:i}=(0,k.tZ)(),{fullScreenResult:r}=(0,aQ.S)();return i?null:n?l:(0,a.jsx)(x.je,{handleTestId:"block-resize-handle",className:(0,f.cn)("ml:block sticky top-0 hidden h-full min-w-[420px] text-sm",r?"z-30":"z-10"),collapseSide:"right",isOpen:s,order:2,defaultSize:t,collapseId:aX,children:l})}function a2(){let e=(0,m.useSearchParams)(),t=(0,m.useRouter)(),s="true"===e.get("premium"),{setUpgradePromptOpen:a}=(0,h.g)(),l=(0,c.useCallback)(()=>{a(!0)},[a]);return(0,c.useEffect)(()=>{s&&(l(),t.replace("/chat"))},[s,l,t]),null}function a6(e){let{initialToast:t,isMobile:s,initialFileTreeSize:d,blockSize:m,isAuthor:h,isRemote:x,hasSignedIn:p,templates:f}=e;return((0,c.useEffect)(()=>{t&&setTimeout(()=>(0,o.oR)(t),0)},[t]),x)?(0,a.jsxs)(u,{hasSignedIn:p,children:[(0,a.jsxs)(c.Suspense,{fallback:null,children:[(0,a.jsx)(a2,{}),(0,a.jsx)(i.default,{}),(0,a.jsx)(n.FeedbackDialog,{}),(0,a.jsx)(l.z7,{})]}),(0,a.jsx)(r.H,{children:(0,a.jsx)(a1,{initialBlockSize:m,isAuthor:h,isMobile:s,remote:!0,templates:f})})]}):(0,a.jsxs)(u,{hasSignedIn:p,children:[(0,a.jsxs)(c.Suspense,{fallback:null,children:[(0,a.jsx)(a2,{}),(0,a.jsx)(i.default,{}),(0,a.jsx)(n.FeedbackDialog,{}),(0,a.jsx)(l.z7,{})]}),(0,a.jsx)(r.H,{children:(0,a.jsx)(a1,{initialFileTreeSize:d,initialBlockSize:m,isAuthor:h,isMobile:s,remote:!1,templates:f})})]})}},95159:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var a=s(54857),l=s(16617),n=s(96541),i=s(79160),r=s(71368),o=s(5987);function c(){let{loginUrl:e}=(0,i.AO)(),[t,s]=(0,n.useState)(!1),o=(0,r.k)("chatAuthButtons");if((0,i.Zu)())return(0,a.jsx)(d,{});let c=(0,a.jsx)("a",{href:"".concat(e,"&action=signup"),onClick:()=>s("signup"),children:o("signup")}),u=(0,a.jsx)("a",{href:e,onClick:()=>s("login"),children:o("signin")});return(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.$,{className:"h-7 rounded-md",asChild:!0,disabled:"login"===t,size:"sm",variant:"secondary",children:u}),(0,a.jsx)(l.$,{className:"h-7 rounded-md",asChild:!0,disabled:"signup"===t,size:"sm",children:c})]})}function d(){let e=(0,r.k)("signInDialog"),[t,s]=(0,n.useState)(!1);return(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(l.$,{size:"sm",onClick:()=>{s(!0),(0,o.Jv)("vercel")},disabled:t,children:e("authConnect")})})}},35263:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(54857);s(96541);var l=s(60346),n=s(95159),i=s(37622),r=s(83778);let o=e=>{let{className:t}=e,{expectUser:s}=(0,l.J)();return s?null:(0,a.jsxs)("header",{className:(0,i.cn)("bg-background absolute left-0 top-0 z-10 flex h-14 w-screen items-center justify-between px-4",t),children:[(0,a.jsx)(r.NewChatButton,{variant:"logo"}),(0,a.jsx)(n._,{})]})}},8594:(e,t,s)=>{"use strict";s.d(t,{o:()=>o});var a=s(54857),l=s(96541),n=s(77184),i=s(37622),r=s(33744);function o(e){let{hideIcon:t,displayLink:s,link:o,asChild:c,className:d,children:u,ref:m,suffix:h,iconPrefix:x,showToast:p,disabled:f,...g}=e,[j,v]=(0,l.useState)(!1),b=(0,l.useCallback)(()=>{v(!0),n.oR.promise(navigator.clipboard.writeText(o),{error:"Failed to copy link",success:p?"Link copied":void 0}),setTimeout(()=>v(!1),3e3)},[o,p]);return c?(0,a.jsx)("div",{className:d,onClick:b,children:u}):(0,a.jsxs)("button",{className:(0,i.cn)("group flex h-8 w-full items-center justify-between gap-1 rounded-md border border-gray-200 px-2 text-left text-sm font-normal transition-all hover:border-gray-300",f&&"pointer-events-none opacity-50",h?"pr-0":"pr-2",d),disabled:f,onClick:b,ref:m,...g,children:[x?(0,a.jsx)("div",{className:"-mr-1 h-full",children:x}):null,(0,a.jsx)("span",{className:"flex-1 truncate",children:null!=s?s:o}),(0,a.jsx)(r.U,{className:(0,i.cn)("text-gray-500 transition-colors group-hover:text-current group-focus-visible:text-current",t&&"hidden"),isCopied:j}),h?(0,a.jsx)("div",{className:"h-full pl-1",children:h}):null]})}},83778:(e,t,s)=>{"use strict";s.d(t,{NewChatButton:()=>h});var a=s(54857),l=s(38651),n=s(34016),i=s(54608),r=s(64993),o=s(16617),c=s(52033),d=s(96541),u=s(37622),m=s(71368);function h(e){let{variant:t="text",className:s,buttonVariant:h,onButtonClick:x,...p}=e,f=(0,m.k)("newChatButton"),{stopLlmResponse:g}=(0,n.y)(),j=(0,d.useCallback)(()=>{g(),(0,l.u)("ClickNewChat"),null==x||x()},[g,x]);return"logo"===t?(0,a.jsx)(o.$,{asChild:!0,className:(0,u.cn)("size-8 border-none hover:bg-transparent focus:bg-transparent focus-visible:bg-transparent has-[>svg]:p-0 [&>svg]:size-8",s),variant:"ghost",...p,children:(0,a.jsxs)(c.f,{"data-testid":"header-logo",href:"/",onClick:j,children:[(0,a.jsx)(i.g,{"aria-hidden":!0,className:"size-10"}),(0,a.jsx)("span",{className:"sr-only",children:f("newChat")})]})}):"icon"===t?(0,a.jsx)(o.$,{asChild:!0,className:(0,u.cn)("hover:bg-gray-150 size-8 shadow-[0px_1px_2px_0px_hsla(0,0%,0%,0.04)] has-[>svg]:px-0",s),tooltip:{side:"right",content:f("newChat"),sideOffset:8},variant:"secondary",...p,children:(0,a.jsxs)(c.f,{href:"/chat",onClick:j,children:[(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(r.F,{})}),(0,a.jsx)("span",{className:"sr-only",children:f("newChat")})]})}):"sidebar"===t?(0,a.jsx)(o.$,{asChild:!0,variant:"secondary",className:(0,u.cn)("border-none shadow-sm",s),size:"sm",...p,children:(0,a.jsx)(c.f,{className:"flex flex-row items-center gap-2.5",href:"/chat",onClick:j,children:"New Chat"})}):"collapsible"===t?(0,a.jsx)(o.$,{asChild:!0,className:(0,u.cn)("collapsed:w-8 hover:bg-gray-150 focus:bg-gray-150 focus-visible:bg-gray-150 bg-background transition-sidebar relative h-8 w-full overflow-hidden border-none px-2 text-gray-900 shadow-sm",s),size:"sm",...p,children:(0,a.jsx)(c.f,{href:"/chat",onClick:j,children:(0,a.jsxs)("div",{className:"collapsed:left-0 collapsed:translate-x-2 transition-sidebar absolute inset-2 left-[calc((var(--sidebar-width)-128px)/2)] flex w-fit items-center justify-center gap-2 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"collapsed:opacity-100 transition-sidebar opacity-0 ease-in-out",children:(0,a.jsx)(r.F,{})}),(0,a.jsx)("span",{children:f("newChat")})]})})}):(0,a.jsx)(o.$,{asChild:!0,className:s,size:"sm",variant:h,...p,children:(0,a.jsx)(c.f,{href:"/chat",onClick:j,children:f("newChat")})})}},36495:(e,t,s)=>{"use strict";let a;s.d(t,{NonPaymentBanner:()=>p});var l=s(54857),n=s(43393),i=s(54143),r=s(66786);{let{Agent:e}=s(56717);a=new e({keepAlive:!0})}var o=s(8589);let c=null;new Proxy({},{get(e,t){if(!c){if(!o.env.KV_REST_API_URL||!o.env.KV_REST_API_TOKEN)throw Error("@vercel/kv: Missing required environment variables KV_REST_API_URL and KV_REST_API_TOKEN");let e=(c=(0,r.UU)({url:o.env.KV_REST_API_URL,token:o.env.KV_REST_API_TOKEN,enableAutoPipelining:!0,...a?{agent:a}:{}})).hmset;c.hmset=(async(t,s)=>{let a=Object.fromEntries(Object.entries(s).filter(e=>{let[,t]=e;return void 0!==t}));return e.call(c,t,a)}).bind(c);let t=c.hmget;c.hmget=(async function(e){for(var s=arguments.length,a=Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];let n=await t.call(c,e,...a),i=null==n?void 0:n.prompt;return i&&"object"==typeof i&&(n.prompt=JSON.stringify(i)),n}).bind(c);let s=c.hgetall;c.hgetall=(async e=>{let t=await s.call(c,e),a=null==t?void 0:t.prompt;return a&&"object"==typeof a&&(t.prompt=JSON.stringify(a)),t}).bind(c);let l=c.pipeline;c.pipeline=()=>new Proxy(l.call(c),{get(e,t){if("exec"===t){let t=e.exec;return async function(){return(await t.call(e)).map(e=>((null==e?void 0:e.prompt)&&"object"==typeof e.prompt&&(e.prompt=JSON.stringify(e.prompt)),e))}}return Reflect.get(e,t)}})}return Reflect.get(c,t)}});var d=s(7394),u=s.n(d),m=s(71857),h=s(4126),x=s(37622);function p(e){var t;let{className:s}=e,{user:a,activeScope:r}=(0,n.k6)(),{planInfo:o,planSlug:c}=(0,i.N)(!0,null==r?void 0:r.id),d=(null==o?void 0:o.current)&&"payment"in o.current?o.current.payment:null,p=null==d?void 0:null===(t=d.openInvoices[0])||void 0===t?void 0:t.url;return o&&p&&c&&"v0-level0"!==c&&"paid"!==d.status&&"processing"!==d.status?(0,l.jsxs)("div",{className:(0,x.cn)("border-alpha-200 relative z-10 hidden h-9 items-center justify-center gap-2 border-b bg-red-100 px-3 py-2 text-sm font-medium text-red-700 sm:flex",s),children:[(0,l.jsx)(m.V,{}),(0,l.jsxs)("div",{className:"flex items-center gap-1 ",children:["Your payment method",(0,l.jsxs)("span",{className:"hidden sm:inline",children:["for the ",h.Md[c]," plan"]})," ","failed."]}),(0,l.jsxs)(u(),{className:"text-red-900 dark:text-red-300",href:p,children:["Pay ",(0,l.jsx)("span",{className:"hidden sm:inline",children:"Open"})," Invoice"]})]}):null}},18790:(e,t,s)=>{"use strict";s.d(t,{WelcomeModal:()=>p});var a=s(54857),l=s(96541),n=s(16617),i=s(3316),r=s(73927),o=s(12048),c=s(44079),d=s(68022),u=s(67605);let m=(0,u.createServerReference)("40868fd1331ca055ba98fe6e8c11bcb2c6a8ec6d68",u.callServer,void 0,u.findSourceMapURL,"cancelPremiumAfterTeamUpgrade");var h=s(77184),x=s(10373);function p(e){let{teamName:t,teamSlug:s,showDowngradeCta:o}=e,c=(0,r.useRouter)(),d=(0,r.usePathname)(),u=(0,r.useSearchParams)(),[m,h]=(0,l.useState)(!!(t||s)),x=(0,l.useCallback)(()=>{let e=new URLSearchParams(Array.from(u.entries()));for(let t of["teamSlug","teamName"])e.delete(t);let t=e.toString();c.replace("".concat(d).concat(t?"?".concat(t):""))},[d,c,u]),p=(0,l.useCallback)(()=>{x(),h(!1)},[x]);return o?(0,a.jsx)(f,{teamName:t,teamSlug:s}):(0,a.jsxs)(i.Modal,{onOpenChange:p,open:m,children:[(0,a.jsxs)(i.ModalHeader,{children:[(0,a.jsx)(i.ModalTitle,{children:"Upgrade Confirmed"}),(0,a.jsxs)(i.ModalDescription,{children:["Your Team subscription"," ",t?(0,a.jsxs)(a.Fragment,{children:["for ",(0,a.jsx)("span",{className:"font-medium",children:t})," "]}):(0,a.jsx)("span",{children:""}),(0,a.jsxs)("span",{children:["has been confirmed! You can invite additional members in your Vercel Team's settings."," "]})]})]}),(0,a.jsxs)(i.ModalFooter,{children:[(0,a.jsx)(n.$,{size:"sm",variant:"secondary",children:(0,a.jsx)("a",{target:"_blank",href:s?"https://vercel.com/".concat(s,"/~/settings/members"):"https://vercel.com",children:"Manage Members"})}),(0,a.jsx)(n.$,{size:"sm",onClick:p,variant:"default",children:"Start Building"})]})]})}function f(e){let{teamName:t,teamSlug:s}=e,u=(0,r.useRouter)(),p=(0,r.usePathname)(),f=(0,r.useSearchParams)(),[g,j]=(0,l.useState)(!!(t||s)),[v,b]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),[N,k]=(0,l.useTransition)(),C=(0,l.useCallback)(()=>{let e=new URLSearchParams(Array.from(f.entries()));for(let t of["teamSlug","teamName","cta"])e.delete(t);let t=e.toString();u.replace("".concat(p).concat(t?"?".concat(t):""))},[p,u,f]),S=(0,l.useCallback)(()=>{C(),j(!1)},[C]),M=(0,l.useCallback)(()=>{b(!1)},[]),I=(0,l.useCallback)(()=>{N||k(async()=>{if("error"in await m(s)){h.oR.error("Failed to cancel Premium plan. Please try again or reach out to Customer Support to cancel your Premium plan.");return}w(!0),M()})},[N,M,s]);return v?(0,a.jsxs)(i.Modal,{onOpenChange:S,open:g,children:[(0,a.jsxs)(i.ModalHeader,{children:[(0,a.jsx)(i.ModalTitle,{children:"Cancel your Premium Plan"}),(0,a.jsxs)(i.ModalDescription,{children:["We have successfully created a new Team plan",t?(0,a.jsxs)(a.Fragment,{children:[" ","for ",(0,a.jsx)("span",{className:"font-medium",children:t}),"."]}):(0,a.jsx)("span",{children:"."})," ",(0,a.jsx)("span",{children:"Would you like to cancel your active personal Premium plan? We will apply a credit for the remaining time on your Premium billing period towards your new Team plan."})]})]}),(0,a.jsxs)(i.ModalFooter,{children:[(0,a.jsx)(n.$,{size:"sm",variant:"secondary",onClick:M,children:"Keep Both Plans"}),(0,a.jsx)(x.Q,{size:"sm",onClick:I,pending:N,children:"Cancel Premium"})]})]}):(0,a.jsxs)(i.Modal,{onOpenChange:S,open:g,children:[(0,a.jsxs)(i.ModalHeader,{children:[(0,a.jsx)(i.ModalTitle,{children:"Team Plan Confirmed"}),(0,a.jsxs)(i.ModalDescription,{children:["Your Team subscription"," ",t?(0,a.jsxs)(a.Fragment,{children:["for ",(0,a.jsx)("span",{className:"font-medium",children:t})," "]}):(0,a.jsx)("span",{children:""}),(0,a.jsx)("span",{children:"has been confirmed!"})]})]}),(0,a.jsxs)(i.ModalContent,{className:"flex flex-col gap-3",children:[(0,a.jsx)(n.$,{className:"h-fit p-0 text-left",variant:"secondary",children:(0,a.jsxs)("a",{className:"flex w-full items-center justify-between gap-3 p-3 pr-[14px] text-gray-500",target:"_blank",href:s?"https://vercel.com/".concat(s,"/~/settings/members"):"https://vercel.com",children:[(0,a.jsxs)("div",{className:"flex h-fit flex-col text-sm",children:[(0,a.jsx)("b",{className:"font-medium text-gray-900",children:"Manage Members"}),(0,a.jsx)("p",{className:"font-normal",children:"Add more members to your team on Vercel."})]}),(0,a.jsx)(d.i,{})]})}),(0,a.jsxs)(n.$,{className:"flex h-fit w-full items-center justify-between gap-3 p-3 pr-[14px] text-left text-gray-500",variant:"secondary",onClick:()=>b(!0),disabled:y,children:[(0,a.jsxs)("div",{className:"flex h-fit flex-col text-sm",children:[(0,a.jsx)("b",{className:"font-medium text-gray-900",children:y?"Premium Cancelled":"Cancel Premium Plan"}),(0,a.jsx)("p",{className:"font-normal",children:y?"Your Premium plan was canceled.":"Would you like to cancel your existing Premium plan?"})]}),y?(0,a.jsx)(o.a,{}):(0,a.jsx)(c.c,{})]})]}),(0,a.jsx)(i.ModalFooter,{children:(0,a.jsx)(n.$,{size:"sm",onClick:S,variant:"default",children:"Start Building"})})]})}},52033:(e,t,s)=>{"use strict";s.d(t,{f:()=>o});var a=s(54857),l=s(8066),n=s(7394),i=s.n(n),r=s(73927);function o(e){let{href:t,...s}=e,n=(0,r.useRouter)();return(0,a.jsx)(i(),{...s,href:t,onMouseEnter:()=>{n.prefetch(t,{kind:l.PrefetchKind.FULL})},onTouchStart:()=>{n.prefetch(t,{kind:l.PrefetchKind.FULL})},prefetch:!0})}s(96541)},65186:(e,t,s)=>{"use strict";s.d(t,{f:()=>v});var a=s(54857),l=s(96541),n=s(55315),i=s(10373),r=s(77184),o=s(73927),c=s(63558),d=s(68952),u=s(67605);let m=(0,u.createServerReference)("700fd8cad1cbf6bafa09eed482fcebe8b0ae8bb0fd",u.callServer,void 0,u.findSourceMapURL,"updateProjectSettingsInstructions");var h=s(43393),x=s(77170),p=s(82219),f=s(50735),g=s(71368),j=s(95360);function v(e){let{readOnly:t,projectId:s,initialInstructions:u,textAreaMinHeight:v,buttonVariant:b}=e,{activeScopeSlug:y}=(0,h.k6)(),{updateInstructions:w}=(0,j.kL)(s,u),[N,k]=(0,l.useState)(u),[C,S]=(0,l.useState)(!1),M=(0,o.useRouter)(),[I,R]=(0,l.useState)(!1),z=(0,g.k)("projectInstructions"),L=(0,l.useCallback)(async e=>{if(e&&e.preventDefault(),!t){S(!0);try{let e=await m(s,N,y);if(!0===e)w({instructions:N}),r.oR.success("Project Instructions updated"),R(!0),setTimeout(()=>R(!1),1e3),M.refresh();else throw Error(e.error)}catch(e){(0,x.z)(e,M,"An error occurred while updating instructions")||r.oR.error("Error",{description:"An error occurred while updating instructions."})}finally{S(!1)}}},[t,s,N,y,w,M]),{formRef:A,onKeyDown:T}=(0,c.w)({submitMessage:L,localFileInfos:[]});return(0,a.jsx)(n.Zp,{className:"bg-background flex flex-col border-0 shadow-none",children:(0,a.jsx)("form",{className:"flex flex-1 flex-col",onSubmit:L,ref:A,children:(0,a.jsxs)(n.Wu,{className:"flex flex-1 flex-col gap-3 p-0",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,a.jsx)("div",{className:"flex flex-1 flex-col",children:(0,a.jsx)(f.T,{asChild:!0,children:(0,a.jsx)(p.o,{className:"!pointer-events-auto max-h-96 resize-y transition-colors",disabled:t,id:"instructions",maxLength:5e3,minHeight:v,onChange:e=>k(e.target.value),onKeyDown:T,placeholder:z("placeholder"),value:N})})}),(0,a.jsx)(d.j,{count:N.length,max:5e3,message:"For larger context, consider using sources.",messageThreshold:5e3})]}),(0,a.jsx)(i.Q,{className:"ml-auto w-full","data-testid":"save-instructions-button",disabled:I||t||N===u||C,pending:C,variant:b,children:z("save")})]})})})}},92866:(e,t,s)=>{"use strict";s.d(t,{_d:()=>p,qn:()=>x,vn:()=>f});var a=s(54857),l=s(96541),n=s(3316),i=s(16617),r=s(80612),o=s(8594),c=s(7394),d=s.n(c),u=s(4538),m=s(47747),h=s(62300);function x(){let{data:e,mutate:t}=(0,r.Ay)("templateCreatedDialogOpen",null,{fallbackData:!1});return{templateCreatedDialogOpen:e,setTemplateCreatedDialogOpen:t}}function p(){let{data:e,mutate:t}=(0,r.Ay)("templateCreatedInfo",null,{fallbackData:null});return{templateCreatedInfo:e,setTemplateCreatedInfo:t}}function f(e){var t,s;let{activeBlock:r}=e,{setTemplateEditDialogOpen:c}=(0,h.I)(),{templateCreatedInfo:f}=p(),{templateCreatedDialogOpen:g,setTemplateCreatedDialogOpen:j}=x(),[v]=l.useTransition(),b=l.useMemo(()=>{var e;return"".concat(window.location.origin,"/chat/t/").concat((0,m.D)(null!==(e=r.templateCanonId)&&void 0!==e?e:"",r.meta.project||r.meta.title))},[r]),y=f?(0,a.jsxs)(d(),{href:b,target:"_blank",className:"group relative flex flex-col items-stretch overflow-hidden rounded-md border text-sm",children:[(0,a.jsxs)("div",{className:"bg-muted pointer-events-none relative aspect-[2/1] overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-t from-[hsla(0,0%,100%,0.3)] to-[hsla(0,0%,40%,0.3)] opacity-0 transition-opacity group-hover:opacity-100",children:(0,a.jsx)(i.$,{size:"sm",children:"View Template"})}),(0,a.jsx)(u.TemplateImage,{showScreenshotMessage:!0,src:f.imageUrl,templateCanonId:r.templateCanonId})]}),(0,a.jsxs)("div",{className:"border-alpha-200 flex flex-col gap-1 border-t px-4 py-3",children:[(0,a.jsx)("p",{className:"font-medium",children:f.title}),(0,a.jsx)("p",{className:"line-clamp-1 truncate text-gray-500",children:f.description})]})]}):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Modal,{open:g,onOpenChange:j,onInteractOutside:e=>{v&&e.preventDefault()},className:"flex flex-col md:max-h-[90vh]",children:[(0,a.jsxs)(n.ModalHeader,{children:[(0,a.jsx)(n.ModalTitle,{children:(0,a.jsx)("span",{children:"Template Created"})}),(0,a.jsx)(n.ModalDescription,{children:(0,a.jsx)("span",{children:"Copy the link below to share this template."})})]}),(0,a.jsxs)(n.ModalContent,{className:"flex flex-col gap-4",children:[y,(0,a.jsx)(o.o,{link:b,type:"button"})]}),(0,a.jsxs)("div",{className:"bg-muted border-alpha-400 sticky bottom-0 flex w-full items-center justify-end gap-2 border-t p-4",children:[(0,a.jsx)(i.$,{className:"mr-auto",onClick:()=>{j(!1),setTimeout(()=>void c(!0),100)},disabled:v,variant:"ghost",size:"sm",children:(0,a.jsx)("span",{children:"Edit Template"})}),(0,a.jsx)(i.$,{asChild:!0,disabled:v,variant:"secondary",size:"sm",children:(0,a.jsx)(d(),{href:b,target:"_blank",children:"View Template"})}),(0,a.jsx)(n.ModalClose,{asChild:!0,children:(0,a.jsx)(i.$,{size:"sm",disabled:v,children:"Done"})})]})]}),(0,a.jsx)(h.TemplateEditDialog,{templateCanonId:r.templateCanonId,blockId:r.id,title:null!==(t=null==f?void 0:f.title)&&void 0!==t?t:"",description:null!==(s=null==f?void 0:f.description)&&void 0!==s?s:void 0,imageUrl:null,shouldReturnToCreatedDialog:!0,activeBlock:r})]})}},62300:(e,t,s)=>{"use strict";s.d(t,{TemplateEditButton:()=>P,TemplateEditDialog:()=>F,I:()=>T});var a=s(54857),l=s(96541),n=s(3316),i=s(16617),r=s(86287),o=s(15893),c=s(71368),d=s(80612),u=s(67605);let m=(0,u.createServerReference)("40a4b50da9782f97c79b98b5df0f47a76313d934fe",u.callServer,void 0,u.findSourceMapURL,"uploadAssetAction");var h=s(77184);let x=["png","jpg","jpeg","webp"],p=e=>{let t=l.useRef(null),[s,a]=l.useState(!1),[n,i]=l.useState(!1),[r,o]=l.useState(()=>{var t;return null!==(t=null==e?void 0:e.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))&&void 0!==t?t:[]}),c=l.useCallback(e=>{o(e.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))},[]),d=l.useCallback(async e=>{if(r.length+e.length>1)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),h.oR.error("File limit exceeded",{description:"You can only upload up to ".concat(1," images.")});if(e.find(e=>{var t;let s=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return!s||!x.includes(s)}))return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),h.oR.error("Invalid file type",{description:"Allowed file types: ".concat(x.join(", "))});let t=e.find(e=>e.size>1048576);if(t)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),h.oR.error("File too large",{description:"The file ".concat(t.name," is larger than ").concat("1 MB",".")});a(!0);let s=e.map(e=>({id:crypto.randomUUID(),file:e,status:"pending",url:URL.createObjectURL(e),size:e.size}));for(let e of(o(e=>[...e,...s]),s)){o(t=>t.map(t=>t.id===e.id?{...t,status:"uploading"}:t));try{let t=new FormData;t.append("file",e.file,e.file.name);let s=await m(t);if(s.error){o(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:s.error}:t)),h.oR.error("Failed to upload file",{description:s.error});continue}let a=s.url;o(t=>t.map(t=>t.id===e.id?{...t,status:"success",url:a}:t))}catch(t){o(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:"Upload failed"}:t))}}a(!1)},[r.length]),u=l.useCallback(async e=>{if(i(!1),s||(e.preventDefault(),e.stopPropagation(),!e.dataTransfer))return;let{files:t}=e.dataTransfer;f(t)&&await d(Array.from(t))},[d,s]);l.useEffect(()=>{let e=()=>i(!0),t=()=>i(!1),s=e=>{e.preventDefault(),e.stopPropagation()};return window.addEventListener("dragenter",e),document.documentElement.addEventListener("mouseleave",t),window.addEventListener("dragover",s),window.addEventListener("drop",u),()=>{window.removeEventListener("dragenter",e),document.documentElement.removeEventListener("mouseleave",t),window.removeEventListener("dragover",s),window.removeEventListener("drop",u)}},[u,d]);let p=async e=>{f(e.target.files)&&e.target.files&&await d(Array.from(e.target.files))},g=l.useCallback(e=>{o(t=>{let s=t.find(t=>t.id===e);return(null==s?void 0:s.url)&&URL.revokeObjectURL(s.url),t.filter(t=>t.id!==e)})},[]);return{files:r,setFiles:o,setInitialFiles:c,uploading:s,isDraggingFile:n,inputFileRef:t,onInputChange:p,removeFile:g}};function f(e){if(!(null==e?void 0:e.length))return!1;if(e.length>1)return h.oR.error("File limit exceeded",{description:"You can only upload up to ".concat(1," images at a time.")}),!1;for(let t of e)if(!t.type.startsWith("image/"))return h.oR.error("Invalid file type",{description:"Please upload image files only"}),!1;return!0}l.createContext({hasUploadedFile:!1,isUploadingFile:!1});var g=s(50735);let j=(0,u.createServerReference)("601aeb6fafa12cd72d431553ad85e412081b50153b",u.callServer,void 0,u.findSourceMapURL,"editTemplateAction"),v=(0,u.createServerReference)("6045d9c83c9f366b15b52328b48e242b6f72f7e454",u.callServer,void 0,u.findSourceMapURL,"deleteTemplateAction");var b=s(43393),y=s(82219),w=s(10373),N=s(73927),k=s(31096),C=s(37622),S=s(92866),M=s(76236),I=s(43706),R=s(60730),z=s(79089),L=s(4538),A=s(77700);function T(){let{data:e,mutate:t}=(0,d.Ay)("templateEditDialogOpen",null,{fallbackData:!1});return{templateEditDialogOpen:e,setTemplateEditDialogOpen:t}}function P(){let{setTemplateEditDialogOpen:e}=T();return(0,a.jsx)(i.$,{onClick:()=>e(!0),size:"sm",tooltip:"Settings",variant:"secondary",children:(0,a.jsx)(A.H,{})})}function F(e){let{templateCanonId:t,blockId:s,title:d,description:u,imageUrl:m,shouldReturnToCreatedDialog:x=!1,activeBlock:f}=e,{templateEditDialogOpen:k,setTemplateEditDialogOpen:C}=T(),{setTemplateCreatedDialogOpen:A}=(0,S.qn)(),P=(0,c.k)("templateShareDialog"),[F,E]=l.useTransition(),{files:O,setFiles:U,setInitialFiles:_,uploading:B,removeFile:V,inputFileRef:$,onInputChange:H}=p(m?[{url:m,name:"Current Image"}]:[]),{activeScopeSlug:Z}=(0,b.k6)(),[K,J]=(0,l.useState)({title:d,description:u}),W=(0,N.useRouter)(),q=(0,M.y6)(),{setTemplateCreatedInfo:Y}=(0,S._d)(),[G,Q]=(0,l.useState)(null===m);l.useEffect(()=>{k||setTimeout(()=>{Q(null===m),_(m?[{url:m,name:"Current Image"}]:[]),J({title:d,description:u})},500)},[O,V,U,_,C,k,d,u,m,Q]);let X=(0,l.useCallback)(()=>{E(async()=>{var e,t,a;let l=await j({...K,blockId:s,imageUrl:null!==(t=null===(e=O[0])||void 0===e?void 0:e.url)&&void 0!==t?t:null},Z);if(l.error){h.oR.error(l.error);return}W.refresh(),h.oR.success("Template updated"),C(!1),x&&(await Y({title:K.title,description:K.description,imageUrl:(null===(a=O[0])||void 0===a?void 0:a.url)||m||void 0}),setTimeout(()=>void A(!0),100))})},[Z,O,W,C,A,x,s,m,K,Y]),ee=l.useCallback(()=>{E(async()=>{let e=await v(s,Z);if(e.error){h.oR.error(e.error);return}h.oR.success("Template deleted"),await C(!1),x?setTimeout(()=>{f&&q({...f,templateCanonId:void 0,templateVersionId:void 0})},500):W.push("/chat/templates")})},[Z,W,C,s,f,q,x]),et=(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)(o.Label,{htmlFor:"title",className:"flex items-center gap-0.5 font-medium text-gray-900",children:[P("modalNameLabel"),(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(r.p,{autoComplete:"off",disabled:F,id:"title",maxLength:32,minLength:2,name:"title",onChange:e=>J(t=>({...t,title:e.target.value})),value:K.title,placeholder:P("modalNamePlaceholder"),required:!0,spellCheck:!1})]}),es=(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(o.Label,{htmlFor:"description",className:"font-medium text-gray-900",children:P("modalDescriptionLabel")}),(0,a.jsx)(g.T,{asChild:!0,children:(0,a.jsx)(y.o,{className:"resize-y transition-colors",maxHeight:192,minHeight:80,autoComplete:"off",disabled:F,id:"description",maxLength:280,name:"description",placeholder:P("modalDescriptionPlaceholder"),spellCheck:!1,onChange:e=>J(t=>({...t,description:e.target.value})),value:K.description||""})})]}),ea=(0,a.jsxs)("fieldset",{className:"flex flex-col items-start gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("legend",{className:"flex items-center gap-0.5 text-sm font-medium",children:P("modalImageLabel")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:P("modalImageDescription")})]}),(0,a.jsx)("div",{className:"h-32 w-full",children:O.length||G?(0,a.jsxs)("div",{className:"flex h-full w-44 flex-col gap-2",children:[(0,a.jsx)("div",{className:"bg-muted relative flex-1 overflow-hidden rounded-md border",children:G?(0,a.jsx)("div",{className:"pointer-events-none aspect-video",children:(0,a.jsx)(L.TemplateImage,{templateCanonId:t,alt:"Template Preview",src:void 0})}):(0,a.jsx)("div",{className:"pointer-events-none aspect-video data-[status=uploading]:opacity-50","data-status":O[0].status,children:(0,a.jsx)(L.TemplateImage,{alt:O[0].file.name,src:O[0].url,templateCanonId:t})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 text-sm font-medium",children:[(0,a.jsx)("div",{className:"min-w-0 flex-1 contain-inline-size",children:(0,a.jsx)("div",{className:"line-clamp-1 w-full break-all",children:G?(0,a.jsx)("span",{children:"Current Image"}):(0,a.jsx)("span",{children:O[0].file.name})})}),(0,a.jsxs)(I.rI,{children:[(0,a.jsx)(I.ty,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"xs",className:"size-6 rounded-md p-0",children:(0,a.jsx)(R.A,{className:"size-4"})})}),(0,a.jsx)(I.SQ,{align:"start",children:(0,a.jsx)(I.I,{children:(0,a.jsxs)(I._2,{onClick:()=>G?Q(!1):V(O[0].id),variant:"destructive",children:[(0,a.jsx)(z.l,{}),(0,a.jsx)("span",{children:"Remove Image"})]})})})]})]})]}):(0,a.jsxs)("label",{className:"hover:bg-muted data-[dragging=true]:bg-muted flex size-full cursor-pointer flex-col gap-1 rounded-md border border-dashed p-4 transition-colors duration-200",children:[(0,a.jsx)("div",{className:"pointer-events-none flex min-h-24 flex-col items-center justify-center text-sm",children:(0,a.jsx)("div",{className:"text-gray-500",children:P("modalImagePlaceholder")})}),(0,a.jsx)("input",{accept:"image/*",className:"sr-only",max:1,type:"file",onChange:H,ref:$})]})})]}),el=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.$,{className:"mr-auto",onClick:ee,disabled:F||B,variant:"ghost",size:"sm",children:(0,a.jsx)("span",{children:"Delete Template"})}),(0,a.jsx)(n.ModalClose,{asChild:!0,children:(0,a.jsx)(i.$,{size:"sm",variant:"secondary",disabled:F||B,onClick:()=>{C(!1),x&&setTimeout(()=>void A(!0),100)},children:P("modalCancelButton")})}),(0,a.jsx)(w.Q,{onClick:X,size:"sm",pending:F||B,children:(0,a.jsx)("span",{children:"Update Template"})})]});return(0,a.jsxs)(n.Modal,{open:k,onOpenChange:C,onInteractOutside:e=>{(F||B)&&e.preventDefault()},className:"flex flex-col md:max-h-[90vh]",children:[(0,a.jsxs)(n.ModalHeader,{children:[(0,a.jsx)(n.ModalTitle,{children:(0,a.jsx)("span",{children:"Edit Template"})}),(0,a.jsx)(n.ModalDescription,{children:(0,a.jsx)("span",{children:"Edit the details of this template."})})]}),(0,a.jsxs)(D,{children:[et,es,ea]}),(0,a.jsx)("div",{className:"bg-muted border-alpha-400 sticky bottom-0 flex w-full items-center justify-end gap-2 border-t p-4 pl-3",children:el})]})}function D(e){let{children:t}=e,{showTopBorder:s,containerRef:l,topRef:i,bottomRef:r}=(0,k.Y)();return(0,a.jsx)(n.ModalContent,{ref:l,className:(0,C.cn)("flex flex-col overflow-y-auto border-t border-transparent transition-[border-color]",s&&"border-gray-200"),children:(0,a.jsxs)("div",{className:"relative flex h-fit w-full flex-col gap-4",children:[(0,a.jsx)("div",{ref:i,className:"absolute inset-x-0 top-0 h-px w-full"}),t,(0,a.jsx)("div",{ref:r,className:"absolute inset-x-0 bottom-0 h-px w-full"})]})})}},61587:(e,t,s)=>{"use strict";s.d(t,{Kn:()=>o,Sl:()=>d,rc:()=>c});var a=s(54857),l=s(96541),n=s(37622),i=s(16617),r=s(8990);let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("bg-background flex w-fit items-center gap-1 rounded-[10px] p-1 shadow-sm",s),ref:t,...l})});o.displayName="ActionGroup";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.$,{className:(0,n.cn)("hover:bg-alpha-200 focus:bg-alpha-200 focus-visible:bg-alpha-200 h-6 min-w-6 rounded-md px-1 text-sm text-gray-500 hover:text-gray-900 focus:text-gray-900 focus-visible:text-gray-900 has-[>kbd]:gap-[6px] has-[>svg]:px-1",s),ref:t,size:"xs",variant:"ghost",...l})});c.displayName="Action";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.Separator,{className:(0,n.cn)("bg-alpha-400 h-5 w-px",s),ref:t,...l})});d.displayName="ActionSeparator"},52338:(e,t,s)=>{"use strict";s.d(t,{BE:()=>h,I6:()=>p,Uz:()=>o,_s:()=>r,cp:()=>d,gk:()=>x,zj:()=>m});var a=s(54857),l=s(37622),n=s(96541),i=s(65639);let r=e=>{let{shouldScaleBackground:t=!0,...s}=e;return(0,a.jsx)(i._s.Root,{shouldScaleBackground:t,...s})};r.displayName="Drawer";let o=i._s.Trigger,c=i._s.Portal,d=i._s.Close,u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i._s.Overlay,{className:(0,l.cn)("bg-alpha-700 dark:bg-alpha-900 fixed inset-0 z-50",s),ref:t,...n})});u.displayName=i._s.Overlay.displayName;let m=n.forwardRef((e,t)=>{let{className:s,hideThumb:n,children:r,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(i._s.Content,{className:(0,l.cn)("bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-[96%] flex-col gap-2 rounded-t-[10px] p-2 shadow-[0_0_0_1px_hsl(var(--alpha-400))] outline-none",s),ref:t,...o,children:[!n&&(0,a.jsx)("div",{className:"bg-alpha-400 mx-auto mt-4 h-2 w-[100px] rounded-full"}),r]})]})});m.displayName="DrawerContent";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...s})};h.displayName="DrawerHeader";let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i._s.Title,{className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),ref:t,...n})});x.displayName=i._s.Title.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i._s.Description,{className:(0,l.cn)("text-muted-foreground text-sm",s),ref:t,...n})});p.displayName=i._s.Description.displayName},9841:(e,t,s)=>{"use strict";s.d(t,{Switch:()=>r});var a=s(54857),l=s(96541),n=s(19142),i=s(37622);let r=l.forwardRef((e,t)=>{let{className:s,thumbClassName:l,...r}=e;return(0,a.jsx)(n.bL,{className:(0,i.cn)("focus-visible:ring-offset-background peer inline-flex h-4 w-8 shrink-0 cursor-pointer items-center rounded-full border outline-none ring-blue-600 transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:border-blue-600 data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-gray-100",s),...r,ref:t,children:(0,a.jsx)(n.zi,{className:(0,i.cn)("bg-background pointer-events-none block size-[calc(theme(spacing.4)_-2px)] rounded-full shadow-sm ring-0 transition-transform data-[state=checked]:translate-x-[theme(spacing.4)] data-[state=unchecked]:translate-x-0 dark:bg-black",l)})})});r.displayName=n.bL.displayName},70777:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var a=s(80612),l=s(96541),n=s(62841),i=s(77184),r=s(67605);let o=(0,r.createServerReference)("40ad6d35d727eaf0dd6f358ee6d42d456f6e1eb1b3",r.callServer,void 0,r.findSourceMapURL,"updateBlockCrawling");function c(){let{chatId:e}=(0,n.xz)(),{data:t,mutate:s}=(0,a.Ay)(["unlisted-blocks",e],{fallbackData:new Map}),r=(0,l.useCallback)(e=>{var s;return null!==(s=null==t?void 0:t.get(e))&&void 0!==s&&s},[t]),[c,d]=(0,l.useTransition)();return{getUnlistedBlocks:r,setBlockAsUnlisted:(0,l.useCallback)((e,a)=>{d(()=>{try{o({blockId:e,allowCrawling:!1===a}),s(new Map(null==t?void 0:t.set(e,a)))}catch(e){(0,i.oR)("Failed to update block crawling")}})},[t,s]),isPending:c}}},23868:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>r,wL:()=>u});var a=s(54857),l=s(96541),n=s(53317);let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("overflow-hidden rounded-lg border bg-white shadow-sm",s),ref:t,...l})});i.displayName="Card";let r=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),ref:t,...l})});r.displayName="CardHeader",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("mb-4 flex h-8 w-8 items-center justify-center rounded-lg border bg-white [&>svg]:size-4",s),ref:t,...l})}).displayName="CardIcon";let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h3",{className:(0,n.cn)("whitespace-nowrap font-semibold leading-none tracking-tight",s),ref:t,...l})});o.displayName="CardTitle";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{className:(0,n.cn)("text-sm text-muted-foreground",s),ref:t,...l})});c.displayName="CardDescription";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("p-6 pt-0",s),ref:t,...l})});d.displayName="CardContent";let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)(" flex items-center p-6 pt-0",s),ref:t,...l})});u.displayName="CardFooter"},66532:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var a=s(54857),l=s(96541),n=s(27029),i=s(99751),r=s(53317);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(n.b,{className:(0,r.cn)(o(),s),ref:t,...l})});c.displayName=n.b.displayName},59493:(e,t,s)=>{"use strict";s.d(t,{AM:()=>r,Wv:()=>o,hl:()=>c});var a=s(54857),l=s(96541),n=s(97726),i=s(53317);let r=n.bL,o=n.l9;n.bm;let c=l.forwardRef((e,t)=>{let{className:s,align:l="center",sideOffset:r=4,...o}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{align:l,className:(0,i.cn)("z-50 w-72 rounded-xl bg-white p-4 text-popover-foreground shadow-[shadow:var(--ds-shadow-menu)] outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),ref:t,sideOffset:r,...o})})});c.displayName=n.UC.displayName,n.Mz},50490:(e,t,s)=>{"use strict";s.d(t,{bq:()=>d,eb:()=>m,gC:()=>u,l6:()=>o,yv:()=>c});var a=s(54857),l=s(96541),n=s(20788),i=s(54148),r=s(53317);let o=i.bL;i.YJ;let c=i.WT;i.In,i.q7,i.p4;let d=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsx)(i.l9,{className:(0,r.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n,children:l})});d.displayName=i.l9.displayName;let u=l.forwardRef((e,t)=>{let{className:s,children:n,position:o="popper",portal:c=!0,...d}=e,u=c?i.ZL:l.Fragment;return(0,a.jsx)(u,{children:(0,a.jsx)(i.UC,{className:(0,r.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,ref:t,...d,children:(0,a.jsx)(i.LM,{className:(0,r.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})});u.displayName=i.UC.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.JU,{className:(0,r.cn)("px-2 py-1.5 text-sm font-semibold",s),ref:t,...l})}).displayName=i.JU.displayName;let m=l.forwardRef((e,t)=>{let{className:s,children:l,...o}=e;return(0,a.jsxs)(i.q7,{className:(0,r.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),ref:t,...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(n.Srz,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:l})]})});m.displayName=i.q7.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(i.wv,{className:(0,r.cn)("-mx-1 my-1 h-px bg-muted",s),ref:t,...l})}).displayName=i.wv.displayName},47016:(e,t,s)=>{"use strict";s.d(t,{G:()=>l});var a=s(96541);function l(){return function(e){let t=(0,a.useRef)(null);return{formRef:t,onKeyDown:s=>{let a=s.currentTarget.value.trim();if(e(s)&&a.length>0){var l;null===(l=t.current)||void 0===l||l.requestSubmit(),s.preventDefault()}}}}(e=>"Enter"===e.key&&(e.ctrlKey||e.metaKey))}s(37180)},77300:e=>{e.exports={vPath:"animations_vPath__Hi2pJ",followpath:"animations_followpath__jlvxj","pulse-fade":"animations_pulse-fade__nTcZn",oPath:"animations_oPath__Rvk9R",dashed:"animations_dashed__McJPI"}},89793:(e,t,s)=>{"use strict";s.d(t,{B:()=>l});var a=s(67605);let l=(0,a.createServerReference)("40f4bd9a11d43f0434cb69fd99fda0978c4b41eadc",a.callServer,void 0,a.findSourceMapURL,"exportMessages")}}]);
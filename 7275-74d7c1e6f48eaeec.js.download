(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7275],{580:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var l=r(54857),s=r(81580),n=r(40427);function a(e){return(0,l.jsx)(s.Dp,{variants:{hover:{rotate:60},tap:{rotate:360,interruptible:!1,transition:{duration:1,ease:[.27,.34,.22,.97]}},idle:{rotate:0}},children:(0,l.jsx)(n.g,{"aria-hidden":!0,...e})})}r(96541)},24648:(e,t,r)=>{"use strict";r.d(t,{DataProvider:()=>a,Q:()=>i});var l=r(54857),s=r(96541);let n=(0,s.createContext)({});function a(e){let{children:t}=e;return(0,l.jsx)(n.Provider,{value:{},children:t})}function i(){return(0,s.use)(n)}},78879:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SWRDataProvider:()=>o});var l=r(54857),s=r(96541),n=r(56847),a=r(80612);let i=new WeakMap;function o(e){let{children:t,data:r}=e,{mutate:o}=(0,n.iX)(),c=(0,s.useRef)(r),[d,u]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=!1;return(0,s.startTransition)(()=>{for(let t in c.current={...c.current},r){let l=r[t];if(l instanceof Promise&&i.has(l)&&(l=i.get(l)),l instanceof Promise){l.then(r=>{i.set(l,r),e||r===c.current[t]&&0!==d||(c.current[t]=r,o(t,Promise.resolve(r),!1))});continue}(l!==c.current[t]||0===d)&&(c.current[t]=l,o(t,Promise.resolve(l),!1))}for(let e in c)e in r||(delete c.current[e],o(e,Promise.resolve(void 0),!1));u(d+1)}),()=>{e=!0}},[r,o]),(0,l.jsx)(a.BE,{value:{fallback:function(e){let t={};for(let r in e){let l=e[r];l&&"object"==typeof l&&"function"==typeof l.then?t[r]=void 0:t[r]=l}return t}(c.current)},children:t})}},36930:(e,t,r)=>{"use strict";r.d(t,{ErrorComponent:()=>i});var l=r(54857),s=r(38651),n=r(71857),a=r(96541);function i(e){let{error:t}=e;(0,a.useEffect)(()=>{(0,s.u)("ErrorBoundaryError",{message:t.message,stack:t.stack,digest:t.digest,cause:t.cause,name:t.name})},[t]);let r=t.message.includes("#482");return(0,l.jsx)("div",{className:"mx-auto flex h-full max-w-2xl items-center justify-center px-4 text-lg font-medium text-red-600 md:text-xl lg:text-2xl",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-red-600",children:[(0,l.jsx)("div",{className:"border-border bg-background flex size-8 items-center justify-center rounded-sm border p-2",children:(0,l.jsx)(n.V,{})}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,l.jsxs)("h1",{className:"text-base font-medium",id:"error",children:["An Error Occurred"," "]}),t.message?(0,l.jsx)("h2",{className:"text-center text-sm font-normal text-gray-500",children:(0,l.jsx)("code",{className:"tracking-tight",children:t.message})}):null,r?(0,l.jsx)("h2",{className:"text-center text-sm font-normal text-gray-500",children:"This error is likely caused by a bug with your browser extensions. Please try disabling extensions and programs that modify the page."}):null]})]})})}},87023:(e,t,r)=>{"use strict";r.d(t,{ForkBlockButton:()=>N});var l=r(54857),s=r(96541),n=r(38651),a=r(16617),i=r(83078),o=r(67605);let c=(0,o.createServerReference)("607649e2f40fb41fb4a6c6a4a9faee5f1684c3828c",o.callServer,void 0,o.findSourceMapURL,"forkBlock");var d=r(77184),u=r(77170),m=r(44658),f=r(37622),p=r(90229),h=r(73927),x=r(90761),v=r(62841),g=r(71368),b=r(43393),j=r(79160),w=r(60346),y=r(43706);function N(e){let{blockId:t,forkCount:r,className:o,page:N,isAuthor:k,isMenuItem:P=!1}=e,{expectUser:E}=(0,w.J)(),{user:T,activeScopeSlug:R}=(0,b.k6)(),{authorId:S}=(0,x.tZ)(),{setShowSignInDialog:_}=(0,j.AO)(),C=(0,s.useMemo)(()=>k||(null==T?void 0:T.id)===S,[k,null==T?void 0:T.id,S]),I=(0,h.useRouter)(),[U,O]=(0,s.useTransition)(),{isStreaming:A}=(0,v.Pk)(),D=(0,g.k)("forkBlockButton"),L=(0,s.useCallback)(e=>{e.preventDefault();let r=new URLSearchParams;r.set("forkBlockId",t);let l="http://localhost:3000/chat";l="https://v0.dev/chat";let s="".concat(l,"?").concat(r.toString());if(!E)return _({prompt:!1,forkBlockId:t});(0,n.u)("ClickForkBlock");try{O(async()=>{if("chat"===N){let e=await c(t,R);if(!e||"string"!=typeof e){d.oR.error(D("errorToast"));return}I.push("/chat/".concat(e))}if(d.oR.success(D("successToast")),"block"===N){var e;null===(e=window.open(s,"_blank"))||void 0===e||e.focus()}})}catch(e){(0,h.unstable_rethrow)(e),console.log(e),(0,u.z)(e)||d.oR.error(D("errorToast"))}},[E,_,N,D,t,R,I]),z=null;z="block"===N?"secondary":C?"ghost":"secondary";let F="block"===N||!C,M=U?(0,l.jsx)(p.y,{className:"!size-4 text-gray-500",size:16}):(0,l.jsx)(i.Z,{className:"!size-4"});return P?(0,l.jsxs)(y._2,{disabled:U||A,onClick:L,children:[M,(0,l.jsx)("span",{children:D("fork")})]}):(0,l.jsxs)(a.$,{className:(0,f.cn)("group rounded-md",r&&"md:has-[>svg]:pr-2","ghost"===z?"size-7":"h-7",o),disabled:U||A,onClick:L,tooltip:F?void 0:D("fork"),size:"sm",variant:z,children:[U?(0,l.jsx)(p.y,{className:"!size-3.5 text-gray-500 md:!size-4",size:16}):(0,l.jsx)(i.Z,{className:"!size-3.5 md:!size-4"}),F?D("fork"):null,r?(0,l.jsx)(m.E,{className:"bg-gray-150 hidden min-w-5 border-0 text-gray-500 group-hover:bg-gray-300 group-hover:text-gray-600 md:flex",size:"sm",variant:"secondary",children:(0,l.jsx)("span",{className:"translate-y-[0.5px]",children:r})}):null]})}},91434:(e,t,r)=>{"use strict";r.d(t,{FullscreenContainer:()=>d});var l=r(54857),s=r(47165),n=r(37622),a=r(90509),i=r(97682),o=r(32192),c=r(71368);function d(e){let{children:t,allowOnMobile:r}=e,{fullScreenResult:d,setFullscreenResult:u,source:m}=(0,s.S)(),f=(0,o.$)();(0,c.k)("fullScreenContainer");let p=d&&(r||!f);(0,a.ML)("keydown",e=>{"Escape"===e.key&&u(!1)});let h=e=>{if(!e){u(!1);return}e.target===e.currentTarget&&u(!1)},x=(0,l.jsx)("div",{className:(0,n.cn)(p?"fixed inset-0":"size-full",p&&"ssr"!==m&&"animate-in zoom-in-90"),children:(0,l.jsx)("div",{className:"bg-background size-full !overflow-clip",children:t})}),v=(0,n.cn)(p?"bg-alpha-700 dark:bg-alpha-900 fixed inset-0 z-[60]":"h-full w-full",p&&"ssr"!==m&&"animate-in fade-in duration-300");return"ssr"===m?(0,l.jsx)("div",{"data-testid":"fullscreen-overlay",className:v,onClick:h,children:x}):(0,l.jsx)(i.P.div,{"data-testid":"fullscreen-overlay",className:v,onClick:h,children:x})}},35732:(e,t,r)=>{"use strict";r.d(t,{P:()=>f,c:()=>m});var l=r(54857),s=r(2005),n=r(52548),a=r(57045),i=r(52381),o=r(96541),c=r(37622),d=r(24415),u=r(21731);let m=o.memo(function(e){var t;let{children:r,...s}=e;return r.length>1e4?(0,l.jsx)("p",{children:r}):(0,l.jsx)(n.o,{remarkPlugins:[u.QZ],...s,components:{pre:e=>(0,l.jsx)("pre",{...e,className:"bg-background border-alpha-400 text-foreground rounded-lg border p-2 px-[0.25rem] py-[0.15rem] font-mono text-xs font-normal [&_code]:border-none [&_code]:bg-transparent"}),code:e=>{let{children:t,...r}=e;return"string"==typeof t&&(0,u.TN)(t)?(0,l.jsx)(u.br,{value:t}):(0,l.jsx)("code",{...r,className:"rounded-[0.375rem] border bg-gray-100 px-[0.25rem] py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",children:t})},...null!==(t=s.components)&&void 0!==t?t:{}},children:r})});function f(e){var t;let{message:r,className:n,isLastMessage:o=!1}=e,u=(0,s.B)(r);return"string"==typeof r.content?(0,l.jsx)(i.s,{className:(0,c.cn)("w-full",n),children:(0,l.jsx)(m,{children:r.content})},u):(0,d.Ne)(r)?null:(0,l.jsx)("div",{className:(0,c.cn)("flex-1 text-sm",n),children:(0,l.jsx)(a.A4,{isLastMessage:o,messageId:u,role:r.role,rows:null!==(t=r.content)&&void 0!==t?t:[],streaming:r.streaming})},u)}},32511:(e,t,r)=>{"use strict";r.d(t,{JS:()=>i,Yv:()=>o,wb:()=>a});var l=r(54857),s=r(37622),n=r(26970);function a(e){let{tabs:t,activeTabKey:r,setActiveTabKey:s,disableOverflow:n=!1,isLoading:a}=e;return(0,l.jsxs)("div",{className:"relative flex w-fit min-w-0 flex-1 items-center gap-2 overflow-x-auto",children:[t.map(e=>(0,l.jsx)(c,{active:e.key===r,onClick:()=>s(e.key),disabled:e.disabled,tooltip:e.tooltip,isLoading:a,children:e.display},e.key)),!n&&(0,l.jsx)("div",{className:"from-muted pointer-events-none sticky -right-2 z-10 h-full min-w-8 bg-gradient-to-l via-80% bg-blend-lighten",style:{backgroundImage:"linear-gradient(to left, var(--tw-gradient-stops))"}})]})}function i(e){let{className:t,tabFiles:r,activeTabKey:n}=e;return(0,l.jsx)("div",{className:(0,s.cn)("relative size-full min-h-0 flex-1",t),children:r.map(e=>(0,l.jsx)("div",{className:(0,s.cn)("size-full",n===e.key?"block":"invisible h-0 overflow-hidden"),children:e.content},e.key))})}function o(e){let{tabFiles:t,activeTabKey:r,className:n,setActiveTabKey:o,isLoading:c}=e,d=t.find(e=>e.key===r),u=d?(0,l.jsx)("div",{className:"flex h-full items-center justify-end gap-1",children:d.actions}):null;return(0,l.jsxs)("div",{className:(0,s.cn)("bg-muted flex size-full flex-col",n),children:[(0,l.jsxs)("div",{className:"border-alpha-200 relative flex justify-between border-y p-2",children:[(0,l.jsx)(a,{tabs:t,activeTabKey:null==d?void 0:d.key,setActiveTabKey:o,isLoading:c}),u]}),(0,l.jsx)(i,{tabFiles:t,activeTabKey:null==d?void 0:d.key})]})}function c(e){let{active:t,children:r,disabled:a,onClick:i,tooltip:o,isLoading:c}=e,d=(0,l.jsx)("button",{className:(0,s.cn)("font-regular group h-7 max-w-56 select-none whitespace-nowrap rounded-md px-2 text-sm font-medium transition-all",t?"bg-alpha-200 text-gray-900":"hover:bg-alpha-200 bg-transparent text-gray-500",a&&!t&&"cursor-not-allowed hover:bg-transparent"),onClick:i,disabled:a,"data-testid":"tab-file-button","data-active-tab":t,children:(0,l.jsx)("div",{className:"truncate",children:r})});return o||a?(0,l.jsx)(n.Tooltip,{side:"bottom",className:"max-w-[250px] text-wrap text-center",content:o||(c?"Preview is loading":"Preview is disabled"),children:d}):d}},20502:(e,t,r)=>{"use strict";r.d(t,{Ip:()=>m,Q2:()=>u,Rc:()=>d,kt:()=>f,tz:()=>c});var l=r(54857),s=r(96541),n=r(7963),a=r(37622),i=r(157),o=r(2259);let c=e=>{let{...t}=e;return(0,l.jsx)(n.bL,{modal:!1,...t})};c.displayName=n.bL.displayName;let d=n.l9,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)(n.YJ,{className:(0,a.cn)("p-1.5",r),ref:t,...s})});u.displayName=n.YJ.displayName,n.ZL,n.Pb,n.z6,s.forwardRef((e,t)=>{let{className:r,inset:s,variant:i="default",...o}=e;return(0,l.jsx)(n.ZP,{className:(0,a.cn)("[_>svg]:!text-gray-500 relative flex h-8 w-full select-none items-center gap-3 rounded-md px-1.5 text-sm text-gray-900 outline-none transition-colors data-[disabled]:pointer-events-none data-[state=open]:bg-gray-100 data-[disabled]:opacity-50 [&_svg]:size-4 [&_svg]:transition-colors",s&&"pl-8","destructive"===i?"text-red-700 focus:bg-[#FF666618] [&_svg]:!text-red-700":"text-gray-900 focus:bg-gray-100 [&_svg]:!text-gray-500",r),ref:t,...o})}).displayName=n.ZP.displayName,s.forwardRef((e,t)=>{let{className:r,sideOffset:s=12,...i}=e;return(0,l.jsx)(n.G5,{className:(0,a.cn)("bg-background-subtle z-50 min-w-[13.5rem] max-w-[28rem] overflow-hidden rounded-xl shadow-sm [&_svg]:shrink-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),ref:t,sideOffset:s,...i})}).displayName=n.G5.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)(n.ZL,{children:(0,l.jsx)(n.UC,{className:(0,a.cn)("bg-background-subtle z-50 min-w-[13.5rem] max-w-[28rem] overflow-hidden rounded-xl shadow-sm [&_svg]:shrink-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),ref:t,...s})})});m.displayName=n.UC.displayName;let f=s.forwardRef((e,t)=>{let{className:r,inset:s,variant:i="default",svgStyling:o=!0,...c}=e;return(0,l.jsx)(n.q7,{className:(0,a.cn)("relative flex h-8 w-full select-none items-center gap-3 whitespace-nowrap rounded-md px-1.5 text-sm text-gray-900 outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_span]:truncate",s&&"pl-8",o&&"[&_svg]:size-4 [&_svg]:transition-colors",o&&{"[&_svg]:!text-gray-500 [&[data-highlighted]_svg]:!text-gray-900":"default"===i,"[&_svg]:!text-red-700":"destructive"===i,"[&_svg]:!text-blue-700":"blue"===i,"[&_svg]:!text-amber-600":"gold"===i},"destructive"===i?"text-red-700 focus:bg-[#FF666618]":"text-gray-900 focus:bg-gray-100 ",r),ref:t,...c})});f.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:r,inset:s,...i}=e;return(0,l.jsx)(n.JU,{className:(0,a.cn)("h-8 content-center px-1.5 text-[13px] text-gray-500",s&&"pl-8",r),ref:t,...i})}).displayName=n.JU.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)(n.wv,{className:(0,a.cn)("h-px bg-gray-200",r),ref:t,...s})}).displayName=n.wv.displayName,s.forwardRef((e,t)=>{let{className:r,children:s,checked:i,...c}=e;return(0,l.jsxs)(n.H_,{checked:i,className:(0,a.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),ref:t,...c,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(n.VF,{children:(0,l.jsx)(o.J,{className:"h-4 w-4"})})}),s]})}).displayName=n.H_.displayName,s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,l.jsxs)(n.hN,{className:(0,a.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),ref:t,...o,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center rounded-full border",children:(0,l.jsx)(n.VF,{children:(0,l.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=n.hN.displayName},6056:(e,t,r)=>{"use strict";r.d(t,{h:()=>y});var l=r(54857),s=r(37622),n=r(2015),a=r(90916),i=r(68572),o=r(96541),c=r(41396);let d=c.bL,u=c.R6,m=c.Ke;var f=r(16617),p=r(90229);function h(e){let{className:t}=e;return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,s.cn)("text-gray-700",t),children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 13.5V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V8H3V1.5H8V5V6.5H9.5H13V13.5C13 14.0523 12.5523 14.5 12 14.5H6V16H12C13.3807 16 14.5 14.8807 14.5 13.5ZM9.5 5V2.12132L12.3787 5H9.5ZM2.31885 12.8194H0V11.3194H2.31885V9H3.81885V11.3194H6.13775V12.8194H3.81885V15.1377H2.31885V12.8194Z",fill:"currentColor"})})}function x(e){let{className:t}=e;return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,s.cn)("text-gray-700",t),children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 6.5V13.5C14.5 14.8807 13.3807 16 12 16H5V14.5H12C12.5523 14.5 13 14.0523 13 13.5V6.5H9.5H8V5V1.5H3V9H1.5V1.5V0H3H8H9.08579C9.351 0 9.60536 0.105357 9.79289 0.292893L14.2071 4.70711C14.3946 4.89464 14.5 5.149 14.5 5.41421V6.5ZM9.5 2.12132V5H12.3787L9.5 2.12132ZM0 11.25V12.75H6V11.25H0Z",fill:"currentColor"})})}var v=r(20502),g=r(65002);function b(e){return e?(0,g.n)(e,(e,t)=>e.items&&!t.items?-1:!e.items&&t.items?1:e.title.localeCompare(t.title)):[]}let j=(0,o.createContext)(void 0),w=()=>{let e=(0,o.useContext)(j);if(void 0===e)throw Error("useFileTree must be used within a FileTreeProvider");return e};function y(e){let{loading:t,active:r,items:n,onSelect:a,FileActions:i,FolderActions:c,TreeActions:d,className:u}=e,m=(0,o.useMemo)(()=>b(n),[n]),f=(0,l.jsx)("ul",{className:(0,s.cn)("flex list-none flex-col",u),children:m.map(e=>(0,l.jsx)(N,{item:e},e.value))}),p=f;return d&&(p=(0,l.jsxs)(v.tz,{children:[(0,l.jsx)(v.Rc,{asChild:!0,children:f}),(0,l.jsx)(v.Ip,{children:(0,l.jsx)(v.Q2,{children:(0,l.jsx)(d,{})})})]})),(0,l.jsx)(j.Provider,{value:{onSelect:a,active:r,loading:t,FileActions:null!=i?i:()=>null,FolderActions:null!=c?c:()=>null,TreeActions:null!=d?d:()=>null},children:p})}function N(e){let{item:t}=e;return t.items?(0,l.jsx)(k,{item:t}):(0,l.jsx)(P,{item:t})}function k(e){var t;let{className:r,item:s}=e,{active:n,FolderActions:c}=w(),[f,p]=(0,o.useState)(!0),h=!!s.items&&function e(t,r){return t.some(t=>t.value===r||!!t.items&&e(t.items,r))}(s.items,n);(0,o.useEffect)(()=>{h&&p(!0)},[h]);let x=(0,o.useMemo)(()=>b(s.items),[s.items]),g=(null===(t=s.items)||void 0===t?void 0:t.length)?(0,l.jsx)("div",{"data-sidebar":"menu-sub",className:"border-alpha-400 ml-3 flex min-w-0 translate-x-[0.5px] flex-col border-l pl-1",children:x.map(e=>(0,l.jsx)(N,{item:e},e.value))}):null,j=f?(0,l.jsx)(i.B,{}):(0,l.jsx)(a.z,{});return(0,l.jsxs)(v.tz,{children:[(0,l.jsxs)(d,{className:"flex flex-col gap-0",open:f,onOpenChange:p,children:[(0,l.jsx)(u,{asChild:!0,children:(0,l.jsx)(v.Rc,{asChild:!0,children:(0,l.jsx)(E,{icon:j,onClick:e=>{e.currentTarget instanceof HTMLButtonElement&&e.currentTarget.blur(),p(e=>!e)},className:r,status:null,children:s.title})})}),(0,l.jsx)(m,{children:g})]}),(0,l.jsx)(v.Ip,{children:(0,l.jsx)(v.Q2,{children:(0,l.jsx)(c,{item:s})})})]})}function P(e){let{item:t,className:r,...s}=e,{onSelect:a,active:i,loading:c,FileActions:d}=w(),u=(0,o.useMemo)(()=>c===t.value?(0,l.jsx)(p.y,{size:16}):t.addedCount&&!t.removedCount?(0,l.jsx)(h,{}):!t.addedCount&&t.removedCount?(0,l.jsx)(x,{}):(0,l.jsx)(n.Z,{}),[t.addedCount,t.removedCount,t.value,c]),m=(0,o.useMemo)(()=>{let e=t.addedCount?(0,l.jsx)("div",{className:"text-green-700",children:"+".concat(t.addedCount)}):null,r=t.removedCount?(0,l.jsx)("div",{className:"text-red-700",children:"-".concat(t.removedCount)}):null;return e&&r?(0,l.jsxs)("div",{className:"flex items-center gap-0.5 text-xs text-gray-500",children:[e,(0,l.jsx)("div",{children:"/"}),r]}):e||r},[t.addedCount,t.removedCount]);return t.value?(0,l.jsxs)(v.tz,{children:[(0,l.jsx)(v.Rc,{asChild:!0,children:(0,l.jsx)(E,{active:t.value===i,onClick:()=>a(t.value),className:r,icon:u,status:m,...s,children:t.title})}),(0,l.jsx)(v.Ip,{children:(0,l.jsx)(v.Q2,{children:(0,l.jsx)(d,{item:t})})})]}):null}function E(e){let{className:t,active:r,icon:n,status:a,children:i,...o}=e;return(0,l.jsx)("li",{children:(0,l.jsxs)(f.$,{className:(0,s.cn)("data-[active=true]:bg-alpha-200 group mb-0 h-[26px] w-full min-w-36 justify-between gap-2 pl-0.5 pr-1",t),"data-active":r,size:"sm",variant:"ghost",title:i,...o,children:[(0,l.jsxs)("div",{className:"flex min-w-0 items-center gap-1",children:[(0,l.jsx)("div",{className:"p-0.5 text-gray-500 group-hover:text-gray-900 group-focus:text-gray-900 group-[[data-active=true]]:text-gray-900",children:n}),(0,l.jsx)("span",{className:"truncate font-normal",children:i})]}),a]})})}},76145:(e,t,r)=>{"use strict";r.d(t,{YZ:()=>v,Zf:()=>b,je:()=>g});var l=r(54857),s=r(96541),n=r(17406),a=r(97682),i=r(35067),o=r(46948),c=r(37622),d=r(25388);let u=(0,s.createContext)(void 0),m=()=>{let e=(0,s.useContext)(u);if(void 0===e)throw Error("useResizableContext must be used within a FileTreeProvider");return e};function f(e){let{className:t,...r}=e,{leftId:s,rightId:a,groupId:i,panelGroupRef:o}=m();return(0,l.jsxs)(n.TW,{onDragging:()=>{var e,t,r,l;let c=null===(e=n.PV(s))||void 0===e?void 0:e.offsetWidth,d=null===(t=n.PV(a))||void 0===t?void 0:t.offsetWidth,u=null===(r=n.Gx(i))||void 0===r?void 0:r.offsetWidth;c&&d&&u&&(null===(l=o.current)||void 0===l||l.setLayout([c/u*100,d/u*100]))},className:(0,c.cn)("group relative z-20 w-0 !overflow-visible !outline-none !ring-0",t),...r,children:[(0,l.jsx)("div",{className:"absolute inset-0 h-full w-3 translate-x-[-50%] !outline-0 !ring-0"}),(0,l.jsx)("div",{className:"absolute inset-0 h-full w-0 translate-x-[-50%] !outline-0 !ring-0 transition-all duration-200 group-data-[resize-handle-active=keyboard]:w-[3px] group-data-[resize-handle-state=drag]:w-[3px] group-data-[resize-handle-state=hover]:w-[3px] group-data-[resize-handle-active=keyboard]:bg-gray-400 group-data-[resize-handle-state=drag]:bg-gray-400 group-data-[resize-handle-state=hover]:bg-gray-300 group-data-[resize-handle-active=keyboard]:outline-none"})]})}let p=(0,s.forwardRef)((e,t)=>((0,s.useEffect)(()=>{let r=document.getElementById(e.id);r&&t&&("function"==typeof t?t(r):t.current=r)},[e.id,t]),(0,l.jsx)(n.Zk,{...e})));p.displayName="ForwardPanel";let h=a.P.create(p);function x(e){let t=n.PV(e);if(!t)return 100;let r=parseFloat(getComputedStyle(t).minWidth);return isNaN(r)?100:r}function v(e){let{isFallbackSize:t,collapseSide:r,leftId:a,rightId:i,defaultSizeRef:o,cookie:c,id:m,...f}=e,p=(0,s.useRef)(null),h=(0,s.useRef)(!1);return(0,l.jsx)(u.Provider,{value:{leftId:a,rightId:i,panelGroupRef:p,groupId:m},children:(0,l.jsx)(n.YZ,{id:m,ref:p,onLayout:e=>{var l,s;if(e.length<2)return;let[u,f]=e;if(h.current)return h.current=!1;if(!f||!u)return;let v="right"===r?f:u;o.current=v,t||d.A.set(c,v.toString(),{expires:30});let g=n.PV(a),b=n.PV(i),j=n.Gx(m);if(!g||!b||!j)return;let w=x("right"===r?i:a),y=x("right"===r?a:i);if(v/100*j.offsetWidth<w){let e=w/j.offsetWidth*100;h.current=!0,null===(l=p.current)||void 0===l||l.setLayout("right"===r?[100-e,e]:[e,100-e])}else if(("right"===r?u:f)/100*j.offsetWidth<y){let e=y/j.offsetWidth*100;h.current=!0,null===(s=p.current)||void 0===s||s.setLayout("right"===r?[e,100-e]:[100-e,e])}},...f})})}function g(e){let{collapseSide:t,isOpen:r,order:s,defaultSize:d,className:u,handleTestId:m,collapseId:p,children:x}=e,v=(0,i.d)(0),g=(0,i.d)(1);return(0,l.jsx)(o.N,{initial:!1,mode:"wait",children:r?(0,l.jsxs)(l.Fragment,{children:["right"===t?(0,l.jsx)(f,{"data-testid":m,className:"sticky top-0"},"resize-handle"):null,(0,l.jsx)(h,{transition:{duration:0},variants:{hidden:{flex:"0 1 0px",minWidth:0,overflow:"visible",transition:{when:"beforeChildren",duration:0}}},exit:"hidden",id:p,order:s,defaultSize:d,style:{overflow:"clip"},className:(0,c.cn)("relative",u),children:(0,l.jsx)(a.P.div,{style:{x:v,opacity:g,willChange:"auto"},variants:{initial:{width:"100%",display:"absolute",opacity:0,x:"right"===t?"100%":"-100%"},visible:()=>({width:["100%","100%"],opacity:[g.get(),1],display:["absolute","block"],x:[v.get(),0],transition:{type:"spring",damping:60,stiffness:1100}}),hidden:()=>{var e,r;return{width:null!==(r=null===(e=n.PV(p))||void 0===e?void 0:e.offsetWidth)&&void 0!==r?r:0,display:"absolute",opacity:0,x:"right"===t?"100%":"-100%",transition:{type:"spring",damping:60,stiffness:800}}}},initial:"initial",animate:"visible",exit:"hidden",className:(0,c.cn)("border-alpha-200 absolute inset-y-0 right-0 h-full w-full ","right"===t?"right-0 border-l":"left-0 border-r"),children:x})},"right-panel"),"left"===t?(0,l.jsx)(f,{"data-testid":m,className:"sticky top-0"},"resize-handle"):null]}):(0,l.jsx)(n.Zk,{order:s,defaultSize:0},"zero-panel")})}function b(e){let{initialSize:t,fallbackSize:r=50}=e,[l,n]=(0,s.useState)("number"==typeof t?t:r),a=(0,s.useRef)(l),i=(0,s.useRef)(!0),[o,c]=(0,s.useState)("number"!=typeof t);return(0,s.useEffect)(()=>{"number"!=typeof t&&t.then(e=>{n(e),c(!1),i.current&&(a.current=e,i.current=!1)})},[t]),{initialSize:l,defaultSizeRef:a,isFallbackSize:o}}},32192:(e,t,r)=>{"use strict";r.d(t,{$:()=>n,s:()=>s});var l=r(96541);let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;return e<t},n=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=window.matchMedia("(max-width: ".concat(899,"px)")),r=()=>{t(s(window.innerWidth))};return e.addEventListener("change",r),r(),()=>e.removeEventListener("change",r)},[]),e}},63404:(e,t,r)=>{"use strict";r.d(t,{r:()=>s});var l=r(96541);function s(){let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{t(navigator.userAgent.toUpperCase().includes("MAC"))},[]),e}},92171:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BlockContent:()=>t4,useRenderedBlock:()=>t3});var l=r(54857),s=r(96541),n=r(94592),a=r(25113),i=r(76798),o=r.n(i),c=r(37622),d=r(44079),u=r(36930);function m(e){let{value:t}=e;return Array.isArray(t)?(0,l.jsx)("div",{className:"flex flex-col gap-2 font-mono text-xs leading-4 text-gray-900",children:[...t].map((e,t)=>{let[r,s]=e;return r.startsWith("image/")?(0,l.jsx)("img",{alt:"Attachment ".concat(t),src:"data:".concat(r,";base64,").concat(s)},t):r.startsWith("text/")||r.startsWith("application/")?(0,l.jsx)("div",{className:"whitespace-pre-wrap",children:s},t):null})}):null}function f(e){let{src:t,className:r,style:s}=e;return"string"==typeof t?(0,l.jsx)("span",{className:"whitespace-break-spaces break-all text-gray-900 leading-[1.12]",children:(0,l.jsx)(o(),{children:t})}):(0,l.jsx)(a.Ay,{className:(0,c.cn)("leading-4 text-gray-900 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",r),collapsed:1,editable:!1,enableClipboard:!1,src:t,theme:"default",style:s})}let p=(0,s.memo)(e=>{let{value:t,className:r}=e;return(0,l.jsx)("output",{"aria-label":"Code execution output",className:(0,c.cn)("codeblock not-prose relative flex w-full flex-col overflow-y-auto font-mono text-xs",r),children:t?"error"in t?(0,l.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,l.jsx)(u.ErrorComponent,{error:Error(t.error,{cause:"code-execution-error"})})}):(0,l.jsxs)(l.Fragment,{children:[t.stdout.length?t.stdout.map((e,t)=>(0,l.jsx)(h,{children:e.map((e,r)=>(0,l.jsx)(f,{src:e},"".concat(t,"-").concat(r,"-stdout")))},"".concat(t,"-stdout"))):null,t.stderr.length?t.stderr.map((e,t)=>(0,l.jsx)(h,{children:e.map((e,r)=>(0,l.jsx)(f,{className:"[&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",src:e,style:{color:"rgb(192,27,93)"}},"".concat(t,"-").concat(r,"-stderr")))},"".concat(t,"-stderr"))):null,t.returned?(0,l.jsx)(h,{children:"$$attachments"in t.returned?t.returned.$$attachments.length>0?(0,l.jsx)(m,{value:t.returned.$$attachments}):null:(0,l.jsx)(f,{className:"[&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",src:t.returned})}):null]}):null})});function h(e){let{children:t}=e;return null===t?null:(0,l.jsxs)("span",{className:"border-alpha-200 flex items-baseline gap-3 border-b p-2 pl-2.5 last:border-b-0",children:[(0,l.jsx)("div",{"aria-hidden":!0,className:"select-none text-pink-600",children:(0,l.jsx)(d.c,{size:8})}),t]})}p.displayName="CodeOutput";var x=r(67605);let v=(0,x.createServerReference)("70d599585c3e02aea4344f6712a8d5a2ae7c2e7d2c",x.callServer,void 0,x.findSourceMapURL,"execute");var g=r(38651),b=r(80612),j=r(2259),w=r(25388),y=r(97682),N=r(90509);function k(e){let{show:t,axis:r,side:s,resizing:n,dotsHandle:a,onMouseDown:i,onFocus:o,onBlur:d,ref:u}=e,m={"aria-orientation":"x"===r?"vertical":"horizontal",onBlur:d,onFocus:o,onMouseDown:i,ref:u,role:"separator",tabIndex:0};return a?(0,l.jsx)("div",{className:(0,c.cn)("group absolute flex items-center justify-center focus:outline-none","x"===r?(0,c.cn)("inset-y-0 w-5 cursor-col-resize flex-col","start"===s?"left-[-19px]":"right-[-19px]"):(0,c.cn)("inset-x-0 h-5 cursor-row-resize flex-row","start"===s?"top-[-19px]":"bottom-[-19px]")),...m,children:(0,l.jsxs)("div",{className:"flex gap-0.5",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,l.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,l.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,l.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,l.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"})]})]})}):t?(0,l.jsx)("div",{className:(0,c.cn)("group absolute z-10 focus:outline-none","x"===r&&(0,c.cn)("inset-y-0 w-3 cursor-col-resize","start"===s?"-left-1.5":"-right-1.5"),"y"===r&&(0,c.cn)("inset-x-0 h-3 cursor-row-resize","start"===s?"-top-1.5":"-bottom-1.5")),...m,children:(0,l.jsx)("div",{className:(0,c.cn)("absolute inset-0 transition-all duration-200 group-hover:bg-gray-300 group-focus:bg-gray-400","x"===r&&(0,c.cn)("mx-auto group-hover:w-[3px] group-focus:w-[3px]",n?"w-1":"w-0"),"y"===r&&(0,c.cn)("my-auto group-hover:h-[3px] group-focus:h-[3px]",n?"h-1":"h-0"))})}):null}let P=(0,s.memo)(e=>{var t,r;let{show:n,innerClassName:a,dotsHandle:i=!1,onTrack:o,className:d,initialSize:u,animated:m=!0,minSizePx:f,axis:p,side:h,children:x,cookieName:v}=e,g=(0,s.useRef)(null),b=(0,s.useRef)(null),j=(0,s.useRef)(null),[P,E]=(0,s.useState)(!1),[T,R]=(0,s.useState)(!1),[S,_]=(0,s.useState)(0),[C,I]=(0,s.useState)(0),[U,O]=(0,s.useState)(!1),A=(0,s.useState)(()=>{if("undefined"==typeof document)return null;let e=w.A.get(v);if(null===e)return null;let t=Number(e);return isNaN(t)?null:t})[0],D=(0,s.useRef)(null!=A?A:u),L=(0,s.useCallback)(e=>{var t,r,l,s;e.stopPropagation(),e.preventDefault(),null===(t=b.current)||void 0===t||t.focus(),R(!0),E(!0),_("x"===p?e.clientX:e.clientY),j.current=D.current,I(null!==(s="x"===p?null===(r=g.current)||void 0===r?void 0:r.clientWidth:null===(l=g.current)||void 0===l?void 0:l.clientHeight)&&void 0!==s?s:0),O(!0)},[p]),z=(0,s.useCallback)(e=>{var t,r;if(!P||!T)return;let l=null===(t=g.current)||void 0===t?void 0:t.parentElement,s=null!==(r="x"===p?null==l?void 0:l.clientWidth:null==l?void 0:l.clientHeight)&&void 0!==r?r:0,n=(C+(S-("x"===p?e.clientX:e.clientY))*("start"===h?1:-1))/s*100;"x"===p?g.current.style.width="".concat(n,"%"):g.current.style.height="".concat(n,"%"),D.current=n},[p,T,P,h,S,C]),F=(0,s.useCallback)(()=>{var e;P&&(E(!1),R(!1),null===(e=b.current)||void 0===e||e.blur(),w.A.set(v,String(D.current),{expires:7}),null==o||o(j.current,D.current))},[v,o,P]);return(0,N.ML)("mousemove",z),(0,N.ML)("mouseup",F),(0,N.ML)("keydown",e=>{var t,r,l,s,n;if(!P||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;let a=(e.shiftKey?12:4)*("ArrowLeft"===e.key?1:-1)*("start"===h?1:-1),i=null===(t=g.current)||void 0===t?void 0:t.parentElement,o=null!==(s="x"===p?null==i?void 0:i.clientWidth:null==i?void 0:i.clientHeight)&&void 0!==s?s:0,c=(null!==(n="x"===p?null===(r=g.current)||void 0===r?void 0:r.clientWidth:null===(l=g.current)||void 0===l?void 0:l.clientHeight)&&void 0!==n?n:0)/o*100+a;"x"===p?g.current.style.width="".concat(c,"%"):g.current.style.height="".concat(c,"%"),D.current=c},b),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,c.cn)("fixed inset-0 z-50",P?"x"===p?"cursor-col-resize":"cursor-row-resize":"pointer-events-none")}),(0,l.jsxs)(y.P.div,{animate:"x"===p?{width:n?"".concat(null!==(t=D.current)&&void 0!==t?t:u,"%"):"0%",height:"100%",minWidth:n?"".concat(f,"px"):0,opacity:n?1:0}:{height:n?"".concat(null!==(r=D.current)&&void 0!==r?r:u,"%"):"0%",width:"100%",minHeight:n?"".concat(f,"px"):0,opacity:n?1:0},"aria-hidden":!n,className:(0,c.cn)("relative",d),inert:!n,initial:!1,layout:"size",onAnimationComplete:()=>{U&&O(!1)},ref:g,transition:U||!m?{type:!1}:{type:"spring",damping:25,stiffness:180,mass:1},children:[(0,l.jsx)(k,{axis:p,dotsHandle:i,onBlur:F,onFocus:()=>{E(!0),O(!0)},onMouseDown:L,ref:b,resizing:P,show:n,side:h}),(0,l.jsx)("div",{className:(0,c.cn)("absolute inset-0",a),children:x})]})]})});P.displayName="Resizable";var E=r(55174),T=r(34227),R=r(16617),S=r(90229),_=r(91774);function C(e){let{buttonText:t="Run Code",variant:r="default",setOutput:n,codeExecutionBlockProps:a,execute:i,editedValue:o,disabled:d}=e,[u,m]=(0,s.useState)(!1);return(0,l.jsxs)(R.$,{className:"ghost"===r?"h-6 text-gray-500 has-[>svg]:px-1":"","data-testid":"run-code-button",disabled:u||d,onClick:async()=>{try{m(!0),(0,g.u)("ClickRunCode",{code:o||a.source});let e=await i(a,o);n(e)}finally{m(!1)}},size:"sm",variant:"ghost"===r?"ghost":"secondary",children:[u?(0,l.jsx)(S.y,{size:16,wrapperClassName:"text-gray-500"}):(0,l.jsx)(_.N,{className:(0,c.cn)("translate-y-[-0.5px] [&_circle]:[vector-effect:non-scaling-stroke]","ghost"===r?"text-gray-500 [&_path]:fill-gray-500":"text-gray-900 [&_path]:fill-gray-900")}),t]},"execute")}var I=r(85588),U=r(24048),O=r(4126),A=r(76140),D=r(85052),L=r(56527);function z(e){let{size:t=16,className:r}=e;return(0,l.jsxs)("svg",{className:(0,c.cn)("trash-icon overflow-visible",r),fill:"currentColor",height:t,viewBox:"0 0 16 16",width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("style",{children:"\n        .trash-icon .trash-lid {\n            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n            transform-origin: center;\n        }\n\n        button:has(.trash-icon):hover .trash-lid, button:has(.trash-icon):focus-visible .trash-lid {\n          transform: translate(-0px, -2px) rotate(-10deg);\n        }\n            \n       "}),(0,l.jsx)("path",{className:"trash-lid",clipRule:"evenodd",d:"M6.75 2.75C6.75 2.0596 7.3096 1.5 8 1.5 8.6904 1.5 9.25 2.0596 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.2312 6.4812 0 8 0 9.5188 0 10.75 1.2312 10.75 2.75V3H12.9201 13 15V4.5H14.25 13.8846 1.75 1V3H1.75 3.0799 5.25Z",fill:"currentColor",fillRule:"evenodd"}),(0,l.jsx)("path",{clipRule:"evenodd",d:"M2.1154 4.5H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.3151C4.0087 16 2.9226 14.9942 2.8224 13.6917L2.1154 4.5ZM4.318 13.5767 3.6198 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.3151C4.7925 14.5 4.3581 14.0977 4.318 13.5767Z",fill:"currentColor",fillRule:"evenodd"})]})}var F=r(32511),M=r(87108),B=r(57363),H=r(18173),V=r(9527),W=r(53081);function G(e){return"v0-preview-".concat(e)}function Z(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=e,{isPublished:n}=(0,A.X)(),a=(0,l.jsx)(H.Tabs,{className:"w-full",onValueChange:s,value:r,children:(0,l.jsxs)(H.TabsList,{className:"relative h-10 [&>*]:flex-1",children:[(0,l.jsxs)(H.TabsTrigger,{className:"h-8 w-full flex-1",disabled:!0!==t,value:"preview",children:[(0,l.jsx)(W.p,{}),(0,l.jsx)("span",{className:"select-none",children:"Preview"})]}),(0,l.jsxs)(H.TabsTrigger,{className:"h-8 flex-1",value:"code",children:[(0,l.jsx)(V.Y,{}),(0,l.jsx)("span",{className:"select-none",children:"Code"})]})]})});return n?(0,l.jsx)("div",{className:"flex w-full items-center gap-2",children:a}):null}var X=r(38293),K=r(80102),$=r(40427),Q=r(71368);let Y=e=>{if(!e)return;let t=document.getElementById(G(e));if(t instanceof HTMLIFrameElement){if(t.contentDocument)t.contentDocument.location.reload();else if(t.srcdoc){let e=t.srcdoc;t.srcdoc="",setTimeout(()=>{t.srcdoc=e},10)}else t.src=t.src}};function q(e){let{resultId:t}=e,r=(0,Q.k)("previewBlock"),n=(0,s.useCallback)(()=>{t&&Y(t)},[t]);return(0,l.jsx)(E.Z,{"aria-label":r("refresh"),onClick:()=>n(),tooltip:{side:"bottom",content:r("refresh")},children:(0,l.jsx)("span",{children:(0,l.jsx)($.g,{})})})}var J=r(47165),ee=r(8591);function et(){let{setFullscreenResult:e}=(0,J.S)(),t=(0,Q.k)("previewBlock");return(0,l.jsx)(E.Z,{"aria-label":t("fullscreen"),className:"hidden md:flex",onClick:()=>e(!0),tooltip:{side:"bottom",content:t("fullscreen")},children:(0,l.jsx)(ee.g,{})})}var er=r(91434),el=r(63741),es=r.n(el),en=r(72380),ea=r(77184),ei=r(46948),eo=r(48587),ec=r(10889),ed=r(63713);let eu=(0,en.default)(()=>Promise.all([r.e(3871),r.e(5135)]).then(r.bind(r,25135)).then(e=>e.ConflictEditor),{loadableGenerated:{webpack:()=>[25135]}});function em(e){let{hasUnappliedChanges:t,blockId:r,source:n,onApply:a,showFadeOut:i}=e,[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),m=(0,Q.k)("unappliedChanges"),[f,p]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),v=async()=>{c(!0);let e=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:r,blockSource:n})});if(c(!1),e.ok){let t=await e.json();t.success?(u(!0),setTimeout(()=>u(!1),2e3),ea.oR.success(m("savedChanges"))):(ea.oR.error("Local: conflict detected. Check your console"),p(t.conflicts)),a()}else ea.oR.error(m("failedToApplyChanges"))},g=async()=>{if(h)try{let e=[...(0,ed.A2)({source:n,blockType:"local",blockId:r})];for(let t of h){let r=e.find(e=>e.meta.file===t.file);r&&(r.source=t.content)}let t=(0,ed.L5)({files:e,blockType:"local"}),l=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:r,blockSource:t,resolvedConflicts:!0})});l.ok&&(await l.json()).success?(u(!0),setTimeout(()=>u(!1),2e3),ea.oR.success(m("savedChanges")),a(),p(null)):ea.oR.error(m("failedToApplyChanges"))}catch(e){ea.oR.error(m("failedToApplyChanges"))}},b=(0,s.useCallback)(e=>{e.every(e=>e.resolved)?x(e):x(null)},[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ei.N,{children:t&&!d?(0,l.jsxs)(l.Fragment,{children:[i?(0,l.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-gradient-to-t to-transparent"},"unsaved-changes-bg"):null,(0,l.jsx)(y.P.div,{initial:{opacity:0,y:20,scale:.95,width:320},animate:{opacity:1,y:0,scale:1,width:o?96:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:"shadow-modal bg-background absolute inset-x-0 bottom-3 z-20 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",children:o?(0,l.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,l.jsx)(S.y,{size:16}),"Saving"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(eo.N,{className:"!text-gray-500"}),"Unsaved Changes"]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(R.$,{size:"sm",className:"h-7",rounded:!0,disabled:o,onClick:v,children:m("apply")})})]})},"unsaved-changes-island")]}):null}),(0,l.jsx)(ec.lG,{open:null!==f,children:(0,l.jsxs)(ec.Cf,{className:"max-h-[90vh] w-full max-w-[90vw] overflow-auto",children:[(0,l.jsxs)(ec.c7,{children:[(0,l.jsx)(ec.L3,{children:"Conflict Detected"}),(0,l.jsx)(ec.rr,{children:"Please resolve them before saving."})]}),(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)(S.y,{}),children:f?(0,l.jsx)(eu,{conflicts:f,onEdit:b}):null}),(0,l.jsxs)(ec.Es,{children:[(0,l.jsx)(R.$,{variant:"secondary",onClick:()=>{alert("You must resolve conflicts before continuing")},children:"Cancel"}),(0,l.jsx)(R.$,{onClick:g,disabled:null===h,children:"Confirm"})]})]})})]})}var ef=r(76236),ep=r(77170),eh=r(96737),ex=r(26998),ev=r(63404);async function eg(e){return(await fetch("/chat/api/blocks",{method:"PUT",body:JSON.stringify(e)})).ok?{success:!0}:{success:!1}}function eb(e){let{mergedFromBlockId:t,hasUnsavedChanges:r,resetValue:n,onSave:a,clearEditValueMap:i}=e,[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),m=(0,ef.eu)(),f=(0,Q.k)("codeBlockActions"),p=(0,ev.r)();if((0,N.ML)("keydown",async e=>{e.metaKey&&"s"===e.key&&(e.preventDefault(),r&&await a({setSaving:c,setForceHide:u}))}),(0,s.useEffect)(()=>{let e=e=>{r&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[r]),!m)return null;let h=null!=t?t:m.id;return(0,l.jsx)(ei.N,{children:r&&!d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-gradient-to-t to-transparent"},"unsaved-changes-bg"),(0,l.jsx)(y.P.div,{initial:{opacity:0,y:20,scale:.95,width:320},animate:{opacity:1,y:0,scale:1,width:o?96:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:"shadow-modal bg-background absolute inset-x-0 bottom-3 z-20 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",children:o?(0,l.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,l.jsx)(S.y,{size:16}),"Saving"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(eo.N,{className:"!text-gray-500"}),"Unsaved Changes"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(R.$,{size:"sm",className:"h-7",rounded:!0,variant:"secondary",disabled:o,onClick:()=>{(0,g.u)("ResetUnsavedEditCode",{blockId:h}),c(!0);try{n(),ea.oR.success(f("resetChanges"),{position:"bottom-right"}),setTimeout(()=>u(!1),2e3),i()}catch(e){ea.oR.error(f("failedToResetChanges"),{position:"bottom-right"})}c(!1)},children:f("reset")}),(0,l.jsx)(R.$,{tooltip:{content:(0,l.jsxs)(ex.r,{children:[(0,l.jsx)(ex.u,{children:p?"âŒ˜":"Ctrl"}),(0,l.jsx)(ex.u,{children:"S"})]})},size:"sm",className:"h-7",rounded:!0,disabled:o,onClick:()=>a({setSaving:c,setForceHide:u}),children:f("save")})]})]})},"unsaved-changes-island")]}):null})}function ej(e){let{blockId:t,editValueMap:r,source:l,meta:n,files:a,clearEditValueMap:i}=e,o=(0,Q.k)("codeBlockActions"),c=(0,ef.eu)(),d=(0,ef.y6)(),{updateBlockData:u}=(0,eh.useBlockHistory)({blockId:t});return{onSave:async e=>{let{setSaving:s,setForceHide:a}=e;(0,g.u)("SaveEditCode",{blockId:t});let i=Object.entries(r||{});if(!r||i.length<1||!i.some(e=>{let[t,r]=e;return!!r}))return ea.oR.error(o("failedToSaveChanges"),{position:"bottom-right"});let m=i[0][1]||l;if("react-project"===n.type){let e=(0,ed.A2)({source:l,blockType:"react-project",blockId:t}).filter(e=>!e.isDeleted);for(let t of e){let e=r[t.meta.file||""];e&&(t.source=e)}m=(0,ed.L5)({files:e,blockType:"react-project"})}s(!0);let f=await eg({blockId:t,source:m});s(!1),f.success?(c&&t===c.id&&d({...c,hasSourceBeenEdited:!0,source:m}),u({blockId:t,data:{hasSourceBeenEdited:!0,source:m}}),a(!0),setTimeout(()=>a(!1),2e3),ea.oR.success(o("savedChanges"),{position:"bottom-right"})):(0,ep.z)(f)||ea.oR.error(o("failedToSaveChanges"))},hasUnsavedChanges:(0,s.useMemo)(()=>{let e=!1;if(!r)return!1;for(let t of a){let l=r[t.meta.file||""];if(l&&l!==t.source){e=!0;break}}return e},[r,a]),clearEditValueMap:i}}var ew=r(6056),ey=r(76145),eN=r(17406),ek=r(4420),eP=r(79089),eE=r(60349),eT=r(20502),eR=r(59412);let eS="file-tree-panel-right",e_="file-tree-panel-left";function eC(e){let{showDiffInfo:t,activeFilePath:r,initialFileTreeSize:n,setActiveFile:a,children:i,files:o,loadingPath:d,blockId:u,source:m}=e,f=(0,Q.k)("fileTreeActions"),[p,h]=(0,s.useState)(!!(null==o?void 0:o.length)),{defaultSizeRef:x,isFallbackSize:v}=(0,ey.Zf)({initialSize:n,fallbackSize:15}),g=(0,s.useRef)(!1),[b,j]=(0,s.useState)([]);(0,s.useEffect)(()=>{!g.current&&(null==o?void 0:o.length)&&h(!!o.length)},[o]);let w=(0,s.useMemo)(()=>{let e=o?o.map(e=>["file"in e.meta?e.meta.file:"",e]):[];for(let t of b)e.push([t,null]);let r=[];for(let[l,s]of e){let e=l.split("/"),n=r;for(let[r,l]of e.entries()){let a=r===e.length-1&&null!==s,i=e.slice(0,r+1).join("/"),o=n.find(e=>e.title===l);if(!o){let e={title:l,value:i},r=null==s?void 0:s.originalCode,c=null==s?void 0:s.source;if(a){if(t&&r&&r!==c&&c){let t=(0,eR.G)(r,c);e.addedCount=t.filter(e=>e.added).length,e.removedCount=t.filter(e=>e.removed).length}else t&&c&&!r&&(e.addedCount=c.split("\n").length,e.removedCount=0)}else e.items=[];n.push(e),o=e}a||(n=o.items)}}return r},[o,t,b]),y=(0,s.useMemo)(()=>{let e=0,t=r=>{for(let l of r)l.items?t(l.items):e++};return t(w),e},[w]),{handleDeleteFile:N,handleDeleteFolder:k,handleNewFile:P}=function(e){let{blockId:t,source:r}=e,[l,n]=(0,s.useState)(!1),a=(0,Q.k)("fileTreeActions"),i=(0,ef.eu)(),o=(0,ef.y6)(),{updateBlockData:c}=(0,eh.useBlockHistory)({blockId:t}),d=(0,s.useMemo)(()=>(0,ed.A2)({source:r,blockType:"react-project",blockId:t}),[r,t]);async function u(e){let r=(0,ed.L5)({files:e,blockType:"react-project"});n(!0);let l=await eg({blockId:t,source:r});return n(!1),i&&t===i.id&&o({...i,hasSourceBeenEdited:!0,source:r}),c({blockId:t,data:{hasSourceBeenEdited:!0,source:r}}),l}return{handleDeleteFile:async(e,t)=>{if(!confirm(a("fileDeleteConfirmation")))return;for(let e of d)if(e.meta.file===t){e.source="... deleted ...",e.isDeleted=!0,e.isUserEdit=!0;break}let r=await u(d);r.success?ea.oR.success(a("fileDeletedNotification"),{position:"bottom-right"}):(console.error(r),ea.oR.error(a("fileDeletedNotificationError"),{position:"bottom-right"}))},handleDeleteFolder:async(e,t)=>{if(!confirm(a("folderDeleteConfirmation")))return;for(let e of d)(e.meta.file.startsWith(t)?r:void 0)&&(e.source="... deleted ...",e.isDeleted=!0,e.isUserEdit=!0);let l=await u(d);l.success?ea.oR.success(a("folderDeletedNotification"),{position:"bottom-right"}):(console.error(l),ea.oR.error(a("folderDeletedNotificationError"),{position:"bottom-right"}))},handleNewFile:async(e,t)=>{let r=prompt(a("newFilePrompt"));if(!r)return;let l="".concat(t,"/").concat(r);t||(l=r);let s=r.split(".").pop(),n={source:"",meta:{file:l},blockId:e,lang:(0,eE.SR)(s),isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isFixed:!1,isQuickEdit:!1,isAttachmentQuickEdit:!1,isUserEdit:!0},i=await u([...d,n]);i.success?ea.oR.success(a("newFileNotification")):(console.error(i),ea.oR.error(a("newFileNotificationError")))},saving:l}}({blockId:u,source:m}),E=(0,s.useCallback)(e=>{let{item:t}=e;return(0,l.jsxs)(eT.kt,{variant:"destructive",onSelect:async()=>N(u,t.value),children:[(0,l.jsx)(eP.l,{}),"Delete"]})},[u,N]),T=(0,s.useCallback)(e=>{let t=prompt(f("newFolderPrompt"));if(!t)return;let r="".concat(e,"/").concat(t);e||(r=t),j(e=>Array.from(new Set([...e,r])))},[j,f]),S=(0,s.useCallback)(e=>{let{item:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eT.kt,{onSelect:()=>P(u,t.value),children:[(0,l.jsx)(eU,{}),"New File"]}),(0,l.jsxs)(eT.kt,{onSelect:()=>T(t.value),children:[(0,l.jsx)(ek.J,{}),"New Folder"]}),(0,l.jsxs)(eT.kt,{variant:"destructive",onSelect:()=>{j(e=>e.filter(e=>e!==t.value)),k(u,t.value)},children:[(0,l.jsx)(eP.l,{}),"Delete"]})]})},[u,k,P,T]),_=(0,s.useCallback)(()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eT.kt,{onSelect:()=>P(u),children:[(0,l.jsx)(eU,{}),"New File"]}),(0,l.jsxs)(eT.kt,{onSelect:()=>T(),children:[(0,l.jsx)(ek.J,{}),"New Folder"]})]}),[u,P,T]);return(0,l.jsxs)(ey.YZ,{isFallbackSize:v,collapseSide:"left",cookie:O.ao,id:"file-tree-panel-group",className:"h-screen w-screen",direction:"horizontal",leftId:e_,rightId:eS,defaultSizeRef:x,children:[(0,l.jsx)(ey.je,{className:"z-10 h-full min-w-[160px]",collapseSide:"left",isOpen:y>1&&p,order:1,defaultSize:x.current,collapseId:e_,children:(0,l.jsx)(s.Suspense,{fallback:null,children:(0,l.jsx)("div",{className:"bg-muted flex h-full flex-col",children:(0,l.jsx)(ew.h,{loading:d,active:r,onSelect:a,className:"w-full flex-1 overflow-y-auto p-1.5 pb-12",items:w,FileActions:E,FolderActions:S,TreeActions:_})})})}),(0,l.jsx)(eN.Zk,{id:eS,order:2,defaultSize:p?100-x.current:100,className:"h-full min-w-[200px]",children:i}),y>1?(0,l.jsx)(R.$,{tooltip:"".concat(p?"Close":"Open"," File Tree"),className:(0,c.cn)("absolute bottom-2 left-2 z-20 size-7 transition-all",p?"-scale-x-100":""),variant:"secondary",size:"sm",onClick:()=>{g.current=!0,h(!p)},children:(0,l.jsx)(eI,{},"arrow")},"button"):null]})}function eI(){return(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M11.3333 8H2",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M7.33325 12L11.3333 8L7.33325 4",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M14 3.33203V12.6654",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function eU(e){return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 13.5V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V8H3V1.5H8V5V6.5H9.5H13V13.5C13 14.0523 12.5523 14.5 12 14.5H6V16H12C13.3807 16 14.5 14.8807 14.5 13.5ZM9.5 5V2.12132L12.3787 5H9.5ZM2.31885 12.8194H0V11.3194H2.31885V9H3.81885V11.3194H6.13775V12.8194H3.81885V15.1377H2.31885V12.8194Z",fill:"currentColor"})})}var eO=r(31424);function eA(e){let{blockId:t}=e,{data:r,mutate:l}=(0,b.Ay)(["block:editValueMap",t],{fallbackData:{}});return{editValueMap:r||{},setEditValueMap:l}}var eD=r(69756),eL=r(26677);function ez(e){let{className:t,children:r,bottomBorder:s}=e;return(0,l.jsx)("div",{className:(0,c.cn)("flex h-9 w-full shrink-0 items-center pl-3 pr-2 text-[13px] font-medium text-gray-500",s&&"border-alpha-200 border-b",t),"data-slot":"block-tab-header",children:r})}var eF=r(2721),eM=r(35448),eB=r(66188),eH=r(46159);function eV(e){let{consoleEvents:t,clearLogs:r,canWriteToChat:s}=e,{setPromptFormInput:n}=(0,eB.Q1)(),a=(0,ef.oQ)(),i=e=>{n("The code has the following ".concat(e.method,":\n```\n").concat(e.message,"\n```\nRevise the code to address this issue.")),(0,eH.Ny)()&&a(!1)};return(0,l.jsxs)("div",{className:"bg-muted flex size-full flex-col items-stretch",children:[(0,l.jsxs)(ez,{className:"justify-between gap-1",bottomBorder:!0,children:[(0,l.jsx)("h3",{className:"text-[13px] font-medium",children:"Console"}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsxs)("div",{className:"text-xs",children:[(0,l.jsxs)("span",{children:[t.length," "]}),(0,l.jsx)("span",{children:1===t.length?"event":"events"})]}),(0,l.jsx)("div",{className:"ml-1 h-[16px] w-[1px] bg-gray-200","aria-hidden":!0}),(0,l.jsx)(R.$,{variant:"ghost",size:"xs",className:"text-gray-500",tooltip:"Clear console output",onClick:r,disabled:0===t.length,children:(0,l.jsx)(z,{})})]})]}),(0,l.jsx)(eL.F,{className:"flex-1",children:0===t.length?(0,l.jsx)("div",{className:"flex h-full items-center justify-center p-8",children:(0,l.jsx)("div",{className:"text-center text-sm text-gray-500",children:"No console output available to display"})}):t.map((e,t)=>(0,l.jsx)("div",{className:(0,c.cn)("group relative flex min-h-[32px] items-center",function(e){switch(e){case"error":return"text-red-700 bg-red-50 hover:bg-red-100";case"warn":return"text-amber-700 bg-amber-50 hover:bg-amber-100";default:return"text-gray-700 hover:bg-gray-100"}}(e.method)),children:(0,l.jsxs)("div",{className:"flex items-start gap-4 px-2 py-1 font-mono text-sm",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("time",{className:"text-[13px]",children:[(0,eF.GP)(new Date(e.timestamp),"HH:mm:ss.SSS"),"Z"]}),e.isServer&&(0,l.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600",children:"[SERVER]"})]}),(0,l.jsx)("div",{className:"w-full flex-1 whitespace-pre-wrap text-[13px]",children:e.message}),s&&("error"===e.method||"warn"===e.method)&&(0,l.jsx)("div",{className:"absolute right-3 top-1 opacity-0 transition-opacity group-hover:opacity-100",children:(0,l.jsxs)(R.$,{onClick:()=>i(e),size:"sm",variant:"secondary",className:"h-[24px] gap-0.5 rounded-md border-none px-1.5 py-0.5 font-sans text-[13px] font-medium shadow-sm",children:["Ask ",(0,l.jsx)(eM.o,{className:"ml-1 h-3 w-3"})]})})]})},"".concat(e.timestamp,"-").concat(t)))})]})}function eW(e){let{data:t,mutate:r}=(0,b.Ay)(["block:consoleEvents",e],{fallbackData:{}});return{blockStatus:null!=t?t:{},flagNewEvent:(0,s.useCallback)(t=>r(r=>({...r,[e]:r&&"error"===r[e]?"error":t})),[e,r]),clearEvents:(0,s.useCallback)(()=>r(t=>{let r={...t};return r[e]=null,r}),[e,r])}}function eG(e){let{data:t,mutate:r}=(0,b.Ay)(["block:file-editing-status",e],{fallbackData:!1});return[t,(0,s.useCallback)(e=>{r(e)},[r])]}var eZ=r(90761);let eX=(0,en.default)(()=>Promise.all([r.e(3871),r.e(4954)]).then(r.bind(r,34954)).then(e=>e.MultiFileLocalCodeBlock),{loadableGenerated:{webpack:()=>[34954]}}),eK=(e,t,r)=>{if(e){var l;null===(l=e.contentWindow)||void 0===l||l.postMessage({type:"preview_code",code:t,version:r},"*")}},e$=es()(eK,200);function eQ(e){let{children:t,activeTab:r,setActiveTab:n,allowRefresh:a,allowFullScreen:i=!0,initialFileTreeSize:o,resultId:c,language:d,remoteInfo:u,meta:m,source:f,hasBlockPreview:p,blockId:h,blockType:x,closed:v,hasSourceBeenEdited:g,onEdit:j,files:w,loadingPath:y,originalCode:k}=e,{activeFilePath:P,setActiveFilePath:E,setAutoSwitch:T}=(0,eO.m)({blockId:h,files:w,loadingPath:y}),{editValueMap:R,setEditValueMap:_}=eA({blockId:h}),{flagNewEvent:C}=eW(h),[I,U]=(0,s.useState)([]),O=(0,s.useCallback)(()=>{U([])},[]),D=(0,s.useCallback)(e=>{if(U(t=>[...t,e]),"console"!==r&&!e.message.includes("[Fast Refresh]"))return"error"===e.method?C("error"):C("log")},[r,C]);(0,s.useEffect)(()=>{O()},[h,O]);let L=(0,N.aq)(),{isPublished:z}=(0,A.X)(),{canWriteToChat:H}=(0,eZ.tZ)(),V=(0,Q.k)("previewBlock"),{data:Z,mutate:$}=(0,b.Ay)(h?["remote:accepted",h]:null,null,{fallbackData:null==u?void 0:u.accepted}),Y=(0,eD.F)(R),J=(0,eD.F)(w),ee=(0,s.useCallback)((e,t,r)=>{if(!v)return;let l={...Y.current,[t]:e};_(l),null==j||j(e);let s=G(null!=c?c:h),n=document.getElementById(s);if(n){if("react-project"===x)eK(n,(0,ed.F7)((0,ed.GP)(l,J.current||[])),r);else if("v0"===x)e$(n,e);else{var a;null===(a=n.contentWindow)||void 0===a||a.postMessage({type:d.toUpperCase()+"_RENDER",source:e},n.dataset.origin||"")}}},[v,Y,_,j,c,h,x,J,d]);(0,s.useEffect)(()=>{let e=G(null!=c?c:h),t=document.getElementById(e);if(!t)return;let r=e=>{var r,l;if(e.data&&"object"==typeof e.data&&e.data.__v0_remote__)switch(e.data.type){case"frame_ready":if("react-project"===x){if(!(null===(r=J.current)||void 0===r?void 0:r.length))return;Object.keys(Y.current).length>0&&e$(t,(0,ed.F7)((0,ed.GP)(Y.current,J.current)))}break;case"inline_edit":if(!J.current)return;let s=J.current.findIndex(t=>t.meta.file===e.data.file);if(-1===s)return;let n=null!==(l=Y.current[e.data.file])&&void 0!==l?l:J.current[s].source,a=n.split("\n"),i=a[e.data.line-1],o=i.substring(0,e.data.column-1),c=i.substring(e.data.column-1+e.data.len),d=e.data.replace;a[e.data.line-1]=o+d+c,ee(n=a.join("\n"),e.data.file,e.data.version);break;case"console":D(e.data)}};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}},[h,x,c,J,ee,Y,D]);let el=w||[{source:f,meta:m,originalCode:k,lang:d,isQuickEdit:!!m.isQuickEdit,blockId:h}],es=ej({blockId:h,editValueMap:R,source:f,meta:m,files:el,clearEditValueMap:(0,s.useCallback)(()=>{_({})},[_])}),[,en]=eG(h),ea=es.hasUnsavedChanges;(0,s.useEffect)(()=>{en(ea)},[ea,en]);let ei=!!(v&&H);if(z)return(0,l.jsx)("div",{className:(0,B.A)("bg-muted h-full min-h-0 overflow-hidden","preview"===r&&"border-alpha-200",!L&&"opacity-0"),children:t});if("react-project"===x){if(!o)throw Error("react-project block is missing initialFileTreeSize");let e=el.length?el.find(e=>e.meta.file===P)||el[0]:void 0,n=e?[{key:"preview",content:!0===p?(0,l.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(i||a)&&(0,l.jsxs)(ez,{className:"bg-muted justify-end gap-1",bottomBorder:!0,children:[i?(0,l.jsx)(et,{}):null,a?(0,l.jsx)(q,{resultId:c}):null]}),(0,l.jsx)("div",{className:"w-full flex-1 overflow-auto",children:(0,l.jsx)(er.FullscreenContainer,{children:t})})]}):null},{key:"code",content:(0,l.jsx)(eC,{showDiffInfo:v,loadingPath:y,activeFilePath:P,setActiveFile:e=>{T&&T(!1),E(e)},initialFileTreeSize:o,files:w,source:f,blockId:h,children:(0,l.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,l.jsxs)(ez,{className:"justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex min-w-0 items-center gap-1 overflow-x-auto",children:P&&P.split("/").map((e,t)=>(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:"whitespace-nowrap font-medium [&:nth-last-child(2)]:text-gray-900",children:e},"part-".concat(e,"-").concat(t)),(0,l.jsx)("div",{className:"last:hidden",children:(0,l.jsx)(X.b,{})},"chevron-".concat(e,"-").concat(t))]},"part-".concat(e,"-").concat(t)))}),(0,l.jsx)("div",{className:"flex items-center gap-1",children:(0,l.jsx)(M.C,{allowDiffToggle:v,additionalHeaderActions:void 0,allowClose:!1,blockId:h,allowCopyCode:!0,allowDownloadCode:!0,originalCode:e.originalCode,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:R[m.file||""]||e.source})})]}),(0,l.jsx)("div",{className:"w-full flex-1 overflow-auto",children:(0,l.jsx)(eY,{blockType:x,remoteInfo:u,isMultiFile:!0,closed:v,blockId:h,setEditValueMap:_,language:e.lang,editValueMap:R,hasSourceBeenEdited:g,handleEdit:ee,file:e,editable:ei})})]})})},{key:"console",content:(0,l.jsx)(eV,{consoleEvents:I,clearLogs:O,canWriteToChat:H})}]:[];return(0,l.jsxs)(l.Fragment,{children:[ei?(0,l.jsx)(eb,{...es,resetValue:()=>{let e=G(null!=c?c:h),t=document.getElementById(e);t&&e$(t,(0,ed.F7)((0,ed.GP)({},J.current||[])))},mergedFromBlockId:h}):null,(0,l.jsx)(F.JS,{className:"border-alpha-200 border-t",tabFiles:n,activeTabKey:r})]})}let eo=el.map(e=>({key:void 0!==w?m.file+"code":"code",display:m.file||"Untitled",content:(0,l.jsx)(eY,{blockType:x,remoteInfo:u,closed:v,blockId:h,setEditValueMap:_,language:d,editValueMap:R,hasSourceBeenEdited:g,handleEdit:ee,file:e,editable:ei}),actions:(0,l.jsx)(M.C,{allowDiffToggle:v,additionalHeaderActions:void 0,allowClose:!1,blockId:h,allowCopyCode:!0,allowDownloadCode:!0,originalCode:e.originalCode,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:R[m.file||""]||e.source})})),ec={key:"preview",disabled:!0!==p,tooltip:"object"==typeof p?p.error:v?void 0:V("previewIsStreaming"),display:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(W.p,{className:"group-disabled:hidden"}),(0,l.jsx)("div",{className:"hidden group-disabled:block",children:v?(0,l.jsx)(K.X,{}):(0,l.jsx)(S.y,{size:16})}),V("preview")]}),content:(0,l.jsx)(er.FullscreenContainer,{children:t}),actions:(0,l.jsxs)(l.Fragment,{children:[i?(0,l.jsx)(et,{}):null,a?(0,l.jsx)(q,{resultId:c}):null]})};return(0,l.jsxs)(l.Fragment,{children:["local"!==x||"@remote"===h||w?null:(0,l.jsx)(em,{blockId:h,hasUnappliedChanges:!!(!0!==Z||R[m.file||""]&&R[m.file||""]!==f),source:R[m.file||""]||f,onApply:()=>{$(!0)},showFadeOut:"code"===r}),ei?(0,l.jsx)(eb,{...es,resetValue:()=>{let e=G(null!=c?c:h),t=document.getElementById(e);if(t){if("v0"===x)e$(t,el[0].source);else{var r;null===(r=t.contentWindow)||void 0===r||r.postMessage({type:d.toUpperCase()+"_RENDER",source:el[0].source},t.dataset.origin||"")}}},mergedFromBlockId:h}):null,(0,l.jsx)(F.Yv,{activeTabKey:r||"code",isLoading:!v,setActiveTabKey:n,tabFiles:[ec,...eo]})]})}function eY(e){let{blockType:t,remoteInfo:r,closed:a,blockId:i,setEditValueMap:o,isMultiFile:c,language:d,editValueMap:u,hasSourceBeenEdited:m,handleEdit:f,file:p,editable:h,className:x}=e,{source:v,meta:g,originalCode:b,isQuickEdit:j}=p;return"local"===t?(0,l.jsx)(s.Suspense,{fallback:null,children:(0,l.jsx)(eX,{remoteInfo:r,blockId:i,source:v,onEdit:e=>{a&&o(t=>({...t||{},[g.file||""]:e}))},closed:a})}):(0,l.jsx)(n.N,{isMultiFile:c,allowQuoting:!0,closed:a,caller:"v0",originalCode:b,showQuickEditAnimation:!a&&j,className:(0,B.A)("not-prose flex-1 grow",x),editable:h,fixingBadLines:p.fixingBadLines,fileName:g.file,language:d,blockId:i,editValue:u[g.file||""],hasSourceBeenEdited:m,onEdit:e=>f(e,g.file||""),runnable:!0,showLineNumbers:!0,value:v})}var eq=r(62841),eJ=r(64480);async function e0(e){let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch outdated env vars");return t.json()}async function e1(e){if(!(await fetch(e,{method:"POST"})).ok)throw Error("Failed to sync env vars")}var e5=r(580);function e2(){let[e,t]=(0,s.useState)(!0),{isAuthor:r}=(0,eq.Pk)(),{project:n}=(0,eZ.tZ)(),a=(0,ef.eu)(),{outdatedEnvVars:i,sync:o,syncError:c}=function(e,t){let{data:r,error:l,isLoading:s,mutate:n}=(0,b.Ay)(e&&t?"/chat/api/chat/env-vars/outdated?bid=".concat(e):null,e0,{refreshInterval:18e4}),{trigger:a,error:i}=(0,eJ.A)(e&&t?"/chat/api/chat/env-vars/outdated?bid=".concat(e):null,e1),o=async()=>{await a(),await n()};return{outdatedEnvVars:r,isLoading:s,error:l,refresh:n,sync:o,syncError:i}}(null==a?void 0:a.id,null==n?void 0:n.vercelProjectId),[d,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{c&&(console.error("Failed to sync environment variables",c),ea.oR.error("Failed to sync environment variables",{position:"bottom-right"}))},[c]),e&&(null==i?void 0:i.length))?(0,l.jsx)("div",{className:"shadow-modal bg-background absolute bottom-2 right-2 z-10 max-w-[350px] rounded p-2",children:(0,l.jsxs)("div",{className:" flex min-w-[300px] flex-col items-center gap-3 rounded-[8px]   p-2 text-sm",role:"alert",children:[(0,l.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex w-full items-center font-semibold",children:[(0,l.jsx)("span",{children:"Outdated Environment Variables"})," "]}),(0,l.jsx)("div",{className:"flex w-full",children:(0,l.jsx)("span",{className:"font-small line-clamp-3 overflow-hidden text-xs",children:"This Block does not have the most recent environment variables from Vercel."})})]}),r&&(0,l.jsxs)("div",{className:"flex w-full justify-end gap-2 align-middle",children:[(0,l.jsx)(R.$,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",size:"sm",variant:"ghost",onClick:()=>{t(!1)},children:"Dismiss"}),(0,l.jsxs)(R.$,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",size:"sm",variant:"secondary",onClick:async()=>{u(!0),await o(),u(!1),t(!1),ea.oR.success("Environment variables synced",{position:"bottom-right"})},disabled:d,children:[(0,l.jsx)(e5.j,{height:13,width:13})," Sync"]})]})]})}):null}async function e3(e,t){try{let r=await v(e.language,e.blockId,t||e.source);if("error"in r)throw Error(r.error);if(!Array.isArray(r.result.stdout)||!Array.isArray(r.result.stderr))throw Error("Unexpected response from code execution");return r.result}catch(t){let e=t instanceof Error?t.message:"Unexpected error occurred while executing the code";return(0,g.u)("CodeExecutionError",{errorCode:U.gz,errorMsg:e}),{error:"Unable to execute code. Re-run the code or revise your message."}}}class e4{static Render(e){var t;let{isPublished:r}=(0,A.X)(),a=(0,N.aq)(),{isCopied:i,copyToClipboard:o}=(0,T.C)({timeout:2e3}),{editValueMap:d,setEditValueMap:u}=eA({blockId:e.blockId}),{isAuthor:m}=(0,eq.Pk)(),{data:f,mutate:h}=(0,b.Ay)(["block:output",e.blockId]),{data:x}=(0,b.Ay)("block:output:initial");(0,s.useEffect)(()=>{(null==x?void 0:x.id)===e.blockId&&x.result.then(e=>{e&&h(t=>t||e.value)})},[x,e.blockId,h]);let v=f;if(void 0===v&&(null==x?void 0:x.id)===e.blockId&&x){let e=(0,s.use)(x.result);e&&(v=e.value)}let w=async()=>{if(i)return;let e=e7(v);return await o(e),(0,g.u)("CopyOutputExecutable",{output:e})},y=(0,s.useMemo)(()=>I.DS.includes(e.language)&&I._b.some(t=>{var r;return null===(r=e.meta.file)||void 0===r?void 0:r.endsWith(t)}),[e.language,e.meta.file]),k=ej({blockId:e.blockId,editValueMap:d,source:e.source,meta:e.meta,files:[{source:e.source,meta:e.meta}],clearEditValueMap:()=>u({})}),R=r?O.Lk:O.K4,S=[{key:"code",display:e.meta.file,content:(0,l.jsxs)(l.Fragment,{children:[e.closed&&m?(0,l.jsx)(eb,{...k,resetValue:()=>{},mergedFromBlockId:e.blockId}):null,(0,l.jsx)(eY,{blockType:e.meta.type,remoteInfo:void 0,isMultiFile:!0,closed:e.closed,blockId:e.blockId,className:k.hasUnsavedChanges?"pb-14":"",setEditValueMap:u,language:e.language,editValueMap:d,hasSourceBeenEdited:e.hasSourceBeenEdited,handleEdit:t=>{t&&e.closed&&u(r=>({...r,[e.meta.file||""]:t}))},file:{source:e.source,meta:e.meta,lang:e.language,blockId:e.blockId,isQuickEdit:!!e.meta.isQuickEdit},editable:e.closed&&m},e.blockId)]}),actions:(0,l.jsx)(M.C,{additionalHeaderActions:void 0,allowClose:!1,allowCopyCode:!0,allowDownloadCode:!0,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:d[e.meta.file||""]||e.source,originalCode:e.originalCode,blockId:e.blockId,allowDiffToggle:e.closed})}],_=r?(0,l.jsx)(n.N,{originalCode:e.originalCode,showQuickEditAnimation:!e.closed&&!!e.meta.isQuickEdit,closed:e.closed,blockId:e.blockId,allowQuoting:!0,caller:"executable",className:"min-h-52 flex-1 rounded-md",editable:!1,fileName:e.meta.file,language:e.language,runnable:y,showLineNumbers:!0,value:e.source}):(0,l.jsx)(F.Yv,{isLoading:!e.closed,activeTabKey:"code",className:"min-h-52 w-full flex-1",setActiveTabKey:()=>{},tabFiles:S});return(0,l.jsxs)("div",{className:(0,c.cn)("not-prose flex h-full w-full flex-col",r&&"bg-muted overflow-hidden rounded-md border",!a&&"opacity-0"),children:[_,y&&(0,l.jsx)(P,{animated:!1,axis:"y",cookieName:R,dotsHandle:!1,initialSize:null!==(t=e.initialOutputSize)&&void 0!==t?t:33,minSizePx:200,show:!0,side:"start",children:(0,l.jsx)("div",{className:"border-alpha-400 flex size-full min-h-0 flex-1 flex-col items-center justify-center border-t",children:v?(0,l.jsxs)("div",{className:"flex size-full flex-col items-stretch",children:[(0,l.jsxs)("div",{className:(0,c.cn)("flex items-center justify-between border-b px-2 py-1"),children:[(0,l.jsx)("h3",{className:"select-none text-sm font-medium text-gray-500",children:"Output"}),(0,l.jsxs)("div",{className:"flex select-none items-center gap-1",children:[(0,l.jsx)(C,{buttonText:"Run",codeExecutionBlockProps:e,editedValue:d[e.meta.file||""]||void 0,execute:e3,setOutput:h,variant:"ghost"}),(0,l.jsx)("div",{className:"bg-alpha-400 h-4 w-px"}),(0,l.jsx)(E.Z,{"aria-label":"Clear",onClick:()=>h(void 0),tooltip:"Clear",children:(0,l.jsx)("span",{"aria-hidden":!0,children:(0,l.jsx)(z,{})})}),(0,l.jsx)(E.Z,{"aria-label":"Download",disabled:"error"in v,onClick:()=>(function(e){let t=e7(e),r=new Blob([t],{type:"text/plain"}),l=URL.createObjectURL(r),s=document.createElement("a");return s.download="output.txt",s.href=l,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l),(0,g.u)("DownloadOutputExecutable",{output:t})})(v),tooltip:"Download",children:(0,l.jsx)("span",{"aria-hidden":!0,children:(0,l.jsx)(D.q,{})})}),(0,l.jsx)(E.Z,{disabled:"error"in v,onClick:w,tooltip:"Copy",children:(0,l.jsx)("span",{"aria-hidden":!0,children:i?(0,l.jsx)(j.J,{}):(0,l.jsx)(L.T,{})})})]})]}),(0,l.jsx)(p,{className:"h-full",value:v})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("p",{className:"mb-2 text-base font-medium text-gray-900",children:"No Output"}),(0,l.jsx)("p",{className:"mb-6 text-sm text-gray-500",children:e.closed?"Run the code to generate an output.":"You can execute the code after it has finished streaming."}),(0,l.jsx)(C,{codeExecutionBlockProps:e,disabled:!e.closed,editedValue:d[e.meta.file||""]||void 0,execute:e3,setOutput:h})]})})}),y&&m&&!r&&(0,l.jsx)(e2,{})]})}static Actions(e){return null}}e4.getIsPreviewable=()=>!1,e4.TitleActions=null;let e7=e=>{if(!e)return"No output.";if("error"in e)return"Errored output. "+e.error;if(!Array.isArray(e.stdout)||!Array.isArray(e.stderr))return"Malformed output.";if(0===e.stdout.length&&0===e.stderr.length)return"Empty output.";let t=e.stdout.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n"),r=e.stderr.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n");return 0===e.stderr.length?t:0===e.stdout.length?"# stderr\n\n"+r:"# stdout\n\n"+t+"\n\n# stderr\n\n"+r},e6=new WeakMap,e9=new WeakSet,e8=new WeakMap;function te(e){let t=e.replace(/_/g,"--").replace(/[^a-zA-Z0-9-]/g,"").replace(/-+$/,"");if("generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return tt("".concat(e,"--").concat(t,".dev.vusercontent.net"))}return tt("g-".concat(t,".vusercontent.net"))}function tt(e){let t=new URL("https://example.com");return t.hostname=e,t.origin}function tr(e,t){if(!e)return;let r=e6.get(e);r?r.push(t):e6.set(e,[t]),tl(e)}function tl(e){if(!e9.has(e))return;let t=e6.get(e);if(t){for(let l of t){var r;null===(r=e.contentWindow)||void 0===r||r.postMessage(l,e.dataset.origin||"")}t.length=0}}let ts=[];window.addEventListener("message",e=>{if(!(e.origin===te("any")||e.origin.endsWith(".vusercontent.net"))||!e.source)return;let t=Array.from(document.querySelectorAll("iframe[data-v0]")).find(t=>t instanceof HTMLIFrameElement&&t.contentWindow===e.source);if(!t)return;e9.add(t),tl(t),window.debug&&console.log("child event handler",e.data);let r=e8.get(t);for(let t of ts)r===t.id&&t.listener(e.data)});var tn=r(10627);let ta={LIGHTNING_WEB_COMPONENTS_UNSUPPORTED:"v0 does not currently support previewing LWC",LAYOUT_UNSUPPORTED:"v0 cannot currently preview Next.js layouts",SERVER_ACTION_UNSUPPORTED:"Server Actions cannot be previewed",RSC_UNSUPPORTED:"v0 cannot currently preview React Server Components",API_KEY_UNSUPPORTED:"v0 cannot currently preview components with API keys",REACT_NATIVE_UNSUPPORTED:"v0 cannot currently preview React Native components",ELECTRON_UNSUPPORTED:"v0 cannot currently preview Electron apps",EXPO_UNSUPPORTED:"v0 cannot currently preview Expo components",CLERK_UNSUPPORTED:"v0 does not currently support previewing Clerk",PRISMA_UNSUPPORTED:"v0 does not currently support previewing @prisma/client",NEXT_INTL_UNSUPPORTED:"v0 does not currently support previewing next-intl",NODEMAILER_UNSUPPORTED:"v0 does not currently support previewing nodemailer",INERTIA_UNSUPPORTED:"v0 does not currently support previewing Inertia.js",EXPRESS_UNSUPPORTED:"v0 does not currently support previewing Express.js",FS_NOT_SUPPORTED:"v0 does not currently support previews with file system access",REMIX_UNSUPPORTED:"v0 does not currently support previewing Remix",REACT_ROUTER_UNSUPPORTED:"v0 does not currently support previewing react-router",MONGODB_UNSUPPORTED:"v0 does not currently support previewing MongoDB",ROUTE_HANDLER_UNSUPPORTED:"v0 cannot preview Route Handlers",REACT_HOOKS:"React hooks cannot be previewed",NON_JS_TS_FILE_UNSUPPORTED:"v0 can not preview this file",TEST_FILES_UNSUPPORTED:"v0 does not currently support previewing tests",NODE_APIS:"v0 does not currently support previewing Node.js APIs",PG_UNSUPPORTED:"v0 does not currently support the pg package",CHAKRA_UNSUPPORTED:"v0 does not currently support previewing Chakra UI",REACT_PDF_UNSUPPORTED:"v0 does not currently support previewing @react-pdf/renderer",SWIPER_UNSUPPORTED:"v0 does not currently support previewing swiper/css",GOOGLEAPIS_UNSUPPORTED:"v0 does not currently support previewing code using googleapis",ANGULAR_UNSUPPORTED:"v0 does not currently support previewing Angular",MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED:"v0 does not currently support previewing @mui/x-date-pickers/AdapterDateFns",PLAYWRIGHT_UNSUPPORTED:"v0 does not currently support previewing Playwright",INSTRUMENTATION_UNSUPPORTED:"v0 does not support previewing instrumentation.ts",LARAVEL_UNSUPPORTED:"v0 does not currently support previewing Laravel",MONGOOSE_UNSUPPORTED:"v0 does not currently support previewing Mongoose"},ti=[["@clerk/nextjs",ta.CLERK_UNSUPPORTED],["@clerk/clerk-react",ta.CLERK_UNSUPPORTED],["next-intl",ta.NEXT_INTL_UNSUPPORTED],["react-native",ta.REACT_NATIVE_UNSUPPORTED],["@prisma/client",ta.PRISMA_UNSUPPORTED],["pg",ta.PG_UNSUPPORTED],["nodemailer",ta.NODEMAILER_UNSUPPORTED],["@sendgrid/mail",ta.NODEMAILER_UNSUPPORTED],["@inertiajs/react",ta.INERTIA_UNSUPPORTED],["@chakra-ui/react",ta.CHAKRA_UNSUPPORTED],["@react-pdf/renderer",ta.REACT_PDF_UNSUPPORTED],["swiper/css",ta.SWIPER_UNSUPPORTED],["swiper/css/navigation",ta.SWIPER_UNSUPPORTED],["@playwright/test",ta.PLAYWRIGHT_UNSUPPORTED],["angular/router",ta.ANGULAR_UNSUPPORTED],["angular/core",ta.ANGULAR_UNSUPPORTED],["@angular/router",ta.ANGULAR_UNSUPPORTED],["@angular/core",ta.ANGULAR_UNSUPPORTED],["@angular/common",ta.ANGULAR_UNSUPPORTED],["@mui/x-date-pickers/AdapterDateFns",ta.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED],["@react-navigation/native",ta.EXPO_UNSUPPORTED],["@react-navigation/stack",ta.EXPO_UNSUPPORTED],["expo-router",ta.EXPO_UNSUPPORTED],["express",ta.EXPRESS_UNSUPPORTED],["expo-file-system",ta.EXPO_UNSUPPORTED],["googleapis",ta.GOOGLEAPIS_UNSUPPORTED],["fs",ta.FS_NOT_SUPPORTED],["fs/promises",ta.FS_NOT_SUPPORTED],["bcrypt",ta.NODE_APIS],["@remix-run/node",ta.REMIX_UNSUPPORTED],["mongodb",ta.MONGODB_UNSUPPORTED],["react-router-dom",ta.REACT_ROUTER_UNSUPPORTED],["lwc",ta.LIGHTNING_WEB_COMPONENTS_UNSUPPORTED]],to=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"],tc=["tsx","html","jsx","js","ts"],td={NON_SUPPORTED_FILES:"v0 can not preview this file",HAS_LOCAL_FILE_IMPORTS:"v0 can not preview files with local imports",NO_EXPORTED_COMPONENT:"No exported component found"};function tu(e){return"v0 does not currently support ".concat(e)}let tm={"@clerk/nextjs/server":ta.CLERK_UNSUPPORTED,"@clerk/clerk-react":ta.CLERK_UNSUPPORTED,"next-intl":ta.NEXT_INTL_UNSUPPORTED,"react-native":ta.REACT_NATIVE_UNSUPPORTED,electron:ta.ELECTRON_UNSUPPORTED,pg:ta.PG_UNSUPPORTED,nodemailer:ta.NODEMAILER_UNSUPPORTED,"@sendgrid/mail":ta.NODEMAILER_UNSUPPORTED,"@chakra-ui/react":ta.CHAKRA_UNSUPPORTED,lwc:ta.LIGHTNING_WEB_COMPONENTS_UNSUPPORTED,"@playwright/test":ta.PLAYWRIGHT_UNSUPPORTED,"angular/router":ta.ANGULAR_UNSUPPORTED,"angular/core":ta.ANGULAR_UNSUPPORTED,"@angular/router":ta.ANGULAR_UNSUPPORTED,"@angular/core":ta.ANGULAR_UNSUPPORTED,"@angular/common":ta.ANGULAR_UNSUPPORTED,"@mui/x-date-pickers/AdapterDateFns":ta.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED,"@react-navigation/native":ta.EXPO_UNSUPPORTED,"@react-navigation/stack":ta.EXPO_UNSUPPORTED,"expo-router":ta.EXPO_UNSUPPORTED,express:ta.EXPRESS_UNSUPPORTED,"expo-file-system":ta.EXPO_UNSUPPORTED,googleapis:ta.GOOGLEAPIS_UNSUPPORTED,bcrypt:ta.NODE_APIS,"@remix-run/node":ta.REMIX_UNSUPPORTED,mongodb:ta.MONGODB_UNSUPPORTED,"react-router-dom":ta.REACT_ROUTER_UNSUPPORTED,"laravel-mix":ta.LARAVEL_UNSUPPORTED,mongoose:ta.MONGOOSE_UNSUPPORTED,"discord-player":tu("discord-player"),"fluent-ffmpeg":tu("fluent-ffmpeg"),"@prisma/client":tu("@prisma/client"),hono:tu("hono"),undici:tu("undici"),http2:tu("http2"),payload:tu("payload"),"@nestjs/mongoose":tu("@nestjs/mongoose"),"@nestjs/core":tu("@nestjs/core"),"@ionic/angular":tu("@ionic/angular"),"firebase-admin/database":tu("firebase-admin/database"),"firebase-admin":tu("firebase-admin"),"firebase-functions":tu("firebase-functions"),"puppeteer-core":tu("puppeteer-core"),"coffee-script":tu("coffee-script"),msw:tu("msw"),"msw/node":tu("msw/node"),mysql2:tu("mysql2"),"mysql2/promise":tu("mysql2"),"@worldcoin/idkit":tu("@worldcoin/idkit"),"discord.js":tu("discord.js"),"@vitejs/plugin-react":tu("Vite"),"vite-plugin-react":tu("Vite"),nativewind:tu("nativewind"),commander:tu("commander"),cosmiconfig:tu("cosmiconfig"),"react-native-svg":tu("react-native-svg"),"google-auth-library":tu("google-auth-library"),nextra:tu("nextra")},tf=Object.keys(tm).join("|"),tp=new RegExp("from ['\"](".concat(tf,")['\"]")),th=new RegExp("import ['\"](".concat(tf,")['\"]")),tx=new RegExp("import\\(['\"](".concat(tf,")['\"]\\)")),tv=new RegExp("require\\(['\"](".concat(tf,")['\"]\\)")),tg=/(import| from) ['"]\.\//,tb=RegExp("\\.(php|go|java|c|h|cpp|cs|rb|bat|astro|rs|vue|svelte|dart|kt)$");function tj(e){let{iframeId:t,iframeRef:r,activeTab:s,isPublished:n,src:a,origin:i,onLoad:o}=e;return(0,l.jsx)("iframe",{allow:"fullscreen; camera; microphone; gyroscope; accelerometer; clipboard-write; autoplay",title:"v0 block",className:(0,B.A)("h-full w-full select-none","preview"!==s&&(n?"hidden":"sr-only invisible")),"data-origin":i,"data-v0":!0,id:t,loading:"eager",onLoad:o,ref:r,sandbox:"allow-scripts allow-same-origin allow-forms allow-downloads allow-popups-to-escape-sandbox allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-presentation",src:"".concat(i).concat(a),fetchPriority:"high"})}var tw=r(2829),ty=r(33744);function tN(e){let{error:t,onDismiss:r}=e,{setPromptFormInput:n}=(0,eB.Q1)(),{isAuthor:a}=(0,eq.Pk)(),i=(0,ef.oQ)(),{isCopied:o,copyToClipboard:d}=(0,T.C)({timeout:2e3}),[u,m]=(0,s.useState)(!1);return t?(0,l.jsx)("div",{className:"light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",children:(0,l.jsxs)("div",{className:"text-background flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-red-600 p-2 text-sm",role:"alert",children:[(0,l.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex w-full items-center justify-between font-semibold",children:[(0,l.jsx)("span",{children:"Error"})," ",(0,l.jsxs)(R.$,{className:"text text-background m-[-4px] hover:text-gray-200",onClick:r,size:"xs",variant:"ghost",children:[(0,l.jsx)(tw.a,{}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,l.jsx)("div",{className:"flex w-full",children:(0,l.jsx)("span",{className:(0,c.cn)("font-small text-background overflow-hidden whitespace-pre-wrap font-mono text-[11px] cursor-pointer",{"line-clamp-2":!u}),onClick:()=>m(!u),children:t})})]}),a&&(0,l.jsxs)("div",{className:"flex w-full justify-end gap-2 align-middle",children:[(0,l.jsx)(R.$,{className:"border-background text-background bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:()=>{d(t)},size:"sm",variant:"link",children:(0,l.jsx)(ty.U,{isCopied:o})}),(0,l.jsx)("div",{className:"border-alpha-400 border-l"}),(0,l.jsxs)(R.$,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:()=>{n("The code returns the following error:\n```\n".concat(t,"\n```\nRevise the code to address the error.")),(0,eH.Ny)()&&i(!1)},size:"sm",variant:"secondary",children:["Fix with ",(0,l.jsx)(eM.o,{className:"mt-[1px]"})]})]})]})}):null}function tk(e,t){let r=isNaN(parseInt(e))?e:"An unexpected error occurred (".concat(e,")");return t?"".concat(r,"\n\n").concat(t):r}class tP{}tP.getIsPreviewable=e=>{let{source:t,closed:r,meta:l}=e,s=function(e,t){if(t){if(t.startsWith("use-"))return ta.REACT_HOOKS;if("instrumentation.ts"===t)return ta.INSTRUMENTATION_UNSUPPORTED;let e=t.split("."),r=e[e.length-1],l=e.length>2?e[e.length-2]:void 0;if(r&&!tc.some(e=>r===e))return ta.NON_JS_TS_FILE_UNSUPPORTED;if(l&&("test"===l||"spec"===l))return ta.TEST_FILES_UNSUPPORTED}for(let[t,r]of ti)if(new RegExp("from ['\"]".concat(t.replace("/","/"),"['\"]")).test(e))return r;return/\<ClerkProvider/.test(e)?ta.CLERK_UNSUPPORTED:/export default function (Root)?Layout/.test(e)?ta.LAYOUT_UNSUPPORTED:/(^|\n)['"]use server['"]/.test(e)?ta.SERVER_ACTION_UNSUPPORTED:/export default async function/.test(e)?ta.RSC_UNSUPPORTED:/(API_KEY|_SECRET) =/.test(e)||/YOUR_API_KEY/.test(e)?ta.API_KEY_UNSUPPORTED:!to.some(t=>new RegExp("export (default )?async function ".concat(t,"\\(")).test(e)||new RegExp("export const ".concat(t," =")).test(e))||ta.ROUTE_HANDLER_UNSUPPORTED}(t,l.file);return"string"==typeof s?{error:s}:!!s&&r},tP.Render=s.memo(e=>{let t=(0,eq.jo)(),{isPublished:r}=(0,A.X)(),{chatId:n}=(0,eq.xz)(),{activeTab:a,setActiveTab:i,hasBlockPreview:o}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable}),{projectBlocks:c,projectBlockIndex:d,allBlocks:u}=(0,eh.useBlockHistory)({blockId:e.blockId}),m=(0,s.useMemo)(()=>{var e;let t={},r=(null===(e=c[d])||void 0===e?void 0:e.meta.file)||".";for(let e of u)e.resultId&&e.meta.file&&(t[e.meta.file]=e.resultId);for(let e=0;e<=d;e++){let r=c[e],l=r.meta.file;l&&r.resultId&&(t[l]=r.resultId)}return{mapping:t,rootFileName:r}},[u,c,d]),f=(0,s.useRef)(null),[p,h]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(f.current)return function(e,t){let r=e8.get(e)||Math.random().toString();return e8.set(e,r),ts.push({id:r,listener:t}),()=>{let e=ts.findIndex(e=>e.listener===t);e>=0&&ts.splice(e,1)}}(f.current,t=>{switch(t.type){case"set_loading":f.current&&(tr(f.current,{type:"parent_ready"}),tr(f.current,{type:"sync_file_mapping",data:m}));break;case"error":case"runtime-error":{let r=tk(t.error);t.resultId===e.resultId&&h(l=>(l!==r&&e.isPreviewable&&(0,g.u)("V0BlockPreviewError",{messageId:e.messageId,blockId:e.blockId,resultId:t.resultId,from:e.meta.isQuickEdit?"quick-edit":void 0},{errorMsg:r,errorCode:U.rU}),r));break}case"started_visible_render":e.setIsPreviewable(!0)}})},[e.blockId,e.meta.from,e.resultId,e.setIsPreviewable,m,t]),(0,s.useEffect)(()=>{h(null)},[e.blockId]),(0,l.jsxs)(eQ,{activeTab:a,allowRefresh:!0,hasBlockPreview:o,setActiveTab:i,...e,blockType:"v0",language:"typescriptreact",children:[p?(0,l.jsx)(tN,{error:p,onDismiss:()=>{h(null)}}):null,e.resultId&&"boolean"==typeof e.isPreviewable?(0,l.jsx)(tj,{activeTab:a,iframeId:G(e.resultId),iframeRef:f,isPublished:r,onLoad:()=>{f.current&&tr(f.current,{type:"sync_file_mapping",data:m})},origin:te(n||e.blockId),src:"/p/".concat(e.resultId,"?c=1&flags=1&bid=").concat(e.blockId)}):null]})}),tP.Actions=s.memo(e=>{let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,l.jsx)(Z,{hasBlockPreview:t,activeTab:r,setActiveTab:s})}),tP.TitleActions=()=>null;var tE=r(30371),tT=r(24648);let tR=e=>{let t=(0,tT.Q)(),r=t.globalSessionTokenCache||(t.globalSessionTokenCache=new Map),{data:l,error:s}=(0,tE.A)(e?"/chat/api/chat/frame-token?bid=".concat(e):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch session token");return t.text()});return"string"!=typeof l||"string"!=typeof e||r.has(e)||r.set(e,l),{token:void 0===e?void 0:r.get(e),error:s}};var tS=r(66794),t_=r(45313),tC=r(22277);function tI(){return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{id:"Icon",children:[(0,l.jsx)("path",{fill:"currentcolor",fillRule:"evenodd",clipRule:"evenodd",d:"M13.7497 10.75L13.7497 11.5L13.7497 13.2494C13.7497 14.2159 12.9662 14.9994 11.9997 14.9994L2.75 14.9994C1.7835 14.9994 1 14.2159 1 13.2494L1 4C1 3.0335 1.7835 2.25 2.75 2.25L4.49966 2.25L5.24966 2.25L5.24966 3.75L4.49966 3.75L2.75 3.75C2.61193 3.75 2.5 3.86193 2.5 4L2.5 13.2494C2.5 13.3875 2.61193 13.4994 2.75 13.4994L11.9997 13.4994C12.1377 13.4994 12.2497 13.3875 12.2497 13.2494L12.2497 11.5L12.2497 10.75L13.7497 10.75Z"}),(0,l.jsx)("path",{fill:"none",stroke:"currentcolor",d:"M7 8V3C7 2.44772 7.44772 2 8 2H13C13.5523 2 14 2.44772 14 3V8C14 8.55228 13.5523 9 13 9H8C7.44772 9 7 8.55228 7 8Z",strokeWidth:"1.5"})]})})}r(20762);var tU=r(32192);function tO(e,t){e.postMessage({__v0_remote__:1,...t},"*")}function tA(e){let{iframeId:t,devTools:r,allowMobileFullscreen:n,children:a}=e,i=(0,Q.k)("previewBlock"),[o,u]=s.useState(""),[m,f]=s.useState(!1),[p,h]=s.useState(!1),x=(0,eD.F)(o),{fullScreenResult:v,setFullscreenResult:g}=(0,J.S)(),b=(0,tU.$)(),[j,w]=s.useState(!1),[y,N]=s.useState(!0),k=(0,s.useMemo)(()=>{if(!o)return"";let e=new URL(o);return e.pathname+e.search+e.hash},[o]),[P,T]=s.useState(null),R=(0,eD.F)(P);(0,s.useEffect)(()=>{if(!document.getElementById(t))return;let e=e=>{if(e.data&&"object"==typeof e.data&&e.data.__v0_remote__)switch(e.data.type){case"location_change":u(e.data.href),f("boolean"==typeof e.data.canGoBack&&e.data.canGoBack),h("boolean"==typeof e.data.canGoForward&&e.data.canGoForward);break;case"devtools_state":w(e.data.enabled);break;case"app_navigation_state":N(e.data.loading)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t]);let S=(0,s.useCallback)(()=>{let e=document.getElementById(t);e&&(e.contentDocument?e.contentDocument.location.reload():x.current?e.src=x.current:e.src=e.src,T(null),N(!0))},[t,x]),_=(0,s.useCallback)(()=>{let e=document.getElementById(t);e&&window.open(x.current||e.src,"_blank","noreferrer,noopener")},[t,x]),C=(0,s.useCallback)(()=>{let e=document.getElementById(t);e&&e.contentWindow&&(tO(e.contentWindow,{type:"navigate_back"}),T(null))},[t]),I=(0,s.useCallback)(()=>{let e=document.getElementById(t);e&&e.contentWindow&&(tO(e.contentWindow,{type:"navigate_forward"}),T(null))},[t]),U=(0,s.useCallback)(()=>{let e=document.getElementById(t);e&&e.contentWindow&&(tO(e.contentWindow,{type:"navigate_to",href:null===R.current?x.current:new URL(R.current,x.current).href}),N(!0))},[t,x,R]);return(0,l.jsxs)("div",{className:"flex h-full w-full flex-col","data-slot":"browser",children:[(0,l.jsxs)(ez,{className:"bg-muted gap-1 px-2",bottomBorder:!0,children:[(0,l.jsx)(E.Z,{disabled:!m,onClick:C,children:(0,l.jsx)(tS.J,{})}),(0,l.jsx)(E.Z,{disabled:!p,onClick:I,children:(0,l.jsx)(d.c,{})}),(0,l.jsx)(E.Z,{onClick:S,children:y?(0,l.jsx)(tD,{}):(0,l.jsx)($.g,{})}),(0,l.jsxs)("div",{className:"relative mx-1 flex-1",children:[(0,l.jsx)("input",{type:"text",className:(0,c.cn)("focus:border-alpha-200 h-6 w-full min-w-0 rounded-full border border-transparent bg-gray-200 px-2.5 text-gray-900 outline-none hover:bg-gray-300/50",v&&"pl-7"),value:null!==P?P:k,onKeyDown:e=>{"Enter"===e.key?(U(),u(null!==P?new URL(P,o).href:o),T(null),e.stopPropagation(),e.currentTarget.blur()):"Escape"===e.key&&(T(null),e.stopPropagation(),e.currentTarget.blur())},onChange:e=>T(e.currentTarget.value),onFocus:e=>{e.currentTarget.select()}}),v&&(0,l.jsx)("div",{className:"absolute left-2 top-1/2 -translate-y-1/2",children:(0,l.jsx)(eM.o,{className:"size-4"})})]}),r?(0,l.jsx)(E.Z,{"data-slot":"button-select",className:(0,c.cn)(j?"!bg-blue-500/15 text-blue-500":"focus:bg-transparent"),tooltip:{side:"bottom",content:"Select"},onClick:()=>{w(e=>!e);let e=document.getElementById(t);e&&e.contentWindow&&tO(e.contentWindow,{type:"devtools_enable"})},children:(0,l.jsx)(tC.f,{})}):null,(0,l.jsx)(E.Z,{"data-slot":"button-new-tab",tooltip:{side:"bottom",content:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("span",{children:"Open in new tab"}),(0,l.jsx)("span",{className:"max-w-[200px] text-center text-sm text-gray-400",children:"This link is insecure and can expose your code and data."})]})},onClick:_,children:(0,l.jsx)(tI,{})}),(0,l.jsx)(E.Z,{className:(0,c.cn)(!n&&b?"hidden":null),"data-slot":"button-fullscreen","data-testid":"fullscreen-button",tooltip:{side:"bottom",content:i("fullscreen")},onClick:()=>g(!v),children:v?(0,l.jsx)(t_.K,{}):(0,l.jsx)(ee.g,{})})]}),(0,l.jsx)("div",{className:"flex-1 shrink-0","data-slot":"browser-content",children:a})]})}function tD(){return(0,l.jsx)("svg",{className:"browserframe-loading-spinner",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("circle",{fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})})}var tL=r(34016),tz=r(15826),tF=r(21356);function tM(e){let{blockId:t,isPreviewable:r,closed:n}=e,{hasBlockPreview:a,activeTab:i,setActiveTab:o}=(0,tn.P5)({blockId:t,isPreviewable:r}),c=(0,Q.k)("previewBlock"),{blockStatus:d,clearEvents:u}=eW(t),[m]=eG(t),f=d[t];(0,s.useEffect)(()=>{"console"===i&&u()},[i,u]);let p={key:"preview",disabled:!0!==a,tooltip:"object"==typeof a?a.error:n?void 0:c("previewIsStreaming"),display:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(W.p,{className:"group-disabled:hidden"}),(0,l.jsx)("div",{className:"hidden group-disabled:block",children:n?(0,l.jsx)(K.X,{}):(0,l.jsx)(S.y,{size:16})}),(0,l.jsx)("span",{className:"@[17rem]/tabs:block hidden",children:c("preview")})]})},h={key:"code",display:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[m?(0,l.jsx)(tB,{status:"warn"}):null,(0,l.jsx)(V.Y,{}),(0,l.jsx)("span",{className:"@[17rem]/tabs:block hidden",children:"Code"})]})},x={key:"console",display:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[f?(0,l.jsx)(tB,{status:f}):null,(0,l.jsx)(tF.b,{}),(0,l.jsx)("span",{className:"@[17rem]/tabs:block hidden",children:"Console"})]})};return(0,l.jsx)("div",{className:"@container/tabs flex-1",children:(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(F.wb,{disableOverflow:!0,tabs:[p,h,x],activeTabKey:i,setActiveTabKey:o,isLoading:!1})})})}function tB(e){let{status:t="log"}=e;return(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"absolute -translate-y-0.5 translate-x-0.5",children:(0,l.jsx)("circle",{cx:"12.5",cy:"5.5",r:"3.5",strokeWidth:"1.5",stroke:"hsl(var(--background))",className:"error"===t?"fill-red-500":"log"===t?"fill-blue-600":"fill-yellow-500"})})}class tH{static Render(e){let{isPublished:t}=(0,A.X)(),{token:r,error:n}=tR(e.blockId),{activeForkKey:a}=(0,eq.Pk)(),[i,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{o(null)},[e.blockId,o]);let{projectBlocks:c,projectBlockIndex:d}=(0,eh.useBlockHistory)({blockId:e.blockId}),{activeTab:u,setActiveTab:m,hasBlockPreview:f}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable}),p=(0,s.useMemo)(()=>{if("react-project"===e.meta.type)return(0,ed.A2)({source:e.source,blockType:"react-project",blockId:e.blockId})},[e.source,e.blockId,e.meta.type]),h=(0,s.useMemo)(()=>{if(e.closed||!p||!p.length)return;let t=p[p.length-1];if("file"in t.meta&&!t.isDeleted)return t.meta.file},[p,e.closed]),x=(0,s.useMemo)(()=>{if(!p)return;let e=[],t=new Map,r=c.slice(0,d),l=new Map;for(let t of r){let r=(0,ed.A2)({source:t.source,blockType:"react-project",blockId:t.id});e.push(...r)}for(let r of(e.push(...p),e)){let e=t.get(r.meta.file);e?t.set(r.meta.file,{...r,originalCode:e.source}):t.set(r.meta.file,{...r,originalCode:r.isQuickEdit&&!r.source?"// ".concat(r.isAttachmentQuickEdit?"Reading from":"Generating"," ").concat(r.meta.file):void 0}),l.has(r.meta.file)||l.set(r.meta.file,l.size)}return Array.from(t.values()).filter(e=>!e.isDeleted)},[d,c,p]),v=(0,eD.F)(x),b=G(e.blockId),{submit:j}=(0,tL.y)();(0,s.useEffect)(()=>{let t=t=>{if(t.data&&"object"==typeof t.data&&t.data.__v0_remote__){if("error"===t.data.type){let r=tk(t.data.error,t.data.stack);o(l=>l!==r&&e.isPreviewable?((0,g.u)("V0BlockPreviewError",{messageId:e.messageId,blockId:e.blockId,resultId:t.data.resultId,from:void 0!==e.meta.isQuickEdit?"quick-edit":void 0},{errorMsg:r,errorCode:U.rU}),r):l)}if("frame_onload"===t.data.type&&o(null),"refine"===t.data.type&&v.current){var r;let l=v.current.find(e=>e.meta.file===t.data.file);if(!l){alert("File not found");return}let s=l.source.split("\n"),n=t.data.line,i=t.data.column;for(;s[n-1].length<i;)i-=s[n-1].length,n++;for(;i-1<s[n-1].length&&/\s/.test(s[n-1][i-1]);)i++;let o=s.slice(Math.max(0,n-4),n-1),c=s[n-1],d=s.slice(n,n+3),u=null===(r=c.substring(i).match(/^[\w.]+/))||void 0===r?void 0:r[0],m=u?(n>4?"...\n":"")+o.join("\n")+"\n"+c+"\n"+(" ".repeat(i)+"^".repeat(u.length))+"\n"+d.join("\n")+"\n"+(n+3<s.length?"...\n":""):c,f=(0,tz.ru)({file:l.meta.file,componentName:u,sourceContext:m,prompt:t.data.prompt}),p=(null==a?void 0:a.indexOf(e.messageId))||-1;a&&p>0&&p<a.length-1?j({action:"edit",input:f,userMessageId:a[p+1],type:"refinement"}):j({action:"new",input:f,attachments:[],type:"refinement"})}}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[b,j,a,o,e.messageId,v,e.resultId,e.blockId]);let w=null;return e.blockId&&e.isPreviewable&&(r||n)&&(w=(0,l.jsx)(tj,{activeTab:u,iframeId:b,isPublished:t,origin:function(e){let{disableLocalhost:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e){let t="";for(let r=0;r<e.length;r++){let l=e.charCodeAt(r).toString(16);l.length<2&&(l="0"+l),t+=l}return BigInt("0x"+t).toString(36)}(e);if("generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return tt("".concat(r,"--").concat(e,".dev-lite.vusercontent.net"))}return tt("".concat(r,".lite.vusercontent.net"))}(e.blockId),src:n?"/":"/?__v0_token=".concat(r)}),"react-project"===e.meta.type&&(w=(0,l.jsx)(tA,{allowMobileFullscreen:e.allowMobileFullscreen,iframeId:b,devTools:!!e.isAuthor,children:w}))),(0,l.jsxs)(eQ,{activeTab:u,hasBlockPreview:f,setActiveTab:m,initialFileTreeSize:e.initialFileTreeSize,...e,loadingPath:h,files:x,blockType:"react-project"===e.meta.type?"react-project":"v0",language:"typescriptreact",resultId:e.blockId,allowRefresh:"react-project"!==e.meta.type,allowFullScreen:"react-project"!==e.meta.type,children:[(0,l.jsx)(e2,{}),i?(0,l.jsx)(tN,{error:i,onDismiss:()=>{o(null)}}):null,w]})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,l.jsx)(Z,{hasBlockPreview:t,activeTab:r,setActiveTab:s})}}tH.getIsPreviewable=e=>{let{closed:t,source:r,meta:l}=e;if(!t)return!1;let s=function(e,t){let r=/\.(ts|tsx|js|jsx|mjs|mts|cjs)$/i,l=!1,s="react-project"===t.type?(0,ed.A2)({source:e,blockType:"react-project",blockId:"fake-block-id"}):[{source:e,meta:t,isDeleted:!1}];if(!(s=s.filter(e=>!e.isDeleted))||0===s.length)return td.NON_SUPPORTED_FILES;if(s.every(e=>e.meta.file&&e.meta.file.endsWith(".ts")))return td.NO_EXPORTED_COMPONENT;if(s.some(e=>e.meta.file&&tb.test(e.meta.file)))return td.NON_SUPPORTED_FILES;let n=s.filter(e=>e.meta.file&&r.test(e.meta.file));if(!n.length)return td.NON_SUPPORTED_FILES;for(let{source:e}of n){let t=e.split("\n").filter(e=>e.trim().startsWith("import")).join("\n"),r=t.match(tp)||t.match(th)||e.match(tx)||e.match(tv);if(r)return tm[r[1]];e.includes("export")&&(l=!0)}if(1===n.length){let{source:e}=n[0];if(tg.test(e))return td.HAS_LOCAL_FILE_IMPORTS}return!!l||td.NO_EXPORTED_COMPONENT}(r,l);return"string"==typeof s?{error:s}:s},tH.TitleActions=s.memo(e=>{let{blockId:t,isPreviewable:r,closed:s}=e;return(0,l.jsx)(tM,{blockId:t,isPreviewable:r,closed:s})});class tV{static Actions(){return null}}function tW(e,t,r){let[l,n]=(0,s.useState)(!1),a=(0,eD.F)(l),i=(0,eD.F)(t);(0,s.useEffect)(()=>{let t=document.getElementById(r),l=r=>{if(r.origin===t.dataset.origin&&r.data.type===e+"_READY"&&(n(!0),i.current)){var l;null===(l=t.contentWindow)||void 0===l||l.postMessage({type:e+"_RENDER",source:i.current},t.dataset.origin||"")}};return window.addEventListener("message",l),()=>{window.removeEventListener("message",l)}},[e,r,i]),(0,s.useEffect)(()=>{let l=document.getElementById(r);if(l){var s,n;a.current?null===(s=l.contentWindow)||void 0===s||s.postMessage({type:e+"_RENDER",source:t},l.dataset.origin||""):null===(n=l.contentWindow)||void 0===n||n.postMessage({type:e+"_PING"},l.dataset.origin||"")}},[t,e,r,a])}tV.getIsPreviewable=()=>!1,tV.Render=s.memo(e=>(0,l.jsx)(eQ,{activeTab:"code",hasBlockPreview:!1,hidePreviewPane:!0,setActiveTab:()=>{},...e,blockType:"code",resultId:void 0})),tV.TitleActions=null;let tG="html",tZ=RegExp("<!DOCTYPE html>.*?<\\/html>","s");class tX{static Render(e){let{isPublished:t}=(0,A.X)(),{chatId:r}=(0,eq.xz)(),{activeTab:s,setActiveTab:n,hasBlockPreview:a}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable}),i=G(tG);return tW("HTML",e.source,i),(0,l.jsx)(eQ,{activeTab:s,hasBlockPreview:a,setActiveTab:n,...e,blockType:"html",language:"html",resultId:tG,children:(0,l.jsx)(tj,{activeTab:s,iframeId:i,isPublished:t,origin:te(r||e.blockId),src:"/render/html"})})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,l.jsx)(Z,{hasBlockPreview:t,activeTab:r,setActiveTab:s})}}tX.getIsPreviewable=e=>{let{source:t,closed:r}=e;return r||tZ.test(t)},tX.TitleActions=null;var tK=r(52381),t$=r(35732),tQ=r(45858),tY=r(28456),tq=r(67720);class tJ{static Render(e){let{isPublished:t}=(0,A.X)(),{activeTab:r,setActiveTab:n,hasBlockPreview:a}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable}),[i,o]=(0,s.useState)(void 0),d=e.source.replaceAll(/\\+`/g,"`");return(0,l.jsx)(eQ,{activeTab:r,hasBlockPreview:a,setActiveTab:n,...e,blockType:"markdown",language:"markdown",resultId:"markdown",source:d,onEdit:o,children:(0,l.jsx)("div",{className:(0,c.cn)("flex h-full w-full justify-center overflow-y-auto p-4 md:py-6","preview"!==r&&(t?"hidden":"sr-only invisible")),children:(0,l.jsx)(tK.s,{children:(0,l.jsx)(t$.c,{remarkPlugins:[tQ.A,tY.A],rehypePlugins:[tq.A],children:void 0===i?d:i})})})})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,l.jsx)(Z,{hasBlockPreview:t,activeTab:r,setActiveTab:s})}}tJ.getIsPreviewable=()=>!0,tJ.TitleActions=null;class t0{static Render(e){let{chatId:t}=(0,eq.xz)(),{isPublished:r}=(0,A.X)(),{activeTab:s,setActiveTab:n,hasBlockPreview:a}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable}),i=G(e.blockId);return tW("VUE",e.source,i),(0,l.jsx)(eQ,{activeTab:s,allowRefresh:!0,hasBlockPreview:a,setActiveTab:n,...e,blockType:"vue",language:"vue",resultId:e.blockId,children:(0,l.jsx)(tj,{activeTab:s,iframeId:i,isPublished:r,origin:te(t||e.blockId),src:"/render/vue"},i)})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,l.jsx)(Z,{hasBlockPreview:t,activeTab:r,setActiveTab:s})}}t0.getIsPreviewable=e=>{let{closed:t}=e;return t},t0.TitleActions=null;class t1{static Render(e){let{chatId:t}=(0,eq.xz)(),{isPublished:r}=(0,A.X)(),{activeTab:s,setActiveTab:n,hasBlockPreview:a}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable}),i=G(e.blockId);return tW("SVELTE",e.source,i),(0,l.jsx)(eQ,{activeTab:s,hasBlockPreview:a,setActiveTab:n,...e,blockType:"svelte",language:"svelte",resultId:e.blockId,children:(0,l.jsx)(tj,{activeTab:s,iframeId:i,isPublished:r,origin:te(t||e.blockId),src:"/render/svelte"},i)})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:s}=(0,tn.P5)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,l.jsx)(Z,{hasBlockPreview:t,activeTab:r,setActiveTab:s})}}t1.getIsPreviewable=e=>{let{closed:t}=e;return t},t1.TitleActions=null;class t5{static Render(e){let{source:t,blockId:r,remoteInfo:n,closed:a}=e,{chatId:i}=(0,eq.xz)(),o=G("remote-preview"),{data:c}=(0,b.Ay)(r?["remote:preview",r]:null,null,{fallbackData:(null==n?void 0:n.accepted)||!1}),{activeTab:d,setActiveTab:u}=(0,tn.P5)({blockId:e.blockId,isPreviewable:a});return(0,s.useEffect)(()=>{if(!a||!(r||i))return;let e=new AbortController,t=async()=>{try{await fetch("/chat/api/chat/remote/preview?".concat("@remote"===r?"cid=".concat(i):"bid=".concat(r)),{signal:e.signal})}catch(e){}};return setTimeout(()=>{t()},0),()=>{e.abort()}},[a,i,r]),(0,l.jsx)(eQ,{activeTab:"@remote"===r?"preview":d,setActiveTab:u,...e,meta:"@remote"===r?{...e.meta}:{...e.meta,file:"Files"},allowFullScreen:!1,language:"plaintext",blockType:"local",resultId:"remote-preview",remoteInfo:n,source:t,hasBlockPreview:!!c||e.closed,children:a||"@remote"===r?(0,l.jsx)(tA,{iframeId:o,children:(0,l.jsx)(tj,{activeTab:"@remote"===r?"preview":d,iframeId:o,isPublished:!1,origin:"",src:"/chat/api/chat/remote/proxy?cid=".concat(i)},o)}):null})}static Actions(e){let{blockId:t,isPreviewable:r}=e,{hasBlockPreview:s,activeTab:n,setActiveTab:a}=(0,tn.P5)({blockId:t,isPreviewable:r});return"@remote"===t?null:(0,l.jsx)(Z,{hasBlockPreview:s,activeTab:n,setActiveTab:a})}}t5.getIsPreviewable=e=>{let{closed:t}=e;return t},t5.TitleActions=null;var t2=r(30856);function t3(e){var t;let{block:r,initialSize:n,initialFileTreeSize:a,allowMobileFullscreen:i,location:o="header",isAuthor:c}=e,{isPublished:d}=(0,A.X)(),{history:u,currentBlockIndex:m}=(0,eh.useBlockHistory)({blockId:(null==r?void 0:r.id)||""}),{nl:f}=(0,t2.D)(),p=r?function(e,t){switch(e){case"node.js":case"nodejs":case"python":return e4;case"markdown":return tJ;case"html":return tX;case"v0":case"react":case"tsx":return tP;case"vue":return t0;case"svelte":return t1;case"code":return tV;case"local":return t5;case"react-project":return tH}}(r.type,0):null,h=!!p&&!!r&&p.getIsPreviewable({source:r.source,closed:r.closed,meta:r.meta,id:r.id}),[x,v]=(0,s.useState)(),g=x||h;return((0,s.useEffect)(()=>{v(void 0)},[null==r?void 0:r.id]),r&&p)?{action:d&&"footer"!==o?null:(0,l.jsx)(p.Actions,{blockId:r.id,isPreviewable:g,closed:r.closed}),titleActions:"react-project"===r.meta.type&&p.TitleActions?(0,l.jsx)(p.TitleActions,{blockId:r.id,isPreviewable:g,closed:r.closed}):null,content:(0,l.jsx)(p.Render,{allowMobileFullscreen:i,initialFileTreeSize:a,resultId:r.resultId,blockId:r.id,closed:r.closed,initialOutputSize:n,messageId:r.messageId,language:r.language,meta:r.meta,source:r.source,remoteInfo:r.remoteInfo,isPreviewable:g,isAuthor:c,setIsPreviewable:v,hasSourceBeenEdited:r.hasSourceBeenEdited,originalCode:m>0?null===(t=u[m-1])||void 0===t?void 0:t.source:void 0,latestDeploymentInfo:r.latestDeploymentInfo})}:{action:null,content:null}}function t4(e){let{block:t,allowMobileFullscreen:r,initialSize:l}=e,{content:s}=t3({block:t,initialSize:l,allowMobileFullscreen:r,location:void 0});return s}},24415:(e,t,r)=>{"use strict";function l(e){if("user"===e.role)return!e.content&&(!e.attachments||0===e.attachments.length);let t=0===e.content.length,r=1===e.content.length&&1===e.content[0][0],l=e.content.length>0&&0===e.content[0][0]&&0===e.content[0][1].length;return t||r||l}function s(e){return"user"===e.role&&!e.content&&e.attachments&&e.attachments.length>0}function n(e){return"user"===e.role&&e.content&&e.content.startsWith("<v0_local_project_task>")}function a(e){return"user"===e.role&&e.content&&e.content.startsWith("<user_action ")}r.d(t,{Ne:()=>l,ZW:()=>s,pW:()=>a,pm:()=>n})},15826:(e,t,r)=>{"use strict";r.d(t,{Fb:()=>i,Og:()=>o,i_:()=>a,ru:()=>n});var l=r(54857),s=r(44079);let n=e=>{let{file:t,componentName:r,sourceContext:l,prompt:s}=e;return"<user_request_context>\nUser's request is specifically about the file \"".concat(t,'" and the ').concat(r?'"'.concat(r,'" element'):"element"," at this specific position (including its inner content, too):\n\n```\n").concat(l,"\n```\n\nPlease apply a Quick Edit to this file and make the necessary changes.\n</user_request_context>\n\n<user_request>\n").concat(s,"\n</user_request>\n")},a=(e,t)=>{let r=e.split("<user_request>")[0];return"".concat(r,"\n<user_request>\n").concat(t,"\n</user_request>\n")},i=e=>e&&e.includes("<user_request>")?e.split("<user_request>")[1].split("</user_request>")[0].trim():e,o=e=>{if(!e)return"Refine";let t=e.match(/"([^"]+)" element/);if(!t)return"Refine";let r=e.match(/file "([^"]+)"/);return r?(0,l.jsxs)(l.Fragment,{children:[r[1],(0,l.jsx)(s.c,{className:"-mx-1 size-3"}),t[1]]}):"Refine"}},2005:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});let l=e=>"user"===e.role?e.id:e.continuingMessageId||e.id},26677:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var l=r(54857),s=r(96541),n=r(78692),a=r(53317);let i=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,l.jsxs)(n.bL,{className:(0,a.cn)("relative overflow-hidden",r),ref:t,...i,children:[(0,l.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,l.jsx)(o,{}),(0,l.jsx)(n.OK,{})]})});i.displayName=n.bL.displayName;let o=s.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...i}=e;return(0,l.jsx)(n.VM,{className:(0,a.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),orientation:s,ref:t,...i,children:(0,l.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=n.VM.displayName},47165:(e,t,r)=>{"use strict";r.d(t,{S:()=>n});var l=r(96541),s=r(80612);function n(){var e;let{data:t,mutate:r}=(0,s.Ay)("result:full-screen"),{mutate:n}=(0,s.Ay)("state:select"),a=(0,l.useCallback)(e=>{r(t=>{if(!t&&!e)return;let r=new URL(window.location.href),l=r.searchParams;return l.get("b")&&(l.set("f",e?"1":"0"),r.search=l.toString(),window.history.replaceState({},"",r.toString())),n(!1),{value:e}})},[r,n]);return{fullScreenResult:null!==(e=null==t?void 0:t.value)&&void 0!==e&&e,setFullscreenResult:a,source:null==t?void 0:t.source}}},20762:()=>{}}]);
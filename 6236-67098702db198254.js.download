(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4592,6236],{50214:(e,t,s)=>{"use strict";s.d(t,{H:()=>r});var a=s(61702);let r=a.z.object({name:a.z.string().min(2,"Name must be at least 2 characters").max(32,"Name cannot be longer than 32 characters"),description:a.z.string().max(5e3,"Description cannot be longer than 5000 characters").optional(),instructions:a.z.string().max(5e3,"Context cannot be longer than 5000 characters").optional()})},65881:(e,t,s)=>{"use strict";s.d(t,{t:()=>S,default:()=>R});var a=s(54857),r=s(96541),l=s(16617),n=s(7394),i=s.n(n),o=s(19296),c=s(8990),d=s(86274),u=s(6291),m=s(96118);function p(e){let{project:t,canMakeProjectUpdates:s}=e;return t?(0,a.jsxs)("header",{className:"border-alpha-200 grid auto-rows-min gap-4 border-b p-4 pb-0 sm:p-6 sm:pb-0 lg:pb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-3 pt-3 sm:pt-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.ProjectIconPicker,{color:t.color,readOnly:!s,icon:(0,m.KI)(t.icon),projectId:t.projectId}),(0,a.jsxs)("div",{className:"grid max-w-xl auto-rows-min items-start gap-0.5 sm:gap-1",children:[(0,a.jsx)("h1",{className:"line-clamp-1 text-xl font-semibold leading-none tracking-tight","data-testid":"project-title",children:t.name||"Untitled Project"}),t.description&&(0,a.jsx)("div",{className:"line-clamp-1 text-sm text-gray-500","data-testid":"project-description",children:t.description})]})]})}),(0,a.jsx)(u.ProjectHeaderTabs,{projectId:t.projectId})]}):(0,a.jsx)(h,{})}function h(){return(0,a.jsx)("header",{className:"bg-background grid auto-rows-min gap-4 border-b p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"mx-auto w-full",children:[(0,a.jsxs)("div",{className:"flex h-8 items-center gap-2 pl-9 sm:h-auto sm:pl-0",children:[(0,a.jsx)(c.Separator,{className:"bg-alpha-400 mr-2 h-6 sm:hidden",orientation:"vertical"}),(0,a.jsx)(l.$,{asChild:!0,className:"font-normal text-gray-500",size:"sm",variant:"link",children:(0,a.jsxs)(i(),{href:"/chat/projects",prefetch:!0,children:[(0,a.jsx)(o.n,{className:"size-4"}),(0,a.jsx)("span",{children:"All Projects"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-center gap-3 pt-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"New Project"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"You can attach resources and files to a project after it's been created."})]})]})})}var x=s(86287),f=s(50735),g=s(15893),v=s(73927),j=s(37622),b=s(50214),y=s(68952),w=s(45076),N=s(77184),k=s(81641),C=s(43393);let S=e=>{let{name:t,onChange:s,errors:r,placeholder:l="New sidebar",disabled:n=!1}=e;return(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)(g.Label,{className:(0,j.cn)((null==r?void 0:r.name)&&"text-red-500"),htmlFor:"name",children:["Name",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(x.p,{autoComplete:"off",className:(0,j.cn)((null==r?void 0:r.name)&&"border-red-500"),disabled:n,id:"name",maxLength:32,minLength:2,name:"name",onChange:s,placeholder:l,required:!0,value:t}),(null==r?void 0:r.name)&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:r.name[0]})]})},I=e=>{let{description:t,onChange:s,errors:r}=e;return(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(g.Label,{className:(0,j.cn)((null==r?void 0:r.description)&&"text-red-500"),htmlFor:"description",children:"Description (optional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.T,{autoComplete:"off",className:(0,j.cn)("min-h-[120px] pb-8",(null==r?void 0:r.description)&&"border-red-500"),id:"description",maxLength:5e3,name:"description",onChange:s,placeholder:"Describe what this project is going to be used for...",value:t}),(0,a.jsx)(y.j,{className:"absolute inset-x-1 bottom-2.5",count:t.length,max:5e3,message:"Description cannot be longer than 500 characters",messageThreshold:5e3})]}),(null==r?void 0:r.description)&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:r.description[0]})]})},P=e=>{let{instructions:t,onChange:s,errors:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(g.Label,{className:(0,j.cn)((null==r?void 0:r.instructions)&&"text-red-500"),htmlFor:"instructions",children:"Context (optional)"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.T,{autoComplete:"off",className:(0,j.cn)("min-h-[120px] pb-4",(null==r?void 0:r.instructions)&&"border-red-500"),id:"instructions",maxLength:5e3,name:"instructions",onChange:s,placeholder:"We're building a new sidebar for...",value:t}),(0,a.jsx)(y.j,{className:"absolute inset-x-1 bottom-2.5",count:t.length,max:5e3,message:"For larger context, consider using sources on the project page.",messageThreshold:5e3})]}),(null==r?void 0:r.instructions)&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:r.instructions[0]})]}),(0,a.jsx)(g.Label,{className:"text-gray-500",children:"Guidelines or instructions the model will use to generate better responses to prompts."})]})},L=e=>{let{formData:t}=e,s=t.name.trim().length>0;return(0,a.jsx)(k.Q,{className:"self-start",disabled:!s,size:"sm",type:"submit","data-testid":"create-project-button",children:"Create Project"})};function R(e){let{randomIcon:t}=e,{activeScopeSlug:s}=(0,C.k6)(),[l,n]=(0,r.useState)({}),[i,o]=(0,r.useState)({name:"",description:"",instructions:"",icon:t}),[c,u]=(0,r.useTransition)(),m=(0,v.useRouter)(),h=(0,r.useCallback)(e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))},[]),x=(0,r.useCallback)(e=>{e.preventDefault(),n({});let{name:t,description:a,instructions:r,icon:l}=i,o=b.H.safeParse({name:t,description:a,instructions:r,icon:l});if(!o.success){n(o.error.flatten().fieldErrors);return}u(async()=>{try{let{id:e,errors:i,success:o}=await (0,w.E)({name:t,description:a,instructions:r,scopeSlug:s,icon:l});if(i){n(i);return}if(o&&e){N.oR.success("Project created successfully"),m.push("/chat/projects/".concat(e));return}n({name:["Failed to create project. Please try again."]})}catch(e){console.error("Failed to create project:",e),N.oR.error("An unexpected error occurred. Please try again."),n({name:["An unexpected error occurred. Please try again."]})}})},[s,i,m]);return(0,a.jsxs)("div",{className:"bg-background flex min-h-screen flex-col",children:[(0,a.jsx)(p,{canMakeProjectUpdates:!0}),(0,a.jsx)("main",{className:"bg-background flex flex-1 flex-col overflow-auto p-4 sm:p-6",children:(0,a.jsx)("div",{className:"grid w-full max-w-screen-2xl flex-1 auto-rows-min gap-4 lg:grid-cols-[600px_1fr] lg:gap-x-6 xl:gap-x-9",children:(0,a.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:x,children:[(0,a.jsx)(d.ProjectIconPicker,{onSelect:e=>o(t=>({...t,icon:e})),isNewPage:!0,color:null,readOnly:!1,icon:t,projectId:""}),(0,a.jsx)(S,{errors:l,name:i.name,onChange:h}),(0,a.jsx)(I,{description:i.description,errors:l,onChange:h}),(0,a.jsx)(P,{errors:l,instructions:i.instructions,onChange:h}),(0,a.jsx)(L,{formData:i,isPending:c})]})})})]})}},85052:(e,t,s)=>{"use strict";s.d(t,{q:()=>r});var a=s(54857);function r(){return(0,a.jsxs)("svg",{className:"download-icon overflow-visible",fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("style",{children:".download-icon {\n            cursor: pointer;\n            transform-origin: center;\n        }\n        .download-icon .arrow-part {\n            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n             transform-origin: center;\n        }\n        button:has(.download-icon):hover .download-icon .arrow-part, button:has(.download-icon):focus-visible .download-icon .arrow-part {\n          transform: translateY(-1.5px);\n        }\n        "}),(0,a.jsx)("g",{className:"arrow-part",children:(0,a.jsx)("path",{clipRule:"evenodd",d:"M8.75 1V1.75V8.68934L10.7197 6.71967L11.25 6.18934L12.3107 7.25L11.7803 7.78033L8.70711 10.8536C8.31658 11.2441 7.68342 11.2441 7.29289 10.8536L4.21967 7.78033L3.68934 7.25L4.75 6.18934L5.28033 6.71967L7.25 8.68934V1.75V1H8.75Z",fill:"currentColor",fillRule:"evenodd"})}),(0,a.jsx)("g",{className:"rectangle-part",children:(0,a.jsx)("path",{clipRule:"evenodd",d:"M13.5 9.25V13.5H2.5V9.25V8.5H1V9.25V14C1 14.5523 1.44771 15 2 15H14C14.5523 15 15 14.5523 15 14V9.25V8.5H13.5V9.25Z",fill:"currentColor",fillRule:"evenodd"})})]})}s(96541)},27223:(e,t,s)=>{"use strict";s.d(t,{o:()=>i});var a=s(54857),r=s(12350),l=s(48774),n=s(37622);function i(e){let{knowledgeSource:t,className:s}=e;switch(null==t?void 0:t.toLowerCase()){case"nextjs.org":return(0,a.jsx)(l.default,{alt:"Next.js Logo",className:s,height:16,src:"/chat-static/citation/nextjs.svg",width:16});case"vercel.com":case"sdk.vercel.ai":return(0,a.jsx)(l.default,{alt:"Vercel Logo",className:s,height:16,src:"/chat-static/citation/vercel.svg",width:16});case"turbo.build":return(0,a.jsx)(l.default,{alt:"Turbopack Logo",className:s,height:16,src:"/chat-static/citation/turbo.svg",width:16});case"svelte.dev":case"kit.svelte.dev":return(0,a.jsx)(l.default,{alt:"Svelte Logo",className:(0,n.cn)(s,"rounded-none"),height:16,src:"/chat-static/citation/svelte.svg",width:16});case"docs.stripe.com":return(0,a.jsx)(l.default,{alt:"Stripe Logo",className:(0,n.cn)(s,"rounded-none"),height:12,src:"/chat-static/citation/stripe.svg",width:12});case"remix.run":return(0,a.jsx)(l.default,{alt:"Remix Logo",className:(0,n.cn)(s,"rounded-none"),height:12,src:"/chat-static/citation/remix.svg",width:12});case"vuejs.org":return(0,a.jsx)(l.default,{alt:"Vue Logo",className:(0,n.cn)(s,"rounded-none"),height:16,src:"/chat-static/citation/vue.svg",width:16});case"react.dev":return(0,a.jsx)(l.default,{alt:"React Logo",className:(0,n.cn)(s,"rounded-none"),height:16,src:"/chat-static/citation/react.svg",width:16});case"typescriptlang.org":return(0,a.jsx)(l.default,{alt:"Typescript Logo",className:(0,n.cn)(s),height:16,src:"/chat-static/citation/ts.svg",width:16});case"github.com":return(0,a.jsx)(l.default,{alt:"Github Logo",className:s,height:16,src:"/chat-static/citation/github.svg",width:16});case"ui.shadcn.com":return(0,a.jsx)(l.default,{alt:"shadcn/ui Logo",className:(0,n.cn)(s),height:16,src:"/chat-static/citation/shadcn-ui.svg",width:16});case"radix-ui.com":return(0,a.jsx)(l.default,{alt:"Radix UI Logo",className:(0,n.cn)(s,"size-3.5 translate-x-0.5 rounded-none"),height:14,src:"/chat-static/citation/radix-ui.svg",width:14});case"orm.drizzle.team":return(0,a.jsx)(l.default,{alt:"Drizzle Logo",className:(0,n.cn)(s,"dark:invert"),height:22,src:"/chat-static/citation/drizzle.svg",width:22});case"supabase.com":return(0,a.jsx)(l.default,{alt:"Supabase Logo",className:(0,n.cn)(s),height:14,src:"/chat-static/citation/supabase.svg",width:14});case"www.prisma.io":return(0,a.jsx)(l.default,{alt:"Prisma Logo",className:(0,n.cn)(s,"dark:invert"),height:14,src:"/chat-static/citation/prisma.svg",width:14});case"playwright.dev":return(0,a.jsx)(l.default,{alt:"Playwright Logo",className:(0,n.cn)(s),height:14,src:"/chat-static/citation/playwright.svg",width:14});default:return(0,a.jsx)(r.q,{className:(0,n.cn)(s,"rounded-none"),size:16})}}},79015:(e,t,s)=>{"use strict";s.d(t,{Cy:()=>m,vg:()=>p});var a=s(54857),r=s(96541);s(27223),s(54771);var l=s(38040),n=s(71797),i=s(68810),o=s(57363),c=s(46948),d=s(97682),u=s(53317);function m(e){let{citations:t}=e;return t.map(e=>{let t="cite-".concat(e.messageId,"-").concat(e.index);return(0,a.jsx)(l.t,{id:t,children:(0,a.jsxs)("a",{className:"inline-flex min-w-0 items-baseline gap-1 no-underline",href:e.url,rel:"noopener noreferrer",target:"_blank",children:[(0,a.jsx)("span",{className:"line-clamp-1",children:e.title}),(0,a.jsx)(n.A,{className:"size-3 shrink-0"})]})},t)})}function p(e){let{urls:t,className:s}=e,[l,n]=(0,r.useState)(0),m=["Browsing search results"];null==t||t.forEach((e,t)=>{let s=e.replace(/^https?:\/\//,"");m[t+1]="Browsing web page: ".concat(s)}),m[Object.keys(m).length]="Synthesizing ".concat(null==t?void 0:t.length," source").concat((null==t?void 0:t.length)===1?"":"s");let p=Object.keys(m).length;return((0,r.useEffect)(()=>{(async()=>{for(let e=0;e<p;e++)0!==e&&await (0,u.yy)(2e3),n(e)})()},[p]),t&&0!==t.length)?(0,a.jsx)("div",{className:(0,o.A)("!mt-[6px]",s),children:(0,a.jsx)("div",{className:"shimmer relative flex items-center gap-1.5 text-gray-500",children:(0,a.jsxs)(c.N,{mode:"popLayout",presenceAffectsLayout:!0,children:[(0,a.jsx)(i.A,{className:"size-4 shrink-0 leading-[normal]"}),(0,a.jsx)("div",{className:"mask relative grow leading-[15px]",children:(0,a.jsx)(c.N,{initial:!1,mode:"popLayout",presenceAffectsLayout:!0,children:(0,a.jsx)(d.P.span,{animate:{y:0},className:"inline-block grow text-ellipsis whitespace-nowrap text-[15px] leading-none md:w-[calc(100%_-_100px)]",exit:{y:-24},initial:{y:24},layout:!0,transition:{type:"tween",duration:.3},children:m[l]},"carousel-".concat(l))})})]})})}):null}s(16617)},87108:(e,t,s)=>{"use strict";s.d(t,{C:()=>x});var a=s(54857),r=s(34227),l=s(38651),n=s(55174),i=s(8679),o=s(85052),c=s(33744),d=s(71368),u=s(14422),m=s(4126),p=s(37622);let h=e=>{let{size:t=16,className:s}=e;return(0,a.jsxs)("svg",{className:(0,p.cn)("trash-icon overflow-visible",s),fill:"none",stroke:"currentColor",height:t,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M10.0001 1.33203H4.00008C3.64646 1.33203 3.30732 1.47251 3.05727 1.72256C2.80722 1.9726 2.66675 2.31174 2.66675 2.66536V13.332C2.66675 13.6857 2.80722 14.0248 3.05727 14.2748C3.30732 14.5249 3.64646 14.6654 4.00008 14.6654H12.0001C12.3537 14.6654 12.6928 14.5249 12.9429 14.2748C13.1929 14.0248 13.3334 13.6857 13.3334 13.332V4.66536L10.0001 1.33203Z",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6 6.66797H10",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M8 8.66797V4.66797",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6 11.332H10",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"})]})};function x(e){let{fileName:t="file.txt",value:s,caller:p,additionalHeaderActions:x,allowCopyCode:f,allowDownloadCode:g,closeHandler:v,isTabbed:j,allowClose:b,blockId:y,originalCode:w,allowDiffToggle:N}=e,{isCopied:k,copyToClipboard:C}=(0,r.C)({timeout:2e3}),{setShowDiffs:S,diffs:I,showDiffs:P}=(0,u.s)({blockId:y,fileName:t,originalCode:w,newCode:s}),L=(0,d.k)("codeBlockActions"),R=async()=>{if(!k)switch(await C(s),p){case"inline":return(0,l.u)("CopyCodeInline",{code:s});case"executable":return(0,l.u)("CopyCodeExecutable",{code:s});case"v0":return(0,l.u)("CopyCodeV0",{code:s})}};return(0,a.jsxs)(a.Fragment,{children:[x&&x.length>0?x:null,N&&(null==I?void 0:I.length)&&(0,a.jsx)(n.Z,{"aria-label":L(P?"hideDiff":"showDiff"),active:P,onClick:()=>{S(!P),setTimeout(()=>{let e=document.getElementById(m.yj);if(!e)return;e.scrollIntoView({behavior:"instant"});let t=document.getElementsByClassName("prism-code-editor")[0];t&&t.scrollBy({left:-100,behavior:"instant"})},0)},outline:!j,tooltip:j?{side:"bottom",content:L(P?"hideDiff":"showDiff")}:L(P?"hideDiff":"showDiff"),children:(0,a.jsx)(h,{size:"inline"===p?14:void 0})}),f&&(0,a.jsx)(n.Z,{"aria-label":L("copy"),onClick:R,outline:!j,tooltip:j?{side:"bottom",content:L("copy")}:L("copy"),children:(0,a.jsx)(c.U,{isCopied:k,size:"inline"===p?14:void 0})}),g&&(0,a.jsx)(n.Z,{"aria-label":L("download"),onClick:()=>{let e=window.prompt("Enter file name",t);if(!e)return;let a=new Blob([s],{type:"text/plain"}),r=URL.createObjectURL(a),n=document.createElement("a");switch(n.download=e,n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),p){case"executable":return(0,l.u)("DownloadCodeExecutable",{code:s});case"v0":return(0,l.u)("DownloadCodeV0",{code:s})}},outline:!j,tooltip:j?{side:"bottom",content:L("download")}:L("download"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(o.q,{})})}),b&&v&&(0,a.jsx)(n.Z,{"aria-label":L("close"),onClick:v,outline:!j,tooltip:j?{side:"bottom",content:L("close")}:L("close"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(i.F,{})})})]})}},55174:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(54857),r=s(16617),l=s(37622);function n(e){let{className:t,outline:s,active:n,...i}=e;return(0,a.jsx)(r.$,{className:(0,l.cn)("size-6 rounded-md",!s&&"text-gray-500",n&&"text-teal-600",t),size:"xs",variant:s?"secondary":"ghost",...i})}},94592:(e,t,s)=>{"use strict";s.d(t,{N:()=>N});var a=s(54857),r=s(96541),l=s(37622),n=s(91886),i=s(76140);function o(e){let{className:t,headerClassName:s,language:r,actions:i,syntax:o}=e;return(0,a.jsxs)("div",{className:(0,l.cn)("codeblock border-alpha-400 relative flex size-full flex-col rounded-lg border font-sans",t),"data-seg":"root",children:[(0,a.jsxs)("div",{className:(0,l.cn)("bg-muted flex h-[40px] w-full shrink-0 items-center justify-between rounded-t-lg border-b pl-2.5 pr-1.5",s),"data-seg":"skip",children:[r?(0,a.jsx)("span",{className:"text-gray-500",children:(0,a.jsx)(n.o,{lang:r})}):null,(0,a.jsx)("div",{className:"flex items-center space-x-1 text-gray-500",children:i})]}),o]})}function c(e){let{className:t,showLineNumbers:s,actions:r,fileName:n,syntax:o}=e,{isPublished:c}=(0,i.X)();return c?(0,a.jsxs)("div",{className:(0,l.cn)("codeblock bg-muted flex size-full flex-col overflow-hidden rounded-lg pt-3",t),"data-seg":"root",children:[(0,a.jsxs)("div",{className:"z-10 mx-3 flex translate-y-px justify-between","data-seg":"skip",children:[(0,a.jsx)(d,{active:!0,fileName:n}),(0,a.jsx)("div",{className:"flex -translate-y-1.5 items-center gap-1",children:r})]}),(0,a.jsx)("div",{className:(0,l.cn)("border-alpha-400 bg-background relative flex flex-1 flex-col overflow-hidden border-t px-3 font-sans",s&&"px-0"),children:o})]}):(0,a.jsx)("div",{className:(0,l.cn)("codeblock bg-muted flex size-full flex-col",t),"data-seg":"root",children:(0,a.jsx)("div",{className:(0,l.cn)("relative flex flex-1 flex-col overflow-hidden px-3 font-sans",s&&"px-0"),children:o})})}function d(e){let{active:t,fileName:s,onClick:r}=e;return(0,a.jsxs)("button",{className:(0,l.cn)("font-regular border-alpha-400 pointer-events-none relative h-full whitespace-nowrap rounded-t-md border border-b-0 px-4 pb-1 pt-1.5 text-[13px] text-gray-500 transition-colors",t?"bg-background font-medium":"border-transparent bg-transparent hover:bg-gray-200"),onClick:r,children:[(0,a.jsx)(u,{active:t,side:"left"}),s,(0,a.jsx)(u,{active:t,side:"right"})]})}function u(e){let{active:t,side:s}=e;if(!t)return null;let r="left"===s;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,l.cn)("bg-muted absolute bottom-0 z-20 h-[4px] w-[4px] border-b border-gray-200",r?"right-[-4px] rounded-bl-[3px] border-l":"left-[-4px] rounded-br-[3px] border-r")}),(0,a.jsx)("div",{className:(0,l.cn)("bg-background absolute bottom-0 z-10 h-[4px] w-[4px]",r?"right-[-4px]":"left-[-4px]")})]})}var m=s(85588),p=s(72380);s(2295);var h=s(87108),x=s(31339),f=s.n(x),g=s(14422);let v=/\n/g;function j(e){return(e.match(v)||"").length+1}var b=s(34604);let y=(0,p.default)(()=>Promise.all([s.e(1284),s.e(142),s.e(4996),s.e(9994),s.e(1892)]).then(s.bind(s,21892)).then(e=>e.MonacoEditor),{loadableGenerated:{webpack:()=>[21892]},ssr:!1}),w=(0,r.memo)(function(e){let t,{isQuickEdit:s,value:n,language:i,showLineNumbers:o,wrapLongLines:c,isTabbed:d,originalCode:u,fixingBadLines:p}=e,h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"line",s=(0,r.useRef)(e),a=(0,r.useRef)("line"===t?200:20),l=(0,r.useRef)(Date.now()),[n,i]=(0,r.useState)(e);return(0,r.useEffect)(()=>{if(s.current===e)return;if(!e.startsWith(s.current)){i(e),a.current="line"===t?200:20,s.current=e,l.current=Date.now();return}let r="line"===t?Math.max(1,j(e)-j(s.current)):e.length-s.current.length,n=Date.now()-l.current;a.current=(a.current+n/r*2)/3,l.current=Date.now();let o=Math.max(a.current,1),c=Math.ceil(o/a.current),d=setInterval(()=>{i(a=>{if(a===e)return clearInterval(d),a;let r="";if("line"===t){let t=e.slice(a.length).indexOf("\n");r=-1===t?e:e.slice(0,a.length+t+1)}else r=e.slice(0,a.length+c);return s.current=r,r})},o);return()=>clearInterval(d)},[e,t]),n}(n,u?"line":"char"),x=s?h:n,f=(0,m.Of)(i),g=(0,r.useMemo)(()=>{if(u)return u.split("\n")},[u]),v=(x.match(/\n/g)||[]).length;if((!x||0===v)&&u)v=(u.match(/\n/g)||[]).length,t=e=>({className:(0,l.cn)("opacity-50",1===e&&void 0===p&&"block w-full animate-pulse bg-gray-100 opacity-100",(null==p?void 0:p.includes(e+1))&&"block w-full animate-pulse bg-red-100 opacity-100")}),x=u;else if(g&&g.length>v-1){let e=x.lastIndexOf("\n"),s=(v=((x=x.slice(0,e>0?e:void 0)).match(/\n/g)||[]).length)+1,a=g.slice(v+1),r=a.join("\n");v+=a.length,t=e=>({className:(0,l.cn)(e===s&&"block w-full bg-blue-400/20",e>s&&"opacity-50")}),r&&(x=x+"\n"+r)}return(0,a.jsx)(b.A,{PreTag:"div",customStyle:{display:"flex",margin:0,width:"max-content",height:"min-content",padding:d?"12px 12px 10px 12px":"8px 10px",textShadow:"none",borderRadius:"0 0 calc(var(--radius) - 2px) calc(var(--radius) - 2px)",WebkitOverflowScrolling:"touch",backgroundColor:"transparent",fontFamily:"var(--font-geist-mono)",lineHeight:"1.55",fontSize:"0.8125rem"},language:f,lineNumberContainerStyle:{userSelect:"none",whiteSpace:"break-spaces",textAlign:"right",display:"flex",flexDirection:"column"},lineNumberStyle:{display:"inline-block",minWidth:"".concat(Math.max(v.toString().length,2),"ch"),padding:0,margin:"0 12px 0 0",color:"hsl(var(--gray-400))",userSelect:"none"},lineProps:t,showLineNumbers:o,useInlineStyles:!1,wrapLines:!0,wrapLongLines:c,children:x})}),N=(0,r.memo)(e=>{let{language:t,value:s,blockId:r,originalCode:n,allowQuoting:i=!1,allowCopyCode:d=!0,allowDownloadCode:u=!0,allowClose:p=!1,closeHandler:x=null,className:v,headerClassName:j,fixingBadLines:b,codeWrapperClassName:N,fileName:k="file.txt",showLineNumbers:C=!1,wrapLongLines:S=!1,additionalHeaderActions:I,caller:P,editable:L,showQuickEditAnimation:R,closed:E,onEdit:z,editValue:M}=e,F="inline"!==P,A=z?f()(z,500):void 0,{diffs:D,showDiffs:T}=(0,g.s)({blockId:r,fileName:k,originalCode:n,newCode:s}),U=(0,m.Of)(t),O=E&&null!=M?M:s,_=(0,a.jsx)(h.C,{additionalHeaderActions:I,allowClose:p,allowCopyCode:d,allowDownloadCode:u,originalCode:n,blockId:r,allowDiffToggle:E,caller:P,closeHandler:x,fileName:k,isTabbed:F,value:O}),V=(0,a.jsx)(y,{language:U,value:O,diffOriginalCode:T?n:null,onEdit:e=>{void 0!==e&&(null==A||A(e))},disabled:!L}),B=n&&R||"inline"===P?(0,a.jsx)("div",{className:(0,l.cn)("group size-full overflow-scroll",N),children:(0,a.jsx)("div",{className:"size-full text-gray-500 group-has-[.language-text]:text-black group-has-[.token]:text-black","data-seg":i?"code-root":void 0,children:(0,a.jsx)(w,{isQuickEdit:R,isTabbed:F,originalCode:n,fixingBadLines:b,language:t,showLineNumbers:C,value:s,wrapLongLines:S})})}):V,$={className:v,headerClassName:j,language:t,showLineNumbers:C,fileName:k,actions:_,syntax:B};return F?(0,a.jsx)(c,{...$}):(0,a.jsx)(o,{...$})});N.displayName="CodeBlock"},85588:(e,t,s)=>{"use strict";s.d(t,{DS:()=>a,Of:()=>l,_b:()=>r});let a=["javascript","typescript","python"],r=["js","jsx","mjs","cjs","ts","tsx","mts","cts","py"];function l(e){switch(e){case"plaintext":case"slim":case"shaderlab":return"text";case"bat":return"batch";case"dockercompose":return"yaml";case"git-rebase":case"git-commit":return"markdown";case"typescriptreact":return"tsx";case"javascriptreact":case"svelte":case"astro":return"jsx";case"jsonc":return"json5";case"objective-c":case"objective-cpp":return"objectivec";case"perl6":return"perl";case"shellscript":return"bash";case"terraform":return"hcl";case"bibtex":return"tex";case"cuda-cpp":return"cpp";case"jade":return"pascal";case"vue":case"vue-html":return"html";case"xsl":return"xml";default:return e}}},97546:(e,t,s)=>{"use strict";s.d(t,{DEFAULT_CHAT_MODEL_IMAGE_CONFIG:()=>r,f:()=>n});var a=s(80612);let r={maxSizeBytes:3932160,maxDimensionsPixels:{short:8e3,long:8e3},maxPerChat:20},l={attachmentMaxSizeBytes:3932160,contextWindow:199999,image:r};function n(){let{data:e}=(0,a.Ay)("model-config");return null!=e?e:l}},25385:(e,t,s)=>{"use strict";s.d(t,{E:()=>o,PortalProvider:()=>n,W:()=>i});var a=s(54857),r=s(96541);let l=(0,r.createContext)({containers:{},setContainers:()=>{}});function n(e){let{children:t}=e,[s,n]=(0,r.useState)({});return(0,a.jsx)(l.Provider,{value:{containers:s,setContainers:n},children:t})}function i(){return(0,r.useContext)(l)}function o(e){let t=(0,r.useRef)(null),{setContainers:s}=i();return(0,r.useEffect)(()=>(s(s=>({...s,[e]:t.current})),()=>{s(t=>{let{[e]:s,...a}=t;return a})}),[e,s]),t}},46426:(e,t,s)=>{"use strict";s.d(t,{t$:()=>ed,Ay:()=>en});var a=s(54857),r=s(53317);let l=e=>{let{className:t}=e;return(0,a.jsx)("svg",{"aria-label":"Vercel Logo",className:(0,r.cn)(t,"fill-black dark:fill-white"),fill:"none",height:22,viewBox:"0 0 235 203",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M117.082 0L234.164 202.794H0L117.082 0Z",fill:"currentColor"})})};var n=s(16617),i=s(37622),o=s(39112),c=s(62841),d=s(71368),u=s(96541),m=s(76236),p=s(73927),h=s(80612);function x(e,t,s){let a=(0,p.useRouter)(),r=async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch deployment status");let s=await t.json();return("READY"===s.readyState||"ERROR"===s.readyState)&&a.refresh(),s},{data:l,error:n,isLoading:i,mutate:o}=(0,h.Ay)(e&&t&&!s?"/chat/api/chat/deployment-status?id=".concat(e,"&bid=").concat(t):null,r,{refreshInterval:3e3,revalidateOnFocus:!1,suspense:!0});return{readyState:null==l?void 0:l.readyState,url:null==l?void 0:l.url,isLoading:i,isError:n,inspectorUrl:null==l?void 0:l.inspectorUrl,revalidate:o,id:null==l?void 0:l.id}}var f=s(31487),g=s(89819),v=s(43393),j=s(77170),b=s(77184),y=s(90761),w=s(82133),N=s(53239),k=s(90229),C=s(67401),S=s(48587),I=s(85903),P=s(71705),L=s(96737),R=s(37835),E=s(99382),z=s(56227);function M(e){var t;let{variant:s="default",blockId:r,lang:l,source:o,deploymentStatus:p,deployment:h,activeBlock:x,isActivelyDeploying:M}=e,{activeScopeSlug:F,activeScope:A}=(0,v.k6)(),[T,U]=(0,u.useTransition)(),{isStreaming:O,chatId:_}=(0,c.Pk)(),{project:V}=(0,y.tZ)(),{handleReassignProject:B,reassignPending:$}=(0,N.Z)(),H=(0,d.k)("deployBlockPopover"),[q,W]=(0,u.useState)(!1),Y=(0,m.y6)(),{setBlockDeployed:Q}=(0,P.G)(),{updateBlockData:Z}=(0,L.useBlockHistory)({blockId:r}),G=(0,f.m)({data:{lang:l,source:o}},g.P),J=(0,u.useCallback)(()=>{x&&r&&(W(!0),U(async()=>{try{let e=await fetch("/chat/b/".concat(r,"/deploy?scope=").concat(F),{method:"POST"}),t=await e.json();if("error"in t)throw Error(t.error);if(e.ok)Y({...x,latestDeploymentInfo:{aliasUrl:t.url,deploymentId:t.id,readyState:t.readyState}}),Q(r,!0),Z({blockId:r,data:{latestDeploymentInfo:{aliasUrl:t.url,deploymentId:t.id,readyState:t.readyState}}}),await (null==p?void 0:p.revalidate());else throw console.error(t),Error("Failed to deploy block to Vercel")}catch(e){(0,j.z)(e,void 0,"Failed to deploy block to Vercel")||b.oR.error("Failed to deploy block to Vercel. You may lack permissions to create new Vercel projects.")}finally{W(!1)}}))},[x,r,F,Y,Q,Z,p]);if(!r||!G)return null;let K=null!==(t=null==x?void 0:x.meta.title)&&void 0!==t?t:null==x?void 0:x.meta.project;if(K&&/[_-]/.test(K)&&(K=K.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")),!V)return(0,a.jsx)(w.o,{handleProjectSelect:B,modalClassName:"z-[9999]",quickCreate:!0,projectName:K,onSuccess:e=>{_&&(0,z.M)({payload:{chatId:_,projectId:e,scopeSlug:F}})},triggerButton:(0,a.jsx)(n.$,{className:"w-full max-w-full",type:"submit",disabled:O,size:"sm",children:H(h?"addChatToProjectRedeploy":"addChatToProject")}),disabled:$});if(!V.vercelProjectId){let e=V.isCreator,t=!!A&&((0,E.W)(A)?e:"OWNER"===A.membership.role);return(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"border-0.5 flex items-center gap-4 rounded-sm border border-yellow-600 p-4 text-sm text-yellow-600",children:[(0,a.jsx)(S.N,{className:"size-5 shrink-0"}),(0,a.jsxs)("p",{children:["This block is linked to a v0 project (",(0,a.jsx)(C.N,{className:"inline-flex w-fit font-medium",href:"/chat/projects/".concat(V.projectId),children:V.name}),") without a Vercel project connection. Please link a Vercel project to deploy this block."]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,a.jsx)(I.f8,{v0ProjectId:V.projectId,size:"sm",readOnly:!(e||t)}),(0,a.jsx)(n.$,{variant:"secondary",size:"sm",onClick:()=>B(null),children:"Unlink v0 Project"})]})]})}return h&&!M?(0,a.jsx)(R.E,{className:"h-8 w-full"}):(null==p?void 0:p.readyState)?(0,a.jsx)(D,{variant:s,deploymentStatus:p}):(0,a.jsx)(n.$,{className:(0,i.cn)("w-full max-w-full gap-2","secondary"===s&&"bg-gray-100 hover:bg-gray-200 focus:bg-gray-200 focus-visible:bg-gray-200 disabled:bg-gray-100"),variant:"secondary"===s?"ghost":"default",size:"sm",type:"submit",disabled:O||T||q,onClick:J,children:q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.y,{})," ",H("initiatingDeployment")]}):H("confirmAndDeploy")})}let F=["QUEUED"],A=["BUILDING","INITIALIZING","NOTREADY"];function D(e){let{variant:t,deploymentStatus:s}=e,r=(0,d.k)("deployBlockPopover");return F.includes(s.readyState||"")?(0,a.jsxs)(n.$,{disabled:!0,className:(0,i.cn)("w-full gap-2","secondary"===t&&"bg-gray-100 hover:bg-gray-200 focus:bg-gray-200 focus-visible:bg-gray-200 disabled:bg-gray-100"),variant:"secondary"===t?"ghost":"default",size:"sm",type:"submit",children:[(0,a.jsx)(k.y,{})," ",r("initiatingDeployment")]}):A.includes(s.readyState||"")?(0,a.jsxs)(n.$,{disabled:!0,className:(0,i.cn)("w-full gap-2","secondary"===t&&"bg-gray-100 hover:bg-gray-200 focus:bg-gray-200 focus-visible:bg-gray-200 disabled:bg-gray-100"),variant:"secondary"===t?"ghost":"default",size:"sm",type:"submit",children:[(0,a.jsx)(k.y,{})," ",r("deploying")]}):null}var T=s(54143),U=s(12048),O=s(19296),_=s(38293),V=s(12550),B=s(68022),$=s(12350),H=s(35448),q=s(13649),W=s(3281),Y=s(66188),Q=s(30371);let Z=async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch deployment status");return t.json()};var G=s(38651),J=s(86287),K=s(90509),X=s(67605);let ee=(0,X.createServerReference)("40157eb5a5e8d6a6e79342deb5fb163654a81b9915",X.callServer,void 0,X.findSourceMapURL,"assignVercelAlias");function et(e){let{deploymentId:t,activeBlock:s,editedAlias:r,setEditedAlias:l,revalidateDeploymentStatus:o,goBack:c}=e,p=(0,d.k)("shareBlockPopover"),[h,x]=(0,u.useTransition)(),[f]=(0,K.Q3)(r,500),g=h||!s||!f,v=(0,m.y6)(),{updateBlockData:y}=(0,L.useBlockHistory)({blockId:null==s?void 0:s.id}),[w,N]=(0,u.useState)(null),C=(0,u.useCallback)(()=>{g||(N(null),x(async()=>{try{(0,G.u)("SubmitAssignVercelAlias",{blockId:s.id,alias:f});let a=await ee({deploymentId:t,alias:f,blockId:s.id});if(await (null==o?void 0:o()),b.oR.success(p("domainAssigned")),"assignedAlias"in a){var e;let r={aliasUrl:a.assignedAlias.alias,deploymentId:t,readyState:(null===(e=s.latestDeploymentInfo)||void 0===e?void 0:e.readyState)||"READY"};v({...s,latestDeploymentInfo:r}),y({blockId:s.id,data:{latestDeploymentInfo:r}})}c()}catch(t){let e=function(e){let t=function(e){if(e instanceof Error){let[,t]=e.message.split("]"),s=t?JSON.parse(t.trim()):void 0;if(s&&"error"in s&&"string"==typeof s.error.code){let e=s.error.code;if(e in es)return e}}return!1}(e);if(t)return es[t]}(t);e?N(e):(0,j.z)(t)||b.oR.error("Failed to set custom domain. Please try again.")}}))},[g,s,f,t,o,p,c,v,y]),S=(0,u.useRef)(null),I=null==r?void 0:r.includes("."),P=(0,a.jsx)("div",{className:"h-8 max-h-full pl-0.5",children:(0,a.jsx)("div",{className:"flex h-full items-center rounded-r-lg bg-gray-100 px-2 text-sm text-gray-500",children:I?"Custom":".vercel.app"})});return(0,a.jsxs)("form",{onSubmit:e=>(e.preventDefault(),C()),children:[(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3 p-4",children:[(0,a.jsx)(J.p,{autoCapitalize:"off",className:(0,i.cn)("disabled:bg-background flex-1"),name:"subdomain",onChange:e=>{l(e.target.value.replace(/^(https?:\/\/)?/,"").replace(/\.vercel\.app\/?$/,"")||"")},placeholder:p("enterCustomDomain"),ref:S,size:"sm",suffix:P,value:r||""}),w?(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 text-sm font-medium text-red-600",children:[(0,a.jsx)(V.$,{}),w]}):null]}),(0,a.jsxs)("div",{className:"border-alpha-400 bg-muted flex items-center justify-end gap-2 border-t p-3",children:[(0,a.jsx)(n.$,{onClick:c,size:"sm",type:"button",variant:"secondary",children:p("cancel")}),(0,a.jsxs)(n.$,{disabled:g,onClick:C,size:"sm",type:"submit",children:[p("saveDomain"),h?(0,a.jsx)(k.y,{className:"text-foreground",size:16}):null]})]})]})}let es={cert_missing:"Missing certificate",cert_expired:"Certificate expired",deployment_not_found:"Deployment not found",gone:"Cannot assign alias to failed deployment",invalid_alias:"Invalid alias",deployment_not_ready:"Deployment is not ready",alias_in_use:"Alias unavailable",forbidden:"Unauthorized"};var ea=s(26970),er=s(59179),el=s(55315);function en(){let e=(0,d.k)("deployBlockPopover"),t=(0,m.eu)(),s=(0,u.useMemo)(()=>(null==t?void 0:t.latestDeploymentInfo)||null,[null==t?void 0:t.latestDeploymentInfo]),r=(0,a.jsx)(o.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{disabled:!0,size:"sm",className:"flex h-7 items-center gap-0.5 rounded-md px-1.5",children:[(0,a.jsx)(l,{className:"@[32.5rem]/block-header:flex hidden size-4 p-0.5"}),(0,a.jsx)("span",{className:"px-1 text-sm",children:e("deploying")})]})});return(0,a.jsxs)(o.AM,{children:[(0,a.jsx)(u.Suspense,{fallback:r,children:(0,a.jsx)(ei,{})}),(0,a.jsx)(o.hl,{align:"end",className:(0,i.cn)("flex w-[370px] flex-col items-stretch gap-0 p-0 md:w-[515px]"),sideOffset:8,withOverlay:!0,children:(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)(ev,{}),children:(0,a.jsx)(ed,{activeBlock:t,deployment:s})})})]})}function ei(){var e,t;let s=(0,d.k)("deployBlockPopover"),{isStreaming:r}=(0,c.Pk)(),i=(0,m.eu)(),p=(0,u.useMemo)(()=>(null==i?void 0:i.latestDeploymentInfo)||null,[null==i?void 0:i.latestDeploymentInfo]),h=x(null==p?void 0:p.deploymentId,null==i?void 0:i.id,(null==i?void 0:null===(e=i.latestDeploymentInfo)||void 0===e?void 0:e.readyState)==="READY"||(null==i?void 0:null===(t=i.latestDeploymentInfo)||void 0===t?void 0:t.readyState)==="ERROR"),f=(0,u.useMemo)(()=>ec.includes(h.readyState||""),[h.readyState]),g="READY"===h.readyState,v=r||h.isLoading;return g?(0,a.jsx)(o.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{disabled:v,size:"sm",className:"ml-0.5 flex h-7 select-none items-center gap-0.5 rounded-md border-none bg-blue-600 px-1.5 dark:text-gray-900 dark:hover:text-gray-100",children:[(0,a.jsx)(U.a,{className:"size-4 p-0.5"}),(0,a.jsx)("span",{className:"px-1 text-sm",children:s("deployed")})]})}):(0,a.jsx)(o.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{disabled:v,size:"sm",className:"ml-0.5 h-7 select-none items-center gap-0.5 rounded-md px-1.5",children:[(0,a.jsx)(l,{className:"@[32.5rem]/block-header:flex hidden size-4 p-0.5"}),(0,a.jsx)("span",{className:"px-1 text-sm",children:s(f?"deploying":"deploy")})]})})}let eo=["READY","CANCELED","ERROR"],ec=["QUEUED","BUILDING","INITIALIZING","NOTREADY"];function ed(e){var t,s,r,l;let{activeBlock:n,deployment:o,variant:c="default"}=e,p=(0,d.k)("deployBlockPopover"),{setUpgradePromptOpen:f}=(0,er.gU)(),{activeScope:g,activeScopeSlug:w,user:N}=(0,v.k6)(),{planSlug:k}=(0,T.N)(!0,null==g?void 0:g.id),{project:C}=(0,y.tZ)(),S=(0,u.useRef)(null),[I,E]=(0,u.useTransition)(),[z,F]=(0,u.useTransition)(),{customAlias:A,inspectorUrl:D}=function(e){let t=async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch deployment status");return await t.json()},{data:s,error:a,isLoading:r,mutate:l}=(0,h.Ay)(e?"/chat/api/chat/deployment-status?id=".concat(e):null,t,{refreshInterval:5e3,revalidateOnFocus:!0,revalidateOnMount:!0,suspense:!0});return{readyState:null==s?void 0:s.readyState,url:null==s?void 0:s.url,isLoading:r,isError:a,inspectorUrl:null==s?void 0:s.inspectorUrl,revalidate:l,customAlias:null==s?void 0:s.customAlias}}(null==o?void 0:o.deploymentId),U=x(null==o?void 0:o.deploymentId,null==n?void 0:n.id,(null==n?void 0:null===(t=n.latestDeploymentInfo)||void 0===t?void 0:t.readyState)==="READY"||(null==n?void 0:null===(s=n.latestDeploymentInfo)||void 0===s?void 0:s.readyState)==="ERROR"),O=(0,u.useMemo)(()=>ec.includes(U.readyState||""),[U.readyState]),V=null!==(l=null==A?void 0:A.alias)&&void 0!==l?l:null==o?void 0:o.aliasUrl,B=U.readyState||(null==o?void 0:o.readyState),H=(null==o?void 0:o.deploymentId)||U.id,q=eo.includes(B||""),G=(null==A?void 0:A.alias)!==void 0,{setPromptFormInput:J}=(0,Y.Q1)(),K=null==n?void 0:null===(r=n.latestDeploymentInfo)||void 0===r?void 0:r.readyState,{data:X}=function(e){let{data:t,error:s,isLoading:a,mutate:r}=(0,Q.A)(e?"/chat/api/chat/deployment-build-errors?id=".concat(e):null,Z,{suspense:!0});return{data:t,error:s,isLoading:a,mutate:r}}("ERROR"===K?null==o?void 0:o.deploymentId:void 0),ee=(0,m.y6)(),{setBlockDeployed:es}=(0,P.G)(),{updateBlockData:en}=(0,L.useBlockHistory)({blockId:null==n?void 0:n.id}),[ei,ed]=(0,u.useState)(null),[ex,ev]=(0,u.useState)("deployment-info"),eb="v0-level0"===k&&!(null==N?void 0:N.isV0Admin)&&!(null==N?void 0:N.isVercelian)&&!(null==N?void 0:N.hasPremiumOverride),ey=(0,u.useCallback)(()=>{if(O){b.oR.error("Deployment already in progress");return}E(async()=>{if(n)try{let e=await fetch("/chat/b/".concat(n.id,"/deploy?scope=").concat(w),{method:"POST"}),t=await e.json();if("error"in t)throw Error(t.error);if(e.ok)ee({...n,latestDeploymentInfo:{aliasUrl:t.url,deploymentId:t.id,readyState:t.readyState}}),es(n.id,!0),en({blockId:n.id,data:{latestDeploymentInfo:{aliasUrl:t.url,deploymentId:t.id,readyState:t.readyState}}});else throw console.error(t),Error("Failed to deploy block to Vercel")}catch(e){(0,j.z)(e,void 0,"Failed to redeploy block to Vercel")||b.oR.error("Failed to redeploy block to Vercel. You may lack permissions to create new Vercel projects.")}})},[n,w,O,ee,es,en]),ew=(0,u.useCallback)(()=>{F(async()=>{if(n&&o)try{if((await fetch("/chat/api/chat/deployment",{method:"DELETE",body:JSON.stringify({deploymentId:o.deploymentId,blockId:n.id})})).ok)b.oR.success("Deployment successfully unpublished"),ee({...n,latestDeploymentInfo:void 0}),es(n.id,!1),en({blockId:n.id,data:{latestDeploymentInfo:void 0}});else throw Error("Failed to unpublish deployment")}catch(e){(0,j.z)(e,void 0,"Failed to unpublish deployment")||b.oR.error("Failed to unpublish deployment")}})},[n,o,ee,es,en]),eN=(0,u.useMemo)(()=>{if("custom-domain"===ex)return null;let e="ERROR"===K||"ERROR"===B,t=!!(null==X?void 0:X.buildErrors),s=C&&C.vercelProjectId;return e&&s?(0,a.jsx)(ep,{variant:c,showFixWithV0:t,disabled:!C.vercelProjectId||I||O||!V,onFix:()=>J("An error occurred during deployment. Please fix:\n\n```\n".concat(null==X?void 0:X.buildErrors,"\n```")),onRetry:ey,isRetrying:I}):!e&&s&&q&&V?(0,a.jsx)(eh,{variant:c,deploymentUrl:V,inspectorUrl:D,aliasComplete:G,onRedeploy:ey,isRedeploying:I,isDeploying:O,onUnpublish:ew,isUnpublishing:z}):(0,a.jsx)(M,{activeBlock:n,variant:"card"===c?"secondary":"default",blockId:null==n?void 0:n.id,source:null==n?void 0:n.source,lang:null==n?void 0:n.language,deploymentStatus:U,deployment:o,isActivelyDeploying:O})},[n,K,G,ex,null==X?void 0:X.buildErrors,o,q,B,U,V,D,O,I,z,ey,C,J,ew,c]),ek=(0,u.useMemo)(()=>{if("card"===c)return null;let e=null==n?void 0:n.id,t=q&&!O&&!I;return e&&o?(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-2"),children:[(0,a.jsx)("h4",{className:"text-[13px] font-medium text-gray-500",children:p("settings")}),(0,a.jsx)(ea.Tooltip,{content:eb?"Upgrade to set custom domains":t?null:"Configure custom domains after deployment completes",children:(0,a.jsxs)("button",{className:(0,i.cn)("inline-flex items-center justify-between gap-4 pl-1.5 text-sm",!t&&"cursor-not-allowed opacity-50"),onClick:()=>{eb?f(!0):t&&ev("custom-domain")},children:[(0,a.jsxs)("span",{className:"inline-flex flex-1 items-center gap-2 text-start",children:[(0,a.jsx)($.q,{}),p("customDomain.setCustomDomain")]}),(0,a.jsxs)("span",{className:"inline-flex items-center font-medium",children:[p("configure"),(0,a.jsx)(_.b,{})]})]})})]}):null},[null==n?void 0:n.id,o,q,O,I,f,p,eb,c]),eC=(0,u.useMemo)(()=>{let e="ERROR"===K||"ERROR"===B,t=C&&C.vercelProjectId;return e&&t?(0,a.jsx)(em,{inspectorUrl:D,variant:c}):V&&B&&H?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[q?G?(0,a.jsx)(ej,{href:(0,i.ik)(A.alias),label:(0,i.ik)(A.alias),disabled:!1,ref:S}):(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(R.E,{className:"h-5 w-64"}),(0,a.jsx)(W.m,{})]}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Your preview will be ready soon"}),(0,a.jsx)(ef,{readyState:B,deploymentId:H,inspectorUrl:D?(0,i.ik)(D):void 0})]}),ek]}):null},[K,B,C,V,H,q,G,null==A?void 0:A.alias,D,ek,c]);return(0,a.jsxs)(a.Fragment,{children:["deployment-info"===ex&&("card"===c?o?(0,a.jsx)(el.Wu,{className:"p-3",children:eC}):(0,a.jsx)(eu,{variant:c}):(0,a.jsx)("div",{className:"flex w-full flex-col gap-4 p-4",children:o?eC:(0,a.jsx)(eu,{variant:c})})),"custom-domain"===ex&&o?(0,a.jsx)(eg,{goBack:()=>{ev("deployment-info"),ed(null)},title:p("customDomain.setCustomDomain"),children:(0,a.jsx)(et,{deploymentId:o.deploymentId,revalidateDeploymentStatus:U.revalidate,activeBlock:n,editedAlias:ei||"",setEditedAlias:ed,goBack:()=>{ev("deployment-info"),ed(null)}})}):null,"card"===c?(0,a.jsx)(el.wL,{className:"p-2 pt-0",children:(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)(R.E,{className:"h-8 w-full"}),children:eN})}):(0,a.jsx)("div",{className:"border-alpha-400 bg-muted border-t p-3",children:(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)(R.E,{className:"h-8 w-full"}),children:eN})})]})}function eu(e){let{variant:t}=e,s=(0,d.k)("deployBlockPopover");switch(t){case"default":return(0,a.jsxs)("div",{className:"bg-muted flex flex-col items-center rounded-md py-4 text-center text-sm",children:[(0,a.jsx)("div",{className:"mb-4 rounded-md border bg-white p-2 text-gray-500",children:(0,a.jsx)($.q,{})}),(0,a.jsx)("h3",{className:"mb-2 font-medium text-gray-900",children:s("deployToVercel")}),(0,a.jsx)("p",{className:"max-w-96 text-gray-500",children:s("deployToVercelDescription")})]});case"card":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.aR,{className:"mb-1 p-3 pb-0 font-medium",children:s("deployToVercel")}),(0,a.jsx)(el.Wu,{className:"p-3 pt-0 text-gray-500",children:s("deployToVercelDescription")})]})}}function em(e){let{inspectorUrl:t,variant:s="default"}=e,r=(0,d.k)("deployBlockPopover");return(0,a.jsxs)("div",{className:"bg-muted flex flex-col items-center gap-2 rounded-md p-4 text-center text-sm",children:[(0,a.jsx)("div",{className:(0,i.cn)("rounded-full border border-red-200 bg-red-50 p-2 text-red-600"),children:(0,a.jsx)(V.$,{})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h3",{className:(0,i.cn)("m-0 py-2 text-sm font-medium text-gray-900"),children:r("deploymentFailed")}),(0,a.jsx)("p",{className:(0,i.cn)("max-w-96 text-gray-500","card"===s&&"mb-0"),children:r("deploymentFailedDescription",t)})]})]})}function ep(e){let{disabled:t,onFix:s,onRetry:r,isRetrying:l,showFixWithV0:o,variant:c}=e,u=(0,d.k)("deployBlockPopover");return(0,a.jsxs)("div",{className:(0,i.cn)("flex w-full items-center justify-end gap-2","card"===c&&"flex-col"),children:[o&&(0,a.jsxs)(n.$,{className:(0,i.cn)("card"===c&&"w-full"),disabled:t,onClick:s,size:"sm",type:"button",children:["Fix with ",(0,a.jsx)(H.o,{className:"-ml-1 mt-[1px]"})]}),(0,a.jsx)(n.$,{disabled:t,className:(0,i.cn)("card"===c&&"w-full"),onClick:r,size:"sm",type:"button",variant:"secondary",children:l?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.y,{className:"size-2"})," ",u("redeploying")]}):u("tryAgain")})]})}function eh(e){let{variant:t,deploymentUrl:s="default",inspectorUrl:r,aliasComplete:l,onRedeploy:o,isRedeploying:c,isDeploying:u,onUnpublish:m,isUnpublishing:p}=e,h=(0,d.k)("deployBlockPopover");return"card"===t?(0,a.jsx)(n.$,{className:"w-full bg-gray-100 hover:bg-gray-200 focus:bg-gray-200 focus-visible:bg-gray-200 disabled:bg-gray-100",disabled:!r,variant:"ghost",size:"sm",asChild:!0,children:r?(0,a.jsx)(C.N,{target:"_blank",href:(0,i.ik)(r),children:"View on Vercel"}):"View on Vercel"}):(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)(n.$,{asChild:!0,size:"sm",variant:"ghost",disabled:!s||u||!l,children:(0,a.jsxs)(C.N,{href:(0,i.ik)(s),children:[h("visitSite"),(0,a.jsx)(B.i,{className:"size-4"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{disabled:!s||p||u,onClick:m,size:"sm",type:"button",variant:"secondary",children:p?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.y,{className:"size-2"})," ",h("unpublishing")]}):h("unpublish")}),(0,a.jsx)(n.$,{size:"sm",onClick:o,disabled:c||p,children:c&&!p?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.y,{className:"size-2"})," ",h("redeploying")]}):h("update")})]})]})}let ex={QUEUED:{primaryColor:"text-gray-500",secondaryColor:"bg-gray-100",label:"Queued"},BUILDING:{primaryColor:"text-amber-600",secondaryColor:"bg-amber-100",label:"Building"},ERROR:{primaryColor:"text-red-600",secondaryColor:"bg-red-100",label:"Error"},INITIALIZING:{primaryColor:"text-amber-600",secondaryColor:"bg-amber-100",label:"Initializing"},READY:{primaryColor:"text-green-600",secondaryColor:"bg-green-100",label:"Ready"},CANCELED:{primaryColor:"text-red-600",secondaryColor:"bg-red-100",label:"Canceled"},NOTREADY:{primaryColor:"text-gray-500",secondaryColor:"bg-gray-100",label:"Not Ready"}};function ef(e){let{readyState:t,deploymentId:s,inspectorUrl:r}=e,{primaryColor:l,secondaryColor:n,label:o}=ex[t];return(0,a.jsxs)("span",{className:(0,i.cn)(l,"inline-flex items-center gap-2 text-sm"),children:[(0,a.jsx)(q.S,{className:(0,i.cn)(n,"rounded-full")}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:o}),r?(0,a.jsx)("a",{className:"text-[13px] text-gray-600",href:r,target:"_blank",children:s.slice(0,8)}):(0,a.jsx)("span",{className:"text-[13px] text-gray-600 ",children:s.slice(0,8)})]})}function eg(e){let{goBack:t,children:s,title:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)(n.$,{className:"border-alpha-400 hover:border-b-alpha-400 flex h-[52px] w-full justify-start gap-2 rounded-none border-x-0 border-b border-t-0 p-4 text-sm font-medium hover:border-b hover:bg-transparent",variant:"ghost",onClick:t,children:[(0,a.jsx)(O.n,{className:"ml-1 size-5"}),(0,a.jsx)("h1",{children:r})]}),s]})}function ev(){return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,a.jsx)(R.E,{className:"h-[120px]"}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(R.E,{className:"h-8 w-full"})})]})}function ej(e){let{href:t,label:s,ref:r,disabled:l}=e;return(0,a.jsxs)(C.N,{className:(0,i.cn)("flex items-center text-sm text-gray-900 hover:underline",l&&"cursor-default text-gray-500"),href:t,ref:r,disabled:l,target:"_blank",children:[s,!l&&(0,a.jsx)(W.m,{})]})}},78192:(e,t,s)=>{"use strict";s.d(t,{HR:()=>L,z7:()=>P});var a=s(54857),r=s(96541),l=s(16617),n=s(50735),i=s(77184),o=s(63558),c=s(15893),d=s(54294),u=s(61087),m=s(60732),p=s(38651),h=s(62841),x=s(37622),f=s(42616),g=s(3316),v=s(81580),j=s(42782);function b(){return(0,a.jsx)(v.Dp,{variants:{hover:{y:2,x:-1,rotate:12}},children:(0,a.jsx)(j.t,{"aria-hidden":!0})})}var y=s(66117),w=s(71368),N=s(80612),k=s(30856),C=s(66242);function S(){let{data:e,mutate:t}=(0,N.Ay)("downvote-dialog-data",null,{fallbackData:null});return{downvoteDialogState:e,setDownvoteDialogState:t}}function I(e){let{children:t,value:s,reasons:r}=e;return(0,a.jsx)(d.a,{className:"is-mobile:text-xs",onClick:()=>r.toggle(s),selected:r.has(s),children:t})}function P(){let{activeForkKey:e}=(0,h.Pk)(),{downvoteDialogState:t,setDownvoteDialogState:s}=S(),{messageId:d,quote:v}=(0,r.useMemo)(()=>t||{},[t]),{formRef:j,onKeyDown:b}=(0,o.w)(),{chatId:N,messageText:C,promptMessageId:P,userId:L}=(0,f.q)({messageId:d}),[R,E]=(0,r.useState)(""),z=(0,u.L)(),M=(0,w.k)("downvoteDialog"),F=(0,r.useCallback)(()=>{E(""),z.clear(),s(null)},[z,s]),{gm:A}=(0,k.D)(),D=(0,r.useCallback)(async t=>{t.preventDefault();let s=(0,y.K1)(e);if(P&&C&&d&&s)try{(0,i.oR)(M("successToast")),await Promise.all([F(),(0,p.u)("SubmitDownvote",{messageId:d,leafMessageId:s,messageText:JSON.stringify({text:C}),quote:v,reasons:z.values,freeformFeedback:R}),(0,m.p)({feedback:R,quote:v,reasons:z.values,chatId:N,leafMessageId:s,promptMessageId:P,messageId:d,userId:L,type:"downvote",gitMentionsEnabled:A})])}catch(e){console.error(e),i.oR.error("Failed to send feedback. Please try again later.")}},[P,F,d,C,e,v,z.values,R,N,L,M]),T=(0,r.useMemo)(()=>(0,a.jsxs)("form",{className:(0,x.cn)("flex flex-col","is-mobile:gap-3 is-not-mobile:gap-6"),onSubmit:D,ref:j,children:[v&&(0,a.jsxs)("div",{className:(0,x.cn)("bg-muted flex items-center gap-2 text-ellipsis py-3 text-sm text-gray-900","is-mobile:-mx-3 is-mobile:px-3 is-not-mobile:-mx-6 is-not-mobile:px-6"),children:[(0,a.jsx)("div",{className:"w-1 shrink-0 self-stretch rounded-full bg-gray-300"}),(0,a.jsx)("span",{className:"line-clamp-2",children:v})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,a.jsx)(I,{reasons:z,value:"inaccurate",children:M("options.incorrectInformation")}),(0,a.jsx)(I,{reasons:z,value:"off-topic",children:M("options.instructionsIgnored")}),(0,a.jsx)(I,{reasons:z,value:"lazy",children:M("options.beingLazy")}),(0,a.jsx)(I,{reasons:z,value:"style",children:M("options.dontLikeStyle")}),(0,a.jsx)(I,{reasons:z,value:"bad-recommendation",children:M("options.badRecommendation")}),(0,a.jsx)(I,{reasons:z,value:"other",children:M("options.other")})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)(c.Label,{className:"text-sm font-normal text-gray-500",htmlFor:"downvote-feedback",children:[M("howCanWeImprove")," ",(0,a.jsx)("span",{className:"text-gray-400",children:M("optional")})]}),(0,a.jsx)(n.T,{className:"shadow-none",id:"downvote-feedback",name:"feedback",onChange:e=>E(e.target.value),onKeyDown:b,placeholder:"Your feedback...",rows:3,value:R})]}),(0,a.jsxs)("div",{className:"is-mobile:flex-col-reverse is-not-mobile:flex-row flex w-full items-center justify-end gap-2",children:[(0,a.jsx)(l.$,{className:"is-mobile:w-full",onClick:e=>{e.preventDefault(),F()},size:"sm",variant:"secondary",children:M("cancel")}),(0,a.jsx)(l.$,{className:"is-mobile:w-full",size:"sm",type:"submit",children:M("submit")})]})]}),[D,j,v,z,M,b,R,F]);return(0,a.jsx)(g.Modal,{onClose:F,onOpenChange:e=>{e||F()},open:!!t,children:(0,a.jsxs)("div",{className:"overflow-auto",children:[(0,a.jsxs)(g.ModalHeader,{children:[(0,a.jsx)(g.ModalTitle,{children:M("title")}),(0,a.jsx)(g.ModalDescription,{children:M("description",v)})]}),(0,a.jsx)(g.ModalContent,{children:T})]})})}function L(e){let{variant:t,messageId:s,quoteRef:r,tooltip:n,...i}=e,{messages:o}=(0,h.Pk)(),{setDownvoteDialogState:c}=S(),{isLoading:d,canVote:u}=(0,C.q)();if(d||!u)return null;function m(){var e;return JSON.stringify(null===(e=o.find(e=>"id"in e&&e.id===s))||void 0===e?void 0:e.content)}return"quote"===t?(0,a.jsx)(l.$,{"aria-label":"Downvote",className:"text-muted-foreground hover:text-foreground rounded-md p-0 text-sm",onClick:()=>{var e,t;(0,p.u)("OpenDownvote",{quote:null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.call(r),messageId:s,messageText:m()}),c({messageId:s,quote:null==r?void 0:null===(t=r.current)||void 0===t?void 0:t.call(r)})},size:"xs",variant:"ghost",children:(0,a.jsx)(b,{"aria-hidden":!0})}):(0,a.jsx)(l.$,{"aria-label":"Downvote Response",onClick:async()=>{(0,p.u)("OpenDownvote",{messageId:s,messageText:m()}),await c({messageId:s})},size:"xs",tooltip:n,variant:"secondary",...i,children:(0,a.jsx)(b,{})})}},75678:(e,t,s)=>{"use strict";s.d(t,{Q:()=>m,Z:()=>p});var a=s(54857),r=s(96541),l=s(16617),n=s(62841),i=s(27),o=s(77184),c=s(90229),d=s(72920),u=s(77170);let m="v0-chat-export";function p(){let[e,t]=(0,r.useTransition)(),{chatId:s}=(0,n.xz)();return(0,a.jsxs)(l.$,{disabled:e,onClick:()=>{t(async()=>{if(!s){o.oR.error("Chat ID not found.");return}try{let e=await (0,i.V)({payload:{chatId:s}});if("error"in e)throw Error(e.error);let t=new Blob([JSON.stringify(e.data)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="".concat(m,"-").concat(s,"-").concat(new Date().toISOString(),".json"),r.click(),URL.revokeObjectURL(a)}catch(e){(0,u.z)(e)||o.oR.error("Something went wrong. Please try again.")}})},className:"h-7 rounded-md",size:"sm",tooltip:{side:"bottom",content:"Export chat (AI Team only)"},variant:"ghost",children:[e?(0,a.jsx)(c.y,{}):(0,a.jsx)(d.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Export chat"})]})}},91886:(e,t,s)=>{"use strict";s.d(t,{o:()=>h});var a=s(54857),r=s(5846),l=s(80068),n=s(9527),i=s(2015),o=s(42941),c=s(23504),d=s(30959),u=s(26099),m=s(37622);let p=(0,s(52335).G)('<g clip-path="url(#clip0_872_3178)">\n  <path d="M13.7974 2.11525C12.3195 -0.0135593 9.37709 -0.637288 7.26183 0.705085L3.53302 3.09153C2.51607 3.72881 1.81098 4.77288 1.60759 5.95254C1.43132 6.94237 1.58048 7.95932 2.05505 8.84068C1.72963 9.32881 1.51268 9.87119 1.41776 10.4407C1.20082 11.6475 1.48556 12.8949 2.19065 13.8847C3.68217 16.0136 6.61098 16.6373 8.72624 15.2949L12.4551 12.922C13.472 12.2847 14.1771 11.2407 14.3805 10.061C14.5567 9.07119 14.4076 8.05424 13.933 7.17288C14.2584 6.68475 14.4754 6.14237 14.5703 5.57288C14.8008 4.35254 14.5161 3.10508 13.7974 2.11525Z" fill="currentColor"/>\n  <path d="M6.8958 14.0881C5.68902 14.4 4.428 13.9254 3.72292 12.9085C3.28902 12.3119 3.12631 11.5661 3.24834 10.8339C3.27546 10.7119 3.30258 10.6034 3.3297 10.4814L3.3975 10.2644L3.58733 10.4C4.03478 10.7254 4.52292 10.9695 5.05173 11.1322L5.18733 11.1729L5.17377 11.3085C5.16021 11.4983 5.21445 11.7017 5.32292 11.8644C5.53987 12.1763 5.91953 12.3254 6.28563 12.2305C6.36699 12.2034 6.44834 12.1763 6.51614 12.1356L10.2314 9.76271C10.4212 9.64068 10.5433 9.46441 10.5839 9.24746C10.6246 9.03051 10.5704 8.8 10.4483 8.62373C10.2314 8.31186 9.85173 8.17627 9.48563 8.27119C9.40428 8.29831 9.32292 8.32542 9.25512 8.3661L7.83139 9.27458C7.60089 9.42373 7.34326 9.5322 7.07207 9.6C5.86529 9.91187 4.60428 9.43729 3.89919 8.42034C3.47885 7.82373 3.30258 7.07797 3.43817 6.34576C3.56021 5.64068 3.99411 5.00339 4.60428 4.62373L8.33309 2.25085C8.5636 2.1017 8.82123 1.99322 9.09241 1.91186C10.2992 1.6 11.5602 2.07458 12.2653 3.09153C12.6992 3.68814 12.8619 4.4339 12.7399 5.1661C12.7128 5.28814 12.6856 5.39661 12.645 5.51864L12.5772 5.73559L12.3873 5.6C11.9399 5.27458 11.4517 5.03051 10.9229 4.8678L10.7873 4.82712L10.8009 4.69153C10.8144 4.50169 10.7602 4.29831 10.6517 4.13559C10.4348 3.82373 10.0551 3.68814 9.68902 3.78305C9.60767 3.81017 9.52631 3.83729 9.45851 3.87797L5.74326 6.25085C5.55343 6.37288 5.43139 6.54915 5.39072 6.7661C5.35004 6.98305 5.40428 7.21356 5.52631 7.38983C5.74326 7.7017 6.12292 7.83729 6.48902 7.74237C6.57038 7.71525 6.65173 7.68814 6.71953 7.64746L8.14326 6.73898C8.37377 6.58983 8.63139 6.48136 8.90258 6.4C10.1094 6.08814 11.3704 6.56271 12.0755 7.57966C12.5094 8.17627 12.6721 8.92203 12.55 9.65424C12.428 10.3593 11.9941 10.9966 11.3839 11.3763L7.65512 13.7492C7.42461 13.8983 7.16699 14.0068 6.8958 14.0881Z" fill="white"/>\n  </g>\n  <defs>\n  <clipPath id="clip0_872_3178">\n  <rect width="16" height="16" fill="white"/>\n  </clipPath>\n  </defs>');function h(e){let{lang:t,fill:s}=e,h={className:"size-4"},f={...h,className:(0,m.cn)(s?"[&_path]:".concat(s):"[&_path]:currentColor",h.className)};switch(t){case"typescript":return(0,a.jsx)(l.V,{...h});case"javascript":return(0,a.jsx)(r.F,{...h});case"powershell":case"shellscript":return(0,a.jsx)(x,{...h});case"typescriptreact":case"javascriptreact":return(0,a.jsx)(c.z,{...f});case"html":case"xml":return(0,a.jsx)(n.Y,{...h});case"svelte":return(0,a.jsx)(p,{...h});case"plaintext":return(0,a.jsx)(o.i,{...h});case"vue":case"vue-html":return(0,a.jsx)(d.w,{...h,...f});case"python":return(0,a.jsx)(u.M,{...h,...f});default:return(0,a.jsx)(i.Z,{...h})}}function x(e){return(0,a.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_3211_43963)",children:[(0,a.jsx)("path",{d:"M4 7L6 5.5L4 4",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,a.jsx)("path",{d:"M7 9H10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,a.jsx)("path",{d:"M13.4444 1H2.55556C1.69645 1 1 1.69645 1 2.55556V13.4444C1 14.3036 1.69645 15 2.55556 15H13.4444C14.3036 15 15 14.3036 15 13.4444V2.55556C15 1.69645 14.3036 1 13.4444 1Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_3211_43963",children:(0,a.jsx)("rect",{fill:"white",height:"16",width:"16"})})})]})}},38040:(e,t,s)=>{"use strict";s.d(t,{O:()=>m,t:()=>p});var a=s(54857),r=s(826),l=s(25385),n=s(18058),i=s(39988),o=s(75676),c=s(96541),d=s(46159);function u(e){let{id:t}=e,s=(0,l.E)(t);return(0,a.jsx)("span",{ref:s})}function m(e){let{label:t,idPrefix:s}=e,[r,l]=(0,c.useState)(!1),m=(0,d.al)(),{refs:p,floatingStyles:h,context:x}=(0,n.we)({placement:m?"top":"top-start",middleware:[(0,i.BN)({padding:6}),(0,i.cY)(4),(0,i.UU)({padding:6})],open:r,onOpenChange:l,whileElementsMounted:o.ll}),f=(0,n.Mk)(x,{handleClose:(0,n.iB)({buffer:1})}),{getReferenceProps:g,getFloatingProps:v}=(0,n.bv)([f]),j="".concat(s).concat(t);return"vercel_knowledge_base"===t?null:(0,a.jsxs)("span",{ref:p.setReference,...g(),className:"-mt-1 ml-0.5 inline-flex size-4 align-text-top",children:[(0,a.jsx)("a",{className:"bg-alpha-200 hover:bg-alpha-400 focus:bg-alpha-400 inline-block size-4 select-none rounded-full text-center font-mono text-[10px] leading-4 text-gray-700 no-underline transition-colors focus:text-black",href:"#def-".concat(j),id:"ref-".concat(j),onBlur:()=>l(!1),onFocus:()=>l(!0),tabIndex:0,children:t}),r?(0,a.jsx)("span",{ref:p.setFloating,style:h,...v(),className:"bg-background shadow-base z-10 select-none rounded-md p-2 text-xs",children:(0,a.jsx)(u,{id:j})}):null]})}function p(e){let{id:t,children:s}=e,{containers:a}=(0,l.W)(),n=a[t];return n?(0,r.createPortal)(s,n):null}},22284:(e,t,s)=>{"use strict";s.d(t,{C:()=>L,ImportFromFigmaModal:()=>P});var a=s(54857),r=s(96541),l=s(3316),n=s(16617),i=s(86287),o=s(10373),c=s(4423),d=s(71857),u=s(63694),m=s(48774),p=s(46948),h=s(97682),x=s(53317),f=s(38651),g=s(71368),v=s(30856),j=s(13534),b=s(52041),y=s(80612),w=s(44658),N=s(67401),k=s(45881);function C(e){let{inputRef:t,inputValue:s,setInputValue:r,urlError:c,setUrlError:u,handleImport:f,handleClose:v,isLoading:j}=e,b=(0,g.k)("figmaIntegration");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.ModalHeader,{className:"flex justify-start p-5",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,a.jsxs)("div",{className:"bg-muted/50 relative h-[180px] w-full rounded-md",children:[(0,a.jsx)(m.default,{src:"/chat-static/figma-integration-light.svg",alt:"",className:"h-full w-full rounded-md object-cover dark:hidden",fill:!0,priority:!0}),(0,a.jsx)(m.default,{src:"/chat-static/figma-integration-dark.svg",alt:"",className:"hidden h-full w-full rounded-md object-cover dark:block",fill:!0,priority:!0})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,a.jsx)(l.ModalTitle,{className:"text-xl font-semibold",children:b("importFromFigma")}),(0,a.jsxs)("form",{className:"flex w-full flex-col space-y-3",onSubmit:e=>{e.preventDefault(),f()},children:[(0,a.jsx)("div",{className:"text-left text-sm text-gray-900",children:(0,a.jsx)(l.ModalDescription,{children:b("importFigmaDescription")})}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(i.p,{ref:t,type:"url",size:"sm",placeholder:b("enterFigmaUrl"),className:(0,x.cn)("bg-subtle w-full",c&&"border-red-500"),value:s,onChange:e=>{r(e.target.value),c&&u(null)}}),(0,a.jsx)(p.N,{mode:"sync",children:c&&(0,a.jsx)(h.P.div,{initial:{height:0,opacity:0,y:-8},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-8},transition:{duration:.15,ease:"easeOut"},children:(0,a.jsxs)("span",{className:"flex items-center gap-2 whitespace-nowrap text-red-500",children:[(0,a.jsx)(d.V,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"truncate text-sm",children:c})]})})})]})]})]})]})}),(0,a.jsx)(l.ModalFooter,{className:"border-border bg-muted border-t !p-4",children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,a.jsx)(l.ModalClose,{asChild:!0,disabled:j,children:(0,a.jsx)(n.$,{onClick:v,size:"sm",variant:"secondary",disabled:j,children:b("cancel")})}),(0,a.jsx)(o.Q,{onClick:f,size:"sm",pending:j,autoFocus:!0,children:b("next")})]})})]})}function S(e){let{color:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded-md border p-1",children:[(0,a.jsx)("div",{className:"h-4 w-4 rounded-sm border",style:{backgroundColor:t.hex}}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:t.hex.toLowerCase()})})]})}function I(e){let{imageBase64:t,originalFigmaUrl:s,nodeContext:r,handleImport:i,handleClose:d,isLoading:p,imageHeight:h}=e,x=(0,g.k)("figmaIntegration");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"max-h-[calc(100vh-8rem)] overflow-y-auto",children:(0,a.jsx)(l.ModalHeader,{className:"flex w-full flex-col p-3 md:p-5",children:(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3 md:gap-4",children:[(0,a.jsx)(l.ModalTitle,{className:"text-left text-lg font-semibold md:text-xl",children:x("heresWhatWellImport")}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,a.jsx)("h3",{className:"text-left text-sm font-medium md:text-base",children:x("visualContext")}),h&&h/2>982&&(0,a.jsxs)(k.Fc,{children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)(k.TN,{children:x("heightWarning")})]}),(0,a.jsx)("div",{className:"bg-muted/50 relative h-[200px] w-full rounded-md border md:h-[400px]",children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.default,{src:t,alt:"Figma design preview",className:"rounded-md object-cover object-top",fill:!0,sizes:"100vw",priority:!0}),(0,a.jsx)("div",{className:"absolute bottom-2 right-2 z-10 md:bottom-3 md:right-3",children:(0,a.jsx)(N.N,{href:s,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),passHref:!0,children:(0,a.jsxs)(w.E,{className:"bg-muted hover:bg-muted/50 max-w-[200px] cursor-pointer truncate text-xs md:text-sm",variant:"secondary",children:[(0,a.jsx)(c.Y,{className:"h-3 w-3 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:r.frameName||x("openInFigma")})]})})})]})}),(0,a.jsx)("div",{className:"mt-3 flex flex-col space-y-3",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-6",children:[r.nodes.designTokens.length>0&&(0,a.jsxs)("div",{className:"mb-6 flex flex-1 flex-col gap-2 md:mb-0",children:[(0,a.jsx)("h3",{className:"text-left text-sm font-medium md:text-base",children:x("designTokens")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.nodes.designTokens.map((e,t)=>(0,a.jsx)(S,{color:e},e.hex||t))})]}),r.nodes.colors.length>0&&(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,a.jsx)("h3",{className:"text-left text-sm font-medium md:text-base",children:x("colors")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.nodes.colors.map((e,t)=>(0,a.jsx)(S,{color:e},e.hex||t))})]})]})})]})]})})}),(0,a.jsx)(l.ModalFooter,{className:"border-border bg-muted sticky bottom-0 border-t !p-3 md:!p-4",children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,a.jsx)(l.ModalClose,{asChild:!0,disabled:p,children:(0,a.jsx)(n.$,{onClick:d,size:"sm",variant:"secondary",disabled:p,children:x("cancel")})}),(0,a.jsx)(o.Q,{onClick:i,size:"sm",pending:p,autoFocus:!0,children:x("confirm")})]})})]})}function P(){var e;let{importFigmaModalOpen:t,setImportFigmaModalOpen:s}=L(),{setSignInWithFigmaModal:n}=(0,b.f)(),[i,o]=(0,r.useState)("url"),[c,d]=(0,r.useState)(null),[u,m]=r.useState(null),p=r.useRef(null),[h,g]=r.useState(""),[y,w]=r.useState(""),N=(0,j.q)(p),{fia:k}=(0,v.D)();(0,r.useEffect)(()=>{if((null==t?void 0:t.open)&&!N.isSignedIn){var e,a;s(null),n({figmaOauthUrl:"".concat(null!==(a=null===(e=N.userData)||void 0===e?void 0:e.figmaOauthUrl)&&void 0!==a?a:"","&from=import")})}},[N.isSignedIn,null==t?void 0:t.open,s,n,null===(e=N.userData)||void 0===e?void 0:e.figmaOauthUrl]);let S=()=>{s(null),m(null),g(""),o("url"),p.current&&(p.current.value="")},P=()=>{S(),(0,f.u)("FigmaModalClose")},R=async()=>{if(!h){let e="Please enter a Figma URL";m(e),(0,f.u)("FigmaUrlSubmit",{url:"",success:!1,error:e});return}try{k?await E(h):await z(h)}catch(e){(0,f.u)("FigmaUrlSubmit",{url:h,success:!1,error:e instanceof Error?e.message:"Unknown error"})}},E=async e=>{if("url"===i){if(N.isFigmaUrl(e))try{let[t,s]=await Promise.all([N.getNodeContext(e),N.handleFigmaUrl(e)]);s.success?(d(t),w(s.data.base64),m(null),o("context")):m(s.error||"Invalid Figma URL")}catch(e){m("Error loading Figma content")}else m("Please enter a valid Figma URL")}else(await N.handleFigmaUrl(e)).success&&(null==t?void 0:t.onImport)&&(P(),await t.onImport(e),(0,f.u)("FigmaUrlSubmit",{url:e,success:!0}))},z=async e=>{N.isFigmaUrl(e)?(await N.handleFigmaUrl(e)).success&&(null==t?void 0:t.onImport)?(P(),await t.onImport(e),(0,f.u)("FigmaUrlSubmit",{url:e,success:!0})):((0,f.u)("FigmaUrlSubmit",{url:e,success:!1,error:"Invalid Figma URL"}),m("Invalid Figma URL")):m("Please enter a valid Figma URL")};return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Modal,{onClose:P,onOpenChange:N.isLoading?void 0:S,open:!!t,className:(0,x.cn)("w-full",k?"url"===i?"max-w-xl":"md:!w-[800px]":"max-w-xl"),children:(0,a.jsx)("div",{className:"flex w-full flex-col",children:k&&c?"url"===i?(0,a.jsx)(C,{inputRef:p,inputValue:h,setInputValue:g,urlError:u,setUrlError:m,handleImport:R,handleClose:P,isLoading:N.isLoading}):(0,a.jsx)(I,{imageBase64:y,originalFigmaUrl:h,nodeContext:c,handleImport:R,handleClose:P,isLoading:N.isLoading,imageHeight:N.imageHeight}):(0,a.jsx)(C,{inputRef:p,inputValue:h,setInputValue:g,urlError:u,setUrlError:m,handleImport:R,handleClose:P,isLoading:N.isLoading})})}),(0,a.jsx)(b.default,{})]}):null}function L(){let{data:e,mutate:t}=(0,y.Ay)("useImportFromFigmaModal",null);return{importFigmaModalOpen:e,setImportFigmaModalOpen:t,figmaContext:null==e?void 0:e.figmaContext}}},52041:(e,t,s)=>{"use strict";s.d(t,{default:()=>m,f:()=>p});var a=s(54857),r=s(96541),l=s(3316),n=s(16617),i=s(80612),o=s(4423),c=s(71368),d=s(38651),u=s(73927);function m(){let e=(0,c.k)("figmaIntegration"),{figmaOauthUrl:t,setSignInWithFigmaModal:s}=p(),i=(0,u.usePathname)()+(0,u.useSearchParams)().toString(),m=(0,u.useRouter)();(0,r.useEffect)(()=>{t&&(0,d.u)("FigmaAuthModalOpen")},[t]);let h=e=>{(0,d.u)("FigmaAuthModalClose",{reason:e}),s(null)},x=async()=>{let e=await fetch("/chat/api/integrations/figma/get-oauth-url?returnPath=".concat(encodeURIComponent(i))).then(e=>e.json()).then(e=>e.url);m.push(e)};return t?(0,a.jsx)(l.Modal,{onOpenChange:e=>!e&&h("cancel"),open:!!t,children:(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(l.ModalHeader,{className:"flex justify-start p-5",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-4",children:[(0,a.jsx)("div",{className:"bg-muted border-border flex items-center gap-2 rounded-lg p-2",children:(0,a.jsx)("div",{className:"rounded-lg border bg-white p-2",children:(0,a.jsx)(o.Y,{className:"text-muted-foreground h-6 w-6"})})}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-1.5",children:[(0,a.jsx)(l.ModalTitle,{className:"text-xl font-semibold",children:e("signInWithFigma")}),(0,a.jsx)(l.ModalDescription,{className:"text-sm text-zinc-500",children:e("signInDescription")})]})]})}),(0,a.jsx)(l.ModalFooter,{className:"border-border bg-muted border-t !p-4",children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-end gap-4",children:[(0,a.jsx)(l.ModalClose,{asChild:!0,children:(0,a.jsx)(n.$,{onClick:()=>h("cancel"),size:"sm",variant:"secondary",children:e("cancel")})}),(0,a.jsx)(n.$,{onClick:x,size:"sm",variant:"default",autoFocus:!0,children:e("signIn")})]})})]})}):null}function p(){let{data:e,mutate:t}=(0,i.Ay)("signInWithFigmaModal",null);return{figmaOauthUrl:null==e?void 0:e.figmaOauthUrl,setSignInWithFigmaModal:t}}},31005:(e,t,s)=>{"use strict";s.d(t,{Cj:()=>N,pj:()=>S,pw:()=>C});var a=s(54857),r=s(94592),l=s(16617),n=s(98304),i=s(37622),o=s(90229),c=s(38658),d=s(46159),u=s(2015),m=s(42941),p=s(4423),h=s(48774),x=s(96541),f=s(60346),g=s(79160),v=s(60349),j=s(72380),b=s(87108),y=s(15419);let w=(0,j.default)(()=>Promise.all([s.e(7539),s.e(9199),s.e(7943)]).then(s.bind(s,57943)).then(e=>e.Table),{loadableGenerated:{webpack:()=>[57943]}});function N(e){let{attachments:t,className:s}=e,r=(0,x.useRef)(null);return(null==t?void 0:t.length)?(0,a.jsx)("div",{className:(0,i.cn)("flex w-full items-center gap-2 overflow-x-auto",s),ref:r,children:t.map(e=>(0,a.jsx)(C,{attachment:e},e.url))}):null}function k(e){let{mime:t}=e;return"text/csv"===t?(0,a.jsx)(m.i,{}):(0,a.jsx)(u.Z,{})}function C(e){var t,s;let{className:r,attachment:c,...u}=e,[m,v]=(0,x.useState)(0),[j,b]=(0,x.useState)(0),[y,w]=(0,x.useState)(!1),[N,C]=(0,x.useState)(null),{content:I,isLoading:P}=(0,n.k)(N),{user:R}=(0,f.J)(),{setShowSignInDialog:E}=(0,g.AO)(),z=(0,d.al)(),M=null===(t=c.contentType)||void 0===t?void 0:t.startsWith("image/"),F=L(c),A=c.name?(0,i.QY)(c.name,50):"",D=c.name?(0,i.QY)(c.name,20):"";"figma"===c.v0Type&&(D=D.split(".png")[0]),(0,x.useEffect)(()=>{I&&(0,x.startTransition)(()=>{w(!0)})},[I]);let T=(0,a.jsx)(k,{mime:c.contentType});!M&&P?T=(0,a.jsx)(o.y,{}):M&&(T=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.default,{alt:null!==(s=c.name)&&void 0!==s?s:"Image Preview",className:(0,i.cn)("border-alpha-400 aspect-square rounded-sm border object-cover","figma"===c.v0Type?"invisible":""),fill:!0,onLoad:e=>{let t=e.target,s=t.naturalWidth/t.naturalHeight,a=.8*window.innerWidth,r=.8*window.innerHeight,l=r*s,n=r;s>1&&(l=a,n=a/s),v(l),b(n)},src:c.url}),"figma"===c.v0Type?(0,a.jsx)(p.Y,{}):null]}));let U=(0,a.jsxs)(l.$,{className:(0,i.cn)("h-14 w-full basis-[210px] gap-2 py-2 pl-2 pr-3 text-left ",F||M?"hover:bg-gray-200 focus:bg-gray-200 focus-visible:bg-gray-200":"hover:bg-background focus:bg-background focus-visible:bg-background cursor-default",r),onClick:e=>R?F||M?void(I||(e.preventDefault(),C(c.url))):(e.preventDefault(),!1):(e.preventDefault(),E({prompt:!1,customMessage:"A Vercel account is required to view attachments"}),!1),title:c.name,tooltip:z?void 0:A,variant:"secondary",...u,children:[(0,a.jsx)("div",{className:"flex size-10 shrink-0 -translate-x-px items-center justify-center overflow-hidden rounded-sm bg-gray-100 text-gray-500 transition-colors",children:T}),(0,a.jsxs)("div",{className:"grid flex-1 -translate-x-px gap-1 py-0.5 text-sm leading-none text-gray-900 ",children:[(0,a.jsx)("div",{className:"overflow-hidden text-ellipsis font-medium",children:D}),(0,a.jsx)("div",{className:"line-clamp-1 aspect-auto font-normal text-gray-500",children:c.size?(0,i.v7)(c.size):c.contentType})]})]});return(0,a.jsx)(S,{setOpen:w,attachment:c,open:y,triggerButton:U,width:m,height:j,content:I})}function S(e){var t;let{attachment:s,open:r,setOpen:l,triggerButton:n,width:o,height:d,content:u}=e,m=null===(t=s.contentType)||void 0===t?void 0:t.startsWith("image/"),p=L(s),h=(0,x.useRef)(null),f=s.name?(0,i.QY)(s.name,50):"";return"figma"===s.v0Type&&(f=f.replace(".png","")),(0,a.jsxs)(c.lG,{onOpenChange:e=>{if(l(e),e){var t;null===(t=h.current)||void 0===t||t.focus()}},open:r,children:[n?(0,a.jsx)(c.zM,{asChild:!0,children:n}):null,(0,a.jsxs)(c.Cf,{className:(0,i.cn)("w-full max-w-[90vw] auto-rows-min gap-2 rounded-xl p-0 lg:max-w-4xl [&>button:last-child]:invisible",m?"aspect-[--aspect-ratio] h-[--height] max-h-[80vh] w-[--width] max-w-[90vw] border-none bg-transparent lg:w-auto":"w-full"),style:{"--width":"".concat(o,"px"),"--height":"".concat(d,"px"),"--aspect-ratio":"".concat(o/d)},children:[(0,a.jsx)(c.L3,{className:"sr-only",children:s.name}),(0,a.jsx)(c.rr,{className:"sr-only",children:s.name}),(0,a.jsx)("button",{className:"absolute -left-full",ref:h}),(0,a.jsx)(x.Suspense,{children:m?(0,a.jsx)(P,{attachment:s,caption:f,height:d,width:o}):u&&r&&p&&(0,a.jsx)(I,{attachment:s,content:u,onClose:()=>l(!1)})})]})]},s.url)}function I(e){let{attachment:t,onClose:s,content:l}=e;if("text/csv"===t.contentType)return(0,a.jsxs)("div",{className:"relative max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 pb-0 text-sm font-medium text-gray-600",children:[(0,a.jsx)("span",{children:t.name}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(b.C,{allowClose:!0,allowCopyCode:!0,allowDownloadCode:!0,caller:"inline",closeHandler:s,fileName:t.name,value:l,isTabbed:!1,allowDiffToggle:!1,originalCode:void 0,blockId:"attachment-preview-".concat(t.name)})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(w,{source:l})})]});{var n,i;let e=(0,v.SR)((null===(n=t.name)||void 0===n?void 0:n.split(".").pop())||(null===(i=t.contentType)||void 0===i?void 0:i.split("/")[1])||"plaintext");return(0,a.jsxs)("div",{className:"relative max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"absolute left-10 top-0 z-10 flex h-14 items-center text-sm font-medium text-gray-600",children:t.name}),(0,a.jsx)(r.N,{allowClose:!0,caller:"inline",className:"rounded-xl border-none [&>div:last-child]:!pt-0 [&_code]:!whitespace-pre",closeHandler:s,showQuickEditAnimation:!1,fileName:t.name,headerClassName:"h-14 border-none px-4 bg-background/70",language:e,showLineNumbers:!0,value:l,wrapLongLines:!0,originalCode:void 0,blockId:"attachment-preview-".concat(t.name),closed:!0})]})}}function P(e){var t;let{attachment:s,width:r,height:l,caption:n}=e;return r&&l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.default,{alt:null!==(t=s.name)&&void 0!==t?t:"Image Preview",className:"bg-alpha-950 rounded-lg object-contain",height:l,src:s.url,width:r}),(0,a.jsx)("div",{className:"line-clamp-1 max-w-3xl text-sm text-gray-500",children:n})]}):null}let L=e=>{var t,s;let a=new Set(["pdf","doc","docx","xls","xlsx"]),r=(null===(t=e.contentType)||void 0===t?void 0:t.split("/")[1])||"none",l=(null===(s=e.name)||void 0===s?void 0:s.split(".").pop())||"none";return"none"===r&&y.lg.includes(l)&&(r="plain"),!a.has(r)}},75990:(e,t,s)=>{"use strict";s.d(t,{UpgradePrompt:()=>F,g:()=>M});var a=s(54857),r=s(96541),l=s(16617),n=s(54143),i=s(7394),o=s.n(i),c=s(80612),d=s(71797),u=s(14834),m=s(37835),p=s(46119),h=s(4126),x=s(3316),f=s(43393),g=s(18173),v=s(27181),j=s(2259),b=s(67605);let y=(0,b.createServerReference)("7f708bc936000b193cf14e16c276ea3777f898d0d5",b.callServer,void 0,b.findSourceMapURL,"detectUserVercelUsage");var w=s(77170),N=s(77184),k=s(86287);let C=(0,b.createServerReference)("7f1c887018a494986443bef5bfbd666c3d840cb99c",b.callServer,void 0,b.findSourceMapURL,"updateTeamDetails");var S=s(15893),I=s(88950),P=s(77284),L=s(33100),R=s(73927),E=s(38651);let z={"v0-level0":{title:"For individuals:",bullets:["Access to v0.dev/chat","Up to five Projects"]},"v0-level3":{title:"For power users:",bullets:["Everything in Free","Higher messaging limits","Custom domains on published Blocks","Unlimited Projects","Import from Figma"]},"v0-team":{title:"For fast-moving teams:",bullets:["Everything in Premium","Even higher messaging limits","Centralized billing on Vercel"]},"v0-enterprise":{title:"For large companies:",bullets:["Everything in Team","SAML SSO","Dedicated Customer Support","Priority Access to v0","Opted-out of training by default"]}};function M(){let{data:e,mutate:t}=(0,c.Ay)("upgradePromptOpen",null,{fallbackData:!1});return{upgradePromptOpen:e,setUpgradePromptOpen:t}}function F(){let[e]=(0,p.dc)(),t=e&&e.remaining<=0,{activeScope:s,scopes:i,refreshScopes:c,isActiveScopeReady:h}=(0,f.k6)(),[g,v]=(0,r.useState)("plans"),[j,b]=(0,r.useState)(void 0),P=(0,r.useMemo)(()=>null==i?void 0:i.find(e=>e.id===j),[i,j]),[L,z]=(0,r.useState)(null==P?void 0:P.avatar),F=(0,r.useRef)(null),{setPaymentDialogOpen:D}=(0,u.C)(),{upgradePromptOpen:_,setUpgradePromptOpen:V}=M(),[B,$]=(0,r.useTransition)(),H=(0,R.useRouter)(),{planInfo:q,planSlug:W}=(0,n.N)(!0,null==s?void 0:s.id,!1),Y=(0,r.useMemo)(()=>{var e;return"v0-team"===W?null==q?void 0:null===(e=q.plans)||void 0===e?void 0:e.filter(e=>"v0-team"===e.slug||"v0-enterprise"===e.slug):null==q?void 0:q.plans},[W,q]),[Q,Z]=(0,r.useState)(),G=(0,r.useMemo)(()=>"plans"===g?t?"Message Limit Reached":"Upgrade Plan":"Confirm your Teams Details",[t,g]),J=(0,r.useMemo)(()=>{if("plans"===g){if(void 0===e)return(0,a.jsx)(m.E,{className:"h-4 w-full"});let s="";switch(Q){case"v0-level0":s=t?"You have reached the daily message limit on the v0 Free plan. Upgrade to a Premium plan for higher message limits.":"You're currently on the v0 Free plan.";break;case"v0-level3":s=t?"You have reached the daily message limit on the v0 Premium plan. Upgrade to a Team or Enterprise plan for higher message limits.":"You're currently on the v0 Premium plan.";break;case"v0-team":s=t?"You have reached the daily message limit on the v0 Team plan. Upgrade to an Enterprise plan for higher message limits.":"You're currently on the v0 Team plan."}return(0,a.jsx)(x.ModalDescription,{children:s})}if("team-details"===g)return"Edit your Teams avatar and name."},[e,Q,t,g]),K=(0,r.useCallback)(()=>{D(!0),V(!1)},[D,V]),X=(0,r.useCallback)(e=>{$(async()=>{if(!j)return;let t=e.get("team-name");if(!t){N.oR.error("Team name is required");return}let s=e.get("team-avatar"),a=await new Promise(e=>{let t=new FileReader;t.addEventListener("load",t=>{let{target:s}=t;(null==s?void 0:s.result)instanceof ArrayBuffer&&crypto.subtle.digest("SHA-1",s.result).then(t=>{e(function(e){let t=[],s=new DataView(e);for(let e=0;e<s.byteLength;e+=4){let a=s.getUint32(e).toString(16),r="00000000",l=(r+a).slice(-r.length);t.push(l)}return t.join("")}(t))}).catch(e=>console.error(e))}),t.readAsArrayBuffer(s)});!0===await C({teamId:j,name:t,avatar:s,avatarSha:a})?(c(),N.oR.success("Team details configured"),z(void 0),v("plans"),H.push("/chat/upgrade?teamId=".concat(j,"&premium=").concat("v0-level3"===W?"1":"0")),b(void 0),V(!1)):N.oR.error("Failed to update team details. Please try again.")})},[j,W,c,H,V]),ee=(0,r.useCallback)(()=>{if(Q&&(0,E.u)("ClickUpgradeModalButton",{targetPlan:Q}),"plans"===g&&("v0-level3"===Q&&K(),"v0-team"===Q&&$(async()=>{let e=await y();if("error"in e){let t=Error(e.error);(0,w.z)(t)||N.oR.error("Failed to start team plan. Please try again.")}else{let{type:t,recommendedTeamId:s}=e;s&&H.prefetch("/chat/upgrade?teamId=".concat(s,"&premium=").concat("v0-level3"===W?"1":"0")),"new"===t?(b(s),v("team-details")):(H.push("/chat/upgrade?teamId=".concat(s,"&premium=").concat("v0-level3"===W?"1":"0")),V(!1))}})),"team-details"===g){var e;null===(e=F.current)||void 0===e||e.requestSubmit()}},[g,K,W,H,Q,V]),et=(0,r.useCallback)(e=>{if(e.size>=1048576){N.oR.error("File size is too large. Please upload a file smaller than 1MB.");return}z(URL.createObjectURL(e))},[z]);return((0,r.useEffect)(()=>{Z(T(Y,W))},[Y,W]),Y&&h)?(0,a.jsxs)(x.Modal,{onOpenChange:V,open:_,children:[(0,a.jsxs)(x.ModalHeader,{children:[(0,a.jsx)(x.ModalTitle,{children:G}),J]}),(0,a.jsxs)(x.ModalContent,{className:"is-mobile:items-center flex flex-col gap-3","data-testid":"upgrade-modal-content",children:["plans"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A,{plans:Y,selectedPlan:Q,setSelectedPlan:e=>Z(e)}),(0,a.jsxs)("p",{className:"flex gap-1 text-center text-sm text-gray-500",children:["Compare plans and options on our",(0,a.jsxs)(o(),{className:"flex items-center gap-x-1 text-blue-600",href:"/pricing",onClick:()=>V(!1),children:["pricing page ",(0,a.jsx)(d.A,{className:"size-3"})]})]})]}),"team-details"===g&&(0,a.jsxs)("form",{action:X,className:"flex flex-col gap-6",ref:F,children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[L?(0,a.jsx)(I.Avatar,{rounded:!0,className:"size-20",children:(0,a.jsx)(I.AvatarImage,{alt:"Uploaded team avatar",className:"aspect-auto",src:L,title:"Uploaded team avatar"})},"uploaded-avatar-image"):(0,a.jsx)(I.AvatarUser,{rounded:!0,className:"size-20",teamId:null==P?void 0:P.id}),(0,a.jsx)(O,{uploading:B,onChange:et})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(S.Label,{htmlFor:"team-name",children:"Team Name"}),(0,a.jsx)(k.p,{id:"team-name",name:"team-name",required:!0,maxLength:256,minLength:1})]})]})]}),(0,a.jsxs)(x.ModalFooter,{className:"border-border bg-muted border-t !p-4",children:[(0,a.jsx)(l.$,{onClick:()=>{"team-details"===g?v("plans"):V(!1)},size:"sm",type:"button",variant:"secondary",children:"team-details"===g?"Back":"Cancel"}),(0,a.jsx)(U,{currentStep:g,isPending:B,onClick:ee,selectedPlan:Q,currentPlan:W})]})]}):null}let A=e=>{let{plans:t,selectedPlan:s,setSelectedPlan:r}=e;return(0,a.jsxs)(g.Tabs,{className:"flex w-full flex-col gap-4",onValueChange:r,value:s,children:[(0,a.jsx)(g.TabsList,{className:"grid-cols-".concat(null==t?void 0:t.length," grid h-fit"),children:null==t?void 0:t.map(e=>(0,a.jsx)(g.TabsTrigger,{value:e.slug,children:e.name},e.slug))}),null==t?void 0:t.map(e=>(0,a.jsx)(g.a,{value:e.slug,children:(0,a.jsxs)("div",{className:"bg-muted border-alpha-200 flex h-72 flex-col gap-4 rounded-sm border p-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"text-base font-semibold",children:e.name}),(0,a.jsx)(D,{plan:e})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("p",{className:"font-semibold",children:z[e.slug].title}),(0,a.jsx)("ul",{className:"flex flex-col gap-3",children:z[e.slug].bullets.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.J,{size:20}),e]},e))})]})]})},e.slug))]})},D=e=>{let{plan:t}=e,s="v0-enterprise"===t.slug,r=s?void 0:(0,v.m9)(t);return s?null:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-xl font-semibold",children:r}),(0,a.jsx)("span",{className:"align-text-bottom text-sm leading-7 text-gray-500",children:s?void 0:"/user/month"})]})},T=(e,t)=>{if(!e||!t)return;let s=e.find(e=>e.slug===t),a=s?e.indexOf(s):0,r=e[a+1];return r?r.slug:void 0},U=e=>{let{currentPlan:t,isPending:s,selectedPlan:r,onClick:n,currentStep:i}=e,c=(0,L.f)();return r?r===t?(0,a.jsx)(l.$,{disabled:!0,size:"sm",children:"Current Plan"}):"v0-level0"===r?(0,a.jsx)(l.$,{className:"w-full md:w-auto",size:"sm",onClick:()=>(0,E.u)("ClickDowngradeModalButton",{targetPlan:"v0-level0"}),asChild:!0,type:"button",variant:"secondary",children:(0,a.jsx)(o(),{href:"/subscription?from=chat",children:"Downgrade Plan"})}):"v0-enterprise"===r?(0,a.jsx)(l.$,{onClick:()=>(0,E.u)("ClickUpgradeModalButton",{targetPlan:"v0-enterprise"}),className:"w-full md:w-auto",size:"sm",asChild:!0,type:"button",children:(0,a.jsx)(o(),{href:h.zz,children:"Contact Sales"})}):"v0-team"===r?(0,a.jsx)(l.$,{className:"w-full md:w-auto",disabled:s,onClick:n,size:"sm",type:"button",children:"plans"===i?"Upgrade to a ".concat(c[r].label," Plan"):"Continue to Payment"}):(0,a.jsxs)(l.$,{disabled:t===r,onClick:n,size:"sm",children:["Upgrade to a ",c[r].label," Plan"]}):null},O=e=>{let{uploading:t,onChange:s}=e;return(0,a.jsx)(l.$,{asChild:!0,size:"sm",variant:"secondary",children:(0,a.jsxs)("label",{"data-id":"team-avatar-upload",htmlFor:"team-avatar",children:[(0,a.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:t,id:"team-avatar",name:"team-avatar",onChange:e=>{var t;e.preventDefault();let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&s(a)},accept:"image/png,image/jpeg",type:"file"}),(0,a.jsx)(P.b,{}),"Upload Photo"]})})}},33100:(e,t,s)=>{"use strict";s.d(t,{U:()=>i,f:()=>n});var a=s(54857),r=s(71368),l=s(62457);function n(){let e=(0,r.k)("billingPlans");return{"v0-level0":{color:"text-gray-500",label:e("planName","Free")},"v0-level3":{color:"text-teal-700",label:e("planName","Premium")},"v0-team":{color:"text-blue-700",label:e("planName","Team")},"v0-enterprise":{color:"text-purple-700",label:e("planName","Enterprise")}}}function i(e){let{type:t}=e,s=n()[t];return(0,a.jsx)("span",{className:(0,l.cn)("text-[13px] font-medium leading-[16px]",s.color),children:s.label})}},26631:(e,t,s)=>{"use strict";s.d(t,{NewProjectButton:()=>j});var a=s(54857),r=s(16617),l=s(37622),n=s(7394),i=s.n(n),o=s(95537),c=s(59179),d=s(71368),u=s(54143),m=s(37835),p=s(43393),h=s(50513),x=s(4126),f=s(74149),g=s(96541),v=s(10373);function j(e){let{variant:t,onAfterClick:s,className:n,numProjects:j,quickCreate:b=!1,projectName:y,onSuccess:w,...N}=e,{setUpgradePromptOpen:k}=(0,c.gU)(),C=(0,d.k)("project.createDialog"),{activeScope:S}=(0,p.k6)(),{planSlug:I}=(0,u.N)(!0,null==S?void 0:S.id),[P,L]=(0,g.useState)(!1),R=I&&("v0-level0"!==I||j<x.AB),{setShowQuickProjectCreateDialog:E}=(0,h.A)(),{activeScopeSlug:z}=(0,p.k6)(),M=(0,g.useCallback)(async()=>{if(y){L(!0);try{await (0,f.g)({projectName:y,activeScopeSlug:z,onSuccess:w})}finally{L(!1)}}},[y,z,w]);return R||void 0!==I?R?b&&y?(0,a.jsx)(v.Q,{className:(0,l.cn)(n),pending:P,onClick:M,size:"sm",variant:t,...N,children:C("newProjectButton")}):b?(0,a.jsx)(r.$,{className:(0,l.cn)(n),onClick:()=>{E(!0)},size:"sm",variant:t,...N,children:C("newProjectButton")}):(0,a.jsx)(r.$,{className:(0,l.cn)(n),size:"sm",variant:t,...N,asChild:!0,children:(0,a.jsx)(i(),{className:(0,l.cn)(n),href:"/chat/projects/new",onClick:s,children:C("newProjectButton")})}):(0,a.jsxs)(r.$,{className:(0,l.cn)(n),"data-testid":"new-project-upgrade-button",onClick:()=>{k(!0),null==s||s()},size:"sm",type:"button",children:[(0,a.jsx)(o.l,{}),C("upgradePlan")]}):(0,a.jsx)(m.E,{className:(0,l.cn)("h-8 w-32",n)})}},82133:(e,t,s)=>{"use strict";s.d(t,{o:()=>S});var a=s(54857),r=s(96541),l=s(43706),n=s(81555),i=s(16617),o=s(26631),c=s(81811),d=s(66794),u=s(90916),m=s(68572),p=s(64993),h=s(98892),x=s(37622),f=s(3316),g=s(95360),v=s(38651),j=s(71368),b=s(24196),y=s(46159),w=s(67401),N=s(96118),k=s(65002);function C(e){let{onClose:t,quickCreate:s=!1}=e,r=(0,j.k)("project.dropdown");return(0,a.jsx)("div",{className:"flex h-full items-center justify-center p-1 sm:p-2",children:(0,a.jsx)(h.Sv,{className:"bg-muted w-full rounded-md border border-gray-200 p-2",children:(0,a.jsxs)(h.HY,{className:"flex flex-col items-center space-y-4 p-4",children:[(0,a.jsxs)("span",{className:"flex flex-col items-center justify-between space-y-4",children:[(0,a.jsx)(h.Ft,{className:"bg-background mx-auto text-gray-400",children:(0,a.jsx)(u.z,{})}),(0,a.jsxs)("span",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)(h.cz,{children:r("noProjects")}),(0,a.jsx)(h.Ou,{className:"text-balance text-center text-gray-400",children:r("createProject")})]})]}),(0,a.jsx)(o.NewProjectButton,{onAfterClick:t,numProjects:0,quickCreate:s})]})})})}function S(e){let{projectName:t,disabled:s,onLoggedOutClick:u,modalClassName:h,triggerButton:S,handleProjectSelect:I,variant:P,className:L,quickCreate:R=!1,onSuccess:E}=e,{projects:z,selectedProjectId:M,setSelectedProjectId:F}=(0,g._t)(),[A,D]=(0,r.useState)(!1),[T,U]=(0,r.useState)(!1),O=(0,y.al)(),_=(0,j.k)("project"),[V,B]=(0,r.useState)("list"),$=()=>{D(!1),U(!1)},H=e=>{F((null==e?void 0:e.projectId)||null),$(),(0,v.u)("SelectProject",{projectId:(null==e?void 0:e.projectId)||null}),null==I||I(e?{projectId:e.projectId,name:e.name,settings:{icon:e.icon||void 0,color:e.color||void 0},vercelProjectId:e.vercelProjectId,creatorId:e.creatorId}:null)},q=M&&z.find(e=>e.projectId===M),W=S||(0,a.jsx)(i.$,{"aria-label":"Select project",className:(0,x.cn)("flex h-7 min-w-20 max-w-[200px] justify-start pl-1.5 transition-colors has-[>svg]:pr-3",{"border-dashed text-gray-500":!q}),disabled:s,size:"sm",variant:"secondary",children:q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.n,{name:(0,N.KI)(q.icon)}),(0,a.jsx)("span",{className:"truncate",children:q.name})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.F,{className:"size-4 shrink-0"}),(0,a.jsx)("span",{children:_("project")})]})}),Y=(0,r.useMemo)(()=>(0,k.n)(z,(e,t)=>e.projectId===M?-1:t.projectId===M?1:0),[z,M]),Q=(0,a.jsxs)("div",{className:"p-1",children:[(0,a.jsx)("div",{className:"max-h-[400px] space-y-2 overflow-y-auto text-left",children:Y.map(e=>(0,a.jsxs)("button",{className:"flex w-full items-center justify-between rounded-md px-2 py-2.5 hover:bg-gray-100",onClick:()=>H(M===e.projectId?null:e),children:[(0,a.jsxs)("span",{className:"flex min-w-0 flex-1 items-center",children:[(0,a.jsx)("div",{className:"[&>svg]:size-4",children:(0,a.jsx)(b.n,{name:(0,N.KI)(e.icon)})}),(0,a.jsx)("span",{className:"ml-2 max-w-[200px] truncate",children:e.name})]}),M===e.projectId?(0,a.jsxs)("span",{className:"flex shrink-0 items-center text-gray-500",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 group-hover:hidden"}),(0,a.jsx)("span",{className:"hidden group-hover:inline",children:_("dropdown.unselect")})]}):(0,a.jsx)("span",{className:"hidden shrink-0 text-gray-500 group-hover:inline",children:_("dropdown.select")})]},e.projectId))}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.NewProjectButton,{className:"w-full",onAfterClick:$,size:"sm",variant:"secondary",numProjects:z.length,quickCreate:R,projectName:t,onSuccess:e=>{null==E||E(e),$()}})})]}),Z=0===z.length?(0,a.jsx)(C,{onClose:$,quickCreate:R}):Q,G=(0,a.jsx)(l.SQ,{align:"start",className:(0,x.cn)("w-[350px]"),side:"bottom",sideOffset:4,children:0===z.length?(0,a.jsx)(C,{onClose:$,quickCreate:R}):(0,a.jsxs)(a.Fragment,{children:["show"===P?(0,a.jsx)(l.I,{className:"-mb-2",children:(0,a.jsxs)(l._2,{onClick:e=>{e.preventDefault(),B("show")},className:"flex w-full items-center justify-start gap-2 p-2 text-xs text-gray-500 hover:underline",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(d.J,{className:"size-3"})}),(0,a.jsx)("span",{children:"Back"})]})}):null,(0,a.jsx)(l.I,{className:(0,x.cn)("max-h-[225px] overflow-y-auto"),children:(0,k.n)(z,(e,t)=>(e.projectId===M?-1:0)-(t.projectId===M?-1:0)).map(e=>(0,a.jsxs)(l._2,{className:"group pl-2 pr-3",onClick:()=>H(M===e.projectId?null:e),children:[(0,a.jsxs)("span",{className:"flex w-full max-w-[200px] items-center",children:[(0,a.jsx)(b.n,{name:(0,N.KI)(e.icon)}),(0,a.jsx)("span",{className:"ml-3 min-w-0 flex-1",children:(0,a.jsx)("span",{className:"block truncate","data-testid":"project-option",children:e.name})})]}),M===e.projectId?(0,a.jsxs)("span",{className:"ml-auto flex shrink-0 items-center text-gray-500",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 group-hover:hidden"}),(0,a.jsx)("span",{className:"hidden group-hover:inline",children:_("dropdown.unselect")})]}):(0,a.jsx)("span",{className:"ml-auto hidden shrink-0 text-gray-500 group-hover:inline",children:_("dropdown.select")})]},e.projectId))}),(0,a.jsx)(l.mB,{}),(0,a.jsx)(l.I,{className:"bg-muted",children:(0,a.jsx)(o.NewProjectButton,{onAfterClick:$,size:"sm",variant:"secondary",className:"w-full",numProjects:z.length,quickCreate:R,projectName:t,onSuccess:e=>{null==E||E(e),$()}})})]})}),J=(0,a.jsx)(l.SQ,{align:"start",side:"bottom",sideOffset:4,children:(0,a.jsxs)(l.I,{children:[(0,a.jsx)(l._2,{asChild:!0,children:(0,a.jsxs)(w.N,{href:"/chat/projects/".concat(M),children:[(0,a.jsx)(m.B,{}),(0,a.jsx)("span",{children:_("viewProject")})]})}),(0,a.jsxs)(l._2,{onClick:e=>{e.preventDefault(),B("list")},children:[(0,a.jsx)(c.f,{}),(0,a.jsx)("span",{children:_("switchProject")})]})]})});return u?(0,a.jsx)("div",{onClick:u,children:W}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,x.cn)("w-full min-w-0 md:hidden",L),children:(0,a.jsx)(f.Modal,{onOpenChange:D,open:A&&O,trigger:W,className:h,children:(0,a.jsx)(f.ModalContent,{className:(0,x.cn)("max-h-[80vh]",{"overflow-y-auto":z.length>0}),children:Z})})}),(0,a.jsx)("div",{className:(0,x.cn)("hidden w-full min-w-0 md:block",L),children:(0,a.jsxs)(l.rI,{onOpenChange:e=>{P&&e&&B("show"),U(e)},open:T&&!O,children:[(0,a.jsx)(l.ty,{asChild:!0,className:"max-w-[200px]",children:W}),"show"===V&&"show"===P?J:G]})})]})}},50513:(e,t,s)=>{"use strict";s.d(t,{A:()=>p,W:()=>h});var a=s(54857),r=s(80612),l=s(16617),n=s(96541),i=s(71368),o=s(55156),c=s(65881),d=s(43393),u=s(3316),m=s(74149);function p(){let{data:e,mutate:t}=(0,r.Ay)("showQuickProjectCreateDialog",null,{fallbackData:!1});return{showQuickProjectCreateDialog:e,setShowQuickProjectCreateDialog:t}}function h(e){let{description:t,chatId:s,onSuccess:r}=e,{activeScopeSlug:h}=(0,d.k6)(),[x,f]=(0,n.useState)({}),[g,v]=(0,n.useState)(""),{showQuickProjectCreateDialog:j,setShowQuickProjectCreateDialog:b}=p(),[y,w]=(0,n.useState)(!1),N=(0,i.k)("quickProjectCreateDialog"),k=(0,n.useCallback)(async e=>{e.preventDefault(),f({}),w(!0);try{let e=await (0,m.g)({projectName:g,activeScopeSlug:h,chatId:s,onSuccess:e=>{null==r||r(e),b(!1),v("")}});e.errors&&f(e.errors)}catch(e){console.error("Failed to create project:",e),f({name:["An unexpected error occurred. Please try again."]})}finally{w(!1)}},[g,h,s,r,b]);return(0,a.jsxs)(u.Modal,{onOpenChange:b,open:j,responsive:!1,children:[(0,a.jsxs)(u.ModalHeader,{children:[(0,a.jsx)(u.ModalTitle,{children:N("title")}),t&&(0,a.jsx)(u.ModalDescription,{children:t})]}),(0,a.jsx)(u.ModalContent,{children:(0,a.jsx)("form",{className:"flex flex-col gap-6",onSubmit:k,children:(0,a.jsx)(c.t,{name:g,onChange:e=>v(e.target.value),errors:x,placeholder:N("inputPlaceholder"),disabled:y})})}),(0,a.jsxs)(u.ModalFooter,{children:[(0,a.jsx)(u.ModalClose,{asChild:!0,children:(0,a.jsx)(l.$,{size:"sm",variant:"secondary",children:N("cancel")})}),(0,a.jsx)(l.$,{"data-testid":"confirm-delete-message",disabled:y,onClick:k,size:"sm",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.IconSpinner,{className:"size-4"}),N("creating")]}):N("create")})]})]})}},85903:(e,t,s)=>{"use strict";s.d(t,{Dm:()=>Q,oL:()=>H,f8:()=>X,e$:()=>Z,VercelProjectSelector:()=>K,VercelProjectSelectorSkeleton:()=>Y,default:()=>W,iC:()=>q});var a=s(54857),r=s(48393),l=s(54670),n=s(81555),i=s(33249),o=s(48886),c=s(19033),d=s(55315),u=function(e){return e.Plain="plain",e.Secret="secret",e.System="system",e.Encrypted="encrypted",e.Sensitive="sensitive",e}({}),m=s(16617),p=s(96541),h=s(16099),x=s(60885),f=s(80624),g=s(18441),v=s(73927),j=s(67160),b=s(28192),y=s(43393),w=s(3316),N=s(58678),k=s(7394),C=s.n(k),S=s(98892),I=s(37622),P=s(67665),L=s(43706),R=s(86287),E=s(29343),z=s(46948),M=s(97682),F=s(67605);let A=(0,F.createServerReference)("70d625a1484d87510f5a171e9bf55be7a447737d23",F.callServer,void 0,F.findSourceMapURL,"createNewVercelProject");var D=s(77184),T=s(81641),U=s(10373),O=s(60346),_=s(80612),V=s(53317),B=s(11380),$=s(37835);function H(e){let{envVar:t}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Key"}),(0,a.jsx)("p",{className:"text-muted-foreground break-all",children:null==t?void 0:t.key})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Value"}),(0,a.jsx)("p",{className:"text-muted-foreground break-all",children:(null==t?void 0:t.type)===u.Encrypted?t.decrypted?t.value:"*** Encrypted ***":null==t?void 0:t.value})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Targets"}),(0,a.jsx)("p",{className:"text-muted-foreground break-words",children:Array.isArray(null==t?void 0:t.target)?t.target.join(", "):null==t?void 0:t.target})]}),(null==t?void 0:t.comment)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Comment"}),(0,a.jsx)("p",{className:"text-muted-foreground break-words",children:t.comment})]})]})}function q(e,t){var s,a;let{activeScopeSlug:r}=(0,y.k6)(),{data:l,mutate:n,error:i,isLoading:o}=(0,_.Ay)(r?"/chat/api/projects/env-vars?projectId=".concat(e,"&scopeSlug=").concat(r):"/chat/api/projects/env-vars?projectId=".concat(e),V.GO,t?{fallbackData:{vercelProject:t.vercelProject,envVars:t.envVars}}:void 0);return{vercelProject:null!==(s=null==l?void 0:l.vercelProject)&&void 0!==s?s:null,envVars:null!==(a=null==l?void 0:l.envVars)&&void 0!==a?a:{},isLoading:o,isError:i,refetchEnvVars:n}}function W(e){let{vercelProjectId:t,username:s,readOnly:l,teamSlug:n,initialData:i,v0ProjectId:o}=e,[c,u]=(0,p.useState)(null),[f,g]=(0,p.useState)(!1),[v,j]=(0,p.useState)(!1),{envVars:b,vercelProject:N}=q(t,i),k=null==N?void 0:N.name,{refetchEnvVars:L}=q(t),{activeScopeSlug:R}=(0,y.k6)(),E=Object.values(b),z=E.length>5,M=t&&k?{id:t,name:k,url:"https://vercel.com/".concat(null!=n?n:s,"/").concat(k)}:void 0,F=null==M?void 0:M.url,A=async()=>{if(j(!0),!(null==c?void 0:c.id))return;let e=await (0,B.b)({envVarId:c.id,v0ProjectId:o,vercelProjectId:t,scopeSlug:R});e.success||(D.oR.error("Failed to delete environment variable"),console.error(e.error)),L(),j(!1),g(!1)},T=(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"space-y-2 pt-2",children:E.slice(0,5).map(e=>(0,a.jsxs)("div",{className:(0,I.cn)("odd:bg-muted flex w-full items-center justify-between gap-6 rounded-lg p-3"),children:[(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start gap-1",children:[(0,a.jsx)("span",{className:"max-w-[200px] truncate font-mono text-sm font-medium uppercase sm:max-w-[300px]",children:e.key}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:Array.isArray(e.target)?e.target.map(e=>(0,P.De)(e)).join(", "):(0,P.De)(e.target)})]}),(0,a.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-6 w-6",onClick:()=>{g(!0),u(e)},children:(0,a.jsx)(h.a,{className:"h-4 w-4"})}),(0,a.jsxs)(w.Modal,{open:f,onOpenChange:g,children:[(0,a.jsx)(w.ModalHeader,{children:(0,a.jsxs)(w.ModalTitle,{className:"flex items-center gap-2",children:["Environment Variable Details",(0,a.jsx)(r.A,{className:"text-muted-foreground h-4 w-4"})]})}),(0,a.jsx)(w.ModalContent,{children:(0,a.jsx)(H,{envVar:c})}),(0,a.jsx)(w.ModalFooter,{className:"border-border bg-muted flex border-t !p-4",children:(0,a.jsx)(U.Q,{size:"sm",pending:v,variant:"destructive",onClick:A,disabled:l,tooltip:l?"You don't have permission to modify this project":void 0,children:"Delete"})})]})]},e.id))}),(0,a.jsxs)("div",{className:"mt-4 flex flex-row items-center justify-center gap-2",children:[(0,a.jsx)(m.$,{size:"sm",asChild:!0,variant:"secondary",disabled:l,className:"w-full shrink",tooltip:l?"You don't have permission to modify this project":void 0,children:(0,a.jsx)("a",{href:"".concat(F,"/settings/environment-variables"),target:"_blank",rel:"noopener noreferrer",children:"Manage Environment Variables"})}),z&&(0,a.jsx)(m.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(C(),{href:"".concat(F,"/settings/environment-variables"),target:"_blank",rel:"noopener noreferrer",children:["View All",(0,a.jsx)(x.Q,{})]})})]})]}),O=(0,a.jsxs)(S.HY,{className:"bg-muted rounded-md p-4 pt-7 text-center",children:[(0,a.jsx)(S.cz,{className:"text-sm",children:"No Variables Added"}),(0,a.jsx)(S.Ou,{className:"max-w-[70%]",children:"Add environment variables to store sensitive information like API keys and credentials."}),(0,a.jsx)(m.$,{size:"sm",asChild:!0,variant:"secondary",disabled:l,tooltip:l?"You don't have permission to modify this project":void 0,children:(0,a.jsx)("a",{href:"".concat(F,"/settings/environment-variables"),target:"_blank",rel:"noopener noreferrer",children:"Modify Environment Variables"})})]});return(0,a.jsx)(d.Wu,{className:"p-0",children:E.length>0?T:O})}function Y(e){let{hasVercelProject:t}=e;return(0,a.jsx)(K,{v0ProjectId:"",currentProject:t?{id:"",name:"",url:"https://vercel.com",env:[]}:void 0,projects:[],readOnly:!0})}function Q(e){let{v0ProjectId:t,onClose:s,open:r,onProjectCreated:l}=e,[n,i]=(0,p.useState)(""),{activeScopeSlug:o}=(0,y.k6)(),c=(0,v.useRouter)();return t?(0,a.jsx)(w.Modal,{onOpenChange:s,open:r,children:(0,a.jsxs)("form",{action:async()=>{try{let e=await A(t,n,o);if(!e.id){D.oR.error("Failed to create project");return}await (0,j.t)({v0ProjectId:t,vercelProjectId:e.id,scopeSlug:o}),l({id:e.id,name:n,url:"https://vercel.com/".concat(o,"/").concat(n),env:[]}),D.oR.success("Project created and linked successfully"),c.refresh()}catch(e){D.oR.error("Failed to create project")}s()},children:[(0,a.jsx)(w.ModalHeader,{children:(0,a.jsx)(w.ModalTitle,{children:"Create New Vercel Project"})}),(0,a.jsx)(w.ModalContent,{children:(0,a.jsx)(R.p,{autoFocus:!0,onChange:e=>i(e.target.value),placeholder:"Project Name",required:!0,value:n})}),(0,a.jsxs)(w.ModalFooter,{children:[(0,a.jsx)(w.ModalClose,{asChild:!0,children:(0,a.jsx)(m.$,{onClick:s,size:"sm",variant:"secondary",children:"Cancel"})}),(0,a.jsx)(T.Q,{size:"sm",variant:"default",children:"Create"})]})]})}):null}function Z(e){let{filteredProjects:t,searchQuery:s,setSearchQuery:r,isLoading:o,selectedProject:c,handleLinkProject:d,setShowCreateModal:u,onCreateModalOpen:p}=e,{user:h}=(0,O.J)(),x=(null==h?void 0:h.v0plan)==="v0-enterprise";return(0,a.jsxs)("div",{className:"flex size-full flex-col",children:[!x&&(0,a.jsxs)("div",{className:"border-border flex w-full items-center border-b py-1.5 pl-4 pr-3.5",children:[(0,a.jsx)("span",{className:"text-gray-500",children:(0,a.jsx)(g.e,{})}),(0,a.jsx)(R.p,{className:"flex-1 border-none bg-inherit",onChange:e=>r(e.target.value),placeholder:"Search projects...",value:s}),(0,a.jsx)(z.N,{mode:"wait",children:s&&(0,a.jsx)(M.P.button,{animate:{opacity:1},className:"sp-1 text-gray-500 hover:text-gray-700 focus:outline-none",exit:{opacity:0},initial:{opacity:0},onClick:()=>r(""),children:(0,a.jsx)(E.A,{size:16})})})]}),!x&&(0,a.jsx)("div",{className:"relative flex max-h-[225px] min-h-[225px] flex-1 flex-col overflow-y-auto p-2",onWheel:e=>{e.stopPropagation()},onTouchMove:e=>{e.stopPropagation()},children:(0,a.jsx)(z.N,{children:o?(0,a.jsx)(J,{}):0===t.length?(0,a.jsx)(G,{title:"No Projects Found"}):t.map(e=>(0,a.jsxs)(L._2,{className:(0,I.cn)("group flex items-center justify-between md:px-2","w-full rounded-md p-2 hover:bg-gray-100 md:w-auto"),onClick:()=>d((null==c?void 0:c.id)===e.id?null:e),children:[(0,a.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,a.jsx)(l.A,{className:"size-4"}),(0,a.jsx)("span",{className:"max-w-[200px] truncate",children:e.name})]}),(null==c?void 0:c.id)===e.id?(0,a.jsxs)("span",{className:"flex shrink-0 items-center text-gray-500",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 group-hover:hidden"}),(0,a.jsx)("span",{className:"hidden group-hover:inline",children:"Unlink"})]}):(0,a.jsx)("span",{className:"hidden shrink-0 font-medium text-gray-500 group-hover:inline",children:"Link"})]},e.id))})}),x&&(0,a.jsx)("div",{className:"flex flex-col gap-2 p-4 text-center text-sm",children:(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"Enterprise customers can't connect existing Vercel projects at the moment."})}),(0,a.jsx)("div",{className:"sticky bottom-0 w-full border-t p-1.5",children:(0,a.jsxs)(m.$,{onClick:()=>{u(!0),null==p||p()},className:"w-full gap-0.5",variant:"secondary",children:[(0,a.jsx)(i.A,{className:"size-4 shrink-0"}),(0,a.jsx)("span",{className:"px-1.5",children:"New Project"})]})})]})}function G(e){let{title:t}=e;return(0,a.jsx)(S.Sv,{className:"bg-muted flex-1 rounded-lg",children:(0,a.jsx)(S.HY,{children:(0,a.jsx)(S.cz,{className:"text-sm text-gray-500",children:t})})})}function J(){return(0,a.jsx)(a.Fragment,{children:Array.from({length:10}).map((e,t)=>(0,a.jsx)(L._2,{className:(0,I.cn)("group flex items-center justify-between md:px-2","w-full rounded-md p-2 hover:bg-gray-100 md:w-auto"),disabled:!0,children:(0,a.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,a.jsx)(l.A,{className:"size-4"}),(0,a.jsx)($.E,{className:"h-4 w-full"})]})},t))})}function K(e){let{v0ProjectId:t,currentProject:s,projects:r,readOnly:l,size:n="default"}=e,{activeScopeSlug:i}=(0,y.k6)(),[d,u]=(0,p.useState)(s),[x,g]=(0,p.useState)(""),[w,N]=(0,p.useState)(!1),[k,C]=(0,p.useState)(!1),[S,I]=(0,p.useState)(!1),P=(0,v.useRouter)(),R=async e=>{if(!l){if(!e)return E();N(!0);try{let s=await (0,j.t)({v0ProjectId:t,vercelProjectId:e.id,scopeSlug:i});"error"in s||!s.success||(u(e),D.oR.success("Project linked successfully"))}catch(e){D.oR.error("Failed to link project. Please try again.")}finally{C(!1),N(!1),P.refresh()}}},E=async()=>{if(!l){N(!0),u(void 0);try{let e=await (0,b.y)({v0ProjectId:t,scopeSlug:i});"error"in e||!e.success?(u(s),D.oR.error("Failed to unlink project. Please try again.")):D.oR.success("Project unlinked successfully")}catch(e){u(s),D.oR.error("Failed to unlink project. Please try again.")}finally{C(!1),N(!1),P.refresh()}}},z=r.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())),M=d?(0,a.jsx)("div",{className:"rounded-lg p-2 text-sm sm:p-0",children:(0,a.jsx)("div",{className:"bg-muted flex flex-col rounded-lg text-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:d.name}),(0,a.jsxs)("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground flex items-center gap-1 text-sm hover:underline",children:["View on Vercel",(0,a.jsx)(f.F,{className:"size-4"})]})]}),(0,a.jsxs)(L.rI,{children:[(0,a.jsx)(L.ty,{asChild:!0,children:(0,a.jsxs)(m.$,{className:"relative size-8",size:"sm",variant:"ghost",disabled:l,tooltip:l?"You don't have permission to modify this project":void 0,children:[(0,a.jsx)(h.a,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open project actions"})]})}),(0,a.jsx)(L.SQ,{align:"end",side:"bottom",sideOffset:8,children:(0,a.jsxs)(L.I,{children:[(0,a.jsx)(L._2,{asChild:!0,children:(0,a.jsxs)("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("span",{children:"View on Vercel"})]})}),(0,a.jsxs)(L._2,{variant:"destructive",onClick:E,disabled:l,children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("span",{children:"Unlink Vercel Project"})]})]})})]})]})})}):(0,a.jsx)("div",{className:"p-2 md:p-0",children:(0,a.jsx)(m.$,{className:"w-full","aria-label":"Add a Vercel Project",variant:"outline",disabled:w||l,size:n,children:(0,a.jsx)("span",{children:"Add Vercel Project"})})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{v0ProjectId:t,onClose:()=>I(!1),open:S,onProjectCreated:e=>{u(e),C(!1)}}),(0,a.jsx)("div",{className:"w-full min-w-0",children:d?M:l?M:(0,a.jsxs)(L.rI,{onOpenChange:C,open:k,children:[(0,a.jsx)(L.ty,{asChild:!0,children:M}),(0,a.jsx)(L.SQ,{align:"center",className:"w-[400px]",side:"bottom",children:(0,a.jsx)(Z,{filteredProjects:z,searchQuery:x,setSearchQuery:g,isLoading:w,selectedProject:d,handleLinkProject:R,setShowCreateModal:I,onCreateModalOpen:()=>C(!1)})})]})})]})}function X(e){let{v0ProjectId:t,readOnly:s,size:r="sm"}=e,{projects:l,isReady:n}=(0,N.D)();return n?(0,a.jsx)(K,{v0ProjectId:t,currentProject:void 0,projects:l||[],readOnly:s,size:r}):(0,a.jsx)(m.$,{disabled:!0,size:r,children:"Add Vercel Project"})}},10425:(e,t,s)=>{"use strict";s.d(t,{MAX_PROMPT_CONTENT_LENGTH:()=>P,MAX_PROMPT_TITLE_LENGTH:()=>L,A:()=>E});var a=s(54857),r=s(96541),l=s(25388),n=s(16617),i=s(39112),o=s(10889),c=s(86287),d=s(15893),u=s(50735),m=s(29660),p=s(67605);let h=(0,p.createServerReference)("60bb7342ef50cb4d065b8bffe15040c94fbf2b0df9",p.callServer,void 0,p.findSourceMapURL,"createPrompt"),x=(0,p.createServerReference)("4081a86cd8d1b03ed460be6a6b57124feeea4f4348",p.callServer,void 0,p.findSourceMapURL,"deletePrompt");var f=s(2259),g=s(69057),v=s(64993),j=s(77499),b=s(60686),y=s(79089),w=s(80612),N=s(77184),k=s(26970),C=s(44658),S=s(37622),I=s(4126);let P=1e3,L=50;function R(e){l.A.set(I.Hv,JSON.stringify(e),{expires:365})}function E(e){let{disabled:t}=e,{data:s,setPrompts:l,setSelectedScores:p,isLoading:I}=function(){let{data:e,mutate:t}=(0,w.Ay)("state:custom-instructions-prompt-form",null,{fallbackData:{prompts:void 0,selectedScores:void 0}});return{data:e,setPrompts:function(e){t(t=>t?{prompts:e(t.prompts||[]),selectedScores:t.selectedScores||[]}:t)},setSelectedScores:function(e){t(t=>t?{prompts:t.prompts||[],selectedScores:e(t.selectedScores||[])}:t)},isLoading:!(null==e?void 0:e.prompts)&&!(null==e?void 0:e.selectedScores)}}(),[E,z]=(0,r.useState)(!1),[M,F]=(0,r.useState)(""),[A,D]=(0,r.useState)(""),[T,U]=(0,r.useState)(!1),[O,_]=(0,r.useState)(!1),V=e=>{(null==s?void 0:s.selectedScores)&&s.selectedScores.includes(e)?R((s.selectedScores||[]).filter(t=>t!==e)):R([...(null==s?void 0:s.selectedScores)||[],e]),(0,r.startTransition)(()=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})},B=async()=>{if(M&&A){_(!0);let{error:e,newPrompt:t}=await h(M,A);if(e||!t){N.oR.error("Failed to create custom instruction"),_(!1);return}l(e=>[...e,t]),F(""),D(""),U(!1),_(!1),p(e=>[...e,t.score])}},$=e=>{l(t=>t.filter(t=>t.score!==e)),p(t=>t.filter(t=>t!==e)),(0,r.startTransition)(async()=>{await x(e)})},H=!I&&(null==s?void 0:s.prompts)&&0===s.prompts.length;return(0,a.jsxs)(i.AM,{open:E,onOpenChange:z,children:[(0,a.jsx)(i.Wv,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",className:(0,S.cn)("focus:bg-muted size-7 hover:bg-gray-100 focus-visible:bg-gray-100",(t||I)&&"pointer-events-none bg-gray-100 text-gray-400 ring-0"),size:"sm",tooltip:"Custom Instructions ( only)",disabled:I||t,children:(0,a.jsxs)("label",{"data-id":"import-from-figma",htmlFor:"figmaImport",className:"relative",children:[(0,a.jsx)(j.u,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"sr-only",children:"Custom Instructions"}),(null==s?void 0:s.selectedScores)&&s.selectedScores.length>0&&(0,a.jsx)(C.E,{variant:"secondary",className:"absolute -right-4 top-3 flex h-4 w-4 items-center justify-center p-0 text-[10px] font-bold",children:s.selectedScores.length})]})})}),(0,a.jsxs)(i.hl,{className:"w-[340px] p-0",children:[(0,a.jsx)("div",{className:"p-4 pb-0",children:(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[!H&&(0,a.jsx)("h3",{className:"text-muted-foreground text-sm font-normal",children:"Custom Instructions"}),(0,a.jsxs)(o.lG,{open:T,onOpenChange:U,children:[!H&&(0,a.jsx)(o.zM,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 w-8",children:(0,a.jsx)("span",{children:(0,a.jsx)(v.F,{className:"h-4 w-4"})})})}),(0,a.jsxs)(o.Cf,{className:"z-[10000]",onPointerDownOutside:e=>e.preventDefault(),children:[(0,a.jsx)(o.c7,{children:(0,a.jsxs)(o.L3,{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{children:"Create New Prompt"})," ",(0,a.jsx)(k.Tooltip,{className:"text-gray-500",content:"Custom instructions are attached to your chat and can be toggled on and off.",children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(g.$,{className:"h-4 w-4"})})})]})}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{htmlFor:"title",children:"Title"}),(0,a.jsx)(c.p,{id:"title",value:M,onChange:e=>F(e.target.value),className:"h-9",maxLength:L,minLength:1})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{htmlFor:"content",children:"Content"}),(0,a.jsx)(u.T,{id:"content",value:A,onChange:e=>D(e.target.value),className:"min-h-[100px]",maxLength:P,minLength:1})]})]}),(0,a.jsx)(n.$,{onClick:B,disabled:O,children:"Create Prompt"})]})]})]})}),H&&(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center p-4 text-center",children:[(0,a.jsx)(b.s,{className:"text-muted-foreground mb-4 h-12 w-12"}),(0,a.jsx)("h4",{className:"mb-2 text-lg font-medium",children:"No instructions yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4 text-sm",children:"Create your first custom instruction to influence your chat. Toggle them as needed."}),(0,a.jsxs)(n.$,{onClick:()=>U(!0),className:"focus:ring-primary w-full",variant:"outline",children:[(0,a.jsx)(v.F,{className:"mr-2 h-4 w-4"}),"Create"]})]}),!H&&(null==s?void 0:s.prompts)&&s.prompts.length>0&&(0,a.jsx)(m.F,{className:"h-[300px] px-4",children:(0,a.jsx)("div",{className:"space-y-2 pr-3",children:s.prompts.map(e=>{var t,r;return(0,a.jsxs)("div",{className:"flex w-full items-start justify-between rounded-lg border p-3 transition-colors ".concat((null===(t=s.selectedScores)||void 0===t?void 0:t.includes(e.score))?"bg-primary/5 border-primary/20":"hover:bg-muted"),children:[(0,a.jsx)("button",{onClick:()=>V(e.score),className:"flex-1 text-left",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:e.title}),(0,a.jsx)("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:e.content})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(null===(r=s.selectedScores)||void 0===r?void 0:r.includes(e.score))&&(0,a.jsx)(f.J,{className:"text-primary h-4 w-4 shrink-0"}),(0,a.jsx)(n.$,{variant:"ghost",className:"text-muted-foreground hover:text-destructive h-8 w-8",onClick:()=>$(e.score),size:"xs",children:(0,a.jsx)(y.l,{className:"h-4 w-4"})})]})]},e.score)})})})]})]})}},66188:(e,t,s)=>{"use strict";s.d(t,{wJ:()=>eh,BW:()=>ed,q6:()=>eu,Q1:()=>ev});var a=s(54857),r=s(63558),l=s(96541),n=s(37622),i=s(88152),o=s(46948),c=s(97682),d=s(62841),u=s(38651),m=s(34016),p=s(77384),h=s(77284),x=s(95537),f=s(4423),g=s(20131),v=s(6592),j=s(28638),b=s(79160),y=s(16617),w=s(8679),N=s(2015),k=s(70640),C=s(54771),S=s(48774),I=s(90229),P=s(48785),L=s(37835),R=s(80612),E=s(41773),z=s(90761),M=s(82219),F=s(46119),A=s(17978),D=s(71368),T=s(82133),U=s(884),O=s(97546),_=s(2668),V=s(43393),B=s(53317),$=s(59179),H=s(95360),q=s(60346),W=s(63047),Y=s(8109),Q=s(13534),Z=s(77184),G=s(22284),J=s(30856),K=s(54143),X=s(73927);let ee=e=>{let{isSignedIn:t,userOnFree:s,uploadFiles:a,isFigmaUrl:r,handleFigmaImport:n}=e,{setImportFigmaModalOpen:i}=(0,G.C)();return(0,l.useCallback)(async e=>{let l=e.clipboardData.getData("text");if(!l||(!t||s)&&r(l))return;if(r(l)){(0,u.u)("FigmaUrlPaste",{url:l,valid:!0}),e.preventDefault(),i(null),await new Promise(e=>setTimeout(e,0)),n(l);return}let o=l.split("\n").length,c=l.length;if(o>200||c>2e4){e.preventDefault();let s=function(e){let t=(e,t)=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase()+t;if(!e)return null;let s=e.includes("<")&&e.includes(">"),a="typescript";for(let r of((e.includes("def ")||e.includes("class ")&&e.includes(":\n"))&&(a="python"),({typescript:[{regex:/export\s+default\s+function\s+(\w+)/,extension:".tsx"},{regex:/export\s+default\s+(\w+)/,extension:".tsx"},{regex:/export\s+function\s+(\w+)/,extension:".tsx"},{regex:/export\s+const\s+(\w+)\s*=/,extension:".tsx"},{regex:/export\s+class\s+(\w+)/,extension:".tsx"},{regex:/class\s+(\w+)/,extension:s?".tsx":".ts"},{regex:/function\s+(\w+)/,extension:s?".tsx":".ts"},{regex:/const\s+(\w+)\s*=/,extension:s?".tsx":".ts"}],python:[{regex:/class\s+(\w+)\s*[:(]/,extension:".py"},{regex:/def\s+(\w+)\s*\(/,extension:".py"}]})[a])){let s=e.match(r.regex);if(s&&s[1])return t(s[1],r.extension)}let r=e.match(/^\s*(?:const|let|var|function|class)\s+(\w+)/m);return r?t(r[1],"python"===a?".py":s?".tsx":".ts"):e.includes("<html")?"index.html":null}(l),r=s&&t?prompt('The pasted text will be saved as a file named "'.concat(s,'". Please enter a new file name or press OK to continue.'),s):"snippet.txt";if(r&&!r.includes(".")&&(r+=".txt"),null===r)return;a([new File([new Blob([l],{type:"text/plain"})],r,{type:"text/plain"})])}},[n,r,t,i,a,s])};var et=s(10425),es=s(98304),ea=s(31005),er=s(80356),el=s(60686),en=s(75990),ei=s(44658);function eo(e){let{disabled:t,isAnonymous:s,reachedRateLimit:r,planSlug:l,currentPrompt:i,setPrompt:o,setLoading:c,hasEnhancedCurrentPrompt:d}=e,{setShowSignInDialog:m}=(0,b.AO)(),{setUpgradePromptOpen:p}=(0,en.g)(),{complete:h}=(0,er.sQ)({api:"/chat/api/prompt-enhancement",onResponse:()=>{c(!0)},onError:e=>{Z.oR.error(e.message||"Something went wrong"),c(!1)},streamProtocol:"text",onFinish:(e,t)=>{c(!1);let s=JSON.parse(t);o(s.prompt),(0,u.u)("EnhancePromptSuccess",{originalPromptLength:e.length,enhancedPromptLength:s.prompt.length})}});return(0,a.jsx)(y.$,{asChild:!0,className:(0,n.cn)("focus:bg-muted hover:text-foreground size-7 text-gray-500 hover:bg-gray-100 focus-visible:bg-gray-100",t&&"pointer-events-none bg-gray-100 text-gray-400 ring-0"),disabled:t,size:"sm",tooltip:d?"You can only enhance a prompt once":{content:(0,a.jsxs)(a.Fragment,{children:["Enhance prompt with AI"," ",(0,a.jsx)(ei.E,{variant:"secondary",size:"sm",children:"Beta"})]})},tooltipDirection:"right",variant:"ghost",onClick:()=>{if(r&&"v0-enterprise"!==l){s?m({prompt:i}):p(!0);return}i&&((0,u.u)("EnhancePrompt",{promptLength:i.length}),h(i))},children:(0,a.jsxs)("label",{"data-id":"import-from-figma",htmlFor:"figmaImport",children:[(0,a.jsx)(el.s,{}),(0,a.jsx)("span",{className:"sr-only",children:"Enhance your prompt with AI"})]})})}var ec=s(43706);function ed(e){var t;let{submit:s,stop:m,scrollDownButton:h,isMobile:f,isNewChat:g,isHome:w,isSignedIn:N,isAnonymous:k,className:C,clearOnSubmit:S=!0,placeholder:I,dragContainerRef:W,onInputChange:es,maxLength:ea,isPending:er,isTemplateLoading:el=!1}=e,{blobs:en,reset:ei,localFileInfos:ec,removeFile:ed,isDraggingFile:eh,inputFileRef:ex,onInputChange:ef,uploading:eb,uploadFiles:ey}=(0,j.A)({isSignedIn:N,dragContainerRef:W}),{initialStreamPromise:ew,activeForkKey:eN,isLoading:ek,isStreaming:eC,messages:eS,isContinuing:eI}=(0,d.Pk)(),eP=(0,l.useMemo)(()=>eS.filter(e=>null==eN?void 0:eN.includes(e.id)),[eS,eN]),{quote:eL,setQuote:eR}=(0,z.sC)(),eE=(0,l.useRef)(null),ez=(0,l.useRef)(()=>{}),{setShowSignInDialog:eM}=(0,b.AO)(),{showBannerLimit:eF,showBannerGeneral:eA}=(0,F.fH)(),eD=eF&&N,eT=eA&&N,eU=eD||eT,{handleSavePromptDraft:eO,draft:e_}=(0,A.jh)(),[eV,eB]=(0,l.useState)(!0),{selectedProjectId:e$}=(0,H._t)(),{project:eH}=(0,z.tZ)(),{user:eq,expectUser:eW}=(0,q.J)(),{activeScope:eY}=(0,V.k6)(),{planSlug:eQ}=(0,K.N)(!0,null==eY?void 0:eY.id),{sources:eZ}=(0,H.py)(e$),{fi:eG,ci:eJ,fia:eK,pe:eX}=(0,J.D)(),[e0,e1]=(0,l.useState)(!1),[e2,e5]=(0,l.useState)(!1),e6="";(null==e_?void 0:e_.source)!=="cookie"||e_.isMessageTrimmed||(e6=e_.message);let[e4,e3]=(0,l.useState)(e6),e7="v0-level0"===eQ&&!(null==eq?void 0:eq.isV0Admin)&&!(null==eq?void 0:eq.isVercelian)&&!(null==eq?void 0:eq.hasPremiumOverride),e8=ec.length>0,{tokenUsage:e9,percentage:te,exceededCharCount:tt,onlyImageFiles:ts,onlyTextFiles:ta}=function(e){let{localFiles:t}=e,s=(0,O.f)(),{messages:a,activeForkKey:r,chatId:n}=(0,d.Pk)(),i=(0,l.useMemo)(()=>a.filter(e=>null==r?void 0:r.includes(e.id)),[a,r]),{tokens:o,isLoading:c}=function(e,t){let{isEmpty:s}=(0,z.tZ)(),{activeScopeSlug:a,isActiveScopeReady:r}=(0,V.k6)(),{data:l,isLoading:n}=(0,R.Ay)(a&&r&&!s?"/chat/api/chat/cstu?scopeSlug=".concat(a,"&chatId=").concat(e,"&messageId=").concat(t):null,B.GO,{shouldRetryOnError:!1});return{tokens:l,isLoading:n}}(n,(0,l.useMemo)(()=>{var e;return null===(e=i[i.length-1])||void 0===e?void 0:e.id},[i])),u=(0,l.useMemo)(()=>t.reduce((e,t)=>e+(t.tokens||0),0),[t]),m=(0,l.useMemo)(()=>c?0:o&&o>0?o:(0,U.Z)(i),[i,o,c]),p=(0,l.useMemo)(()=>m+u,[m,u]),h=t.every(e=>e.isImage),x=t.every(e=>void 0!==e.content),f=(0,l.useMemo)(()=>{if(p<=s.contextWindow)return 0;let e=p-s.contextWindow;return(0,_.Cy)(e)},[p,s.contextWindow]);return{total:s.contextWindow,used:p,available:s.contextWindow-p,percentage:Math.round(p/s.contextWindow*100),onlyImageFiles:h,onlyTextFiles:x,exceededCharCount:f,tokenUsage:m}}({localFiles:ec}),tr=e8&&te>80,tl=e8&&te>100,tn=(0,l.useMemo)(()=>{var e;return null===(e=function(e,t){for(let s=e.length-1;s>=0;s--)if(t(e[s]))return e[s]}(eP,e=>"user"===e.role))||void 0===e?void 0:e.content},[eP]),ti=(0,d.Pk)().chatId,to=(0,Y.C)(),tc=(0,l.useCallback)(function(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=r?s:(null===(e=eE.current)||void 0===e?void 0:e.value)||s;e3(l),eB(!l),null==es||es(l),a&&eO({message:l,inputHeight:(null===(t=eE.current)||void 0===t?void 0:t.style.height)?parseInt(eE.current.style.height):void 0})},[eO,es]),[td]=(0,F.dc)(),tu=!!((null==td?void 0:td.remaining)!==void 0&&td.remaining<=0),tm=ek||eC||er,tp=eV&&0===ec.length&&!(null==e_?void 0:e_.message),th=tm||eb||tp||tu||el||eW&&!eq;(0,l.useEffect)(()=>{th&&tc(void 0,!1)},[]);let{showHistoryPopover:tx}=function(){let{revalidate:e}=(0,E.m)(),{data:t,mutate:s}=(0,R.Ay)("showHistoryPopover",null,{fallbackData:!1});return{showHistoryPopover:t,setShowHistoryPopover:(0,l.useCallback)(t=>{e(),s(t)},[s,e])}}(),[tf]=(0,P.G2)(),tg=(0,P.Hg)(),{promptFormInput:tv,setPromptFormInput:tj}=ev(),{setImportFigmaModalOpen:tb}=(0,G.C)();(0,l.useEffect)(()=>{if(!eE.current||void 0===tv)return;let e=eE.current;e.value=e.value?"".concat(e.value,"\n").concat(tv):tv,tj(void 0),e.style.height="".concat(e.scrollHeight,"px"),e.focus(),tc()},[tv,tj,tc]);let ty=(null==e_?void 0:e_.source)==="cookie"&&e_.isMessageTrimmed;(0,l.useEffect)(()=>{if("string"==typeof(null==e_?void 0:e_.message)&&"localStorage"===e_.source&&e_.message&&eE.current){if(eE.current.value!==e_.message&&!e_.isExpandedDraft){tc();return}let e=eE.current;e.value=e_.message,e.style.height="".concat(e_.inputHeight,"px"),e.scrollTop=1e7,e.focus(),e.setSelectionRange(e_.message.length,e_.message.length),e_.quote&&eR(e_.quote)}},[tj,e_,tc,eR]);let{position:tw}=tf,tN=!1!==tf.isAllowed;(0,l.useEffect)(()=>{let e=eE.current;e&&ec.length>0&&e.focus()},[ec]),(0,l.useEffect)(()=>{let e=eE.current;if(!e)return;let t=t=>{"/"!==t.key||t.target&&(["INPUT","TEXTAREA"].includes(t.target.nodeName)||"contentEditable"in t.target&&"true"===t.target.contentEditable)||(t.preventDefault(),t.stopPropagation(),e.focus())},s=t=>{"Escape"===t.key&&""===e.value.trim()&&eR(null)},a=t=>{g||tm||"ArrowUp"!==t.key||""!==e.value.trim()||!tn||(0,l.startTransition)(()=>{e.value=String(tn),requestAnimationFrame(()=>e.select())})};return document.addEventListener("keydown",t),e.addEventListener("keydown",a),e.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",t),e.removeEventListener("keydown",a),e.removeEventListener("keydown",s)}},[m,tn,g,tm,eR]);let tk=(0,D.k)("promptForm"),[tC,tS]=(0,l.useState)(void 0),{setUpgradePromptOpen:tI}=(0,$.gU)(),tP=(0,l.useCallback)(e=>{var t,a;if(e&&e.preventDefault(),tm)return;let r=(null===(t=eE.current)||void 0===t?void 0:t.value.trim())||"";if(r||0!==ec.length){if(tu){k?eM({prompt:r}):tI(!0);return}!th&&(s({action:"new",input:r,attachments:en,figmaContext:tC}),(0,u.u)("SubmitNewUserMessage",{text:r,index:eS.length,imageOnly:ec.length>0&&""===r.trim(),projectId:g?e$:null!==(a=null==eH?void 0:eH.projectId)&&void 0!==a?a:null,anonId:to}),S&&(N||k)&&(ei(),eE.current&&(eE.current.value="",ez.current()),eB(!0),e5(!1),e3("")))}},[tm,ec.length,tu,th,s,en,tC,eS.length,g,e$,null==eH?void 0:eH.projectId,to,S,N,k,eM,tI,ei]),{formRef:tL,onKeyDown:tR}=(0,r.w)({localFileInfos:ec,submitMessage:tP});(0,l.useEffect)(()=>{eL&&tL.current&&tL.current.content&&tL.current.content.focus()},[tL,eL]);let tE=(0,l.useCallback)(e=>{f||tR(e)},[f,tR]),{handleFigmaUrl:tz,isFigmaUrl:tM,isLoading:tF,getNodeContext:tA}=(0,Q.q)(eE);(0,l.useEffect)(()=>{let e;return tF&&(e=Z.oR.loading("Fetching image from Figma")),()=>{e&&Z.oR.dismiss(e)}},[tF]);let tD=(0,l.useCallback)(async e=>{if(tM(e)){let[t,s]=await Promise.all([tz(e),tA(e)]);if(t.success){if(eK){let e=s.nodes.colors.map(e=>"".concat(e.hex,")")).join(", ")||"",t=s.nodes.designTokens.map(e=>"".concat(e.hex,")")).join(", ")||"";tS([e&&"Colors: ".concat(e),t&&"Design tokens: ".concat(t)].filter(Boolean).join(", "))}let{base64:e,originalUrl:a,fileName:r}=t.data,l=r.replace(/[^a-zA-Z0-9.]/g,"_"),n=e.split(",")[1],i=window.atob(n),o=new Uint8Array(i.length);for(let e=0;e<i.length;e++)o[e]=i.charCodeAt(e);let c=new File([new Blob([o],{type:"image/png"})],"".concat(l,".png"),{type:"image/png"});c.isFigmaFile=!0,c.figmaUrl=a,c.v0Type="figma",await ey([c])}}},[tM,tz,tA,eK,ey]),tT=(0,X.useSearchParams)();(0,l.useEffect)(()=>{if(!eG)return;let e=tT.get("figma_connected"),t="import"===tT.get("from");if("true"!==e||t||tb({open:!0,onImport:tD}),"true"===e){let e=new URL(window.location.href);e.searchParams.delete("figma_connected"),e.searchParams.delete("from"),window.history.replaceState({},"",e)}},[tT,eG,tb,tD]);let tU=ee({isSignedIn:N,userOnFree:e7,uploadFiles:ey,isFigmaUrl:tM,handleFigmaImport:tD}),tO=N&&tg&&!tN,t_=!g&&!tO,tV=eP[eP.length-1],tB=tV&&Array.isArray(tV.content)&&tV.content.some(e=>!!Array.isArray(e)&&0===e[0]);return(0,a.jsx)("div",{className:(0,n.cn)("content-center",C),children:(0,a.jsxs)("div",{className:(0,n.cn)("relative z-10 flex w-full flex-col",!g&&"bg-background mx-auto max-w-3xl px-2 pb-2 sm:px-3 sm:pb-3 md:px-4 md:pb-4",t_&&"pb-0 sm:pb-0 md:pb-0"),children:[(0,a.jsx)(o.N,{mode:"sync",children:eU?(0,a.jsx)(c.P.div,{animate:{opacity:1,height:"auto"},className:"relative rounded-t-xl bg-gray-100 text-gray-600",exit:{opacity:0,height:0},initial:{opacity:0,height:0},transition:{type:"spring",damping:20,stiffness:300,mass:.2},children:(0,a.jsx)(F.sN,{almostAtLimit:eD,reachedLimit:tu,isAnonymous:k})},"rate-limit"):null}),(0,a.jsx)("div",{className:(0,n.cn)(eU&&"bg-gray-100","rounded-b-xl"),children:(0,a.jsxs)("form",{className:(0,n.cn)("focus-within:border-alpha-600 bg-background-subtle border-alpha-400 relative rounded-xl border shadow-[0_2px_2px_rgba(0,0,0,0.04),0_8px_8px_-8px_rgba(0,0,0,0.04)] transition-shadow"),onSubmit:tP,ref:tL,children:[(0,a.jsx)(eg,{message:eP.find(e=>!!(eN&&eN[eN.length-1]===e.id)),isContinuing:eI,isLoading:ek,isStreaming:eC}),g?null:h,(0,a.jsxs)(o.N,{mode:"sync",children:[eL?(0,a.jsx)(c.P.div,{animate:{opacity:1,height:"auto"},className:"bg-muted relative rounded-t-xl border-b text-gray-600",exit:{opacity:0,height:0},transition:{type:"spring",damping:20,stiffness:300,mass:.2},children:(0,a.jsx)(em,{className:(0,n.cn)(e8&&"pb-1"),onClose:()=>void eR(null),quote:eL,shouldNotAnimate:(null==e_?void 0:e_.quote)===eL},"quote-component-".concat(eL))},"quote-animate-".concat(eL)):null,e8||eh?(0,a.jsxs)(c.P.div,{animate:{opacity:1,height:"auto"},className:"bg-muted relative rounded-t-xl text-gray-600",exit:{opacity:0,height:0},initial:((null==e_?void 0:e_.localFileInfos.length)||0)>0?{opacity:1,height:"auto"}:{opacity:0,height:0},transition:{type:"spring",damping:20,stiffness:300,mass:.2},children:[(0,a.jsx)(ep,{files:ec,removeFile:ed,showDropzone:eh}),tr?(0,a.jsxs)("p",{className:(0,n.cn)("flex items-center gap-1 p-3 pt-0 text-xs text-gray-600",tl?"text-red-700":"text-gray-600"),children:[(0,a.jsx)(i.R,{className:"size-3.5"}),function(e){let{exceedsContextWindow:t,isNewChat:s,onlyTextFiles:a,onlyImageFiles:r,exceededCharCount:l,tokenUsage:n}=e,i="Your message and attachment(s) ".concat(t?"exceed":"are close to exceeding"," ").concat(s?"the chat context window":"the context window for this chat");return a&&t?i+=" by an estimated ".concat(l," character").concat(1===l?"":"s","."):i+=".",n>5e4&&!s?i+=" Try starting a new chat.":r?i+=" Try resizing or removing attached images.":a?i+=" Try uploading smaller snippet(s) of your attachment(s).":i+=" Try reducing the size of your attachment(s).",i}({exceedsContextWindow:tl,isNewChat:g,onlyTextFiles:ta,onlyImageFiles:ts,exceededCharCount:tt,tokenUsage:e9})]}):null]},"attachments-".concat(eh,"-").concat(ec.length)):null]}),(0,a.jsxs)("div",{className:(0,n.cn)("@container/textarea bg-background-subtle relative z-10 grid rounded-xl",tO&&"cursor-not-allowed bg-gray-100 text-gray-400"),children:[(0,a.jsx)("label",{className:"sr-only",htmlFor:"chat-main-textarea",children:tk("chatInput")}),ty&&e_.inputHeight?(0,a.jsx)("div",{className:"flex w-full flex-col gap-0 px-3",style:{height:"".concat(e_.inputHeight,"px")},children:Array.from({length:Math.floor((e_.inputHeight-12)/20)}).map((e,t)=>(0,a.jsx)("div",{className:(0,n.cn)("flex h-5 items-center justify-center",0===t?"mt-3":""),style:{width:"".concat([45,35,50,60,42,70,48][t%7],"%")},children:(0,a.jsx)(L.E,{className:"h-3 w-full"},t)},"prompt-skeleton-"+t))}):(0,a.jsx)(M.o,{value:e4,resizeFunctionRef:ez,autoFocus:!f&&!tx,className:(0,n.cn)("w-full flex-1 bg-transparent p-3 pb-1.5 text-sm outline-none ring-0 placeholder:text-gray-500",tO&&"@[570px]/textarea:!min-h-fit !min-h-[54px] cursor-not-allowed text-gray-500"),disabled:tO,id:"chat-main-textarea",maxLength:ea,name:"content",onChange:e=>{e3(e.target.value),e5(!1),tc(e.target.value)},onKeyDown:tE,onPaste:tU,placeholder:tO?"".concat(tk("youAreInQueue"),": ").concat(Number(tw)+1):I||tk(g?"askQuestion":"askFollowup"),ref:eE,style:{height:void 0!==e6&&(null==e_?void 0:e_.inputHeight)?"".concat(e_.inputHeight,"px"):"42px",caretColor:e6?"transparent":void 0},spellCheck:!1},ti),(0,a.jsxs)(eu,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(ej,{disabled:tm||tu||tO||el,onFileChange:e=>{var t,s;console.log("file upload event",e),ef(e),null===(t=eE.current)||void 0===t||t.focus(),(0,u.u)("AttachFiles",{count:null===(s=e.target.files)||void 0===s?void 0:s.length,fileNames:Array.from(e.target.files||[]).map(e=>e.name)})},inputFileRef:ex,textAreaRef:eE,uploadFiles:ey,isGenerating:tm||!1,isSignedIn:N,isAnonymous:k}),eJ&&(0,a.jsx)(et.A,{disabled:tu}),(0,a.jsx)(o.N,{children:eX&&(null===(t=eE.current)||void 0===t?void 0:t.value)&&eE.current.value.length>0&&(0,a.jsx)(c.P.div,{animate:{opacity:1},className:(0,n.cn)("flex items-center gap-2",e0?"animate-pulse":""),exit:{opacity:0},initial:{opacity:0},transition:{type:"spring",damping:20,stiffness:300,mass:.2},children:(0,a.jsx)(eo,{disabled:tm||tO||e0||e2,currentPrompt:e4||"",isAnonymous:k,planSlug:eQ,reachedRateLimit:tu,setPrompt:e=>{tc(e,!0,!0),e5(!0);let t=eE.current;if(!t)return;let s=Math.min(20*Math.floor(e.length/40)+42,200);t.style.height="".concat(s,"px"),t.scrollTop=1e7,t.focus(),t.setSelectionRange(e.length,e.length)},hasEnhancedCurrentPrompt:e2,setLoading:e1})},"enhance-prompt")})]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[w&&(0,a.jsx)("div",{className:"shrink-1 min-w-0 grow-0",children:(0,a.jsx)(T.o,{onLoggedOutClick:N?void 0:()=>{var e;eM({prompt:(null===(e=eE.current)||void 0===e?void 0:e.value)||""})},disabled:tO||tu})}),tm?(0,a.jsxs)(y.$,{className:"ml-auto h-7 shrink-0",disabled:void 0!==ew||ek||er||!tB,onClick:e=>{e.preventDefault(),m()},size:"sm",type:"button",children:[(0,a.jsx)(v.X,{})," ",tk("stop"),(0,a.jsx)("span",{className:"sr-only",children:tk("stopGeneration")})]}):tu&&!k?(0,a.jsxs)(y.$,{className:"h-7","data-testid":"prompt-form-upgrade-button",onClick:()=>tI(!0),size:"sm",type:"submit",children:[(0,a.jsx)(x.l,{}),tk("upgradePlan")]}):(0,a.jsxs)(y.$,{className:"size-7","data-testid":"prompt-form-send-button",disabled:th,size:"sm",type:"submit",children:[(0,a.jsx)(p.D,{}),(0,a.jsx)("span",{className:"sr-only",children:tk("sendMessage")})]})]})]})]})]})}),t_?(0,a.jsx)("p",{className:"py-2 text-center text-xs text-gray-500",children:tk("disclaimer")}):null]})})}function eu(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex items-center gap-2",t),...s})}function em(e){let{quote:t,onClose:s,className:r,shouldNotAnimate:l}=e,i=(0,D.k)("promptForm");return(0,a.jsx)("div",{className:(0,n.cn)("p-3",r),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-1 shrink-0 self-stretch rounded-full bg-gray-300"}),(0,a.jsx)("div",{className:(0,n.cn)(l?"":"mask-animation","line-clamp-2 flex-1 whitespace-pre-wrap text-sm text-gray-600"),title:t,children:t},"quote-".concat(l)),(0,a.jsxs)(y.$,{className:"m-[3px]",onClick:e=>{e.preventDefault(),s()},rounded:!0,size:"tiny",tooltip:i("removeQuote"),variant:"secondary",children:[(0,a.jsx)(w.F,{}),(0,a.jsx)("span",{className:"sr-only",children:i("remove")})]})]})})}function ep(e){let{files:t,removeFile:s,showDropzone:r}=e,l=(0,D.k)("promptForm");return(0,a.jsxs)("div",{className:"no-scrollbar h-16 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 p-3 transition-opacity",style:{opacity:r?1:0,pointerEvents:r?"auto":"none"},children:(0,a.jsx)("div",{className:"flex h-10 flex-col items-center justify-center gap-1 rounded-md border border-dashed border-gray-300 p-3 text-center text-xs text-gray-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 font-medium text-gray-500",children:[(0,a.jsx)(k.f,{className:"size-3.5"})," ",l("dropFilesHere")]})})}),t.length?(0,a.jsx)("div",{className:"flex items-center gap-3 overflow-x-auto p-3 transition-opacity",style:{opacity:r?0:1},children:t.slice().reverse().map(e=>(0,a.jsx)(ef,{file:e,onRemoveButtonClicked:()=>s(e.id)},e.id))}):null]})}function eh(e){let{files:t,removeFile:s,showDropzone:r,existingAttachments:n,removeExistingAttachment:i}=e,d=(0,D.k)("promptForm"),u=(0,l.useMemo)(()=>(n?t.length+n.length:t.length)>0,[t,n]);return(0,a.jsx)("div",{className:"no-scrollbar h-16 w-full overflow-hidden",children:(0,a.jsx)(o.N,{initial:!1,children:r?(0,a.jsx)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"w-full p-3",children:(0,a.jsx)("div",{className:"flex h-10 flex-col items-center justify-center gap-1 rounded-md border border-dashed border-gray-300 p-3 text-center text-xs text-gray-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 font-medium text-gray-500",children:[(0,a.jsx)(k.f,{className:"size-3.5"})," ",d("dropFilesHere")]})})},"dropzone"):u?(0,a.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex items-center gap-3 overflow-x-auto p-3",children:[n&&ex(n).map(e=>(0,a.jsx)(ef,{file:e,onRemoveButtonClicked:()=>null==i?void 0:i(e.url)},e.id)),[...t].reverse().map(e=>(0,a.jsx)(ef,{file:e,onRemoveButtonClicked:()=>s(e.id)},e.id))]},"attachments"):null})})}let ex=e=>(null==e?void 0:e.map(e=>{var t;return{id:(0,W.$C)(),name:e.name||"Unnamed file",url:e.url,status:"done",size:e.size,v0Type:e.v0Type,isImage:(null===(t=e.contentType)||void 0===t?void 0:t.startsWith("image/"))||!1,isSavedDraft:!0}}))||[];function ef(e){let{file:t,onRemoveButtonClicked:s,className:r}=e,i="uploading"===t.status,[o,c]=(0,l.useState)(!i&&!t.isSavedDraft),[d,u]=(0,l.useState)(0),[m,p]=(0,l.useState)(0),[h,x]=(0,l.useState)(null),{content:g}=(0,es.k)(h),[v,j]=(0,l.useState)(!1),b=(0,n.QY)(t.name,18),k=(0,D.k)("promptForm"),P=(0,a.jsx)(N.Z,{});i?P=(0,a.jsx)(I.y,{size:16}):"figma"===t.v0Type?(P=(0,a.jsx)(f.Y,{}),b=b.split(".png")[0]):t.isImage&&(P=(0,a.jsx)(S.default,{alt:t.name,className:"border-alpha-400 aspect-square rounded-sm border object-cover",fill:!0,src:t.url}));let L=(0,a.jsx)(y.$,{asChild:!0,className:"w-full gap-1 py-1 pl-1 pr-3 hover:bg-gray-100 focus:bg-gray-100 focus-visible:bg-gray-100",variant:"secondary",onClick:e=>{j(!0),g||(e.preventDefault(),x(t.url))},children:(0,a.jsxs)("div",{tabIndex:0,children:[(0,a.jsx)("div",{className:"flex size-8 shrink-0 -translate-x-px items-center justify-center overflow-hidden rounded-sm bg-gray-100 text-gray-500",children:P}),(0,a.jsxs)("div",{className:"grid flex-1 gap-1 py-0.5 text-xs leading-none text-gray-500",children:[(0,a.jsx)("div",{className:"overflow-hidden text-ellipsis font-medium",children:b}),(0,a.jsx)("div",{className:"line-clamp-1 font-normal",children:i?k("uploading"):(0,n.v7)(t.size)})]})]})});return(0,a.jsxs)("div",{className:(0,n.cn)("relative h-10 w-[150px] shrink-0",r),children:[t.isImage?(0,a.jsxs)(C.jc,{closeDelay:0,onOpenChange:c,open:o,openDelay:0,children:[(0,a.jsx)(C.d0,{asChild:!0,children:L}),(0,a.jsx)(C.Et,{className:"text-muted w-fit overflow-hidden rounded-xl bg-black p-0.5 text-xs",side:"top",sideOffset:8,children:(0,a.jsx)(S.default,{alt:t.name,className:"h-auto max-h-[300px] w-auto max-w-[300px] rounded-lg object-contain",src:t.url,width:300,height:300,onLoad:e=>{let t=e.target,s=t.naturalWidth/t.naturalHeight,a=.8*window.innerWidth,r=.8*window.innerHeight,l=r*s,n=r;s>1&&(l=a,n=a/s),u(l),p(n)}})})]},t.id):L,(0,a.jsxs)(y.$,{className:(0,n.cn)("absolute right-0 top-0 -translate-y-1/3 translate-x-1/3 hover:bg-gray-100 focus:bg-gray-100 focus-visible:bg-gray-100",i&&"invisible"),onClick:e=>{e.preventDefault(),s()},rounded:!0,size:"tiny",tooltip:k("remove"),variant:"secondary",children:[(0,a.jsx)(w.F,{}),(0,a.jsx)("span",{className:"sr-only",children:k("remove")})]}),v?(0,a.jsx)(ea.pj,{setOpen:j,attachment:t,open:v,width:d,height:m,content:g}):null]})}function eg(e){let{message:t,isContinuing:s,isLoading:r,isStreaming:l}=e,{submit:n}=(0,m.y)(),i=(0,D.k)("promptForm"),[o]=(0,F.dc)(),c=!!((null==o?void 0:o.remaining)!==void 0&&o.remaining<=0),d=s||r||l;return t&&"assistant"===t.role&&("length"===t.finishReason||s)&&!c?(0,a.jsxs)(y.$,{"aria-label":i("continueGeneratingMessage"),className:"absolute -top-10 right-0 flex w-min items-center",disabled:d,onClick:()=>{Promise.all([n({action:"continue",assistantMessageId:t.id}),(0,u.u)("ContinueMessage",{messageId:t.id})])},size:"sm",children:[d&&(0,a.jsx)(I.y,{size:16}),i("continueGenerating"),(0,a.jsx)("span",{className:"sr-only",children:i("continueGeneratingMessage")})]}):null}function ev(){let e=(0,d.Pk)().chatId,{data:t,mutate:s}=(0,R.Ay)([e,"prompt-form-input"],null);return{promptFormInput:t,setPromptFormInput:(0,l.useCallback)(e=>{s(e)},[s]),chatId:e}}function ej(e){let{disabled:t,onFileChange:s,inputFileRef:r,textAreaRef:i,uploadFiles:o,isGenerating:c,isSignedIn:d,isAnonymous:m}=e,{setShowSignInDialog:p}=(0,b.AO)(),{setUpgradePromptOpen:x}=(0,$.gU)(),{planSlug:v}=(0,K.N)(!0,void 0),[j]=(0,F.dc)(),w=!!((null==j?void 0:j.remaining)!==void 0&&j.remaining<=0),{handleFigmaUrl:N,isFigmaUrl:k,isLoading:C,getNodeContext:S}=(0,Q.q)(i),{setImportFigmaModalOpen:P}=(0,G.C)(),L=(0,l.useCallback)(async e=>{if(k(e)){let[t,s]=await Promise.all([N(e),S(e)]);if(t.success){let{base64:e,originalUrl:s,fileName:a}=t.data,r=a.replace(/[^a-zA-Z0-9.]/g,"_"),l=e.split(",")[1],n=window.atob(l),i=new Uint8Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);let c=new File([new Blob([i],{type:"image/png"})],"".concat(r,".png"),{type:"image/png"});c.isFigmaFile=!0,c.figmaUrl=s,c.v0Type="figma",await o([c])}}},[k,N,S,o]),R=()=>{var e;p({prompt:(null===(e=i.current)||void 0===e?void 0:e.value)||"",customMessage:m?"To upload files to your chat, create a Vercel account or log into an existing one.":void 0})};return(0,a.jsxs)(ec.rI,{children:[(0,a.jsx)(ec.ty,{asChild:!0,children:(0,a.jsx)(y.$,{asChild:!0,className:(0,n.cn)("focus:bg-muted hover:text-foreground ml-[-2px] h-7 w-7 hover:bg-gray-100 focus-visible:bg-gray-100",t&&"pointer-events-none bg-gray-100 text-gray-400 ring-0"),disabled:t,size:"sm",tooltip:{content:"Attach images, Figma files, etc."},variant:"ghost",children:(0,a.jsx)("span",{children:(0,a.jsx)(g.x,{className:"size-4"})})})}),(0,a.jsx)(ec.SQ,{side:"bottom",align:"start",children:(0,a.jsxs)(ec.I,{children:[(0,a.jsxs)(ec._2,{className:"h-8 justify-between px-2 py-1.5",onClick:()=>{if(!d){R();return}if(w&&"v0-enterprise"!==v){x(!0);return}(0,u.u)("FigmaModalOpen",{source:"button"}),P({open:!0,onImport:L})},children:[(0,a.jsxs)("div",{className:"mr-2 flex items-center gap-3",children:[C?(0,a.jsx)(I.y,{size:16}):(0,a.jsx)(f.Y,{}),(0,a.jsx)("span",{children:"Add from Figma"})]}),(0,a.jsx)(ei.E,{variant:"teal",size:"sm",children:"Premium"})]}),(0,a.jsx)(ec._2,{className:"h-8 px-2 py-1.5",onClick:()=>{var e;if(!d){R();return}null===(e=r.current)||void 0===e||e.click()},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.b,{}),"Upload from computer"]})})]})}),(0,a.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:c||w,ref:r,type:"file",multiple:!0,onChange:s})]})}},52381:(e,t,s)=>{"use strict";s.d(t,{s:()=>l});var a=s(54857),r=s(37622);function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("prose prose-sm prose-gray min-w-0 break-words",t),...s})}},54294:(e,t,s)=>{"use strict";s.d(t,{a:()=>i});var a=s(54857),r=s(37622),l=s(16617),n=s(2259);function i(e){let{children:t,Icon:s,selected:i,className:o,onClick:c}=e;return(0,a.jsxs)(l.$,{className:(0,r.cn)("focus:bg-background flex h-12 items-center justify-between gap-1 px-4 font-medium text-gray-900 shadow-none transition-colors hover:focus:bg-gray-100",i&&"border border-blue-700 bg-blue-100 text-blue-600 hover:border-blue-700 hover:bg-blue-100 hover:brightness-[97%] focus:border-blue-700 focus:bg-blue-100 hover:focus:bg-blue-100 focus-visible:border-blue-700",o),onClick:c,size:"sm",type:"button",variant:"secondary",children:[(0,a.jsxs)("div",{className:"shrink-1 flex items-center gap-2 overflow-hidden",children:[s&&(0,a.jsx)(s,{className:"h-4 w-4 shrink-0"}),(0,a.jsx)("span",{className:"overflow-hidden text-ellipsis",children:t})]}),(0,a.jsx)("div",{className:(0,r.cn)("flex size-4 shrink-0 items-center justify-center rounded-sm border text-white",i&&"border-0 bg-blue-600"),children:i?(0,a.jsx)(n.J,{className:"stroke-background h-2 w-2"}):null})]})}},82219:(e,t,s)=>{"use strict";s.d(t,{o:()=>n});var a=s(54857),r=s(96541),l=s(37622);let n=r.forwardRef((e,t)=>{let{maxHeight:s=384,minHeight:n=42,className:i,resizeFunctionRef:o,...c}=e,d=(0,r.useRef)(null);r.useImperativeHandle(t,()=>d.current);let u=(0,r.useCallback)(()=>{let e=d.current;if(!e)return;e.style.height="".concat(n,"px");let t=e.scrollHeight;e.style.height="".concat(Math.max(n,Math.min(t,s)),"px")},[s,n]);return r.useImperativeHandle(o,()=>u),(0,r.useEffect)(()=>(u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)),[u]),(0,a.jsx)("textarea",{...c,className:(0,l.cn)("resize-none overflow-auto",i),"data-1p-ignore":!0,"data-dashlane-disabled-on-field":!0,onChange:e=>{var t;u(),null===(t=c.onChange)||void 0===t||t.call(c,e)},ref:d,style:{...c.style,minHeight:"".concat(n,"px"),maxHeight:"".concat(s,"px")}})});n.displayName="ResizableTextArea"},88950:(e,t,s)=>{"use strict";s.d(t,{Avatar:()=>i,AvatarFallback:()=>c,AvatarImage:()=>o,AvatarUser:()=>d});var a=s(54857),r=s(96541),l=s(68331),n=s(37622);let i=r.forwardRef((e,t)=>{let{className:s,size:r="md",rounded:i=!1,children:o,...c}=e;return(0,a.jsx)(l.bL,{className:(0,n.cn)("bg-alpha-400 relative flex shrink-0 select-none items-center justify-center overflow-hidden after:absolute after:inset-0 after:border after:mix-blend-darken dark:after:mix-blend-lighten","xs"===r&&"size-4 rounded-sm text-[0.5rem] after:rounded-sm [&_svg]:size-3","sm"===r&&"size-6 rounded-lg text-xs after:rounded-lg [&_svg]:size-4","md"===r&&"size-8 rounded-lg text-sm after:rounded-lg [&_svg]:size-6",i&&"rounded-full after:rounded-full",s),ref:t,...c,children:o})});i.displayName=l.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l._V,{className:(0,n.cn)("aspect-square h-full w-full object-cover",s),ref:t,...r})});o.displayName=l._V.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.H4,{className:(0,n.cn)("flex size-full items-center justify-center rounded-lg",s),ref:t,...r})});c.displayName=l.H4.displayName;let d=r.forwardRef((e,t)=>{let{size:s="md",userId:r,teamId:l,alt:n="Avatar",title:c="",s:d=64,...u}=e;if(!r&&!l)return console.error("Either userId or teamId must be provided"),null;let m="https://vercel.com/api/www/avatar/".concat(r).concat("original"===d?"":"?s=".concat(d)),p=(l?"https://vercel.com/api/www/avatar?teamId=".concat(l).concat("original"===d?"":"&s=".concat(d)):null)||m;return(0,a.jsx)(i,{ref:t,size:s,...u,children:(0,a.jsx)(o,{alt:n,className:"aspect-auto",src:p,style:{backgroundImage:"url(".concat(p,")"),backgroundSize:"cover"},title:c})},"avatar-".concat(r))});d.displayName="AvatarUser"},98892:(e,t,s)=>{"use strict";s.d(t,{Ft:()=>o,HY:()=>i,Ou:()=>d,Sv:()=>n,cz:()=>c});var a=s(54857),r=s(96541),l=s(37622);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex items-center justify-center",s),ref:t,...r})});n.displayName="Empty";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col items-center gap-4 text-center",s),ref:t,...r})});i.displayName="EmptyContent";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("shadow-base bg-background flex size-8 items-center justify-center rounded-sm text-gray-500 [&>svg]:size-4 [&>svg]:!text-gray-500",s),ref:t,...r})});o.displayName="EmptyIcon";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("text-base font-medium",s),ref:t,...r})});c.displayName="EmptyTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("-mt-2 text-sm text-gray-500",s),ref:t,...r})});d.displayName="EmptyDescription"},68952:(e,t,s)=>{"use strict";s.d(t,{j:()=>l});var a=s(54857),r=s(37622);function l(e){let{count:t,max:s,className:l,displayThreshold:n,alertThreshold:i,message:o,messageThreshold:c,...d}=e;return n=null!=n?n:.75*s,c=null!=c?c:.9*s,i=null!=i?i:.95*s,(0,a.jsxs)("div",{className:(0,r.cn)("pointer-events-none items-center gap-2 rounded-md px-2 py-1 text-xs",t>=n?"flex":"hidden",t>=i?"text-red-500":"text-gray-500",l),...d,children:[o&&t>=c&&(0,a.jsx)("span",{children:o}),(0,a.jsxs)("span",{className:"ml-auto tabular-nums",children:[t.toLocaleString(),"/",s.toLocaleString()]})]})}},26998:(e,t,s)=>{"use strict";s.d(t,{r:()=>i,u:()=>o});var a=s(54857),r=s(96541),l=s(37622);let n=(0,s(99751).F)("pointer-events-none flex select-none items-center justify-center rounded-sm text-xs font-normal tabular-nums tracking-tight",{variants:{variant:{default:"bg-alpha-white-400 text-white",secondary:"bg-alpha-400 text-gray-900",ghost:"bg-transparent text-gray-900"},size:{default:"h-4 px-1",sm:"h-4 px-1 text-[0.6875rem]"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("kbd",{className:(0,l.cn)("flex items-center gap-1",s),ref:t,...r})});i.displayName="KbdGroup";let o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,children:o,...c}=e,d="string"==typeof o&&1===o.length;return(0,a.jsx)("kbd",{className:(0,l.cn)(n({variant:r,size:i,className:s}),d&&"w-4 px-0"),ref:t,...c,children:o})});o.displayName="Kbd"},67401:(e,t,s)=>{"use strict";s.d(t,{N:()=>o});var a=s(54857),r=s(37622),l=s(7394),n=s.n(l),i=s(26970);function o(e){let{className:t,children:s,variant:l="default",external:o=!1,tooltip:c,disabled:d=!1,...u}=e,m=(0,a.jsx)(n(),{className:(0,r.cn)("marketing"===l&&"font-medium text-teal-700 hover:underline hover:underline-offset-2",d&&"cursor-not-allowed text-gray-400",t),target:o?"_blank":void 0,...u,children:s});return c?("string"==typeof c&&(c={content:c}),(0,a.jsx)(i.Tooltip,{...c,children:m})):m}},29660:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var a=s(54857),r=s(96541),l=s(78692),n=s(53317);let i=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(l.bL,{className:(0,n.cn)("relative overflow-hidden",s),ref:t,...i,children:[(0,a.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(o,{}),(0,a.jsx)(l.OK,{})]})});i.displayName=l.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...i}=e;return(0,a.jsx)(l.VM,{className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),orientation:r,ref:t,...i,children:(0,a.jsx)(l.lr,{className:"bg-border relative flex-1 rounded-full"})})});o.displayName=l.VM.displayName},10373:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});var a=s(54857),r=s(90229),l=s(16617);function n(e){let{children:t,pending:s,spinnerSide:n="left",...i}=e;return(0,a.jsx)(l.$,{...i,disabled:i.disabled||s,size:"sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[s&&"left"===n?(0,a.jsx)(r.y,{size:16}):null,t,s&&"right"===n?(0,a.jsx)(r.y,{size:16}):null]})})}},18173:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>h,TabsList:()=>x,TabsTrigger:()=>f,a:()=>g});var a=s(54857),r=s(96541),l=s(83923),n=s(97682),i=s(37622),o=s(73927),c=s(67401),d=s(8066);let u={stiffness:300,damping:30,type:"spring",duration:.3},m=r.createContext(null);function p(){let e=r.useContext(m);if(!e)throw Error("useTabs must be used within a TabsProvider");return e}let h=r.forwardRef((e,t)=>{let{children:s,defaultValue:n,value:i,mode:c,onValueChange:d,variant:u="pills",...p}=e,h=r.useId(),[x,f]=r.useState(null!=i?i:n),g=(0,o.usePathname)();r.useEffect(()=>{"link"===c?f(g):void 0!==i&&f(i)},[i,g,c]);let v=r.useMemo(()=>({activeTab:x,setActiveTab:f,layoutId:h,variant:u,mode:c}),[x,h,u,c]);return(0,a.jsx)(m.Provider,{value:v,children:(0,a.jsx)(l.bL,{defaultValue:n,onValueChange:e=>{"link"!==c&&(f(e),null==d||d(e))},value:i,...p,ref:t,children:s})})});h.displayName=l.bL.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e,{variant:n}=p();return(0,a.jsx)(l.B8,{className:(0,i.cn)("bg-background flex h-8 gap-0.5","pills"===n&&"items-center rounded-lg border px-[0.2rem] py-1","underline"===n&&"items-end border-b ","secondary"===n&&"items-center",s),ref:t,...r})});x.displayName=l.B8.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...m}=e,h=(0,o.useRouter)(),{activeTab:x,layoutId:f,variant:g,mode:v}=p(),j=x===m.value,b=(0,a.jsxs)(l.l9,{className:(0,i.cn)("ring-offset-background relative inline-flex justify-center gap-1.5 whitespace-nowrap rounded-md bg-transparent px-2 text-sm font-medium text-gray-500 ring-blue-600 transition-all hover:text-gray-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 has-[>svg]:pl-1.5 data-[state=active]:text-gray-900 [&>svg]:pointer-events-none","underline"===g?"h-8":"h-6 items-center","secondary"===g&&"h-[28px]","secondary"===g&&j&&"text-foreground",s),ref:t,tabIndex:"link"===v?-1:void 0,...m,children:[j?"underline"===g?(0,a.jsx)(n.P.div,{className:"absolute inset-x-2 -bottom-px h-[2px] bg-gray-900",layoutId:"".concat(f,"-underline"),transition:u}):"secondary"===g?(0,a.jsx)(n.P.div,{className:"absolute inset-0 rounded-md bg-gray-200",layoutId:"".concat(f,"-hover"),transition:u}):(0,a.jsx)(n.P.div,{className:"absolute inset-0 rounded-md bg-gray-100",layoutId:"".concat(f,"-hover"),transition:u}):null,(0,a.jsx)("div",{className:"relative z-10 flex items-center gap-1.5",children:r})]});return"link"===v?(0,a.jsx)(c.N,{onMouseEnter:()=>{h.prefetch(m.value,{kind:d.PrefetchKind.FULL})},onTouchStart:()=>{h.prefetch(m.value,{kind:d.PrefetchKind.FULL})},prefetch:!0,href:m.value,children:b}):b});f.displayName=l.l9.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.UC,{className:(0,i.cn)("ring-offset-background focus-visible:ring-ring focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",s),ref:t,...r})});g.displayName=l.UC.displayName},89819:(e,t,s)=>{"use strict";s.d(t,{P:()=>a});let a=["ts","typescript","typescriptreact","tsx","javascript","javascriptreact","jsx"]},31487:(e,t,s)=>{"use strict";function a(e,t){var s;return!!((null===(s=e.data)||void 0===s?void 0:s.source)&&e.data.lang&&t.includes(e.data.lang))}s.d(t,{m:()=>a})},74149:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s(77184),r=s(50214),l=s(45076),n=s(56227);async function i(e){let{projectName:t,activeScopeSlug:s,chatId:i,onSuccess:o}=e,c=r.H.safeParse({name:t});if(!c.success)return{errors:c.error.flatten().fieldErrors};try{let{id:e,errors:r,success:c}=await (0,l.E)({name:t,scopeSlug:s,icon:"icon-wand-sparkles"});if(r)return{errors:r};if(c&&e){if(a.oR.success("Project created successfully"),i){let t=await (0,n.M)({payload:{chatId:i,projectId:e,scopeSlug:s}});if(null==t?void 0:t.error)return{errors:{name:["Failed to add chat to newly created project."]}}}return null==o||o(e),{id:e}}return{errors:{name:["Failed to create project."]}}}catch(e){return console.error("Failed to create project:",e),a.oR.error("An unexpected error occurred. Please try again."),{errors:{name:["An unexpected error occurred. Please try again."]}}}}},76236:(e,t,s)=>{"use strict";s.d(t,{I4:()=>d,eu:()=>c,oQ:()=>m,y6:()=>u,z6:()=>p});var a=s(57045),r=s(66117),l=s(62841),n=s(96541),i=s(80612),o=s(56847);function c(){let{chatId:e}=(0,l.xz)(),{data:t}=(0,i.Ay)(["active-block",e]);return t}function d(){let{chatId:e}=(0,l.xz)(),{data:t}=(0,i.Ay)(["block-view",e]);return!!t}function u(){let{chatId:e}=(0,l.xz)(),{mutate:t}=(0,o.iX)();return(0,n.useCallback)(s=>{t(["active-block",e],null!=s?s:null,!1)},[e,t])}function m(){let{chatId:e}=(0,l.xz)(),{mutate:t}=(0,o.iX)();return(0,n.useCallback)((s,a)=>{s?t(["active-block",e],a,!1):t(["active-block",e],null,!1),t(["block-view",e],s,!1)},[e,t])}function p(){let{messages:e}=(0,l.Pk)(),t=c(),s=m();return(0,n.useCallback)((l,n)=>{if(!t)return;let i=()=>{let t;if(!n)return void s(!1);let r=-1;for(let s of e.map(e=>{var t;return(0,a.sY)(null!==(t=e.content)&&void 0!==t?t:"",e.id)}).flat()){if(!s)continue;let e=n.findIndex(e=>e===s.messageId);e>-1&&e>=r&&(r=e,t=s)}if(!t){s(!1);return}s(!0,t)};if(!l){s(!1);return}if(l===t.messageId){i();return}new Set((0,r.Ir)(e.map(e=>({...e,messageId:e.id})),l)).has(t.messageId)&&i()},[t,e,s])}},71705:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var a=s(62841),r=s(80612),l=s(96541);function n(){let{chatId:e}=(0,a.xz)(),{data:t,mutate:s}=(0,r.Ay)(["blocks-deployed",e],{fallbackData:new Map});return{getBlockDeployed:(0,l.useCallback)(e=>{var s;return null!==(s=null==t?void 0:t.get(e))&&void 0!==s&&s},[t]),setBlockDeployed:(0,l.useCallback)((e,a)=>{s(new Map(null==t?void 0:t.set(e,a)))},[t,s])}}},95360:(e,t,s)=>{"use strict";s.d(t,{M9:()=>o,_t:()=>c,kL:()=>d,py:()=>u});var a=s(80612),r=s(96541),l=s(25388),n=s(4126),i=s(43393);function o(){let{data:e,mutate:t}=(0,a.Ay)("project:id");return{projectId:e,setProjectId:t}}function c(){let{data:e,mutate:t}=(0,a.Ay)("projects:for-user"),s=(0,r.useCallback)(e=>{t(t=>({selectedProjectId:e,projects:(null==t?void 0:t.projects)||[]})),l.A.set(n.PR,e||"",{expires:n.Cy})},[t]);return{projects:(null==e?void 0:e.projects)||[],selectedProjectId:(null==e?void 0:e.selectedProjectId)||null,setSelectedProjectId:s}}function d(e,t){let{activeScopeSlug:s}=(0,i.k6)(),{projectId:r}=o(),l=e||r,{data:n,mutate:c,isLoading:d}=(0,a.Ay)(l?["project:instructions",l]:null,async e=>{let[t,a]=e;if(!a)throw Error("No project ID");let r=new URLSearchParams;r.set("projectId",a),s&&r.set("scope",s);let l=await fetch("/chat/api/projects/instructions?projectId=".concat(a,"&scope=").concat(s));if(!l.ok)throw Error("Failed to load project instructions");return l.json()},{shouldRetryOnError:!1,revalidateIfStale:!0,revalidateOnMount:!0,fallbackData:{instructions:t||""}});return{instructions:(null==n?void 0:n.instructions)||"",updateInstructions:c,isReady:!d}}function u(e){let{activeScopeSlug:t}=(0,i.k6)(),{projectId:s}=o(),l=e||s,{data:n,mutate:c,error:d,isValidating:u}=(0,a.Ay)(l?["project:sources",l]:null,async e=>{let[s,a]=e;if(!a)throw Error("No project ID");let r=new URLSearchParams;r.set("projectId",a),t&&r.set("scope",t);let l=await fetch("/chat/api/projects/sources?".concat(r.toString()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw console.error("Failed to load project sources:",l.status,l.statusText),Error("Failed to load project sources");let n=await l.json();if(!n)throw Error("Failed to load project sources");return n},{revalidateIfStale:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateOnMount:!0,refreshInterval:e=>(null==e?void 0:e.some(e=>"processing"===e.status&&!e.isOptimistic))?500:0}),m=!!d;(0,r.useEffect)(()=>{m&&console.error("Failed to load project sources:",d)},[m,d]);let p=(0,r.useCallback)(()=>{c()},[c]);return{sources:n||[],setSources:c,revalidateSources:p,isLoading:!n&&!d||!l||!t,isValidating:u}}},76140:(e,t,s)=>{"use strict";s.d(t,{X:()=>r});var a=s(80612);function r(){let{data:e}=(0,a.Ay)("block:is-published");return{isPublished:e||!1}}},38464:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var a=s(62841),r=s(80612),l=s(96541),n=s(76265),i=s(77184);function o(){let{chatId:e}=(0,a.xz)(),{data:t,mutate:s}=(0,r.Ay)(["blocks-shared",e],{fallbackData:new Map});return{getBlockShared:(0,l.useCallback)(e=>{var s;return null!==(s=null==t?void 0:t.get(e))&&void 0!==s&&s},[t]),setBlockShared:(0,l.useCallback)((e,a)=>{s(new Map(null==t?void 0:t.set(e,a)));try{(0,n.E)({blockId:e,shared:a})}catch(e){(0,i.oR)("Failed to update block publish status")}},[t,s]),updateBlockInSharedMap:(0,l.useCallback)((e,a)=>{s(new Map(null==t?void 0:t.set(e,a)))},[t,s])}}},58678:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});var a=s(53317),r=s(80612),l=s(43393);function n(){let{activeScopeSlug:e,isActiveScopeReady:t}=(0,l.k6)(),{data:s,isLoading:n}=(0,r.Ay)(t&&e?"".concat("/chat/api/projects","?scopeSlug=").concat(e):null,a.GO);return{projects:s,isReady:!n}}},65002:(e,t,s)=>{"use strict";function a(e,t){return e.slice().sort(t)}s.d(t,{n:()=>a})},63558:(e,t,s)=>{"use strict";s.d(t,{w:()=>l});var a=s(96541),r=s(37180);function l(e){return{formRef:(0,a.useRef)(null),onKeyDown:(0,a.useCallback)(t=>{let s=t.currentTarget.value.trim(),a=""===s&&(null==e?void 0:e.localFileInfos)&&e.localFileInfos.length>0;if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){if(r.nr&&r.xl&&229===t.keyCode)return;t.preventDefault(),a?e.submitMessage():s.length>0&&(null==e||e.submitMessage())}},[e])}}},98304:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var a=s(77184),r=s(30371);function l(e){let{data:t,isLoading:s,error:l}=(0,r.A)(e||null,e=>fetch("/chat/api/chat/download?url=".concat(e)).then(e=>e.text()));return l&&a.oR.error("Failed to load file content"),{content:t,isLoading:s}}},28638:(e,t,s)=>{"use strict";s.d(t,{A:()=>N});var a=s(96541),r=s(79160),l=s(77184),n=s(79100),i=s(75678),o=s(73927),c=s(67605);let d=(0,c.createServerReference)("400a41bf58ebdfb547f4136b27ce9feb69326a8d6c",c.callServer,void 0,c.findSourceMapURL,"importChat");var u=s(41773),m=s(15419),p=s(17978),h=s(2668),x=s(97546),f=s(38651),g=s(821),v=s(93155),j=s(43393),b=s(4126);let y=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],w=e=>new Promise((t,s)=>{let a=new Image;a.onload=()=>{t({width:a.naturalWidth,height:a.naturalHeight})},a.onerror=()=>{s(Error("Failed to load image"))},a.src=URL.createObjectURL(e)}),N=e=>{let{isSignedIn:t,dragContainerRef:s,projectId:c,onFinish:y,onSuccess:N,onUploadStart:S,disablePaste:I,disableDrag:P,saveToDrafts:L=!0}=e,R=c?"project-source":"prompt-attachment",{draft:E,handleSavePromptDraft:z}=(0,p.jh)(),M=(0,a.useRef)(null),[F,A]=(0,a.useState)(!1),[D,T]=(0,a.useState)(L&&(null==E?void 0:E.source)==="cookie"&&E.localFileInfos||[]),{user:U,activeScopeSlug:O,isTeam:_}=(0,j.k6)(),V=(0,x.f)(),{revalidate:B}=(0,u.m)(),[$,H]=(0,a.useState)(!1),q=(0,o.useRouter)(),{setShowSignInDialog:W}=(0,r.AO)(),[Y,Q]=(0,a.useState)(new Map);(0,a.useEffect)(()=>{L&&(null==E?void 0:E.source)!=="cookie"&&(T((null==E?void 0:E.localFileInfos)||[]),Q(new Map(Object.entries((null==E?void 0:E.fileMap)||{}))))},[L,E]);let Z=(0,a.useCallback)(async e=>{try{if(!t){W({prompt:!1});return}if(Y.size+e.length>b.qN[R]){l.oR.error("You can only upload up to ".concat(b.qN[R]," files"));return}A(!0);let a=[],r=[];async function s(e){let t,s;let o=(0,g.l)();if(e.name.startsWith(i.Q)&&(null==U?void 0:U.isAdminMode)&&!c){let t=await d({payload:{file:e,teamSlug:_?O:void 0}});return"error"in t?{status:"error",message:t.error}:(B(),l.oR.success("Chat imported successfully"),q.push("/chat/".concat(t.chatId)),{status:"success"})}if((0,m.Ye)(e.type)){let t=V.image.maxSizeBytes;if(e.size>t)return{status:"error",message:"".concat(e.name," is larger than ").concat((0,m.IG)(t))};let s=await w(e),{short:a,long:r}=V.image.maxDimensionsPixels,l=Math.max(s.width||0,s.height||0),n=Math.min(s.width||0,s.height||0);if(l>r||n>a)return{status:"error",message:"".concat(e.name," exceeds the maximum dimensions. Long side must be less than or equal to ").concat(r,"px and short side must be less than or equal to ").concat(a,"px.")}}(0,m.Lu)(e.type,e.name.split(".").pop())&&(t=await e.text());let u=e.type.startsWith("image/")?(0,h.Ln)(e):(0,h.bP)(t||""),p={id:o,name:e.name,url:URL.createObjectURL(e),content:t,status:"uploading",size:e.size,isImage:e.type.startsWith("image/"),tokens:u,v0Type:e.v0Type};T(e=>[...e,p]),null==S||S(p);let{pathname:x,clientPayload:j}=await C({file:e,scopeSlug:_?O:void 0,component:R});try{s=await (0,n.Se)(x,e,{access:"public",handleUploadUrl:"/chat/api/chat/upload",clientPayload:JSON.stringify(j)})}catch(s){(0,f.u)("FileUploadError",{fileName:e.name,fileType:e.type,errorMsg:String(s)}),console.error("Failed to upload ".concat(e.name,": ").concat(String(s))),T(e=>e.filter(e=>e.id!==o));let t="Failed to upload file "+e.name;return s instanceof v.CW&&(t="File type not allowed"),{status:"error",message:t}}if(c){var b;(0,f.u)("UploadSource",{projectId:c,extension:null===(b=e.name.split(".").pop())||void 0===b?void 0:b.toLowerCase(),type:e.type});let t={projectId:c,filename:e.name,url:s.url,scope:O},a=await fetch("/chat/api/projects/sources",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!a.ok){let e;try{e=(await a.json()).error}catch(t){e="Failed to start file indexing"}return{status:"error",message:e}}}let y={...s,name:e.name,size:e.size,v0Type:e.v0Type};return T(e=>{let t=e.map(e=>e.id===o?{...e,status:"done",url:s.url,contentType:s.contentType}:e);return L&&z({localFileInfos:t.map(e=>({...e,isSavedDraft:!0}))}),t}),r.push(y),Q(e=>{let t=new Map(e).set(o,y);return L&&z({fileMap:Object.fromEntries(t)}),t}),a.push(p),{status:"success"}}let o=await Promise.allSettled(e.map(s)),u=!1;for(let e of o){if("rejected"===e.status){u=!0,l.oR.error("Failed to upload file");continue}if("error"===e.value.status){u=!0,l.oR.error(e.value.message);continue}}u||null==N||N(r)}catch(e){l.oR.error("Unexpected error while uploading files")}A(!1),null==y||y()},[y,t,Y.size,R,W,null==U?void 0:U.isAdminMode,c,S,_,O,B,q,V.image.maxSizeBytes,V.image.maxDimensionsPixels,L,z,N]),G=(0,a.useCallback)(async e=>{if(H(!1),F||(e.preventDefault(),e.stopPropagation(),!e.dataTransfer))return;if(!t){W({prompt:!1});return}let{files:s,items:a}=e.dataTransfer,r=a?await k(Array.from(a)):await k(Array.from(s));r.ok&&await Z(r.value)},[t,W,Z,F,H]);(0,a.useEffect)(()=>{if(I)return;let e=async e=>{if(e.clipboardData){let t=e.clipboardData.items,s=[],a=async()=>{for(let e of t)if("file"===e.kind){let t=e.getAsFile();if(t){if((0,m.Ye)(t.type)){let e=V.image.maxSizeBytes;if(t.size>e){l.oR.error("".concat(t.name," is larger than ").concat((0,m.IG)(e)));return}}s.push(t)}}s.length>0&&await Z(s)};await a()}};return window.addEventListener("paste",e),()=>{window.removeEventListener("paste",e)}},[V.image.maxSizeBytes,t,W,Z,I]),(0,a.useEffect)(()=>{let e=document.documentElement;if(P)return;let t=(null==s?void 0:s.current)||window,a=()=>{H(!0)},r=()=>{H(!1)},l=e=>{e.preventDefault(),e.stopPropagation()};return t.addEventListener("dragenter",a),e.addEventListener("mouseleave",r),t.addEventListener("dragover",l),t.addEventListener("drop",G),()=>{t.removeEventListener("dragenter",a),e.removeEventListener("mouseleave",r),t.removeEventListener("dragover",l),t.removeEventListener("drop",G)}},[G,s,P]);let J=async e=>{if(!e.target.files)return;let t=await k(Array.from(e.target.files));t.ok&&(await Z(t.value),e.target.value="")};return{blobs:Array.from(Y.values()),reset:()=>{T([]),Q(new Map),L&&z({localFileInfos:[],fileMap:{}})},uploading:F,localFileInfos:D,isDraggingFile:$,inputFileRef:M,onInputChange:J,removeFile:e=>{T(t=>{let s=t.filter(t=>t.id!==e);return L&&z({localFileInfos:s}),s}),Q(t=>{let s=new Map(t);return s.delete(e),L&&z({fileMap:Object.fromEntries(s)}),s})},uploadFiles:Z}};async function k(e){let t=[];if(!(null==e?void 0:e.length))return{ok:!1};let s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.isFile)return[await new Promise(t=>e.file(t))];if(e.isDirectory){let a=e.createReader(),r=await new Promise(e=>a.readEntries(e));return(await Promise.all(r.map(a=>s(a,t+e.name+"/")))).flat()}return[]},a=[];for(let s of e)if("webkitGetAsEntry"in s){let e=s.webkitGetAsEntry();e&&a.push(e)}else t.push(s);for(let e of a){let a=await s(e);t.push(...a)}let r=[];for(let e=0;e<t.length;e++){var n;let s=null===(n=t[e].name.split(".").pop())||void 0===n?void 0:n.toLowerCase();if(".DS_Store"!==t[e].name){if(!s)return l.oR.error("Unsupported file type "+s),{ok:!1};r.push(t[e])}}return{ok:!0,value:r}}async function C(e){var t,s;let{file:a,scopeSlug:r,component:l}=e,n=a.name,i=a.type,o=null===(t=a.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();if(a.type.startsWith("image/")){let e=function(e){for(let{bytes:t,mimeType:s}of y)if(e.length>=t.length&&t.every((t,s)=>e[s]===t))return s}(new Uint8Array(await a.arrayBuffer()));i=null!=e?e:a.type,o=null!==(s=null==e?void 0:e.split("/")[1])&&void 0!==s?s:o,n=a.name.endsWith(".".concat(o))?a.name:"".concat(a.name,".").concat(o)}return{pathname:n,clientPayload:{component:l,fileType:i,extension:o,scopeSlug:r}}}(0,a.createContext)({hasUploadedFiles:!1,isUploadingFiles:!1})},30856:(e,t,s)=>{"use strict";s.d(t,{D:()=>i,FlagsProvider:()=>n});var a=s(54857),r=s(96541);let l=(0,r.createContext)(null);function n(e){let{children:t,promise:s,middlewareFlags:n}=e,i={};for(let e of n)i[e]=!0;let[o,c]=(0,r.useState)(i);return(0,r.useEffect)(()=>{s.then(e=>{(0,r.startTransition)(()=>{c(e)})})},[s]),(0,a.jsx)(l.Provider,{value:o,children:t})}function i(){let e=(0,r.useContext)(l);if(null===e)throw Error("");return e}},55703:(e,t,s)=>{"use strict";s.d(t,{e:()=>o});var a=s(96541),r=s(76236),l=s(62841),n=s(57045);let i=e=>"last-opened-block:".concat(e);function o(){let{messages:e,chatId:t,activeForkKey:s}=(0,l.Pk)(),o=(0,r.oQ)();return{reopenLastBlock:(0,a.useCallback)(()=>{var a,r;let l=localStorage.getItem(i(t));if(l)for(let t of e.filter(e=>null==s?void 0:s.includes(e.id))){let e=(0,n.sY)(null!==(a=t.content)&&void 0!==a?a:"",t.id).find(e=>e.id===l);if(e)return o(!0,e),!0}for(let t of[...e].reverse().filter(e=>null==s?void 0:s.includes(e.id))){let e=(0,n.sY)(null!==(r=t.content)&&void 0!==r?r:"",t.id);return o(!0,e[e.length-1]),!0}return!1},[e,o,t,s]),saveLastOpenedBlock:(0,a.useCallback)(e=>{e?localStorage.setItem(i(t),e):localStorage.removeItem(i(t))},[t])}}},61087:(e,t,s)=>{"use strict";s.d(t,{L:()=>r});var a=s(96541);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,s]=(0,a.useState)(new Set(e));return{values:[...t],has:e=>t.has(e),toggle:e=>s(t=>new Set(t.delete(e)?t:t.add(e))),clear:()=>s(new Set)}}},884:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(2668),r=s(15419);function l(e){for(let t=e.length-1;t>=0;t--)if("usage"in e[t]&&e[t].usage)return e[t].usage.totalTokens;return e.reduce((e,t)=>{if("attachments"in t){var s;null===(s=t.attachments)||void 0===s||s.forEach(t=>{var s;let a=t.contentType;a&&(0,r.Ye)(a)?e+=1600:(a&&(0,r.Lu)(a,null===(s=t.name)||void 0===s?void 0:s.split(".").pop()),e+=1e3)})}let l="string"==typeof t.content?t.content:"";return e+(0,a.bP)(l)},0)}},15419:(e,t,s)=>{"use strict";function a(e){return e.startsWith("image/")&&!e.includes("svg")}function r(e){return(e/1048576).toFixed(2).replace(/\.?0+$/,"")+"MB"}s.d(t,{IG:()=>r,Lu:()=>i,Ye:()=>a,lg:()=>n});let l=["text/plain","text/markdown","text/html","application/json","text/csv","text/x-python","application/typescript","text/tsx","text/jsx","text/markdown","text/html","text/css","application/yaml","application/yml","application/sql","application/x-sql","application/xml"],n=["txt","md","json","csv","py","ts","tsx","js","jsx","log","html","css","yml","yaml","mermaid","mjs","mts","sql","map","xml"];function i(e,t){return l.includes(e)||n.includes(t)}},821:(e,t,s)=>{"use strict";s.d(t,{Ok:()=>r,l:()=>l});var a=s(63047);let r=()=>(0,a.$C)(32),l=()=>(0,a.$C)(21)},60349:(e,t,s)=>{"use strict";s.d(t,{SR:()=>l});let a=["mermaid","math","csv","toolcall","local"],r=new Map([["mermaid","mermaid"],["math","math"],["csv","csv"],["toolcall","toolcall"],["local","local"],["abap","abap"],["astro","astro"],["bat","bat"],["cmd","bat"],["bib","bibtex"],["bibtex","bibtex"],["clj","clojure"],["cljs","clojure"],["cljc","clojure"],["clojure","clojure"],["coffee","coffeescript"],["coffeescript","coffeescript"],["c","c"],["h","c"],["cpp","cpp"],["cc","cpp"],["cxx","cpp"],["hpp","cpp"],["hh","cpp"],["hxx","cpp"],["cs","csharp"],["csharp","csharp"],["docker-composeyml","dockercompose"],["docker-composeyaml","dockercompose"],["dockercompose","dockercompose"],["css","css"],["cu","cuda-cpp"],["cuh","cuda-cpp"],["cuda-cpp","cuda-cpp"],["d","d"],["pas","pascal"],["pascal","pascal"],["diff","diff"],["patch","diff"],["dockerfile","dockerfile"],["erl","erlang"],["hrl","erlang"],["erlang","erlang"],["fs","fsharp"],["fsi","fsharp"],["fsx","fsharp"],["fsharp","fsharp"],["gitcommit","git-commit"],["git-commit","git-commit"],["gitrebase","git-rebase"],["git-rebase","git-rebase"],["go","go"],["groovy","groovy"],["gvy","groovy"],["gy","groovy"],["gsh","groovy"],["hbs","handlebars"],["handlebars","handlebars"],["haml","haml"],["hs","haskell"],["lhs","haskell"],["haskell","haskell"],["html","html"],["htm","html"],["ini","ini"],["java","java"],["mjs","javascript"],["cjs","javascript"],["js","javascript"],["javascript","javascript"],["jsx","javascriptreact"],["javascriptreact","javascriptreact"],["json","json"],["jsonc","jsonc"],["jl","julia"],["julia","julia"],["kt","kotlin"],["kts","kotlin"],["kotlin","kotlin"],["tex","latex"],["latex","latex"],["less","less"],["lua","lua"],["makefile","makefile"],["mk","makefile"],["md","markdown"],["mdx","markdown"],["markdown","markdown"],["m","objective-c"],["objective-c","objective-c"],["mm","objective-cpp"],["objective-cpp","objective-cpp"],["ml","ocaml"],["mli","ocaml"],["ocaml","ocaml"],["pl","perl"],["pm","perl"],["t","perl"],["perl","perl"],["p6","perl6"],["pl6","perl6"],["pm6","perl6"],["perl6","perl6"],["php","php"],["txt","plaintext"],["plaintext","plaintext"],["ps1","powershell"],["psm1","powershell"],["psd1","powershell"],["powershell","powershell"],["jade","jade"],["pug","pug"],["py","python"],["rpy","python"],["pyw","python"],["cpy","python"],["python","python"],["r","r"],["cshtml","razor"],["razor","razor"],["rb","ruby"],["rbx","ruby"],["rjs","ruby"],["gemspec","ruby"],["ruby","ruby"],["rs","rust"],["rust","rust"],["scss","scss"],["sass","sass"],["shader","shaderlab"],["shaderlab","shaderlab"],["sh","shellscript"],["bash","shellscript"],["zsh","shellscript"],["shellscript","shellscript"],["slim","slim"],["sql","sql"],["styl","stylus"],["stylus","stylus"],["svelte","svelte"],["swift","swift"],["ts","typescript"],["typescript","typescript"],["terraform","terraform"],["tf","terraform"],["hcl","terraform"],["tsx","typescriptreact"],["typescriptreact","typescriptreact"],["tex","tex"],["vb","vb"],["vue","vue"],["vue-html","vue-html"],["svg","xml"],["xml","xml"],["xsl","xsl"],["xslt","xsl"],["yaml","yaml"],["yml","yaml"]]);function l(e){var t;if(!e)return"plaintext";let s=null!==(t=r.get(e))&&void 0!==t?t:"plaintext";return a.includes(s)?"plaintext":s}new Map(Array.from(r.entries()).map(e=>{let[t,s]=e;return[s,t]})).set("typescriptreact","tsx")},21731:(e,t,s)=>{"use strict";s.d(t,{QZ:()=>o,TN:()=>n,br:()=>i});var a=s(54857),r=s(36690);let l=/^#([0-9a-f]{6}|[0-9a-f]{8})$/i;function n(e){return l.test(e)}function i(e){let{value:t,...s}=e;return(0,a.jsxs)("code",{...s,className:"font-mono font-normal before:hidden rounded-[0.375rem] border bg-gray-100 px-[0.15rem] h-5 after:hidden inline-flex items-center gap-0.5 align-middle",children:[(0,a.jsx)("span",{className:"inline-block size-3 rounded-[0.2rem] border",style:{backgroundColor:t}}),t]})}function o(){function e(e){if(-1===e.indexOf("#")||!l.test(e))return e;let t=[];for(;;){let s=l.exec(e);if(!s)break;let a=s[0],r=s.index;r>0&&t.push({type:"text",value:e.substring(0,r)}),t.push({type:"inlineCode",value:a}),e=e.substring(r+a.length)}return e.length>0&&t.push({type:"text",value:e}),t}return t=>{(0,r.T)(t,[[/#([0-9a-f]{6}|[0-9a-f]{8})\b/gi,e]],{ignore:["html","link","linkReference","image","imageReference","code","inlineCode"]})}}},57045:(e,t,s)=>{"use strict";s.d(t,{A4:()=>e7,sY:()=>te,LU:()=>ts,h:()=>tt});var a=s(54857),r=s(96541);s(80199);var l=s(16617),n=s(37622),i=s(39234),o=s(12550);function c(e){return(0,a.jsx)("div",{className:"bg-muted my-4 space-y-4 rounded-lg border px-4 pb-6 pt-2",children:e.children})}function d(e){let{value:t,selected:s,onClick:r,children:l,index:i}=e;return(0,a.jsxs)("label",{className:"flex w-full cursor-pointer flex-col",children:[(0,a.jsx)("input",{className:"size-0",defaultChecked:s,name:"answer",onClick:r,type:"radio",value:t}),(0,a.jsxs)("span",{className:(0,n.cn)("bg-background flex items-center justify-start gap-3 px-4 py-3 transition-colors",s&&"bg-blue-100"),children:[(0,a.jsx)("span",{className:(0,n.cn)("flex size-5 select-none items-center justify-center rounded-full bg-blue-100 text-center text-xs font-semibold text-blue-800 transition-colors",s&&"bg-blue-400 text-white"),children:String.fromCharCode(65+i)}),l]})]})}function u(e){let{correct:t,selected:s,className:r}=e;return t||s?(0,a.jsx)("span",{className:(0,n.cn)("inline-block size-6 shrink-0 rounded-full p-1 align-middle",t?"bg-blue-100 text-blue-600":"bg-red-100 text-red-500",r),children:t?(0,a.jsx)(i.r,{}):(0,a.jsx)(o.$,{})}):null}function m(e){let{answer:t,correctAnswer:s}=e;return(0,a.jsxs)("span",{className:(0,n.cn)("animate-slideDownAndFade flex select-none items-center justify-center gap-1 rounded-full py-1 pl-3 pr-5",t===s&&"bg-blue-100 text-blue-600",t&&t!==s&&"bg-red-100 text-red-500"),children:[void 0!==t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{correct:t===s,selected:!0})," "]}),void 0===t?(0,a.jsxs)(a.Fragment,{children:["The correct answer is: ",(0,a.jsx)("strong",{children:s})]}):t===s?(0,a.jsx)("span",{className:"font-bold text-blue-600",children:"Correct"}):(0,a.jsx)("span",{className:"font-bold text-red-500",children:"Incorrect"})]})}function p(e){let{answers:t,correctAnswer:s,question:n}=e,[i,o]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1);return(0,a.jsxs)(c,{children:[(0,a.jsx)("p",{className:"text-md px-4 text-center font-semibold md:px-8 lg:px-12",children:n}),(0,a.jsx)("div",{className:"mx-0 flex flex-col divide-y overflow-hidden rounded-md border md:mx-8 lg:mx-12",children:t.map((e,t)=>(0,a.jsxs)(d,{index:t,onClick:()=>{x||o(e)},selected:e===i,value:e,children:[(0,a.jsx)("span",{className:"flex-1",children:e}),p?(0,a.jsx)(u,{className:"animate-slideDownAndFade ml-2",correct:e===s,selected:e===i}):null]},e))}),(0,a.jsx)("div",{className:"flex justify-center",children:p&&null!==i?(0,a.jsx)(m,{answer:i,correctAnswer:s}):(0,a.jsx)(l.$,{className:"h-9 select-none",disabled:null===i,onClick:()=>{h(!0),f(!0)},size:"sm",children:"Check answer"})})]})}var h=s(57363);function x(e){let{children:t,className:s,...r}=e;return(0,a.jsx)("div",{className:(0,h.A)("steps mb-12 ml-2 border-l border-gray-200 pl-5 sm:ml-4 sm:pl-6","[counter-reset:step]",s),...r,children:t})}s(42757);var f=s(72380);function g(e){let{title:t}=e;return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-100 p-4 shadow-sm",children:[(0,a.jsx)("p",{className:"mb-2 mt-0 font-medium text-gray-600",children:t}),(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),(0,a.jsx)("div",{className:"mt-2 h-4 w-1/2 rounded bg-gray-200"}),(0,a.jsx)("div",{className:"mt-2 h-4 w-3/4 rounded bg-gray-200"})]})]})}var v=s(94592);function j(e){let{language:t,children:s}=e;return(0,a.jsx)(v.N,{allowCopyCode:!0,allowDownloadCode:!1,caller:"inline",className:"not-prose mb-6 max-h-[500px] md:max-h-[700px]",headerClassName:"bg-muted",language:t,showLineNumbers:!1,value:s,closed:!0,blockId:"syntax-highlighter-block",originalCode:void 0,showQuickEditAnimation:!1})}var b=s(76236),y=s(38651),w=s(91886),N=s(96737),k=s(3281),C=s(12350),S=s(68873),I=s(90884),P=s(48587),L=s(38464),R=s(71368),E=s(63713),z=s(90229),M=s(10627),F=s(71705),A=s(31424),D=s(62841),T=s(26970),U=s(55703);function O(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("bg-gray-150 flex h-5 items-center gap-1 rounded-md px-1 text-[12px] text-gray-600",s),children:t})}function _(e){let{closed:t,isStreaming:s,finishReason:r,language:l}=e;return t&&!s&&"stop"===r?(0,a.jsx)(w.o,{lang:l||"plaintext",fill:"fill-gray-500"}):t&&!s&&"length"===r?(0,a.jsx)(T.Tooltip,{content:"v0 cannot output enough tokens to complete the block",children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(P.N,{})})}):t||s||"other"!==r&&r?t||!s||r?(0,a.jsx)(w.o,{lang:l||"plaintext",fill:"fill-gray-500"}):(0,a.jsx)(z.y,{size:16}):(0,a.jsx)(T.Tooltip,{content:"The message was stopped while v0 was writing this Block",children:(0,a.jsxs)("span",{"aria-hidden":!0,children:[" ",(0,a.jsx)(S.v,{color:"currentColor"})]})})}function V(e){let{type:t,blockId:s,messageId:l,isStreaming:i,...o}=e,c=(0,b.I4)(),d=(0,b.eu)(),u=(0,b.oQ)(),{currentBlockIndex:m,projectBlocks:p,latestSource:h}=(0,N.useBlockHistory)({blockId:s}),{getBlockShared:x}=(0,L.L)(),{getBlockDeployed:f}=(0,F.G)(),g=(0,R.k)("blockPreview"),v=(0,M.RQ)(s),j=(0,A.g)({blockId:s}),w=h||o.source,S=(0,D.Pk)(),P=(0,r.useMemo)(()=>S.messages.find(e=>e.id===l&&"assistant"===e.role),[S.messages,l]),T=null==P?void 0:P.finishReason,V=c&&(null==d?void 0:d.id)===s,B="Untitled",$=t;o.meta.project&&(B=o.meta.project),o.meta.file&&($=o.meta.file||t),"local"===t&&(B=o.meta.title),/[_-]/.test(B)&&(B=B.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "));let H=p.find(e=>e.id===s),q=null==H?void 0:H.latestDeploymentInfo,W=(0,r.useRef)(null),{saveLastOpenedBlock:Y}=(0,U.e)(),Q=(0,r.useCallback)(()=>{(0,y.u)("ClickBlockPreview",{blockId:s}),u(!0,{id:s,meta:o.meta,remoteInfo:o.remoteInfo,messageId:l,type:t,language:o.language,source:w,resultId:o.resultId,closed:!!o.closed,hasSourceBeenEdited:!!(null==d?void 0:d.hasSourceBeenEdited),latestDeploymentInfo:q,templateVersionId:null==H?void 0:H.templateVersionId}),Y(s),W.current&&(v("code"),j(W.current),W.current=null,setTimeout(()=>{let e=document.querySelector('[data-active-tab="true"]');e&&e.scrollIntoView({block:"start"})},0))},[s,u,o.meta,o.remoteInfo,o.language,o.resultId,o.closed,l,t,w,null==d?void 0:d.hasSourceBeenEdited,q,null==H?void 0:H.templateVersionId,v,j]),Z=(0,r.useMemo)(()=>x(s)||f(s),[s,x,f]),G="local"===t?(0,a.jsx)(I.H,{className:"size-4 text-gray-500 [&_path]:fill-current"}):(0,a.jsx)(_,{closed:o.closed,isStreaming:i,finishReason:T,language:o.language}),J=(0,r.useCallback)(()=>{if(!V||W.current){Q();let e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("b"),e.search=t.toString(),window.history.replaceState({},"",e.toString());return}u(!1)},[V,Q,u]),K=(0,r.useMemo)(()=>"local"===t||"react-project"===t?(0,E.A2)({source:w,blockType:t,blockId:s}).filter(e=>!e.isMerged&&!(e.isDeleted&&e.isMoved)):[],[w,t,s]);return"react-project"===t?(0,a.jsxs)("div",{className:(0,n.cn)("not-prose bg-background group/block-preview flex w-full max-w-full cursor-pointer select-none flex-col items-start justify-between rounded-[10px] border transition-all duration-200 ease-in-out md:w-[400px]",V?"ring-alpha-400 border-gray-500 ring-2":"hover:ring-alpha-400 border-gray-200 hover:border-gray-300"),onClick:J,children:[(0,a.jsxs)("div",{className:"bg-muted flex w-full items-center justify-between gap-2 rounded-t-[10px] p-2",children:[(0,a.jsx)("div",{className:"size-4",children:(0,a.jsx)("span",{className:"text-gray-500",children:G})}),(0,a.jsxs)("div",{className:"my-0 flex w-full min-w-0 max-w-full items-center gap-2 text-sm font-medium text-gray-900",children:[(0,a.jsx)("div",{className:"min-w-0 shrink truncate",children:B}),Z?(0,a.jsxs)(O,{children:[(0,a.jsx)(C.q,{size:12})," ",g("published")]}):null,(0,a.jsxs)(O,{className:"font-mono",children:["v",m+1]})]}),!V&&(0,a.jsxs)("div",{className:(0,n.cn)("flex shrink-0 items-center justify-end text-gray-500"),children:["Open",(0,a.jsx)(k.m,{className:"mt-px"})]})]}),(0,a.jsx)("div",{className:"w-full border-t border-gray-200"}),(0,a.jsx)("div",{className:"my-0 flex w-full max-w-full flex-col p-2 text-left text-gray-500",children:K.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("button",{className:(0,n.cn)("flex h-4 min-w-0 cursor-pointer items-center gap-2 font-mono text-xs",V&&(e.isDeleted?"hover:cursor-auto":"hover:underline")),onClick:t=>{if(V){if(e.isDeleted)return t.stopPropagation();W.current=e.meta.file}},children:[(0,a.jsx)("div",{className:"flex size-4 shrink-0 items-center justify-center",children:(0,a.jsxs)("span",{className:(0,n.cn)("relative flex size-[10px] items-center justify-center rounded-full bg-gray-300",o.closed||t!==K.length-1?"":"bg-teal-600"),children:[(0,a.jsx)("span",{className:"bg-background absolute left-1/2 top-1/2 size-[8px] -translate-x-1/2 -translate-y-1/2 rounded-full"}),(0,a.jsx)("span",{className:(0,n.cn)("absolute left-1/2 top-1/2 z-10 size-[6px] -translate-x-1/2 -translate-y-1/2 rounded-full bg-gray-300",o.closed||t!==K.length-1?"":"bg-teal-600")})]})}),(0,a.jsx)("div",{className:"truncate text-left",children:o.closed||t!==K.length-1?(0,a.jsx)(a.Fragment,{children:(0,E.Nx)(e,!1)}):(0,a.jsx)(a.Fragment,{children:(0,E.Nx)(e,!0)})})]},t),t!==K.length-1&&(0,a.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:(0,a.jsx)("hr",{className:"h-full w-[1px] bg-gray-300"})})]},"block-edit-"+t))})]}):(0,a.jsxs)("button",{className:(0,n.cn)("not-prose bg-background flex w-full max-w-full select-none items-start justify-between gap-2 rounded-[10px] border p-1.5 transition-all duration-200 ease-in-out hover:brightness-[97%] md:w-[400px]",V?"ring-alpha-400 border-gray-500 ring-2":"border-gray-200"),onClick:J,children:[(0,a.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center overflow-hidden rounded-sm bg-gray-100 px-3 text-gray-500 transition-all duration-200 ease-in-out",children:G}),(0,a.jsx)("div",{className:"flex w-full min-w-0 flex-row items-center justify-between",children:(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start leading-5",children:[(0,a.jsxs)("div",{className:"my-0 flex w-full min-w-0 max-w-full items-center justify-between gap-2 text-sm font-medium text-gray-900",children:[(0,a.jsx)("div",{className:"min-w-0 shrink truncate",children:B}),(0,a.jsxs)("div",{className:"flex shrink-0 gap-1",children:[Z?(0,a.jsxs)(O,{children:[(0,a.jsx)(C.q,{size:12})," ",g("published")]}):null,(0,a.jsxs)(O,{className:"font-mono",children:["v",m+1]}),"local"===t?(0,a.jsx)(O,{className:"bg-lime-100 dark:bg-lime-900",children:"LOCAL"}):null]})]}),"local"!==t?(0,a.jsxs)("p",{className:"my-0 max-w-full truncate text-sm text-gray-500 ",children:[$,(null==d?void 0:d.hasSourceBeenEdited)?(0,a.jsx)("span",{children:" (edited)"}):null]}):(0,a.jsx)("ul",{className:"my-0 w-full max-w-full truncate text-left text-gray-500",children:K.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-1 truncate",children:[e.meta.file,t!==K.length-1||o.closed?null:(0,a.jsx)("span",{children:(0,a.jsx)(z.y,{size:14})})]},t))})]})})]})}var B=s(18058),$=s(39988),H=s(75676),q=s(50552),W=s(17925),Y=s(52381),Q=s(90509),Z=s(78192),G=s(90761),J=s(26998);let K=(0,r.createContext)({}),X="function"==typeof Intl.Segmenter?new Intl.Segmenter("en",{granularity:"word"}):null,ee=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function et(e){let{streaming:t,readonly:s,children:n,messageId:i}=e,o=(0,R.k)("segmenterProvider"),{setQuote:c}=(0,G.sC)(),d=(0,r.useState)(()=>{let e=new Map,t=new Map,s=new Set,a=new Map,r=!1;return(l,n,i,o)=>{n.current&&(e.set(l,n),t.set(l,i),s.add(l),a.set(l,o),r||(r=!0,setTimeout(c,8)));async function c(){if(0===s.size){r=!1;return}let l=s.values().next().value;for(let e of s)e<l&&(l=e);s.delete(l);let n=e.get(l),i=t.get(l),o=a.get(l);if(n&&n.current&&(null==o||o(),i&&i.current)){let e=n.current.textContent;i.current.startsWith(e)||(n.current.textContent="",e="");let t=function(e){let t=[];if(X)for(let{segment:s}of X.segment(e))t.push(s);else{let s=e.split(" ");for(let e=0;e<s.length;e++)e>0&&t.push(" "),t.push(s[e])}return t}(i.current.slice(e.length));for(let s=0;s<t.length&&(e+=t[s],n.current);s++)n.current.textContent=e," "!==t[s]&&await new Promise(e=>setTimeout(e,8))}setTimeout(c,8)}}})[0],u=!0!==s,m=(0,r.useRef)(null),[p,h]=(0,r.useState)(null),x=(0,q.x)(),{refs:f,floatingStyles:g}=(0,B.we)({placement:x?"bottom":"top",middleware:[(0,$.cY)(12),(0,$.mG)(),(0,$.UU)({padding:6})],whileElementsMounted:H.ll}),v=(0,r.useRef)(()=>"");(0,r.useEffect)(()=>{let e=!1,t=()=>{var t;e=!1;let s=window.getSelection();if(null===s||!s.rangeCount){h(null);return}let a=s.getRangeAt(0);if(a.collapsed){h(null);return}let r=null===(t=m.current)||void 0===t?void 0:t.contains(a.commonAncestorContainer),l=m.current;if(!r){let e=!1,t=a.commonAncestorContainer;if(t instanceof HTMLElement){let s=t.closest('[data-seg="code-root"]');s&&s instanceof HTMLElement&&(e=!0,l=s)}if(!e){h(null);return}}for(;0===a.endOffset;)a.setEndBefore(a.endContainer);u&&f.setReference({getBoundingClientRect:()=>a.getBoundingClientRect(),getClientRects:()=>{let e=a.getClientRects(),t=[];t.item=e=>t[e];for(let s=0;s<e.length;s++){let a=e[s];a.width>.1&&a.height>.1&&t.push(a)}return t}}),e=!0,v.current=function(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],s=a.cloneContents();return(0,W.l)(s,a.commonAncestorContainer,a.startOffset>0,(null===(e=a.endContainer.textContent)||void 0===e?void 0:e.length)!==a.endOffset,t)},u&&h(l)};function s(t){if(!e||!t.clipboardData)return;let s=v.current(!1);t.clipboardData.setData("text/markdown",s),t.clipboardData.setData("text/plain",s),t.preventDefault()}return document.addEventListener("selectionchange",t),document.addEventListener("keyup",t),document.addEventListener("copy",s),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("keyup",t),document.removeEventListener("copy",s)}},[f,u]);let[j,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>{var t;null!==(t=f.floating.current)&&void 0!==t&&t.contains(e.target)||b(!0)},s=()=>{b(!1)};return e.addEventListener("pointerdown",t),e.addEventListener("pointerup",s),e.addEventListener("pointerleave",s),()=>{e.removeEventListener("pointerdown",t),e.removeEventListener("pointerup",s),e.removeEventListener("pointerleave",s)}},[f.floating]),(0,Q.ML)("keydown",e=>{var t;"q"===e.key&&p&&(c(v.current()),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),e.stopPropagation(),e.preventDefault())});let y=(0,r.useMemo)(()=>({animate:t?d:void 0}),[t,d]);return(0,a.jsxs)("div",{ref:m,children:[p&&(0,a.jsx)(B.XF,{root:p,children:(0,a.jsxs)("div",{className:"bg-background shadow-base-expand absolute left-0 top-0 z-50 flex select-none items-center gap-1 rounded-lg p-1","data-quote-button":!0,ref:f.setFloating,style:{...g,pointerEvents:j?"none":void 0},children:[(0,a.jsxs)(l.$,{className:"hover:text-foreground rounded-md px-0.5 py-0 text-sm text-gray-500",onClick:()=>{var e;c(v.current()),null===(e=window.getSelection())||void 0===e||e.removeAllRanges()},size:"xs",variant:"ghost",children:[o("quote"),(0,a.jsx)(J.u,{variant:"secondary",children:"Q"})]}),(0,a.jsx)("div",{className:"bg-alpha-400 h-5 w-px"}),(0,a.jsx)(Z.HR,{className:"text-gray-500",messageId:i,quoteRef:v,tooltip:"Downvote Selection",variant:"quote"})]})}),(0,a.jsx)(Y.s,{"data-seg":"root",children:(0,a.jsx)(K.Provider,{value:y,children:n})})]})}var es=s(68022),ea=s(38040),er=s(60346),el=s(79015),en=s(87066),ei=s(46948),eo=s(67382);let ec=eo.bL,ed=eo.R6,eu=eo.Ke;var em=s(6911),ep=s(44079);function eh(e){let{name:t,files:s=[],animated:l=!0}=e,[i,o]=(0,r.useState)(l),[c,d]=(0,r.useState)(s.length<2);(0,r.useEffect)(()=>{if(!l){o(!1);return}let e=setTimeout(()=>o(!1),250);return()=>clearTimeout(e)},[s,l]);let u=l?"animate-shimmer translate-y-px bg-[length:800%_100%] bg-clip-text text-sm text-transparent":void 0,m=l?{backgroundImage:"linear-gradient(90deg,rgb(161 161 170) 0%,rgb(161 161 170) 35%,rgb(212 212 216) 50%,rgb(161 161 170) 65%,rgb(161 161 170) 100%)"}:void 0;return(0,a.jsx)("div",{className:"font-mono text-gray-500",children:(0,a.jsxs)(ec,{open:c,onOpenChange:d,children:[(0,a.jsx)(ed,{asChild:!0,children:(0,a.jsx)("button",{className:(0,n.cn)(u,"mb-2 flex cursor-pointer items-center"),style:m,children:i?t?(0,a.jsxs)(a.Fragment,{children:["Scanning ",s.length," files inside /",t,"..."]}):(0,a.jsxs)(a.Fragment,{children:["Reading ",s.length," files..."]}):(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsxs)(a.Fragment,{children:["Scanned ",s.length," files inside ",t," "]}):(0,a.jsxs)(a.Fragment,{children:["Read ",s.length," files "]}),c?(0,a.jsx)(em.y,{className:"ml-1 h-3 w-3"}):(0,a.jsx)(ep.c,{className:"ml-1 h-3 w-3"})]})})}),(0,a.jsx)(eu,{className:"border-l border-gray-200",children:(0,a.jsx)(ei.N,{children:(0,a.jsx)("ul",{className:"m-0 flex list-none flex-col gap-2 p-0",children:s.map(e=>(0,a.jsx)("li",{className:"m-0 list-none p-0 text-sm",children:e},e))})})})]})})}let ex=r.memo(e=>{let{source:t,streaming:s}=e,r=t.replace(/[^]*Tool call result:\n/,""),l=t.replace(/\nTool call result:[^]+/,""),n=null,i=null;try{n=JSON.parse(l),i=JSON.parse(r)}catch(e){}if(i&&((null==n?void 0:n.type)==="read_dir"||(null==n?void 0:n.type)==="read_file"))return(0,a.jsx)(eh,{name:"read_dir"===n.type?n.dir:void 0,files:"read_dir"===n.type?"files"in i?i.files:[]:Object.keys(("content"in i?i.content:{})||{}),animated:s||!1});let o=(null==n?void 0:n.type)==="computer"&&"screenshot"===n.action&&i&&"data"in i;return(0,a.jsx)("p",{className:"inline-flex cursor-pointer rounded bg-cyan-600/10 px-1.5 py-0.5 text-sm text-cyan-700",children:(0,a.jsxs)("details",{children:[(0,a.jsxs)("summary",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(en.A,{className:"h-3.5 w-3.5"}),l]}),(0,a.jsx)("div",{className:"mb-1 rounded bg-cyan-800/10 p-1 font-mono text-xs",children:o?(0,a.jsx)("img",{className:"max-h-64 max-w-full",src:"data:image/png;base64,".concat(i.data),alt:"Tool call result"}):r})]})})});ex.displayName="Toolcall";var ef=s(97682),eg=s(55315),ev=s(86287),ej=s(10406),eb=s(95360),ey=s(43393),ew=s(34016),eN=s(77126),ek=s(80102),eC=s(69057),eS=s(16607),eI=s(64993),eP=s(67401),eL=s(85903),eR=s(58678),eE=s(37835),ez=s(53239),eM=s(82133),eF=s(77184);let eA={enter:e=>({y:e>0?40:-40,opacity:0}),center:{y:0,opacity:1},exit:e=>({y:e<0?40:-40,opacity:0})},eD=new Intl.ListFormat("en",{style:"long",type:"conjunction"});function eT(e){var t;let{messageId:s,names:n}=e,o=(0,D.Pk)(),{user:c}=(0,er.J)(),d=o.activeForkKey,u=!!d&&d[d.length-1],m=u&&u===s,p=null==d?void 0:d.indexOf(s),h=void 0!==p&&p<d.length?d[p+1]:void 0,x=h&&(null===(t=o.messages.find(e=>e.id===h))||void 0===t?void 0:t.type)==="added-environment-variables",[f,g]=(0,r.useState)({}),[v,j]=(0,r.useState)({}),[b,y]=(0,r.useState)(!1),[w,N]=(0,r.useState)(0),{selectedProjectId:k}=(0,eb._t)(),{activeScopeSlug:C}=(0,ey.k6)(),{submit:S}=(0,ew.y)(),[I,P]=(0,r.useState)(m?"unsubmit":x?"submitted":"cancelled"),{project:L,canWriteToChat:R}=(0,G.tZ)(),E=null==L?void 0:L.vercelProjectId,{projects:z,isReady:M}=(0,eR.D)(),F=null==z?void 0:z.find(e=>e.id===E),{reassignPending:A,handleReassignProject:U}=(0,ez.Z)(),O=n.map(e=>({key:e,alreadyExists:null==F?void 0:F.env.find(t=>t===e)})),_=async()=>{if(!Object.keys(f).length)return eF.oR.error("No environment variables to create. Please try again.");if(!Object.values(f).every(e=>e))return;if(!k)return eF.oR.error("v0 Project ID not found. Please try again.");y(!0);let e=[],t=await (0,ej.g)({envVars:Object.entries(f).map(e=>{let[t,s]=e;return{key:t,value:s}}),v0ProjectId:k,scopeSlug:C,autoCreateVercelProject:!1}).catch(t=>(e.push(t.message),[{success:!1}]));if(e.length)return y(!1),eF.oR.error(e.join(". ")||"Failed to create environment variables.");if(!t){y(!1),eF.oR.error("Failed to create environment variables.");return}y(!1),"success"in t&&t.success?(g({}),N(-1),P("submitted"),await S({action:"new",attachments:[],input:"The environment variable".concat(n.length>1?"s":""," ").concat(eD.format(n)," ").concat(n.length>1?"have":"has"," been added to the [Vercel Project](").concat(null==F?void 0:F.url,")."),type:"added-environment-variables"})):(console.error(e),eF.oR.error(e.join(". ")||"Failed to create environment variables."))};return M?(0,a.jsx)(eg.Zp,{className:"bg-muted w-full max-w-[360px] overflow-hidden shadow-sm",children:(0,a.jsxs)(eg.Wu,{className:"my-0 p-3",children:[(0,a.jsxs)(ei.N,{custom:w,mode:"wait",children:["submitted"===I&&!m&&(0,a.jsx)(ef.P.div,{custom:w,variants:eA,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-center space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-3 text-center",children:[(0,a.jsx)("span",{className:"rounded-full border border-green-200 bg-green-100 p-1.5",children:(0,a.jsx)(i.r,{className:"!text-green-600"})}),(0,a.jsxs)("h2",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,a.jsx)("span",{children:"Environment Variables Added"}),(0,a.jsx)(T.Tooltip,{content:(0,a.jsx)("ul",{children:n.map(e=>(0,a.jsx)("li",{className:"flex items-center space-x-1",children:(0,a.jsx)("span",{children:e})},e))}),children:(0,a.jsx)("span",{className:"text-gray-500",children:(0,a.jsx)(eS.f,{})})})]})]})},"info"),"unsubmit"===I&&m&&(0,a.jsxs)(ef.P.form,{custom:w,variants:eA,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col space-y-4",children:[E||F||k?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-center text-gray-500",children:"To use environment variables, this chat must be inside a v0 Project."}),(0,a.jsx)("div",{className:"mx-auto flex justify-center",children:(0,a.jsx)(eM.o,{handleProjectSelect:U,variant:L?"show":void 0,triggerButton:(0,a.jsxs)(l.$,{disabled:A||!R,variant:"outline",size:"sm",children:[L?null:(0,a.jsx)(eI.F,{className:"size-4 shrink-0"}),(0,a.jsx)("div",{className:"truncate",children:(null==L?void 0:L.name)||(0,a.jsx)("span",{children:"Add to a Project"})})]}),disabled:A,quickCreate:!0})})]}),E||F||!k?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-center",children:["This v0 Project has no"," ",(0,a.jsx)(eP.N,{href:"https://vercel.com/docs/projects/overview",external:!0,children:"Vercel Project"})," ","associated."]}),(0,a.jsx)(eL.VercelProjectSelector,{currentProject:F,projects:z||[],v0ProjectId:k,readOnly:!R})]}),E&&(0,a.jsxs)(a.Fragment,{children:[O.map((e,t)=>{let{key:s,alreadyExists:r}=e;return(0,a.jsx)("div",{className:"relative flex w-full",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("label",{className:"text-xs font-medium text-gray-500",children:[s," ",r&&(0,a.jsx)("span",{children:"*"})]}),(0,a.jsx)(ev.p,{value:f[s]||"",onChange:e=>g({...f,[s]:e.target.value}),placeholder:"Value",autoFocus:0===t,type:v[s]?"text":"password",required:!0,name:s,minLength:1,autoComplete:"off",disabled:!R,size:"sm"}),(0,a.jsx)(ei.N,{children:f[s]&&(0,a.jsx)(T.Tooltip,{content:v[s]?"Hide":"Show",children:(0,a.jsx)(ef.P.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},type:"button",onClick:()=>j({...v,[s]:!v[s]}),className:"absolute right-2 top-8 text-gray-500",children:v[s]?(0,a.jsx)(ek.X,{size:14}):(0,a.jsx)(eN.k,{size:14})},s)})})]})},s)}),O.some(e=>{let{alreadyExists:t}=e;return t})&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"* Environment variable already exists and will be updated."}),(0,a.jsxs)("span",{className:"flex items-center justify-between",children:[(0,a.jsx)("hr",{className:"border-border m-2 border-dashed py-2"}),(0,a.jsx)(l.$,{onClick:_,className:"max-w-[80px] self-end",disabled:b||!R,type:"submit",size:"sm",children:"Submit"})]})]})]},"value"),"cancelled"===I&&(0,a.jsx)(ef.P.div,{custom:w,variants:eA,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-center",children:(0,a.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Environment Variables Not Added"}),(0,a.jsx)(T.Tooltip,{content:(0,a.jsx)("ul",{children:n.map(e=>(0,a.jsx)("li",{className:"flex items-center space-x-1",children:(0,a.jsx)("span",{children:e})},e))}),children:(0,a.jsx)("span",{className:"text-gray-500",children:(0,a.jsx)(eC.$,{})})})]})})},"info")]}),(null==c?void 0:c.isAdminMode)?(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Internal:"}),(0,a.jsxs)("p",{children:["Is most recent message:"," ",m?(0,a.jsx)("span",{children:"True"}):(0,a.jsx)("span",{children:"False"}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{children:["Is next message added env vars:"," ",x?(0,a.jsx)("span",{children:"True"}):(0,a.jsx)("span",{children:"False"})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{children:[" State: ",I]}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{children:[" Message ID: ",s]})]})]}):null]})}):(0,a.jsx)(eg.Zp,{className:"text-muted-foreground bg-muted w-full max-w-[360px] overflow-hidden shadow-sm",children:(0,a.jsx)(eg.Wu,{className:"my-0 p-2",children:(0,a.jsx)(eE.E,{className:"h-[130px] w-full"})})})}var eU=s(21731),eO=s(41856),e_=s.n(eO);let eV={0:"hsl(var(--red-600))",50:"hsl(var(--amber-600))",90:"hsl(var(--green-600))"},eB={tiny:20,small:32,medium:64,large:128},e$={tiny:3,small:2,medium:1,large:1};function eH(e){let{colors:t=eV,value:s,placeholder:l,className:n,arcPriority:i="primary",style:o,size:c,deprecatedSize:d,children:u,showValue:m=!1,...p}=e,x=void 0!==d?d:eB[c],[f,g]=(0,r.useMemo)(()=>{if("primary"in t)return[t.primary,t.secondary];let e=Object.keys(t).map(Number);if(0===e.length)return[void 0,void 0];let a=e.filter(e=>s>=e).pop();return[void 0!==a?t[a]:void 0,void 0]},[t,s]),{circleProps:v,circumference:j,offsetFactor:b,segmentGap:y,primaryStrokePercent:w,secondaryStrokePercent:N}=(0,r.useMemo)(()=>{let e=x<=eB.tiny?15:10,t=2*Math.PI*(50-e/2),a=Math.round(100/t*e)+e$[c];(0===s||s>=100)&&(a=0);let r="equal"===i?.5:0,l=s-2*a*r,n=100-s-2*a*(1-r)-Math.max(1-l,0);return{circleProps:{cx:50,cy:50,r:50-e/2,strokeWidth:e,strokeDashoffset:0,strokeLinecap:"round",strokeLinejoin:"round"},circumference:t,segmentGap:a,primaryStrokePercent:l,secondaryStrokePercent:n,offsetFactor:r}},[i,x,c,s]);return(0,a.jsxs)("div",{className:(0,h.$)(e_().circle,n,{[e_().animate]:!l}),"data-geist-progress-circle":"","data-version":"v1",style:{...o,"--circle-size":"".concat(100,"px"),"--circumference":j,"--percent-to-px":"".concat(j/100,"px"),"--gap-percent":y,"--offset-factor":b},...p,children:[(0,a.jsxs)("svg",{fill:"none",height:x,strokeWidth:"2",viewBox:"0 0 ".concat(100," ").concat(100),width:x,children:[(0,a.jsx)("circle",{style:{opacity:N<0||100===s?0:1,"--stroke-percent":N},...v,className:e_().arcSecondary,stroke:g||"hsl(var(--alpha-400))"}),(0,a.jsx)("circle",{...v,className:e_().arc,"data-geist-progress-circle-fg":"",stroke:f||"var(--geist-foreground)",style:{opacity:0===s?0:1,"--stroke-percent":Math.min(100-y,w)}})]}),u||m?(0,a.jsx)("div",{className:e_().content,children:u||(0,a.jsx)("div",{className:"text-[11px] font-medium text-gray-500",children:s})}):null]})}var eq=s(1332);let eW={firstContentfulPaint:[1.8,3],largestContentfulPaint:[2.5,4],totalBlockingTime:[200,600],cumulativeLayoutShift:[.1,.25]},eY=(e,t)=>{let s=parseFloat(e);return s<t[0]?"good":s<t[1]?"needsImprovement":"poor"};function eQ(){return(0,a.jsxs)(eg.Zp,{className:"not-prose w-full max-w-lg shadow-sm",children:[(0,a.jsx)(eg.aR,{className:"flex p-3",children:(0,a.jsxs)(eg.ZB,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-gray-800",children:[(0,a.jsx)("span",{children:"Lighthouse Report"}),(0,a.jsx)(eE.E,{className:"h-4 w-16"})]})}),(0,a.jsxs)(eg.Wu,{className:"p-0",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",children:Array.from({length:4}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-background-subtle flex items-center gap-3 rounded-[6px]  border p-2",children:[(0,a.jsx)(eH,{value:0,size:"small",children:(0,a.jsx)(eq.I,{color:"hsl(var(--gray-500))",size:18,weight:"bold"})}),(0,a.jsx)(eE.E,{className:"h-4 w-16"})]},t))}),(0,a.jsxs)("div",{className:"flex flex-col border-t border-gray-200 p-3 text-gray-500",children:[(0,a.jsx)(eJ,{label:"First Contentful Paint",isLoading:!0,hasMutedBackground:!0}),(0,a.jsx)(eJ,{label:"Largest Contentful Paint",isLoading:!0}),(0,a.jsx)(eJ,{label:"Total Blocking Time",isLoading:!0,hasMutedBackground:!0}),(0,a.jsx)(eJ,{label:"Cumulative Layout Shift",isLoading:!0})]})]})]})}function eZ(e){let{data:t,href:s}=e;if(!t)return(0,a.jsx)(eg.Zp,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,a.jsx)(eg.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"bg-muted flex flex-col items-center justify-center rounded-[6px] p-8",children:[(0,a.jsx)("div",{className:"mb-4 rounded-full border border-red-200 bg-red-50 p-2 text-red-600",children:(0,a.jsx)(o.$,{})}),(0,a.jsx)("h3",{className:"mb-2 font-medium text-gray-900",children:"Lighthouse Report Failed"}),(0,a.jsx)("p",{className:"max-w-96 text-center text-gray-500",children:"Something went wrong while analyzing the performance of the website. Please try again later."})]})})});let{categories:r,firstContentfulPaint:l,largestContentfulPaint:n,totalBlockingTime:i,cumulativeLayoutShift:c}=JSON.parse(decodeURIComponent(t));return(0,a.jsxs)(eg.Zp,{className:"not-prose w-full max-w-lg shadow-sm",children:[(0,a.jsx)(eg.aR,{className:"flex p-3",children:(0,a.jsxs)(eg.ZB,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-gray-800",children:[(0,a.jsx)("span",{children:"Lighthouse Report"}),(0,a.jsxs)("a",{href:s,className:"flex items-center font-normal hover:opacity-70",children:[s,(0,a.jsx)(k.m,{})]})]})}),(0,a.jsxs)(eg.Wu,{className:"p-0",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",children:Object.entries(r).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-background-subtle flex items-center gap-3 rounded-[6px]  border p-2",children:[(0,a.jsx)(eH,{value:100*s.score,size:"small",placeholder:!1,showValue:!0}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("p",{className:"text-[14px] font-medium leading-[20px]",children:s.title})})]},t)})}),(0,a.jsxs)("div",{className:"flex flex-col border-t border-gray-200 p-3",children:[(0,a.jsx)(eJ,{label:"First Contentful Paint",value:l.displayValue,thresholds:eW.firstContentfulPaint,hasMutedBackground:!0}),(0,a.jsx)(eJ,{label:"Largest Contentful Paint",value:n.displayValue,thresholds:eW.largestContentfulPaint}),(0,a.jsx)(eJ,{label:"Total Blocking Time",value:i.displayValue,thresholds:eW.totalBlockingTime,hasMutedBackground:!0}),(0,a.jsx)(eJ,{label:"Cumulative Layout Shift",value:c.displayValue,thresholds:eW.cumulativeLayoutShift})]})]})]})}let eG=e=>{let{value:t}=e;return(0,a.jsx)("div",{className:"flex h-4 w-4 flex-row rounded-full p-1 ".concat("good"===t?"bg-green-100":"needsImprovement"===t?"bg-amber-100":"poor"===t?"bg-red-100":"bg-gray-100"),children:(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat("good"===t?"bg-green-600":"needsImprovement"===t?"bg-amber-600":"poor"===t?"bg-red-600":"bg-gray-400")})})};function eJ(e){let{label:t,value:s,thresholds:r,hasMutedBackground:l,isLoading:n=!1}=e;return(0,a.jsxs)("div",{className:"flex flex-row justify-between rounded-[6px] p-2 ".concat(l?"bg-muted":""),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(eG,{value:n?"skeleton":eY(s,r)}),(0,a.jsx)("div",{className:"text-[14px] font-medium leading-[20px]",children:t})]}),(0,a.jsx)("div",{className:"text-[14px] leading-[20px] text-gray-500",children:n?(0,a.jsx)(eE.E,{className:"h-4 w-10"}):s})]})}var eK=s(46426);function eX(e){let{blockId:t}=e,{canWriteToChat:s}=(0,G.tZ)(),{isStreaming:l,isLoading:n,isContinuing:i}=(0,D.Pk)(),{history:o}=(0,N.useBlockHistory)({blockId:t}),c=o[0],d=(0,r.useMemo)(()=>(null==c?void 0:c.latestDeploymentInfo)||null,[null==c?void 0:c.latestDeploymentInfo]);return!s||l||n||i?null:(0,a.jsx)(eg.Zp,{className:"max-w-[400px] text-sm",children:(0,a.jsx)(eK.t$,{activeBlock:c,deployment:d,variant:"card"})})}function e0(){return(0,a.jsxs)(eg.Zp,{className:"max-w-[350px] text-sm",children:[(0,a.jsx)(eg.Wu,{className:"p-2 pb-3",children:(0,a.jsx)(eE.E,{className:"h-12 w-full rounded-md"})}),(0,a.jsx)(eg.wL,{className:"p-2 pt-0",children:(0,a.jsx)(eE.E,{className:"h-8 w-full rounded-md"})})]})}let e1=(0,f.default)(()=>Promise.all([s.e(2411),s.e(5101)]).then(s.t.bind(s,45101,23)).then(e=>e.InlineMath)),e2=(0,f.default)(()=>Promise.all([s.e(2411),s.e(5101)]).then(s.t.bind(s,45101,23)).then(e=>e.BlockMath)),e5=(0,f.default)(()=>Promise.all([s.e(3900),s.e(8357),s.e(985)]).then(s.bind(s,20985)).then(e=>e.Mermaid),{loadableGenerated:{webpack:()=>[20985]}}),e6=(0,f.default)(()=>Promise.all([s.e(7539),s.e(9199),s.e(7943)]).then(s.bind(s,57943)).then(e=>e.Table),{loadableGenerated:{webpack:()=>[57943]}}),e4=String.fromCharCode(65535);function e3(e,t){if(void 0===e)return e;let s=e+"\0";for(;;)if(t>=65535)s+=e4,t-=65535;else{s+=String.fromCharCode(t+1);break}return s}let e7=r.memo(function(e){let t,{messageId:s,role:r,streaming:l,rows:n,isLastMessage:i=!1}=e,{authorId:o,from:c}=(0,G.tZ)(),{user:d}=(0,er.J)(),u=!1,m=[],p=n.map((e,t)=>{let[n,o]=e,d=e3("",t);return 0===n?(u=!0,(0,a.jsx)(e8,{data:o,id:d,messageId:s,streaming:l,chatOrigin:c,isLastMessage:i},d)):(1===n&&"assistant"===r&&o.context&&Array.isArray(o.context)&&o.context.length>0&&(m=o.context),null)});if(!u){if(0===m.length)return null;t=(0,a.jsx)(el.vg,{urls:m.map(e=>{let{url:t}=e;return t})})}let h=(0,a.jsxs)(a.Fragment,{children:[t,p]});return"assistant"===r?(0,a.jsx)(et,{messageId:s,readonly:!!o&&(null==d?void 0:d.id)!==o,streaming:l,children:h}):h});function e8(e){let t,{data:s,id:l,messageId:n,streaming:i,chatOrigin:o,isLastMessage:c}=e,d=s.map((e,r)=>{let o=e3(l,r);return"string"!=typeof e&&"Codeblock"===e[0]&&e[1].blockId&&c&&void 0===t&&(t=e[1].blockId),(0,a.jsx)(e9,{data:e,id:o,isLast:r===s.length-1,index:r,messageId:n,streaming:i,isLastMessage:c},o)});return t&&"vercel"===o&&d.push((0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(e0,{}),children:(0,a.jsx)(eX,{blockId:t})})),d}function e9(e){let{data:t,id:s,index:l,messageId:n,isLast:i,streaming:o,isLastMessage:c}=e,d=function(e){let{id:t,content:s,type:a,props:l}=e,{animate:n}=(0,r.use)(K),i=(0,r.useRef)(null),o=(0,r.useRef)(s),[c,d]=(0,r.useState)(!1),u=(0,r.useId)();(0,r.useEffect)(()=>(W.c.set(u,{type:a,props:l}),()=>{W.c.delete(u)}));let m={"data-seg":u};return((0,r.useEffect)(()=>{if(ee){let e=i.current;if(!e)return;e.style.transition="",d(!0),"string"==typeof s&&(e.textContent=s);return}if(o.current=s,!n||void 0===t)return;let e=setTimeout(()=>{n(t,i,o,()=>d(!0))},20);return()=>clearTimeout(e)},[n,t,s]),n&&void 0!==t)?(m.style={opacity:c?1:0,transition:"opacity .5s ease"},m.ref=i,"string"==typeof s&&(m.children="\xa0")):"string"==typeof s&&(m.children=s),{elementProps:m}}({id:s,content:"string"==typeof t?t:void 0,type:"string"==typeof t?"text":t[0],props:"string"==typeof t?{}:t[1]}),u="string"!=typeof t&&"Codeblock"===t[0]&&t[1].blockId?t[1].source:void 0;if("string"==typeof t)return t;let[m,h,...f]=t;if(void 0===m)return null;let v=(0,a.jsx)(e8,{data:f,id:s,messageId:n,isLastMessage:c});switch(m){case"text":return(0,a.jsx)("span",{...d.elementProps,children:v});case"span":case"p":case"blockquote":case"strong":case"em":case"del":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"ul":case"ol":case"li":return(0,a.jsx)(m,{...d.elementProps,...h,children:v});case"code":if(1===f.length&&"string"==typeof f[0]&&(0,eU.TN)(f[0]))return(0,a.jsx)(eU.br,{...d.elementProps,value:f[0]});return(0,a.jsx)("code",{...d.elementProps,className:"rounded-[0.375rem] border bg-gray-100 px-[0.25rem] py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",...h,children:v});case"a":let b=h.href;if("string"==typeof b&&b.startsWith("/"))return(0,a.jsx)("span",{...d.elementProps,children:v});return(0,a.jsxs)("a",{...d.elementProps,className:"font-normal text-blue-600 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-blue-600",href:h.href||"#",rel:"noopener noreferrer",target:"_blank",children:[v,(0,a.jsx)(es.i,{className:"mb-0.5 ml-0.5 inline h-3 w-3"})]});case"img":return(0,a.jsx)("img",{...d.elementProps,...h});case"hr":return(0,a.jsx)("hr",{...d.elementProps});case"table":return(0,a.jsx)("table",{...d.elementProps,className:"table-fixed",children:v});case"tr":return(0,a.jsx)("tr",{...d.elementProps,children:v});case"td":return(0,a.jsx)("td",{...d.elementProps,children:v});case"th":return(0,a.jsx)("th",{...d.elementProps,children:v});case"thead":return(0,a.jsx)("thead",{...d.elementProps,children:v});case"tbody":return(0,a.jsx)("tbody",{...d.elementProps,children:v});case"Codeblock":let y=u||f.join("");if(h.blockId&&h.meta.type)return(0,a.jsx)("div",{className:"flex flex-col gap-3 [&:not(:last-child)]:mb-3",...d.elementProps,children:(0,a.jsx)(V,{blockId:h.blockId,closed:h.closed,language:h.lang,remoteInfo:h.remoteInfo,messageId:n,meta:h.meta,resultId:h.resultId,source:y,type:h.meta.type,latestDeploymentInfo:h.latestDeploymentInfo,isStreaming:o||!1},h.blockId)});if(!y)return(0,a.jsx)("div",{...d.elementProps});switch(h.lang){case"mermaid":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(r.Suspense,{fallback:null,children:(0,a.jsx)(e5,{source:y,title:h.meta.title})})});case"math":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(e2,{math:y})});case"csv":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(g,{title:"Loading table..."}),children:(0,a.jsx)(e6,{source:y})})});case"toolcall":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(ex,{source:y,streaming:o||!1})});default:return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(j,{language:h.lang,children:y})})}case"InlineMath":return(0,a.jsx)("span",{...d.elementProps,children:(0,a.jsx)(e1,{math:f.join("")})});case"Math":return(0,a.jsx)("span",{...d.elementProps,children:(0,a.jsx)(e2,{math:f.join("")})});case"LinearProcessFlow":case"Steps":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(x,{children:v})});case"Thinking":case"DevThinking":case"V0Info":case"Solution":case"footnoteDefinition":default:return null;case"Quiz":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(p,{...h,children:v})});case"Spinner":return i?(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[l>0?(0,a.jsx)(z.y,{}):null,(0,a.jsx)("span",{className:"animate-pulse",children:h.message||"Generating..."})]})}):null;case"MathInstructions":case"MathBlock":return(0,a.jsx)("div",{...d.elementProps,children:v});case"footnoteReference":return(0,a.jsx)("span",{...d.elementProps,children:(0,a.jsx)(ea.O,{idPrefix:"cite-".concat(n,"-"),label:h.label})});case"AddEnvironmentVariables":case"AddEnvironmentVariable":return(0,a.jsx)(eT,{names:h.names,messageId:n});case"LoadingLighthouse":return i?(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(eQ,{})}):null;case"Lighthouse":case"LighthouseReport":return(0,a.jsx)("div",{...d.elementProps,children:(0,a.jsx)(eZ,{...h})})}}function te(e,t){let s=[];if(!Array.isArray(e)||!e.length)return s;if(0===e[0][0])for(let a of e[0][1])!function e(t,s){if(Array.isArray(t)){let[a,r,...l]=t;"string"==typeof a&&s(t),l.map(t=>e(t,s))}}(a,e=>{let[a,r,...l]=e;if("Codeblock"===a&&r.meta.type){let e=l.join(""),a=r.blockId;a&&s.push({id:a,meta:r.meta,type:r.meta.type,messageId:t,source:r.source||e,language:r.lang,resultId:r.resultId,remoteInfo:r.remoteInfo,closed:void 0!==r.closed&&!!r.closed,latestDeploymentInfo:r.latestDeploymentInfo,createdAt:r.createdAt})}});return s}function tt(e){return e&&0===e[0]?"markdown":e&&1===e[0]?"metadata":void 0}function ts(e){var t;let s,a,r;let l=[],n="",i=null===(t=e.find(e=>"metadata"===tt(e)))||void 0===t?void 0:t[1];return i&&("context"in i&&void 0!==i.context&&Array.isArray(i.context)&&(l=i.context),"title"in i&&"string"==typeof i.title&&(n=i.title),"finishReason"in i&&(s=i.finishReason),"usage"in i&&(a=i.usage),"modelId"in i&&(r=i.modelId)),{docsContext:l,title:n,modelId:r,finishReason:s,usage:a}}},17925:(e,t,s)=>{"use strict";s.d(t,{c:()=>a,l:()=>n});let a=new Map;function r(e){if(e.nodeType===e.TEXT_NODE)return["#text",{}];if(e.nodeType!==e.ELEMENT_NODE)return["",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-html"))return["skip",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-mathml")){var t;return["#text",{},(null===(t=e.querySelector('annotation[encoding="application/x-tex"]'))||void 0===t?void 0:t.textContent)||""]}if("SPAN"===e.nodeName&&(e.classList.contains("linenumber")||e.classList.contains("react-syntax-highlighter-line-number")))return["skip",{}];let s=e.getAttribute("data-seg")||"";if("root"===s||"skip"===s)return[s,{}];let r=a.get(s);return[(null==r?void 0:r.type)||s,(null==r?void 0:r.props)||{}]}let l=new Set(["skip","footnoteReference"]);function n(e,t,s,a){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i="";function o(e,t,c,d){let[u,m,p]=r(e);if(l.has(u))return;if("#text"===u){c&&s&&n&&(i+="...");let t="string"==typeof p?p:e.textContent||"";i+=t,d&&a&&n&&(i+="...");return}let h={...t};switch(u){case"Codeblock":if(m.blockId){var x,f;i+=function(e){let{lang:t,project:s,file:a}=e;return"```".concat(t).concat(s?' project="'.concat(s,'"'):"").concat(a?' file="'.concat(a,'"'):"","\n")}({lang:m.lang,project:null===(x=m.meta)||void 0===x?void 0:x.project,file:null===(f=m.meta)||void 0===f?void 0:f.file})+"...\n```\n\n";return}i+="```".concat(m.lang||"","\n");break;case"code":i+="`";break;case"b":case"strong":i+="**";break;case"i":case"em":i+="*";break;case"del":i+="~~";break;case"hr":i+="---";break;case"Math":i+="$$";break;case"InlineMath":i+="$";break;case"li":if(t.ol){let e=m.index||"1";i+="".concat(e,". ")}else t.ul&&(i+="- ");break;case"ol":t.ol=!0;break;case"ul":t.ul=!0;break;case"h1":i+="# ";break;case"h2":i+="## ";break;case"h3":i+="### ";break;case"h4":i+="#### ";break;case"h5":i+="##### ";break;case"h6":i+="###### ";break;case"blockquote":i+="> ";break;case"tr":t.tableCols=0;break;case"th":case"td":t.tableCols=(t.tableCols||0)+1,h.tableCols=t.tableCols,t.tableCols>1&&(i+=" "),i+="| ";break;case"a":i+="["}let g=e.childNodes.length;for(let s=0;s<g;s++)o(e.childNodes[s],t,c&&0===s,d&&s===g-1);switch(u){case"Codeblock":i+="\n```\n\n";break;case"code":i+="`";break;case"b":case"strong":i+="**";break;case"i":case"em":i+="*";break;case"del":i+="~~";break;case"Math":i+="$$";break;case"InlineMath":i+="$";break;case"li":case"tr":i+="\n";break;case"p":case"table":case"hr":case"blockquote":case"ul":case"ol":case"img":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":i+="\n\n";break;case"thead":i+="|-----".repeat(t.tableCols||1)+"\n";break;case"a":i+="](".concat(m.href||"",")")}Object.assign(t,h)}return n?function t(s){let[a,l]=r(s);switch(a){case"ul":return o(e,{ol:!1,ul:!0},!0,!0);case"ol":return o(e,{ol:!0,ul:!1},!0,!0);case"Codeblock":i+="```".concat(l.lang||"","\n"),o(e,{ol:!1,ul:!1},!0,!0),i+="\n```";return;case"blockquote":o(e,{ol:!1,ul:!1},!0,!0),i=i.split("\n").map(e=>"> ".concat(e)).join("\n");return;case"del":i+="~~",o(e,{ol:!1,ul:!1},!0,!0),i+="~~";return;case"h1":return i+="# ",o(e,{ol:!1,ul:!1},!0,!0);case"h2":return i+="## ",o(e,{ol:!1,ul:!1},!0,!0);case"h3":return i+="### ",o(e,{ol:!1,ul:!1},!0,!0);case"h4":return i+="#### ",o(e,{ol:!1,ul:!1},!0,!0);case"h5":return i+="##### ",o(e,{ol:!1,ul:!1},!0,!0);case"h6":return i+="###### ",o(e,{ol:!1,ul:!1},!0,!0);case"table":case"root":case"img":case"Math":return o(e,{ol:!1,ul:!1},!0,!0)}if(s.parentNode){if(s.nodeType===s.ELEMENT_NODE){let t=document.createDocumentFragment(),a=s.cloneNode(!1);a.appendChild(e),t.appendChild(a),e=t}t(s.parentNode)}}(t):o(e,{ol:!1,ul:!1},!0,!0),i.trim()}},63713:(e,t,s)=>{"use strict";s.d(t,{L5:()=>n,Nx:()=>c,F7:()=>o,A2:()=>l,GP:()=>i});var a=s(4126),r=s(60349);function l(e){let{source:t,blockType:s,blockId:l,resultId:n}=e,i=t.split("\n"),o=null,c=[],d=a.Vr[s],u=!1;for(let e of i)if(e.startsWith(d)){let t;let[s,...a]=e.slice(d.length).trim().split(":"),i=function(e){let t;if(!e)return{};let s=/(\w+)=["']([^"']*)["']|(\w+)/g,a={};for(;null!==(t=s.exec(e));)t[1]?a[t[1]]=t[2]:t[3]&&(a[t[3]]="true");return a}(a.join(":"));if(i.file&&"true"!==i.file)u=!1;else{u=!0;continue}o&&c.push({...o});try{t=i.fixingBadLines.split(",").map(Number)}catch(e){t=void 0}o={lang:(0,r.SR)(s),meta:i,isEdit:!!i.isEdit,isAttachmentQuickEdit:!!i.isAttachmentQuickEdit,isQuickEdit:!!i.isQuickEdit,isDeleted:!!i.isDeleted,isFixed:!!i.isFixed,isMoved:!!i.isMoved,isMovedFrom:i.isMovedFrom,fixingBadLines:t,blockId:l,resultId:n,source:"",isMerged:!!i.isMerged}}else o&&!u&&(o.source+=e+"\n");return o&&c.push(o),c}function n(e){let{files:t,blockType:s}=e,r="";for(let e of t){for(let t of["isEdit","isMerged","isDeleted","isMoved","isUserEdit"])e[t]?e.meta[t]="true":delete e.meta[t];let t=function(e){let t=[];for(let[s,a]of Object.entries(e))a&&t.push("".concat(s,'="').concat(a,'"'));if(t.length)return t.join(" ")}(e.meta),l=a.Vr[s];r&&(r+="\n"),r+="".concat(l).concat(e.lang).concat(t?":"+t:"","\n"),r+=e.source.trim()+"\n"}return r}let i=(e,t)=>{let s=JSON.parse(JSON.stringify(t));for(let t of s)t.meta.file&&void 0!==e[t.meta.file]&&(t.source=e[t.meta.file]);return s};function o(e){let t={mapping:{}};for(let s of e)t.mapping[s.meta.file||""]=s.source;return t}let c=(e,t)=>e.isDeleted?e.meta.isUserEdit?"User deleted "+e.meta.file:"Deleted "+e.meta.file:e.isMoved&&e.isMovedFrom?"Moved "+e.isMovedFrom+" to "+e.meta.file||0:e.isEdit?e.isFixed?(t?"Fixing":"Modified")+" "+e.meta.file||"":(t?"Modifying":"Modified")+" "+e.meta.file||"":e.meta.isUserEdit?"User created "+e.meta.file:(t?"Generating":"Generated")+" "+e.meta.file||""},40403:(e,t,s)=>{"use strict";s.d(t,{c:()=>r});var a=s(4126);function r(e){var t,s,r;let l={isLlmError:!1,isRetried:!1,errorCategory:void 0};if("string"==typeof e){l.isLlmError=e.startsWith(a.EQ),l.isRetried=e.endsWith(a.oP);let t=null!==(s=e.split(":")[1])&&void 0!==s?s:"default";l.errorCategory=t}else if(null===(t=e.finishReason)||void 0===t?void 0:t.includes("provider_server_error")){let t=e.finishReason.startsWith("retry_provider_server_error"),s=t||!!e.finishReason.startsWith("provider_server_error");if(l.isLlmError=s,l.isRetried=t,s){let t=null!==(r=e.finishReason.split(":")[1])&&void 0!==r?r:"default";l.errorCategory=t}}return l}},31424:(e,t,s)=>{"use strict";s.d(t,{g:()=>n,m:()=>l});var a=s(96541),r=s(80612);function l(e){let{blockId:t,loadingPath:s,files:l}=e,{data:n,mutate:i}=(0,r.Ay)(["block:activeFile",t]),{data:o,mutate:c}=(0,r.Ay)(["block:autoSwitch",t]),d=void 0===o||o,u=(0,a.useMemo)(()=>{var e,t;return(null==l?void 0:null===(e=l.findLast(e=>!e.isMerged))||void 0===e?void 0:e.meta.file)||(null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.meta.file)},[l,t]),m=n;return d&&s&&(m=s),m||(m=u),{activeFilePath:m,setActiveFilePath:i,autoSwitch:d,setAutoSwitch:c}}function n(e){let{blockId:t}=e,{mutate:s}=(0,r.Ay)(["block:activeFile",t]);return s}},10627:(e,t,s)=>{"use strict";s.d(t,{LX:()=>n,P5:()=>l,RQ:()=>i});var a=s(96541),r=s(80612);function l(e){let{blockId:t,isPreviewable:s}=e,l=!0===s,{data:n,mutate:i}=(0,r.Ay)(["block:activeTab",t],{fallbackData:l?"preview":"code"});return(0,a.useEffect)(()=>{l&&i("preview")},[l,i]),{hasBlockPreview:s,activeTab:n,setActiveTab:i}}let n=e=>{let{data:t}=(0,r.Ay)(["block:activeTab",e]);return t},i=e=>{let{mutate:t}=(0,r.Ay)(["block:activeTab",e]);return t}},96737:(e,t,s)=>{"use strict";s.r(t),s.d(t,{BlockHistorySelect:()=>j,useBlockHistory:()=>v});var a=s(54857),r=s(96541),l=s(62841),n=s(57045),i=s(76236),o=s(4126),c=s(16617),d=s(80612),u=s(80199),m=s(37622),p=s(78564),h=s(20662),x=s(26970),f=s(77184),g=s(8990);let v=e=>{let t,{blockId:s}=e,{messages:a,activeForkKey:i,chatId:o}=(0,l.Pk)(),{data:c,mutate:u}=(0,d.Ay)(["blocks:overrides",o]),{allBlocks:m,activeProject:p,activeBlockIndex:h,activeVersionIndex:x,projectBlocks:f,history:g}=(0,r.useMemo)(()=>{let e,t;if(!s)return{allBlocks:[],activeProject:void 0,activeBlockIndex:-1,activeVersionIndex:-1,projectBlocks:[],history:[]};let r={},l=[],o=-1,d=new Set(i);for(let i of a)if(d.has(i.id)&&"assistant"===i.role)for(let a of(0,n.sY)(i.content,i.id)){let n=null==c?void 0:c[a.id],i={...a,...n||{}},d=i.meta.project||"";r[d]||(r[d]=[]),i.id===s&&(e=d,t=i.meta.file,o=r[d].length),l.push(i),r[d].push(i)}let u=[],m=-1,p=r[e||""];for(let a=0;a<(p?p.length:0);a++){let l=r[e||""][a];l.id===s&&(m=u.length),l.meta.file===t&&u.push(l)}return{allBlocks:l,activeProject:e,activeBlockIndex:o,activeVersionIndex:m,projectBlocks:r[e||""]||[],history:u}},[a,s,i,c]),v=(0,r.useCallback)(e=>{let{blockId:t,data:s}=e;u(e=>({...e,[t]:{...s}}))},[u]);return s&&c&&c[s]&&(t=c[s].source),{history:g,allBlocks:m,latestSource:t,projectBlocks:f,projectBlockIndex:h,project:p,currentBlockIndex:x,updateBlockData:v}};function j(e){let{blockId:t,separator:s=!1}=e,{history:r,currentBlockIndex:n}=v({blockId:t}),d=(0,i.y6)(),j=n===r.length-1,b=(0,l.jo)(),{activeForkKey:y}=(0,l.Pk)(),w=e=>{let t=r.find(t=>t.id===e);if(d(t),!(null==t?void 0:t.messageId))return;let s=document.getElementById(o.cJ),a=null==s?void 0:s.querySelector('[id="'.concat(t.messageId,'"]'));a&&s&&a instanceof HTMLElement&&a.scrollIntoView({block:"start",behavior:"smooth"})};return r.length<=1?null:(0,a.jsxs)(a.Fragment,{children:[j?(0,a.jsx)(x.Tooltip,{content:(0,a.jsx)("div",{className:"text-center",children:"This is your latest version"}),children:(0,a.jsx)(u.E,{className:"mr-1 cursor-default",variant:"teal",children:"Latest"})}):(0,a.jsx)(x.Tooltip,{content:(0,a.jsx)("div",{className:"text-center",children:"Continue from this version (all changes will be kept)"}),children:(0,a.jsx)("button",{className:(0,m.cn)("mr-1",(0,u.e)({})),onClick:()=>{let e=null==y?void 0:y.findIndex(e=>e===r[n].messageId);if(void 0===e||e<0||!y){f.oR.error("Could not find the message in the chat");return}b({activeForkKey:y.slice(0,e+1),saveLeafMessageId:!0})},children:"Restore"})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(x.Tooltip,{content:(0,a.jsx)("div",{className:"text-center",children:"View previous version"}),children:(0,a.jsx)(c.$,{variant:"ghost",size:"sm",className:"size-7",disabled:0===n,onClick:()=>{w(r[n-1].id)},children:(0,a.jsx)(p.A,{size:"8"})})}),(0,a.jsx)(x.Tooltip,{content:(0,a.jsx)("div",{className:"text-center",children:"View next version"}),children:(0,a.jsx)(c.$,{variant:"ghost",size:"sm",className:"size-7",disabled:j,onClick:()=>{w(r[n+1].id)},children:(0,a.jsx)(h.A,{size:"8"})})})]}),s?(0,a.jsx)(g.Separator,{className:"mx-1.5 h-[22px]",orientation:"vertical"}):null]})}},66242:(e,t,s)=>{"use strict";s.d(t,{q:()=>r});var a=s(60346);function r(){let{user:e,expectUser:t}=(0,a.J)();return t&&!e?{isLoading:!0}:(t||e)&&((null==e?void 0:e.v0plan)!=="v0-enterprise"||e.isVercelian)?{canVote:!0,isLoading:!1}:{canVote:!1,isLoading:!1}}},14422:(e,t,s)=>{"use strict";s.d(t,{s:()=>l});var a=s(80612),r=s(59412);function l(e){let{blockId:t,fileName:s,originalCode:l,newCode:n}=e,{data:i,mutate:o}=(0,a.Ay)(["block:diffView:show",t],{fallbackData:!1}),{data:c}=(0,a.Ay)(["block:diffView",t,s],{fallbackData:l?(0,r.G)(l,n):[]});return{diffs:(null==c?void 0:c.find(e=>e.added||e.removed))&&c||null,showDiffs:i,setShowDiffs:o}}},13534:(e,t,s)=>{"use strict";s.d(t,{q:()=>o});var a=s(96541),r=s(30856),l=s(80612),n=s(52041);let i=/^https:\/\/www\.figma\.com\/(?:file|design)\/[a-zA-Z0-9]+(?:\/[^\/]+)?\/?\?node-id=[0-9]+-[0-9]+(?:&node-type=(?:frame|component|section))?(?:&t=[a-zA-Z0-9-]+)?(?:&m=dev)?$/;function o(e){let t=(0,r.D)(),{setSignInWithFigmaModal:s}=(0,n.f)(),{data:o,isLoading:c}=(0,l.Ay)("integrations:figma",{fallbackData:{isSignedIn:!1,figmaOauthUrl:""}}),[d,u]=(0,a.useState)({imageBase64:null,originalUrl:null,fileName:null,isScreenshotLoading:!1,isContextLoading:!1,error:null,nodeContext:null}),m=(0,a.useCallback)(e=>t.fi&&!c&&i.test(e),[t.fi,c]),p=(0,a.useCallback)(async t=>{var a,r;let l=t||(null===(a=e.current)||void 0===a?void 0:a.value)||"";if(!l)return{success:!1,reason:"invalid_url"};if(!m(l))return{success:!1,reason:l.includes("figma.com")?"missing_node":"invalid_url"};if(u(e=>({...e,originalUrl:l,isScreenshotLoading:!0})),!(null==o?void 0:o.isSignedIn))return s({figmaOauthUrl:null!==(r=null==o?void 0:o.figmaOauthUrl)&&void 0!==r?r:""}),u(e=>({...e,isScreenshotLoading:!1})),{success:!1,needsAuth:!0};try{let e=await fetch("/chat/api/integrations/figma/get-screenshot?url=".concat(encodeURIComponent(l)));if(401===e.status)return s({figmaOauthUrl:o.figmaOauthUrl}),u(e=>({...e,imageBase64:null,originalUrl:null,fileName:null,isScreenshotLoading:!1,isContextLoading:!1,error:"Authentication required",nodeContext:null})),{success:!1,needsAuth:!0};if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to fetch Figma image")}let t=await e.json(),a=new URL(l).pathname.split("/").pop()||"Figma Design",r={success:!0,data:{base64:t.base64,originalUrl:t.originalUrl,fileName:a}};return u(e=>({...e,imageBase64:t.base64,originalUrl:t.originalUrl,fileName:a,isScreenshotLoading:!1,error:null,nodeContext:JSON.stringify(t,null,0),imageHeight:t.height})),r}catch(t){console.error("Error fetching Figma image:",t);let e=t instanceof Error?t.message:"Failed to fetch image";return u(t=>({...t,imageBase64:null,originalUrl:null,fileName:null,isScreenshotLoading:!1,error:e,nodeContext:null})),{success:!1,error:e}}},[e,m,null==o?void 0:o.isSignedIn,null==o?void 0:o.figmaOauthUrl,s]),h=(0,a.useCallback)(async e=>{try{u(e=>({...e,isContextLoading:!0,error:null}));let t=await fetch("/chat/api/integrations/figma/context?url=".concat(encodeURIComponent(e))),s=await t.json();return u(e=>({...e,isContextLoading:!1,nodeContext:JSON.stringify(s,null,0)})),s}catch(t){let e=t instanceof Error?t.message:"Failed to fetch context";throw u(t=>({...t,isContextLoading:!1,error:e})),t}},[]);return(0,a.useMemo)(()=>{var e;return{...d,isLoading:d.isScreenshotLoading||d.isContextLoading||c,isFigmaLoading:c,handleFigmaUrl:p,isFigmaUrl:m,isSignedIn:!c&&null!==(e=null==o?void 0:o.isSignedIn)&&void 0!==e&&e,userData:o,getNodeContext:h}},[d,p,m,o,h,c])}},69756:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});var a=s(96541);function r(e){let t=(0,a.useRef)(e);return(0,a.useEffect)(()=>{t.current=e},[e]),t}},53239:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(90761),r=s(62841),l=s(96541),n=s(77184),i=s(43393),o=s(77170),c=s(56227);function d(){let{project:e,setMetadata:t}=(0,a.tZ)(),{chatId:s}=(0,r.xz)(),{activeScopeSlug:d,activeScope:u}=(0,i.k6)(),[m,p]=(0,l.useTransition)();return{reassignPending:m,handleReassignProject:(0,l.useCallback)(a=>{var r,l;if(!s||!u)return;let i=e?{...e}:void 0;t({project:a?{projectId:a.projectId,name:a.name,settings:{color:(null===(r=a.settings)||void 0===r?void 0:r.color)||null,icon:(null===(l=a.settings)||void 0===l?void 0:l.icon)||null},vercelProjectId:a.vercelProjectId,isCreator:a.creatorId===u.id}:void 0}),p(async()=>{try{let e=await (0,c.M)({payload:{chatId:s,projectId:(null==a?void 0:a.projectId)||null,scopeSlug:d}});if(null==e?void 0:e.error)throw Error(e.error)}catch(e){(0,o.z)(e)||n.oR.error("Something went wrong. Please try again."),t({project:i})}})},[s,t,e,d,u])}}},34016:(e,t,s)=>{"use strict";s.d(t,{t:()=>M,y:()=>A});var a=s(96541);let r=s(31067).vt({});var l=s(41773),n=s(62841),i=s(77184),o=s(57045),c=s(76236),d=s(69756),u=s(73927),m=s(90761),p=s(66117),h=s(40403),x=s(46119),f=s(24048),g=s(77170),v=s(38651),j=s(17978),b=s(95360),y=s(821),w=s(43393),N=s(99382);async function k(e){return new Promise((t,s)=>{let a=new FileReader;a.onload=e=>{var s;t(null===(s=e.target)||void 0===s?void 0:s.result)},a.onerror=e=>s(e),a.readAsDataURL(e)})}let C=new Map;function S(e){let t=C.get(e);t&&(t.abort(),C.delete(e))}var I=s(80612),P=s(67605);let L=(0,P.createServerReference)("00185bf81b3d134c19806c99d2cc8d8f3035898a1d",P.callServer,void 0,P.findSourceMapURL,"invalidateRouterCache");var R=s(8109);function E(e){if(!e||/[^0-9-\s]+/.test(e)||"0000000000000000"===e)return!1;let t=0,s=!1;e=e.replace(/\D/g,"");for(let a=e.length-1;a>=0;a--){let r=parseInt(e.charAt(a),10);s&&(r*=2)>9&&(r-=9),t+=r,s=!s}return t%10==0}var z=s(8589);let M="opt-retry-message",F=[{name:"creditCardDetector",action:function(e){return(e.match(/\b(?:\d{4}[-\s]?){3}\d{4}\b/g)||[]).filter(E).length>0},confirm:"We've detected a credit card number in your message. Are you sure you want to continue?"}];function A(){let{onSubmit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeScope:t,user:s}=(0,w.k6)(),P=(0,c.y6)(),E=(0,c.oQ)(),{chatId:A,messages:T,chatIdToken:U,activeForkKey:O}=(0,n.Pk)(),_=(0,n.jo)(),{setMetadata:V}=(0,m.tZ)(),{setDraft:B}=(0,j.jh)(),{quote:$,setQuote:H}=(0,m.sC)(),{revalidate:q,setData:W}=(0,l.m)(),Y=(0,d.F)(e),Q=(0,d.F)(T),[Z,G]=(0,x.dc)(),{selectedProjectId:J}=(0,b._t)(),K=function(){let e=(0,c.eu)();return function(e,t){let s=function(e){let t=(0,a.useRef)(),{data:s,mutate:r}=(0,I.Ay)(e);return(0,a.useEffect)(()=>{s||r(t)},[s,r]),s}(e);return(0,a.useEffect)(()=>{s&&(s.current=t)},[s,t]),s}("activeBlockIdRef",null==e?void 0:e.id)}(),X=(0,u.useRouter)();return{submit:(0,a.useCallback)(async(e,a)=>{for(let t of F)if("input"in e&&e.input&&t.action(e.input)&&!confirm(t.confirm))return;let l=(0,R.C)(),n=!!l;if((null==s?void 0:s.id)||!l||(s={id:l,username:"anon",avatar:"",plan:"anon",email:"",name:"Anonymous",teams:[]}),!(null==s?void 0:s.id))return;let c=s.id,d=[...Q.current],u=!1;try{var m,x,b;let s,l;let i=Q.current;await G();let d=function(e,t){let s=C.get(e);s&&s.abort();let a=new AbortController;C.set(e,a);let r=a.signal;return r.onabort=()=>{C.delete(e),null==t||t()},r}(A,()=>_({isLoading:!1,isStreaming:!1,isContinuing:!1})),g=[],S="attachments"in e?e.attachments:void 0;if(!n&&S){if(S instanceof FileList)for(let e of Array.from(S)){let{name:t,type:s,size:a}=e,r=await k(e);g.push({name:t,contentType:s,url:r,size:a})}else if(Array.isArray(S))for(let e of S){let{name:t,url:s,contentType:a,size:r,v0Type:l}=e;g.push({name:t,contentType:a,v0Type:l,url:s,size:r})}else throw Error(f.Jk)}let I=0===i.length||void 0!==a;a||null===(b=Y.current)||void 0===b||b.call(Y),_({isLoading:!0}),I?(window.history.pushState(null,"","/chat/".concat(A)),V({isEmpty:!1}),(0,j.hN)({chatId:void 0})):(0,j.hN)({chatId:A}),B(null);let R=function(e){let{input:t,chatSubmitData:s,quote:a,messages:r,activeForkKey:l,authorId:n}=e;switch(s.action){case"continue":case"retry":{let e;if(!l)throw Error(f.R2);let t=s.assistantMessageId,a=r.find(e=>"id"in e&&e.id===t&&"assistant"===e.role);if(!a||"assistant"!==a.role||!a.parentId)throw Error(f.p2);"continue"===s.action&&(e={...a,continuingMessageId:t});let n="retry"===s.action?(0,p.Mb)(l,t,M+(0,y.Ok)()):l;return{action:{type:s.action,userMessageId:a.parentId,assistantMessageId:t},continueAssistantMessage:e,newActiveForkKey:n}}case"edit":{if(!t)throw Error(f.FD);if(!l)throw Error(f.tK);let e=t?D(t,a):null,n=s.userMessageId,i=r.find(e=>e.id===n);if((null==i?void 0:i.role)!=="user")throw Error(f.p2);let o=(0,y.Ok)();return{newUserMessage:{role:"user",content:e,id:o,attachments:s.attachments,parentId:i.parentId,type:"message",authorId:i.authorId},action:{type:"edit",userMessageId:i.id},newActiveForkKey:(0,p.Mb)(l,i.id,o)}}case"new":{let e=t?D(t,a):null;if(1===r.length&&"user"===r[0].role)return{isFromQParam:!0,newUserMessage:r[0],newActiveForkKey:(0,p._z)(void 0,r[0].id)};if(!t&&(!s.attachments||0===s.attachments.length))throw Error(f.FD);let i=(0,y.Ok)(),o=(0,p._z)(l,i);return{newUserMessage:{role:"user",content:e||"",id:i,attachments:s.attachments,parentId:(0,p.K1)(l),type:"message",authorId:n},newActiveForkKey:o}}default:throw Error(f.dD)}}({input:"input"in e?e.input:void 0,chatSubmitData:e,quote:$,messages:i,activeForkKey:O,authorId:c});if(!R){_({isLoading:!1,isStreaming:!1,isContinuing:!1});return}H(null),_({prefillOptions:{query:void 0,projectId:void 0},isContinuing:"continue"===e.action,isLoading:"continue"!==e.action,isStreaming:"continue"===e.action}),"new"!==e.action&&"edit"!==e.action&&((null===(x=R.newUserMessage)||void 0===x?void 0:null===(m=x.attachments)||void 0===m?void 0:m.length)||0)>0&&g.push(...R.newUserMessage.attachments);let{action:F,continueAssistantMessage:T,newUserMessage:Z,newActiveForkKey:X}=R,ee=[...i];"type"in e&&Z&&(Z.type=e.type),Z&&!R.isFromQParam&&ee.push(Z),_({messages:ee,activeForkKey:R.newActiveForkKey});let et={};if(a)s=a.readableStream.getReader(),et=a.headers;else{let a=t&&!(0,N.W)(t)?t.slug:void 0,r=await fetch("/chat/api/chat",{method:"POST",body:JSON.stringify({message:(null==Z?void 0:Z.content)||void 0,messageId:null==Z?void 0:Z.id,forceResponse:"forceResponse"in e?e.forceResponse:void 0,chatId:A,chatIdToken:U,isNew:I,figmaContext:e.figmaContext,userMessageType:"type"in e?e.type:void 0,forkKey:null==X?void 0:X.slice(0,-1),...J?{projectId:J}:{},action:F,...g.length>0?{attachments:g}:{},team:a}),headers:{"Content-Type":"application/json"},signal:d});if(!r.ok||!r.body){let e=await r.text();throw Error(e)}et=Object.fromEntries(r.headers.entries()),s=r.body.getReader()}let es=et["x-v0-project-id"],ea=et["x-v0-project-name-base64"],er=et["x-v0-project-color"],el=et["x-v0-project-icon"],en=et["x-v0-project-creator-id"],ei=et["x-v0-project-vercel-project-id"]||null,eo=et["x-v0-url-attachments"]?JSON.parse(atob(et["x-v0-url-attachments"])):void 0;if(eo&&void 0!==Z&&(ee[ee.length-1].attachments=[...ee[ee.length-1].attachments||[],...eo||[]],_({messages:ee})),es&&ea){let e=atob(ea);V({project:{projectId:es,name:e,settings:{color:er,icon:el},vercelProjectId:ei,isCreator:(null==t?void 0:t.id)===en}})}let ec=et["x-v0-user-message-id"];if(!ec)throw Error(f.RK);T&&(ee=ee.filter(e=>"assistant"!==e.role||e.id!==T.id));let ed=!1,eu=new TextDecoder,em=et["x-v0-response-message-id"];if(!em)throw Error(f.Og);let ep=function(e){let{responseMessageId:t,action:s,newActiveForkKey:a,userMessageServerId:r}=e;if((null==s?void 0:s.type)==="continue"||(null==s?void 0:s.type)==="retry")return(0,p.qQ)(a,t);let l=(0,p.qQ)(a,r);return(0,p._z)(l,t)}({responseMessageId:em,action:F,newActiveForkKey:X,userMessageServerId:ec}),eh=[],ex="continue"===e.action,ef=()=>ex?null==T?void 0:T.content:eh;function w(e){d.throwIfAborted();try{var t;let s=JSON.parse(e);eh=function(e,t){let s=r.clone(e);if(Array.isArray(t)&&9===t[1]&&9===t[2]){let e=t[0].slice(0,-1),a=t[0].slice(-1),r=s;for(let t of e){if("string"==typeof r[t])return r[t]+=a,s;r=r[t]}}return r.patch(s,t),s}(eh,s),ex&&(null===(t=eh.find(e=>"markdown"===(0,o.h)(e)))||void 0===t?void 0:t[1])&&(ex=!1);let a=(0,o.sY)(eh,em),n=(0,o.LU)(eh);if(!ed&&"string"==typeof n.title&&n.title&&(ed=!0,V({title:n.title}),I&&n.title&&W(e=>[{title:n.title,chatId:A,updatedAt:new Date,shareable:!1,privacy:"private",favorite:!1,optimistic:!0,authorId:c},...e.filter(e=>e.chatId!==A)],!1)),l={parentId:ec,role:"assistant",content:ef(),context:n.docsContext,id:em,blocks:a.map(e=>e.id),streaming:!1===ex,finishReason:n.finishReason||null,usage:n.usage,modelId:n.modelId,continuingMessageId:null==T?void 0:T.id,type:"message"},_({messages:[...ee,l],isLoading:!1,isStreaming:!0}),1===a.length){let e=a[a.length-1];return e.id===(null==K?void 0:K.current)&&P(e),a}}catch(t){(0,v.u)("ChatHookError",{chatId:A,errorCode:f.mB,errorMsg:"Failed to read row: ".concat(e)}),"production"!==z.env.VERCEL_ENV&&console.error(t,"Error reading row:",e)}}l={parentId:ec,role:"assistant",content:ef(),id:em,streaming:void 0===T,finishReason:null,continuingMessageId:null==T?void 0:T.id,type:"message"},_({messages:[...ee,l],activeForkKey:ep,saveLeafMessageId:!0}),u=!0;let eg="",ev=!1;for(;;){d.throwIfAborted();let{done:e,value:t}=await s.read();if(e)break;let a=eg+(t instanceof Uint8Array?eu.decode(t):t),{isLlmError:r,isRetried:n,errorCategory:i="default"}=(0,h.c)(a);if(r)throw _({messages:[...ee,{...l,finishReason:n?"retry_provider_server_error:".concat(i):"provider_server_error:".concat(i)}]}),Error(f.kR);let o=a.split("\n");for(let e=0;e<o.length-1;e++){let t=w(o[e]);!ev&&(null==t?void 0:t.length)&&(ev=!0,E(!0,t[t.length-1]))}eg=o[o.length-1]}eg&&w(eg),_({messages:[...ee,{...l,streaming:!1}],isStreaming:!1,isContinuing:!1,initialStreamPromise:void 0}),I&&(await L(),q()),C.delete(A)}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;_({isLoading:!1,isStreaming:!1,isContinuing:!1,initialStreamPromise:void 0,prefillOptions:{query:void 0,projectId:void 0},...u?{}:{activeForkKey:O,messages:d}}),S(A),(0,g.z)(e,X,"Failed to submit message. Start a new chat, retry, or edit your message.")||i.oR.error("An unexpected error occurred. Please refresh the page and try again."),u||0!==d.length||X.push("/chat")}},[s,O,Q,G,A,_,B,$,H,Y,V,t,U,J,W,K,P,E,X,q]),stopLlmResponse:(0,a.useCallback)(()=>{let e=Q.current;if(S(A),e.length>0){let t=e[e.length-1];"assistant"===t.role&&_({messages:[...e.slice(0,-1),{...t,streaming:!1}]})}setTimeout(()=>_({isStreaming:!1,isLoading:!1}),0)},[A,Q,_])}}function D(e,t){return t?"".concat(t.split("\n").map(e=>"> "+e).join("\n"),"\n\n").concat(e):e}},42616:(e,t,s)=>{"use strict";s.d(t,{q:()=>i});var a=s(60346),r=s(96541),l=s(62841),n=s(66117);function i(e){let{messageId:t}=e,{chatId:s,messages:i,activeForkKey:o}=(0,l.Pk)(),{user:c}=(0,a.J)(),{botText:d,userMessageId:u}=(0,r.useMemo)(()=>{let e={botText:void 0,userMessageId:void 0};if(!t||!o)return e;let s=i.findIndex(e=>"id"in e&&e.id===t);return s<0?e:{botText:i[s].content,userMessageId:(0,n.qR)(o,t)}},[i,t,o]);return{chatId:s,messageText:d,promptMessageId:u,messageId:t,userId:null==c?void 0:c.id}}},2668:(e,t,s)=>{"use strict";s.d(t,{Cy:()=>l,Ln:()=>n,bP:()=>r});let a={"claude-3-5-sonnet-20240620":3.2,"anthropic.claude-3-5-sonnet-20240620-v1:0":3.2,"us.anthropic.claude-3-5-sonnet-20240620-v1:0":3.2,"meta.llama3-8b-instruct-v1:0":4,"llama3-70b-8192":4.5,"meta.llama3-70b-instruct-v1:0":4,"gpt-4o-mini":4,default:4};function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"anthropic.claude-3-5-sonnet-20240620-v1:0",s=a[t]||a.default;return Math.round(.9*Math.ceil(("string"==typeof e?e.trim().length:e.charCount)/s))}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"anthropic.claude-3-5-sonnet-20240620-v1:0";return Math.round(e*(a[t]||a.default)*(1/.9))}function n(e){return Math.round(1334*(("number"==typeof e?e:e.size)/1048576))}},59412:(e,t,s)=>{"use strict";s.d(t,{G:()=>r});var a=s(22769);let r=(e,t)=>a.Pp(e.trim(),t.trim())},80199:(e,t,s)=>{"use strict";s.d(t,{E:()=>i,e:()=>n});var a=s(54857);s(96541);var r=s(99751),l=s(53317);let n=(0,r.F)("inline-flex h-5 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",red:"bg-gs-red-300 text-gs-red-900 hover:bg-gs-red-400",blue:"bg-gs-blue-300 text-gs-blue-900 hover:bg-gs-blue-400",green:"bg-gs-green-300 text-gs-green-900 hover:bg-gs-green-400",purple:"bg-gs-purple-300 text-gs-purple-900 hover:bg-gs-purple-400",amber:"bg-gs-amber-300 text-gs-amber-900 hover:bg-gs-amber-400",teal:"border-teal-100 bg-teal-100 text-teal-700 hover:border-teal-100 hover:bg-teal-100 focus:border-teal-100 focus:bg-teal-100 focus-visible:border-teal-100 focus-visible:bg-teal-100"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("span",{className:(0,l.cn)(n({variant:s}),t),...r})}},38658:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>h,L3:()=>x,c7:()=>p,lG:()=>o,rr:()=>f,zM:()=>c});var a=s(54857),r=s(96541),l=s(25235),n=s(20788),i=s(53317);let o=l.bL,c=l.l9,d=l.ZL;l.bm,d.displayName=l.ZL.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-gray-950/95 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),ref:t,...r})});u.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:s,dialogOverlayClassName:o,children:c,style:m,showClose:p=!0,...h}=e,[x,f]=r.useState(0),g=r.useRef(null);return r.useEffect(()=>{g.current=document.body,f(e=>e+1)},[]),(0,a.jsxs)(d,{container:g.current,children:[(0,a.jsx)(u,{className:o}),(0,a.jsxs)(l.UC,{className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 rounded-[12px] bg-white px-6 py-8 outline-none duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] lg:w-full",s),ref:t,style:{boxShadow:"var(--ds-shadow-modal)",...m},...h,children:[c,p?(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.MKb,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]}):null]})]})});m.displayName=l.UC.displayName;let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col items-center space-y-2 text-center",t),...s})};p.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{className:(0,i.cn)("whitespace-nowrap text-2xl font-semibold tracking-tight",s),ref:t,...r})});x.displayName=l.hE.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{className:(0,i.cn)("text-zinc-600",s),ref:t,...r})});f.displayName=l.VY.displayName},54771:(e,t,s)=>{"use strict";s.d(t,{Et:()=>c,d0:()=>o,jc:()=>i});var a=s(54857),r=s(96541),l=s(73944),n=s(53317);let i=l.bL,o=l.l9,c=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:i=4,...o}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{align:r,className:(0,n.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),ref:t,sideOffset:i,...o})})});c.displayName=l.UC.displayName},2295:()=>{},41856:e=>{e.exports={circle:"gauge_circle__8qHPe",content:"gauge_content__Ha_5u",animate:"gauge_animate__l7E7z",arc:"gauge_arc__vkhZw",arcSecondary:"gauge_arcSecondary__KCzRC",fadeIn:"gauge_fadeIn__gi7G_"}},10406:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(67605);let r=(0,a.createServerReference)("401a54381014056c35d1ad2fdbdb2aae16d15f7ea1",a.callServer,void 0,a.findSourceMapURL,"createEnvVars")},11380:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var a=s(67605);let r=(0,a.createServerReference)("401b0d8d76552294910e9178722107b009fc58d7bc",a.callServer,void 0,a.findSourceMapURL,"deleteEnvVars")},28192:(e,t,s)=>{"use strict";s.d(t,{y:()=>r});var a=s(67605);let r=(0,a.createServerReference)("40392c12a090ab6cbc868d3e94a993028da5884b5e",a.callServer,void 0,a.findSourceMapURL,"unlinkVercelProject")},67160:(e,t,s)=>{"use strict";s.d(t,{t:()=>r});var a=s(67605);let r=(0,a.createServerReference)("4064275e4a10046e2cf84a5b8f06447c3898681fe8",a.callServer,void 0,a.findSourceMapURL,"linkVercelProject")},27:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});var a=s(67605);let r=(0,a.createServerReference)("40722424e15fc5c4f0b2f072c636eeac362727d40a",a.callServer,void 0,a.findSourceMapURL,"exportChat")},56227:(e,t,s)=>{"use strict";s.d(t,{M:()=>r});var a=s(67605);let r=(0,a.createServerReference)("40788868933ade908251ec590df089a05a0b4d9892",a.callServer,void 0,a.findSourceMapURL,"assignProjectToChat")},76265:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(67605);let r=(0,a.createServerReference)("40b006c7f5335b371c8e4d7c125f36d2ef15b703a5",a.callServer,void 0,a.findSourceMapURL,"updateBlockShareStatus")},45076:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(67605);let r=(0,a.createServerReference)("40e63ae2986ca3c23dfe8caab50a2a386549d479e3",a.callServer,void 0,a.findSourceMapURL,"newProjectAction")},60732:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(67605);let r=(0,a.createServerReference)("40e6a48fc4a683676e69fb5382a51a03be03e7f7c6",a.callServer,void 0,a.findSourceMapURL,"sendMessageFeedback")}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2017],{72017:(e,t,a)=>{a.d(t,{ChatActions:()=>U,$:()=>q});var s=a(54857),l=a(96541),r=a(16617),i=a(37622),n=a(43706),c=a(38651),d=a(16099),o=a(79089),u=a(11331),h=a(41677),p=a(11977),x=a(46159),m=a(81580),f=a(52335);let v={hover:{opacity:1,y:[0,2,0],transition:{...m.Ez,y:{...m.Ez,duration:1.1,repeat:Number.POSITIVE_INFINITY}}}},j=e=>({opacity:[0,1],y:[16,0],scaleX:1,scaleY:1,interruptible:!1,transition:{ease:[.13,.65,.14,1],duration:.25,delay:e}}),b=(0,f.G)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V13.5H8.75011V3.56062Z" fill="currentColor"/>'),y=(0,f.G)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V11H8.75011V3.56062Z" fill="currentColor"/>'),g=(0,f.G)('<path clip-rule="evenodd" d="M13.5 13.5L13.5 8.5L15 8.5L15 14C15 14.5523 14.5523 15 14 15L2 15C1.44771 15 1 14.5523 1 14L1 8.5L2.5 8.5L2.5 13.5L13.5 13.5Z" fill="currentColor" fill-rule="evenodd"/>'),C=(0,s.jsxs)(m.kd,{hideOverflow:!0,children:[(0,s.jsx)(m.Dp,{variants:{...v,idle:{opacity:0},tap:{opacity:0,y:-16,interruptible:!1,transition:{ease:[.33,.03,.94,.42],duration:.5}}},children:(0,s.jsx)(b,{})}),(0,s.jsx)(m.Dp,{variants:{...v,idle:{opacity:1},tap:j(.4)},children:(0,s.jsx)(y,{})}),(0,s.jsx)(m.Dp,{variants:{hover:{opacity:0,y:4,scaleX:0,scaleY:.5,transition:m.Ez},idle:{opacity:1,scaleX:1,scaleY:1},tap:j(.47)},children:(0,s.jsx)(g,{})})]});var w=a(90080),N=a(95791),I=a(46569),k=a(3128),S=a(71368),D=a(67605);let R=(0,D.createServerReference)("404bbb22b12eceb0f18ab682e01ed3271d9e5d3262",D.callServer,void 0,D.findSourceMapURL,"unfavoriteChat"),z=(0,D.createServerReference)("404b03b9e75b1f1307a83eeb96ed2abd5b8726226f",D.callServer,void 0,D.findSourceMapURL,"favoriteChat");var M=a(77184),L=a(41773),T=a(73927),F=a(60346),E=a(34227),O=a(43393);function P(e){let{chat:t,setChatHistoryData:a}=e,{user:r}=(0,F.J)(),{setShareDialog:i}=(0,w.B)(),{setUpdateChatTitleDialogForChatId:d}=(0,N.d)(),{setDeleteDialogForChatId:h}=(0,I.v)(),{setMobileSheetOpen:p}=(0,k.e)(),{activeScope:x}=(0,O.k6)(),m=(0,S.k)("chatActions"),f=t.authorId===(null==r?void 0:r.id),v=(0,l.useMemo)(()=>!!(x&&"membership"in x&&"OWNER"===x.membership.role),[x]),j=f||v,{copyToClipboard:b}=(0,E.C)({timeout:2e3});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n._2,{onSelect:()=>{if(p(!1),j){var e;i({chatId:t.chatId,privacy:null!==(e=t.privacy)&&void 0!==e?e:"private"})}else b(window.location.href),M.oR.success("Share link copied!")},children:[C,(0,s.jsx)("span",{children:m("share")})]}),f&&(0,s.jsxs)(n._2,{onSelect:()=>{p(!1),(0,c.u)("RenameChat",{targetChatId:t.chatId}),d(t.chatId)},children:[(0,s.jsx)(u.Y,{}),(0,s.jsx)("span",{children:m("rename")})]}),f?(0,s.jsx)(q,{chat:t,setChatHistoryData:a}):null,f&&(0,s.jsxs)(n._2,{onSelect:()=>{p(!1),h(t.chatId)},variant:"destructive",children:[(0,s.jsx)(o.l,{}),(0,s.jsx)("span",{children:m("delete")})]})]})}function U(e){let{chat:t,onOpenChange:a,open:l,className:c,side:o="bottom",setChatHistoryData:u,disabled:h,...p}=e,m=(0,x.al)();return(0,s.jsxs)(n.rI,{onOpenChange:a,open:l,children:[(0,s.jsx)(n.ty,{asChild:!0,disabled:h,children:(0,s.jsxs)(r.$,{className:(0,i.cn)("relative z-10 size-7 shrink-0 rounded-md p-0 transition-none has-[>svg]:p-0 ",c),"cmdk-item-actions":"",size:"sm",variant:"ghost",...p,children:[(0,s.jsx)(d.a,{}),(0,s.jsx)("span",{className:"sr-only",children:"Open chat actions"})]})}),(0,s.jsx)(n.SQ,{align:m?"end":"right"===o?"start":"end",side:m?"bottom":o,sideOffset:8,children:(0,s.jsx)(n.I,{children:(0,s.jsx)(P,{chat:t,side:o,setChatHistoryData:u})})})]})}function A(e){let{setChatHistoryData:t,setChatFavoritesData:a,chat:r}=e,i=(0,S.k)("chatActions"),d=(0,T.usePathname)(),o=(0,T.useRouter)(),[u,x]=(0,l.useTransition)(),[m,f]=(0,l.useOptimistic)(r.favorite);return(0,s.jsxs)(n._2,{variant:m?"gold":"default",disabled:u,onSelect:e=>{let s={error:null,success:null};f(e=>!e),x(async()=>{r.favorite?((0,c.u)("UnfavoriteChat",{targetChatId:r.chatId}),s=await R(r.chatId)):((0,c.u)("FavoriteChat",{targetChatId:r.chatId}),s=await z(r.chatId)),r.favorite?(t(e=>{let t=e.findIndex(e=>e.updatedAt&&r.updatedAt&&e.updatedAt<r.updatedAt),a={...r,authorId:"",privacy:"private",shareable:!1,favorite:!1};return t<0?[...e,a]:[...e.slice(0,t),a,...e.slice(t)]}),a(e=>e.filter(e=>e.chatId!==r.chatId))):(t(e=>e.filter(e=>e.chatId!==r.chatId)),a(e=>{let t=e.findIndex(e=>e.updatedAt&&r.updatedAt&&e.updatedAt<r.updatedAt),a={...r,authorId:"",privacy:"private",shareable:!1,favorite:!0};return t<0?[...e,a]:[...e.slice(0,t),a,...e.slice(t)]})),s.error?(f(r.favorite),M.oR.error(r.favorite?i("failedToUnfavorite"):i("failedToFavorite"))):"/chat/history"===d&&o.refresh()})},children:[m?(0,s.jsx)(p.e,{}):(0,s.jsx)(h.F,{}),(0,s.jsx)("span",{children:m?i("unfavorite"):i("favorite")})]})}function _(e){let{...t}=e,{setData:a}=(0,L.m)(),{setData:l}=(0,L.r)();return(0,s.jsx)(A,{...t,setChatHistoryData:a,setChatFavoritesData:l})}function q(e){let{...t}=e;return t.setChatHistoryData&&t.setChatFavoritesData?(0,s.jsx)(A,{...t,setChatHistoryData:t.setChatHistoryData,setChatFavoritesData:t.setChatFavoritesData}):(0,s.jsx)(_,{...t})}},51556:(e,t,a)=>{a.d(t,{E:()=>p,i:()=>x});var s=a(54857),l=a(12350),r=a(90703),i=a(12051),n=a(4473),c=a(94933),d=a(71368),o=a(44658),u=a(90080),h=a(26970);let p={private:{babyIcon:(0,s.jsx)(i.F,{size:14}),icon:(0,s.jsx)(n.C,{})},team:{babyIcon:(0,s.jsx)(r.z,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(r.z,{})},"team-edit":{babyIcon:(0,s.jsx)(r.z,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(r.z,{}),visibleInPicker:!1},unlisted:{babyIcon:(0,s.jsx)(c.N,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(c.N,{})},public:{babyIcon:(0,s.jsx)(l.q,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(l.q,{})}};function x(e){let{chatId:t,privacy:a}=e,l=(0,d.k)("chatPrivacy"),{setShareDialog:r}=(0,u.B)();return a&&t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.E,{className:"pointer-events-auto hidden gap-0 text-[11px] sm:flex",onClick:()=>r({chatId:t,privacy:a}),size:"sm",variant:"outline",children:[p[a].babyIcon,(0,s.jsx)("p",{children:l("label",a)})]}),(0,s.jsx)(h.Tooltip,{content:l("label",a),children:(0,s.jsx)("button",{className:"flex sm:hidden",onClick:()=>r({chatId:t,privacy:a}),children:p[a].icon})})]}):null}},46569:(e,t,a)=>{a.d(t,{DeleteChatDialog:()=>b,v:()=>j});var s=a(54857),l=a(16617),r=a(77184),i=a(3316),n=a(80612),c=a(96541),d=a(73927),o=a(41773),u=a(38651),h=a(12098),p=a(3128),x=a(58658),m=a(71368),f=a(19763),v=a(77170);function j(){let{data:e,mutate:t}=(0,n.Ay)("showDeleteDialogForChatId",null);return{showDeleteDialogForChatId:e,setDeleteDialogForChatId:t}}function b(){let{showDeleteDialogForChatId:e,setDeleteDialogForChatId:t}=j(),a=(0,d.useRouter)(),n=(0,x.cy)(),[b,y]=(0,c.useTransition)(),{setData:g}=(0,o.m)(),{setMobileSheetOpen:C}=(0,p.e)(),w=(0,m.k)("deleteChatDialog");return(0,s.jsxs)(i.Modal,{onOpenChange:e=>{e||t(void 0)},open:void 0!==e,children:[(0,s.jsxs)(i.ModalHeader,{children:[(0,s.jsx)(i.ModalTitle,{children:w("title")}),(0,s.jsx)(i.ModalDescription,{children:w("description")})]}),(0,s.jsxs)(i.ModalFooter,{children:[(0,s.jsx)(i.ModalClose,{asChild:!0,children:(0,s.jsx)(l.$,{size:"sm",variant:"secondary",children:w("cancel")})}),(0,s.jsx)(l.$,{disabled:b,onClick:()=>{e&&y(async()=>{try{(0,u.u)("ClickDeleteChat",{targetChatId:e}),await (0,h._)({payload:{chatId:e}}),g(t=>t.filter(t=>t.chatId!==e)),t(void 0),r.oR.success(w("successToast")),n.id===e&&(C(!1),a.push("/chat"))}catch(e){(0,v.z)(e)||r.oR.error("Something went wrong. Please try again.")}})},size:"sm",variant:"destructive",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.X,{className:"size-4"}),w("deleting")]}):w("delete")})]})]})}},90080:(e,t,a)=>{a.d(t,{B:()=>b,default:()=>g,w:()=>y});var s=a(54857),l=a(80612),r=a(16617),i=a(62841),n=a(77184),c=a(34227),d=a(90761),o=a(3316),u=a(33744),h=a(94933),p=a(67964),x=a(71368),m=a(56720),f=a(43706),v=a(43393),j=a(47747);function b(){let{data:e,mutate:t}=(0,l.Ay)("showShareDialog",null,{fallbackData:!1});return{showShareDialog:e,setShareDialog:t}}function y(e){let{isAuthor:t,...a}=e,{setShareDialog:l}=b(),{chatPrivacy:r}=(0,d.kM)(),{copyToClipboard:i}=(0,c.C)({timeout:2e3}),o=(0,x.k)("shareDialog");return"private"!==r||t?(0,s.jsxs)(f._2,{onClick:()=>{t?l(!0):("public"===r||"team"===r)&&(i(window.location.href),n.oR.success("Share link copied!"))},...a,children:[(0,s.jsx)(p.S,{}),(0,s.jsx)("span",{children:o("share")})]}):null}function g(){let e=(0,x.k)("shareDialog"),{isTeam:t}=(0,v.k6)(),{chatId:a}=(0,i.xz)(),{chatPrivacy:l}=(0,d.kM)(),{title:n}=(0,d.tZ)(),{showShareDialog:p,setShareDialog:f}=b(),{isCopied:y,copyToClipboard:g}=(0,c.C)({timeout:2e3}),{chatId:C,privacy:w}="object"==typeof p?p:{chatId:a,privacy:l};return C?(0,s.jsxs)(o.Modal,{onOpenAutoFocus:e=>{e.preventDefault();let t=document.querySelector(".privacy-picker-selected");t&&t.focus()},onOpenChange:e=>{e||f(!1)},open:!!p,children:[(0,s.jsxs)(o.ModalHeader,{children:[(0,s.jsx)(o.ModalTitle,{children:e("title")}),(0,s.jsxs)("p",{className:"text-foreground text-sm",children:[" ","Keep this chat private"," ",(0,s.jsx)("span",{children:t&&", share it with your team,"})," or make it publicly accessible."]})]}),(0,s.jsx)(o.ModalContent,{className:"p-6",children:(0,s.jsx)(m.f,{privacy:w,chatId:C,variant:"chat"})}),(0,s.jsxs)(o.ModalFooter,{className:"bg-muted border-alpha-400 border-t !p-4",children:[(0,s.jsxs)(r.$,{onClick:()=>{g("".concat(window.location.origin,"/chat/").concat((0,j.D)(C,n)))},size:"sm",variant:"secondary",children:[(0,s.jsx)(u.U,{customIcon:(0,s.jsx)(h.N,{}),isCopied:y}),e("copyLink")]}),(0,s.jsx)(o.ModalClose,{asChild:!0,children:(0,s.jsx)(r.$,{tabIndex:0,size:"sm",children:e("done")})})]})]}):null}},56720:(e,t,a)=>{a.d(t,{f:()=>g});var s=a(54857),l=a(96541),r=a(77184),i=a(62841),n=a(41773),c=a(90761),d=a(38651),o=a(90080),u=a(71368),h=a(67605);let p=(0,h.createServerReference)("403dd5ae966e28633fb56f400013305a89560a31dc",h.callServer,void 0,h.findSourceMapURL,"updateChatPrivacy");var x=a(77170),m=a(51556),f=a(43393),v=a(37622),j=a(82533),b=a(90229),y=a(85035);function g(e){let{privacy:t,variant:a,chatId:u}=e,{isTeam:h,activeScope:m}=(0,f.k6)(),[v,j]=(0,l.useTransition)(),{chatId:b}=(0,i.xz)(),{setChatPrivacy:y}=(0,c.kM)(),{revalidate:g}=(0,n.m)(),{setShareDialog:w,showShareDialog:N}=(0,o.B)(),{ownerId:I}=(0,c.tZ)(),[k,S]=(0,l.useState)(!1),D=!I||I===(null==m?void 0:m.id),R=(0,l.useCallback)(e=>{u===b&&y(e),"object"==typeof N&&w({chatId:u,privacy:e})},[u,b,N,y,w]),z=(0,l.useCallback)(e=>{!v&&u&&e!==t&&(R(e),("public"===e||"team"===e)&&(0,d.u)("ShareChat",{targetChatId:u,team:"team"===e}),j(async()=>{let s=await p({chatId:u,privacy:e});g(),"error"in s?((0,x.z)(Error(s.error))||r.oR.error("Failed to update ".concat("chat"===a?"chat":"chat and block"," privacy")),R(null!=t?t:"private")):r.oR.success("".concat("chat"===a?"Chat":"Chat and block"," privacy updated"))}))},[v,u,t,R,g,a]);return(0,s.jsx)(C,{pending:v,hideWarning:"block"===a,privacy:t,setPrivacy:z,open:k,setOpen:S,isOwnedByCurrentTeam:D,isTeam:h})}function C(e){let{pending:t,privacy:a,setPrivacy:l,open:r,setOpen:i,hideWarning:n,isOwnedByCurrentTeam:c,isTeam:d}=e,o=(0,u.k)("chatPrivacy"),h=c&&("team"===a||"team-edit"===a);return(0,s.jsxs)("div",{className:"flex w-full flex-col justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,s.jsxs)(j.l6,{disabled:t,value:a,onValueChange:l,open:r,onOpenChange:i,children:[(0,s.jsx)(j.bq,{className:"h-8 w-full rounded-md border border-gray-200 px-2 text-left",children:(0,s.jsx)(j.yv,{placeholder:"Select privacy setting",className:"flex w-full flex-row justify-between",children:a?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:m.E[a].icon}),(0,s.jsx)("span",{children:o("title",a)})]}):null})}),(0,s.jsx)(j.gC,{className:"max-w-[95vw]",children:Object.keys(m.E).map(e=>{if((!d||!c)&&("team"===e||"team-edit"===e))return null;let l=m.E[e];return!1===l.visibleInPicker?null:(0,s.jsx)(j.eb,{value:e,className:(0,v.cn)("flex cursor-pointer items-center justify-between p-3 hover:bg-gray-100",a===e&&"bg-gray-100"),onSelect:e=>e.preventDefault(),iconOnRight:!0,icon:t?(0,s.jsx)(b.y,{}):void 0,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-gray-500",children:l.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:o("title",e)}),(0,s.jsx)("p",{className:"line-clamp-1 text-sm text-gray-500",children:o("description",e)})]})]})},e)})})]}),h&&(0,s.jsxs)(j.l6,{disabled:t,value:a,onValueChange:l,children:[(0,s.jsx)(j.bq,{className:"h-8 min-w-28 max-w-28 rounded-lg border border-gray-200 px-2 text-left text-sm",children:(0,s.jsx)(j.yv,{placeholder:"Select privacy setting",children:(0,s.jsx)("span",{children:o("teamSecondaryOptions",a)})})}),(0,s.jsx)(j.gC,{className:"w-[350px] rounded-lg border border-gray-200 shadow-lg",children:["team","team-edit"].map(e=>(0,s.jsx)(j.eb,{value:e,className:(0,v.cn)("flex cursor-pointer items-center justify-between p-3 hover:bg-gray-100",a===e&&"bg-gray-100"),iconOnRight:!0,icon:t?(0,s.jsx)(b.y,{}):void 0,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-gray-500",children:m.E[e].icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:o("teamSecondaryOptions",e)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:o("teamSecondaryDescription",e)})]})]})},e))})]})]}),"public"!==a||n?null:(0,s.jsx)(y.$,{})]})}},85035:(e,t,a)=>{a.d(t,{$:()=>i});var s=a(54857),l=a(45881),r=a(69057);function i(){return(0,s.jsxs)(l.Fc,{variant:"default",className:"relative flex flex-row gap-1 rounded-md border-none bg-gray-100 px-2 py-1.5",children:[(0,s.jsx)("div",{className:"absolute left-[9px] top-[9px] text-gray-500",children:(0,s.jsx)(r.$,{className:"h-4 w-4"})}),(0,s.jsx)(l.TN,{className:"ml-6 text-gray-800",children:"Viewers will have access to all code in this chat, including API keys and credentials."})]})}},3128:(e,t,a)=>{a.d(t,{ChatSidebarProvider:()=>o,e:()=>u});var s=a(54857),l=a(96541),r=a(46569),i=a(90080),n=a(30856);let c=function(){let e=localStorage.getItem("sidebar");return document.documentElement.dataset.state="collapsed"===e?"collapsed":"expanded","collapsed"===e?"collapsed":"expanded"},d=(0,l.createContext)({isCollapsed:!1,setCollapsed:()=>{},mobileSheetOpen:!1,setMobileSheetOpen:()=>{},actionChatId:null});function o(e){let{children:t}=e,{ns:a}=(0,n.D)(),[o,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(null),x=(0,l.useCallback)(e=>{p(e),localStorage.setItem("sidebar",e?"collapsed":"expanded"),document.documentElement.dataset.state=e?"collapsed":"expanded"},[]);(0,l.useEffect)(()=>{null===h&&x("collapsed"===localStorage.getItem("sidebar"))},[]);let m=(0,l.useCallback)(e=>{"sidebar"===e.key&&x("collapsed"===c())},[x]);(0,l.useEffect)(()=>(window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)));let{showDeleteDialogForChatId:f}=(0,r.v)(),{showShareDialog:v}=(0,i.B)();return(0,s.jsx)(d.Provider,{value:{isCollapsed:!a&&null!=h&&h,setCollapsed:a?()=>{}:x,mobileSheetOpen:o,setMobileSheetOpen:u,actionChatId:f||("object"==typeof v?v.chatId:null)},children:t})}let u=()=>(0,l.useContext)(d)},19763:(e,t,a)=>{a.d(t,{X:()=>r});var s=a(54857),l=a(37622);function r(e){let{className:t,...a}=e;return(0,s.jsx)("svg",{className:(0,l.cn)("h-4 w-4 animate-spin",t),fill:"currentColor",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...a,children:(0,s.jsx)("path",{d:"M232 128a104 104 0 0 1-208 0c0-41 23.81-78.36 60.66-95.27a8 8 0 0 1 6.68 14.54C60.15 61.59 40 93.27 40 128a88 88 0 0 0 176 0c0-34.73-20.15-66.41-51.34-80.73a8 8 0 0 1 6.68-14.54C208.19 49.64 232 87 232 128Z"})})}},82533:(e,t,a)=>{a.d(t,{bq:()=>p,eb:()=>v,gC:()=>f,l6:()=>o,s3:()=>u,yv:()=>h});var s=a(54857),l=a(96541),r=a(54148),i=a(37622),n=a(6911),c=a(80798),d=a(2259);let o=r.bL,u=r.YJ,h=r.WT,p=l.forwardRef((e,t)=>{let{className:a,children:l,chevron:c,...d}=e;return(0,s.jsxs)(r.l9,{className:(0,i.cn)("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-blue-600 flex h-10 w-full items-center justify-between rounded-md border px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),ref:t,...d,children:[l,(0,s.jsx)(r.In,{asChild:!0,children:null!=c?c:(0,s.jsx)(n.y,{className:"size-4 translate-y-[0.5px] text-gray-500 [&_path]:fill-gray-500"})})]})});p.displayName=r.l9.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.PP,{className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),ref:t,...l,children:(0,s.jsx)(c.r,{className:"h-4 w-4"})})});x.displayName=r.PP.displayName;let m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.wn,{className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),ref:t,...l,children:(0,s.jsx)(n.y,{className:"h-4 w-4"})})});m.displayName=r.wn.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,position:n="popper",...c}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,ref:t,...c,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(m,{})]})})});f.displayName=r.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.JU,{className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),ref:t,...l})}).displayName=r.JU.displayName;let v=l.forwardRef((e,t)=>{let{className:a,children:l,icon:n,iconOnRight:c,...o}=e;return(0,s.jsxs)(r.q7,{className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),ref:t,...o,children:[(0,s.jsx)("span",{className:(0,i.cn)("absolute flex h-3.5 w-3.5 items-center justify-center",c?"right-2":"left-2"),children:(0,s.jsx)(r.VF,{children:n||(0,s.jsx)(d.J,{className:"h-3 w-3"})})}),(0,s.jsx)(r.p4,{children:l})]})});v.displayName=r.q7.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e;return(0,s.jsxs)(r.q7,{ref:t,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(d.J,{className:"h-4 w-4"})})}),(0,s.jsx)(r.p4,{children:l})]})}).displayName=r.q7.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.wv,{className:(0,i.cn)("bg-muted -mx-1 my-1 h-px",a),ref:t,...l})}).displayName=r.wv.displayName},95791:(e,t,a)=>{a.d(t,{UpdateChatTitleDialog:()=>k,d:()=>I});var s=a(54857),l=a(96541),r=a(16617),i=a(3316),n=a(67605);let c=(0,n.createServerReference)("40a69a453a24df41a4bd0ef6a15914bbef0d36c857",n.callServer,void 0,n.findSourceMapURL,"updateChatTitle");var d=a(90761),o=a(73927),u=a(77184),h=a(86287),p=a(80612),x=a(19763),m=a(3128),f=a(41773),v=a(77170),j=a(24048),b=a(61702),y=a(68952),g=a(71368),C=a(58658),w=a(46159);let N=b.z.object({title:b.z.string().min(1,"Title is required").max(100,"Title must be less than 100 characters")});function I(){let{data:e,mutate:t}=(0,p.Ay)("showUpdateChatTitleDialogForChatId",null);return{showUpdateChatTitleDialogForChatId:e,setUpdateChatTitleDialogForChatId:t}}function k(){let{showUpdateChatTitleDialogForChatId:e,setUpdateChatTitleDialogForChatId:t}=I(),a=(0,o.useRouter)(),[n,p]=(0,l.useTransition)(),{title:b,setMetadata:k}=(0,d.tZ)(),[S,D]=(0,l.useState)(""),R=(0,C.cy)(),{setMobileSheetOpen:z}=(0,m.e)(),{data:M,setData:L}=(0,f.m)(),{data:T,setData:F}=(0,f.r)(),[E,O]=(0,l.useState)(""),P=R.id,U=l.useRef(null),A=(0,g.k)("updateChatTitleDialog"),_=(0,w.al)();(0,l.useEffect)(()=>{t(null)},[t]),(0,l.useEffect)(()=>{if(e){let t=null==M?void 0:M.find(t=>t.chatId===e);O((null==t?void 0:t.title)||b||""),D((null==t?void 0:t.title)||b||"")}},[e,M,b]),(0,l.useEffect)(()=>{e&&setTimeout(()=>{var e,t;null===(e=U.current)||void 0===e||e.focus(),_||null===(t=U.current)||void 0===t||t.select()},0)},[e,_]);let q=(0,l.useCallback)(()=>{e&&p(async()=>{try{let a=null==T?void 0:T.find(t=>t.chatId===e),s=await c({chatId:e,title:S.trim()||"Untitled"});if("success"in s)a&&F(t=>t.map(t=>t.chatId===e?{...t,title:S.trim()||"Untitled"}:t)),(null==M?void 0:M.find(t=>t.chatId===e))&&L(t=>t.map(t=>t.chatId===e?{...t,title:S.trim()||"Untitled"}:t)),P===e&&k({title:S.trim()||"Untitled"}),u.oR.success(A("successToast")),P!==e&&P||z(!1),t(null);else throw Error(j.YK)}catch(e){(0,v.z)(e,a)||u.oR.error("Failed to update chat title. Please try again."),F(()=>T||[]),L(()=>M||[])}})},[e,S,P,a,A,t,k,z]),H=(0,l.useCallback)(()=>{t(null)},[t]),$=(0,l.useCallback)(e=>{e.preventDefault();let t=N.safeParse({title:S});if(!t.success){var a;let e=t.error.flatten().fieldErrors;u.oR.error((null===(a=e.title)||void 0===a?void 0:a[0])||"Invalid title");return}q()},[q,S]);return(0,s.jsx)(i.Modal,{onOpenChange:e=>{e||t(null)},open:null!==e,children:(0,s.jsxs)("form",{onSubmit:$,children:[(0,s.jsxs)(i.ModalHeader,{children:[(0,s.jsx)(i.ModalTitle,{children:A("title")}),(0,s.jsxs)(i.ModalDescription,{children:[(0,s.jsx)("label",{className:"sr-only",htmlFor:"newChatTitle",children:A("newChatTitle")}),(0,s.jsx)(h.p,{"aria-label":A("newChatTitle"),autoComplete:"off",autoFocus:!0,className:"w-full",id:"newChatTitle",maxLength:100,onChange:e=>D(e.target.value),placeholder:E||A("enterNewTitle"),ref:U,value:S}),(0,s.jsx)(y.j,{className:"mt-2",count:S.length,max:100,message:"Title must be less than ".concat(100," characters")})]})]}),(0,s.jsxs)(i.ModalFooter,{children:[(0,s.jsx)(r.$,{onClick:H,size:"sm",type:"button",variant:"secondary",children:A("cancel")}),(0,s.jsx)(r.$,{disabled:n,size:"sm",type:"submit",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.X,{"aria-hidden":"true",className:"size-4"}),(0,s.jsx)("span",{children:A("saving")})]}):A("save")})]})]})})}},47747:(e,t,a)=>{a.d(t,{D:()=>r});var s=a(47303),l=a.n(s);function r(e,t){return t?"".concat(l()(t.slice(0,50)),"-").concat(e):e}},12098:(e,t,a)=>{a.d(t,{_:()=>l});var s=a(67605);let l=(0,s.createServerReference)("40798155bf396dc4b03cadb578f5e507d07747f693",s.callServer,void 0,s.findSourceMapURL,"deleteChat")}}]);